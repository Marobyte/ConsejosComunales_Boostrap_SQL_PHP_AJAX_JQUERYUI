!function(e){"use strict";function t(e){return{configurable:!0,enumerable:!1,value:e,writable:!0}}function n(){return"__$"+Math.floor(1e9*Math.random())+"$"+ ++V+"$__"}function r(e){return K[e]}function i(){var e=n();return K[e]=!0,e}function o(e){return"object"==typeof e&&e instanceof c}function a(e){return o(e)?"symbol":typeof e}function s(e){var t=new c(e);if(!(this instanceof s))return t;throw new TypeError("Symbol cannot be new'ed")}function c(e){var t=n();R(this,W,{value:this}),R(this,z,{value:t}),R(this,G,{value:e}),l(this),Y[t]=this}function u(e){var t=e[J];return t&&t.self===e?t:U(e)?(Z.hash.value=Q++,Z.self.value=e,X.value=M(null,Z),R(e,J,X),X.value):void 0}function l(e){return u(e),O.apply(this,arguments)}function d(e){return u(e),H.apply(this,arguments)}function f(e){return u(e),F.apply(this,arguments)}function p(e){return Y[e]||K[e]}function m(e){return o(e)?e[z]:e}function h(e){for(var t=[],n=0;n<e.length;n++)p(e[n])||t.push(e[n]);return t}function g(e){return h(j(e))}function v(e){return h(B(e))}function y(e){for(var t=[],n=j(e),r=0;r<n.length;r++){var i=Y[n[r]];i&&t.push(i)}return t}function $(e,t){return L(e,m(t))}function b(e){return N.call(this,m(e))}function C(t){return e.traceur&&e.traceur.options[t]}function w(e,t,n){return o(t)&&(t=t[z]),R(e,t,n),e}function S(e){R(e,"defineProperty",{value:w}),R(e,"getOwnPropertyNames",{value:g}),R(e,"getOwnPropertyDescriptor",{value:$}),R(e.prototype,"hasOwnProperty",{value:b}),R(e,"freeze",{value:l}),R(e,"preventExtensions",{value:d}),R(e,"seal",{value:f}),R(e,"keys",{value:v})}function E(e){for(var t=1;t<arguments.length;t++)for(var n=j(arguments[t]),r=0;r<n.length;r++){var i=n[r];p(i)||!function(t,n){R(e,n,{get:function(){return t[n]},enumerable:!0})}(arguments[t],n[r])}return e}function I(e){return null!=e&&("object"==typeof e||"function"==typeof e)}function P(e){if(null==e)throw D();return A(e)}function T(e){if(null==e)throw new TypeError("Value cannot be converted to an Object");return e}function x(e,t){e.Symbol||(e.Symbol=t,Object.getOwnPropertySymbols=y),e.Symbol.iterator||(e.Symbol.iterator=t("Symbol.iterator"))}function k(e){x(e,s),e.Reflect=e.Reflect||{},e.Reflect.global=e.Reflect.global||e,S(e.Object)}if(!e.$traceurRuntime){var A=Object,D=TypeError,M=A.create,_=A.defineProperties,R=A.defineProperty,O=A.freeze,L=A.getOwnPropertyDescriptor,j=A.getOwnPropertyNames,B=A.keys,N=A.prototype.hasOwnProperty,H=(A.prototype.toString,Object.preventExtensions),F=Object.seal,U=Object.isExtensible,q=t,V=0,z=n(),G=n(),W=n(),Y=M(null),K=M(null);R(s.prototype,"constructor",t(s)),R(s.prototype,"toString",q(function(){var e=this[W];if(!C("symbols"))return e[z];if(!e)throw TypeError("Conversion from symbol to string");var t=e[G];return void 0===t&&(t=""),"Symbol("+t+")"})),R(s.prototype,"valueOf",q(function(){var e=this[W];if(!e)throw TypeError("Conversion from symbol to string");return C("symbols")?e:e[z]})),R(c.prototype,"constructor",t(s)),R(c.prototype,"toString",{value:s.prototype.toString,enumerable:!1}),R(c.prototype,"valueOf",{value:s.prototype.valueOf,enumerable:!1});var J=i(),X={value:void 0},Z={hash:{value:void 0},self:{value:void 0}},Q=0;l(c.prototype),k(e),e.$traceurRuntime={checkObjectCoercible:T,createPrivateName:i,defineProperties:_,defineProperty:R,exportStar:E,getOwnHashObject:u,getOwnPropertyDescriptor:L,getOwnPropertyNames:j,isObject:I,isPrivateName:r,isSymbolString:p,keys:B,setupGlobals:k,toObject:P,toProperty:m,"typeof":a}}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),function(){"use strict";function e(e,n){function r(e){return"/"===e.slice(-1)}function i(e){return"/"===e[0]}function o(e){return"."===e[0]}return t=t||"undefined"!=typeof require&&require("path"),r(n)||i(n)?void 0:o(n)?require(t.resolve(t.dirname(e),n)):require(n)}var t;$traceurRuntime.require=e}(),function(){"use strict";function e(){for(var e,t=[],n=0,r=0;r<arguments.length;r++){var i=$traceurRuntime.checkObjectCoercible(arguments[r]);if("function"!=typeof i[$traceurRuntime.toProperty(Symbol.iterator)])throw new TypeError("Cannot spread non-iterable object.");for(var o=i[$traceurRuntime.toProperty(Symbol.iterator)]();!(e=o.next()).done;)t[n++]=e.value}return t}$traceurRuntime.spread=e}(),function(){"use strict";function e(e,t){var n=h(e);do{var r=m(n,t);if(r)return r;n=h(n)}while(n)}function t(e){return e.__proto__}function n(e,t,n,i){return r(e,t,n).apply(e,i)}function r(t,n,r){var i=e(n,r);return i?i.get?i.get.call(t):i.value:void 0}function i(t,n,r,i){var o=e(n,r);if(o&&o.set)return o.set.call(t,i),i;throw l("super has no setter '"+r+"'.")}function o(e){for(var t={},n=v(e),r=0;r<n.length;r++){var i=n[r];t[i]=m(e,i)}for(var o=y(e),r=0;r<o.length;r++){var a=o[r];t[$traceurRuntime.toProperty(a)]=m(e,$traceurRuntime.toProperty(a))}return t}function a(e,t,n,r){return p(t,"constructor",{value:e,configurable:!0,enumerable:!1,writable:!0}),arguments.length>3?("function"==typeof r&&(e.__proto__=r),e.prototype=d(s(r),o(t))):e.prototype=t,p(e,"prototype",{configurable:!1,writable:!1}),f(e,o(n))}function s(e){if("function"==typeof e){var t=e.prototype;if(u(t)===t||null===t)return e.prototype;throw new l("super prototype must be an Object or null")}if(null===e)return null;throw new l("Super expression must either be null or a function, not "+typeof e+".")}function c(e,t,r){null!==h(t)&&n(e,t,"constructor",r)}var u=Object,l=TypeError,d=u.create,f=$traceurRuntime.defineProperties,p=$traceurRuntime.defineProperty,m=$traceurRuntime.getOwnPropertyDescriptor,h=($traceurRuntime.getOwnPropertyNames,Object.getPrototypeOf),g=Object,v=g.getOwnPropertyNames,y=g.getOwnPropertySymbols;$traceurRuntime.createClass=a,$traceurRuntime.defaultSuperCall=c,$traceurRuntime.superCall=n,$traceurRuntime.superConstructor=t,$traceurRuntime.superGet=r,$traceurRuntime.superSet=i}(),function(){"use strict";function e(e){return{configurable:!0,enumerable:!1,value:e,writable:!0}}function t(e){return new Error("Traceur compiler bug: invalid state in state machine: "+e)}function n(){this.state=0,this.GState=v,this.storedException=void 0,this.finallyFallThrough=void 0,this.sent_=void 0,this.returnValue=void 0,this.tryStack_=[]}function r(e,t,n,r){switch(e.GState){case y:throw new Error('"'+n+'" on executing generator');case b:if("next"==n)return{value:void 0,done:!0};throw r;case v:if("throw"===n)throw e.GState=b,r;if(void 0!==r)throw g("Sent value to newborn generator");case $:e.GState=y,e.action=n,e.sent=r;var i=t(e),o=i===e;return o&&(i=e.returnValue),e.GState=o?b:$,{value:i,done:o}}}function i(){}function o(){}function a(e,t,r){var i=l(e,r),o=new n,a=h(t.prototype);return a[S]=o,a[E]=i,a}function s(e){return e.prototype=h(o.prototype),e.__proto__=o,e}function c(){n.call(this),this.err=void 0;var e=this;e.result=new Promise(function(t,n){e.resolve=t,e.reject=n})}function u(e,t){var n=l(e,t),r=new c;return r.createCallback=function(e){return function(t){r.state=e,r.value=t,n(r)}},r.errback=function(e){d(r,e),n(r)},n(r),r.result}function l(e,t){return function(n){for(;;)try{return e.call(t,n)}catch(r){d(n,r)}}}function d(e,t){e.storedException=t;var n=e.tryStack_[e.tryStack_.length-1];return n?(e.state=void 0!==n["catch"]?n["catch"]:n["finally"],void(void 0!==n.finallyFallThrough&&(e.finallyFallThrough=n.finallyFallThrough))):void e.handleException(t)}if("object"!=typeof $traceurRuntime)throw new Error("traceur runtime not found.");var f=$traceurRuntime.createPrivateName,p=$traceurRuntime.defineProperties,m=$traceurRuntime.defineProperty,h=Object.create,g=TypeError,v=0,y=1,$=2,b=3,C=-2,w=-3;n.prototype={pushTry:function(e,t){if(null!==t){for(var n=null,r=this.tryStack_.length-1;r>=0;r--)if(void 0!==this.tryStack_[r]["catch"]){n=this.tryStack_[r]["catch"];break}null===n&&(n=w),this.tryStack_.push({"finally":t,finallyFallThrough:n})}null!==e&&this.tryStack_.push({"catch":e})},popTry:function(){this.tryStack_.pop()},get sent(){return this.maybeThrow(),this.sent_},set sent(e){this.sent_=e},get sentIgnoreThrow(){return this.sent_},maybeThrow:function(){if("throw"===this.action)throw this.action="next",this.sent_},end:function(){switch(this.state){case C:return this;case w:throw this.storedException;default:throw t(this.state)}},handleException:function(e){throw this.GState=b,this.state=C,e}};var S=f(),E=f();i.prototype=o,m(o,"constructor",e(i)),o.prototype={constructor:o,next:function(e){return r(this[S],this[E],"next",e)},"throw":function(e){return r(this[S],this[E],"throw",e)}},p(o.prototype,{constructor:{enumerable:!1},next:{enumerable:!1},"throw":{enumerable:!1}}),Object.defineProperty(o.prototype,Symbol.iterator,e(function(){return this})),c.prototype=h(n.prototype),c.prototype.end=function(){switch(this.state){case C:this.resolve(this.returnValue);break;case w:this.reject(this.storedException);break;default:this.reject(t(this.state))}},c.prototype.handleException=function(){this.state=w},$traceurRuntime.asyncWrap=u,$traceurRuntime.initGeneratorFunction=s,$traceurRuntime.createGeneratorInstance=a}(),function(){function e(e,t,n,r,i,o,a){var s=[];return e&&s.push(e,":"),n&&(s.push("//"),t&&s.push(t,"@"),s.push(n),r&&s.push(":",r)),i&&s.push(i),o&&s.push("?",o),a&&s.push("#",a),s.join("")}function t(e){return e.match(s)}function n(e){if("/"===e)return"/";for(var t="/"===e[0]?"/":"",n="/"===e.slice(-1)?"/":"",r=e.split("/"),i=[],o=0,a=0;a<r.length;a++){var s=r[a];switch(s){case"":case".":break;case"..":i.length?i.pop():o++;break;default:i.push(s)}}if(!t){for(;o-- >0;)i.unshift("..");0===i.length&&i.push(".")}return t+i.join("/")+n}function r(t){var r=t[c.PATH]||"";return r=n(r),t[c.PATH]=r,e(t[c.SCHEME],t[c.USER_INFO],t[c.DOMAIN],t[c.PORT],t[c.PATH],t[c.QUERY_DATA],t[c.FRAGMENT])}function i(e){var n=t(e);return r(n)}function o(e,n){var i=t(n),o=t(e);if(i[c.SCHEME])return r(i);i[c.SCHEME]=o[c.SCHEME];for(var a=c.SCHEME;a<=c.PORT;a++)i[a]||(i[a]=o[a]);if("/"==i[c.PATH][0])return r(i);var s=o[c.PATH],u=s.lastIndexOf("/");return s=s.slice(0,u+1)+i[c.PATH],i[c.PATH]=s,r(i)}function a(e){if(!e)return!1;if("/"===e[0])return!0;var n=t(e);return n[c.SCHEME]?!0:!1}var s=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),c={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};$traceurRuntime.canonicalizeUrl=i,$traceurRuntime.isAbsolute=a,$traceurRuntime.removeDotSegments=n,$traceurRuntime.resolveUrl=o}(),function(){"use strict";function e(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=r,a=$traceurRuntime.getOwnHashObject(e).hash;o[a]||(o[a]=Object.create(null)),o=o[a];for(var s=0;s<t.length-1;s++)a=$traceurRuntime.getOwnHashObject(t[s]).hash,o[a]||(o[a]=Object.create(null)),o=o[a];var c=t[t.length-1];return a=$traceurRuntime.getOwnHashObject(c).hash,o[a]||(o[a]=new n(e,t)),o[a]}var t={any:{name:"any"},"boolean":{name:"boolean"},number:{name:"number"},string:{name:"string"},symbol:{name:"symbol"},"void":{name:"void"}},n=function(e,t){this.type=e,this.argumentTypes=t};$traceurRuntime.createClass(n,{},{});var r=Object.create(null);$traceurRuntime.GenericType=n,$traceurRuntime.genericType=e,$traceurRuntime.type=t}(),function(e){"use strict";function t(e,t){var n=[],r=t-3;0>r&&(r=0);for(var i=r;t>i;i++)n.push(e[i]);return n}function n(e,t){var n=t+1;n>e.length-1&&(n=e.length-1);for(var r=[],i=t;n>=i;i++)r.push(e[i]);return r}function r(e){for(var t="",n=0;e-1>n;n++)t+="-";return t}function i(e){if(e){var t=$.normalize(e);return d[t]}}function o(e){var t=arguments[1],n=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){var i,o;if(t===y){var a=Object.getOwnPropertyDescriptor(e,r);a.get&&(i=a.get)}i||(o=e[r],i=function(){return o}),Object.defineProperty(n,r,{get:i,enumerable:!0})}),Object.preventExtensions(n),n}var a,s=$traceurRuntime,c=s.canonicalizeUrl,u=s.resolveUrl,l=s.isAbsolute,d=Object.create(null);a=e.location&&e.location.href?u(e.location.href,"./"):"";var f=function(e,t){this.url=e,this.value_=t};$traceurRuntime.createClass(f,{},{});var p=function(e,t){this.message=this.constructor.name+": "+this.stripCause(t)+" in "+e,t instanceof m||!t.stack?this.stack="":this.stack=this.stripStack(t.stack)},m=p;$traceurRuntime.createClass(p,{stripError:function(e){return e.replace(/.*Error:/,this.constructor.name+":")},stripCause:function(e){return e?e.message?this.stripError(e.message):e+"":""},loadedBy:function(e){this.stack+="\n loaded by "+e},stripStack:function(e){var t=[];return e.split("\n").some(function(e){return/UncoatedModuleInstantiator/.test(e)?!0:void t.push(e)}),t[0]=this.stripError(t[0]),t.join("\n")}},{},Error);var h=function(e,t){$traceurRuntime.superConstructor(g).call(this,e,null),this.func=t},g=h;$traceurRuntime.createClass(h,{getUncoatedModule:function(){if(this.value_)return this.value_;try{var i;return void 0!==typeof $traceurRuntime&&(i=$traceurRuntime.require.bind(null,this.url)),this.value_=this.func.call(e,i)}catch(o){if(o instanceof p)throw o.loadedBy(this.url),o;if(o.stack){var a=this.func.toString().split("\n"),s=[];o.stack.split("\n").some(function(e){if(e.indexOf("UncoatedModuleInstantiator.getUncoatedModule")>0)return!0;var i=/(at\s[^\s]*\s).*>:(\d*):(\d*)\)/.exec(e);if(i){var o=parseInt(i[2],10);s=s.concat(t(a,o)),s.push(r(i[3])+"^"),s=s.concat(n(a,o)),s.push("= = = = = = = = =")}else s.push(e)}),o.stack=s.join("\n")}throw new p(this.url,o)}}},{},f);var v=Object.create(null),y={},$={normalize:function(e,t,n){if("string"!=typeof e)throw new TypeError("module name must be a string, not "+typeof e);if(l(e))return c(e);if(/[^\.]\/\.\.\//.test(e))throw new Error("module name embeds /../: "+e);return"."===e[0]&&t?u(t,e):c(e)},get:function(e){var t=i(e);if(t){var n=v[t.url];return n?n:(n=o(t.getUncoatedModule(),y),v[t.url]=n)}},set:function(e,t){e=String(e),d[e]=new h(e,function(){return t}),v[e]=t},get baseURL(){return a},set baseURL(e){a=String(e)},registerModule:function(e,t,n){var r=$.normalize(e);if(d[r])throw new Error("duplicate module named "+r);d[r]=new h(r,n)},bundleStore:Object.create(null),register:function(e,t,n){t&&(t.length||n.length)?this.bundleStore[e]={deps:t,execute:function(){var e=arguments,r={};t.forEach(function(t,n){return r[t]=e[n]});var i=n.call(this,r);return i.execute.call(this),i.exports}}:this.registerModule(e,t,n)},getAnonymousModule:function(t){return new o(t.call(e),y)},getForTesting:function(e){var t=this;return this.testingPrefix_||Object.keys(v).some(function(e){var n=/(traceur@[^\/]*\/)/.exec(e);return n?(t.testingPrefix_=n[1],!0):void 0}),this.get(this.testingPrefix_+e)}},b=new o({ModuleStore:$});$.set("@traceur/src/runtime/ModuleStore",b),$.set("@traceur/src/runtime/ModuleStore.js",b);var C=$traceurRuntime.setupGlobals;$traceurRuntime.setupGlobals=function(e){C(e)},$traceurRuntime.ModuleStore=$,e.System={register:$.register.bind($),registerModule:$.registerModule.bind($),get:$.get,set:$.set,normalize:$.normalize},$traceurRuntime.getModuleImpl=function(e){var t=i(e);return t&&t.getUncoatedModule()}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js",[],function(){"use strict";function e(e){return e>>>0}function t(e){return e&&("object"==typeof e||"function"==typeof e)}function n(e){return"function"==typeof e}function r(e){return"number"==typeof e}function i(e){return e=+e,b(e)?0:0!==e&&$(e)?e>0?y(e):v(e):e}function o(e){var t=i(e);return 0>t?0:w(t,E)}function a(e){return t(e)?e[Symbol.iterator]:void 0}function s(e){return n(e)}function c(e,t){return{value:e,done:t}}function u(e,t,n){t in e||Object.defineProperty(e,t,n)}function l(e,t,n){u(e,t,{value:n,configurable:!0,enumerable:!1,writable:!0})}function d(e,t,n){u(e,t,{value:n,configurable:!1,enumerable:!1,writable:!1})}function f(e,t){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];l(e,r,i)}}function p(e,t){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];d(e,r,i)}}function m(e,t,n){n&&n.iterator&&!e[n.iterator]&&(e["@@iterator"]&&(t=e["@@iterator"]),Object.defineProperty(e,n.iterator,{value:t,configurable:!0,enumerable:!1,writable:!0}))}function h(e){I.push(e)}function g(e){I.forEach(function(t){return t(e)})}var v=Math.ceil,y=Math.floor,$=isFinite,b=isNaN,C=Math.pow,w=Math.min,S=$traceurRuntime.toObject,E=C(2,53)-1,I=[];return{get toObject(){return S},get toUint32(){return e},get isObject(){return t},get isCallable(){return n},get isNumber(){return r},get toInteger(){return i},get toLength(){return o},get checkIterable(){return a},get isConstructor(){return s},get createIteratorResultObject(){return c},get maybeDefine(){return u},get maybeDefineMethod(){return l},get maybeDefineConst(){return d},get maybeAddFunctions(){return f},get maybeAddConsts(){return p},get maybeAddIterator(){return m},get registerPolyfill(){return h},get polyfillAll(){return g}}}),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/Map.js",[],function(){"use strict";function e(e,t){if(i(t)){var n=s(t);return n&&e.objectIndex_[n.hash]}return"string"==typeof t?e.stringIndex_[t]:e.primitiveIndex_[t]}function t(e){e.entries_=[],e.objectIndex_=Object.create(null),e.stringIndex_=Object.create(null),e.primitiveIndex_=Object.create(null),e.deletedCount_=0}function n(e){var t=e,n=t.Object,r=t.Symbol;e.Map||(e.Map=l);var i=e.Map.prototype;void 0===i.entries&&(e.Map=l),i.entries&&(o(i,i.entries,r),o(n.getPrototypeOf((new e.Map).entries()),function(){return this},r))}var r=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js"),i=r.isObject,o=r.maybeAddIterator,a=r.registerPolyfill,s=$traceurRuntime.getOwnHashObject,c=Object.prototype.hasOwnProperty,u={},l=function(){var e=arguments[0];if(!i(this))throw new TypeError("Map called on incompatible type");if(c.call(this,"entries_"))throw new TypeError("Map can not be reentrantly initialised");if(t(this),null!==e&&void 0!==e)for(var n,r=e[$traceurRuntime.toProperty(Symbol.iterator)]();!(n=r.next()).done;){var o=n.value,a=o[0],s=o[1];this.set(a,s)}};return $traceurRuntime.createClass(l,{get size(){return this.entries_.length/2-this.deletedCount_},get:function(t){var n=e(this,t);return void 0!==n?this.entries_[n+1]:void 0},set:function(t,n){var r=i(t),o="string"==typeof t,a=e(this,t);if(void 0!==a)this.entries_[a+1]=n;else if(a=this.entries_.length,this.entries_[a]=t,this.entries_[a+1]=n,r){var c=s(t),u=c.hash;this.objectIndex_[u]=a}else o?this.stringIndex_[t]=a:this.primitiveIndex_[t]=a;return this},has:function(t){return void 0!==e(this,t)},"delete":function(e){var t,n,r=i(e),o="string"==typeof e;if(r){var a=s(e);a&&(t=this.objectIndex_[n=a.hash],delete this.objectIndex_[n])}else o?(t=this.stringIndex_[e],delete this.stringIndex_[e]):(t=this.primitiveIndex_[e],delete this.primitiveIndex_[e]);return void 0!==t?(this.entries_[t]=u,this.entries_[t+1]=void 0,this.deletedCount_++,!0):!1},clear:function(){t(this)},forEach:function(e){for(var t=arguments[1],n=0;n<this.entries_.length;n+=2){var r=this.entries_[n],i=this.entries_[n+1];r!==u&&e.call(t,i,r,this)}},entries:$traceurRuntime.initGeneratorFunction(function d(){var e,t,n;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:e=0,r.state=12;break;case 12:r.state=e<this.entries_.length?8:-2;break;case 4:e+=2,r.state=12;break;case 8:t=this.entries_[e],n=this.entries_[e+1],r.state=9;break;case 9:r.state=t===u?4:6;break;case 6:return r.state=2,[t,n];case 2:r.maybeThrow(),r.state=4;break;default:return r.end()}},d,this)}),keys:$traceurRuntime.initGeneratorFunction(function f(){var e,t,n;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:e=0,r.state=12;break;case 12:r.state=e<this.entries_.length?8:-2;break;case 4:e+=2,r.state=12;break;case 8:t=this.entries_[e],n=this.entries_[e+1],r.state=9;break;case 9:r.state=t===u?4:6;break;case 6:return r.state=2,t;case 2:r.maybeThrow(),r.state=4;break;default:return r.end()}},f,this)}),values:$traceurRuntime.initGeneratorFunction(function p(){var e,t,n;return $traceurRuntime.createGeneratorInstance(function(r){for(;;)switch(r.state){case 0:e=0,r.state=12;break;case 12:r.state=e<this.entries_.length?8:-2;break;case 4:e+=2,r.state=12;break;case 8:t=this.entries_[e],n=this.entries_[e+1],r.state=9;break;case 9:r.state=t===u?4:6;break;case 6:return r.state=2,n;case 2:r.maybeThrow(),r.state=4;break;default:return r.end()}},p,this)})},{}),Object.defineProperty(l.prototype,Symbol.iterator,{configurable:!0,writable:!0,value:l.prototype.entries}),a(n),{get Map(){return l},get polyfillMap(){return n}}}),System.get("traceur-runtime@0.0.79/src/runtime/polyfills/Map.js"),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/Set.js",[],function(){"use strict";function e(e){e.map_=new a}function t(e){var t=e,n=t.Object,r=t.Symbol;e.Set||(e.Set=c);var o=e.Set.prototype;o.values&&(i(o,o.values,r),i(n.getPrototypeOf((new e.Set).values()),function(){return this},r))}var n=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js"),r=n.isObject,i=n.maybeAddIterator,o=n.registerPolyfill,a=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/Map.js").Map,s=($traceurRuntime.getOwnHashObject,Object.prototype.hasOwnProperty),c=function(){var t=arguments[0];if(!r(this))throw new TypeError("Set called on incompatible type");if(s.call(this,"map_"))throw new TypeError("Set can not be reentrantly initialised");if(e(this),null!==t&&void 0!==t)for(var n,i=t[$traceurRuntime.toProperty(Symbol.iterator)]();!(n=i.next()).done;){var o=n.value;this.add(o)}};return $traceurRuntime.createClass(c,{get size(){return this.map_.size},has:function(e){return this.map_.has(e)},add:function(e){return this.map_.set(e,e),this},"delete":function(e){return this.map_["delete"](e)},clear:function(){return this.map_.clear()},forEach:function(e){var t=arguments[1],n=this;return this.map_.forEach(function(r,i){e.call(t,i,i,n)})},values:$traceurRuntime.initGeneratorFunction(function u(){var e,t;return $traceurRuntime.createGeneratorInstance(function(n){for(;;)switch(n.state){case 0:e=this.map_.keys()[Symbol.iterator](),n.sent=void 0,n.action="next",n.state=12;break;case 12:t=e[n.action](n.sentIgnoreThrow),n.state=9;break;case 9:n.state=t.done?3:2;break;case 3:n.sent=t.value,n.state=-2;break;case 2:return n.state=12,t.value;default:return n.end()}},u,this)}),entries:$traceurRuntime.initGeneratorFunction(function l(){var e,t;return $traceurRuntime.createGeneratorInstance(function(n){for(;;)switch(n.state){case 0:e=this.map_.entries()[Symbol.iterator](),n.sent=void 0,n.action="next",n.state=12;break;case 12:t=e[n.action](n.sentIgnoreThrow),n.state=9;break;case 9:n.state=t.done?3:2;break;case 3:n.sent=t.value,n.state=-2;break;case 2:return n.state=12,t.value;default:return n.end()}},l,this)})},{}),Object.defineProperty(c.prototype,Symbol.iterator,{configurable:!0,writable:!0,value:c.prototype.values}),Object.defineProperty(c.prototype,"keys",{configurable:!0,writable:!0,value:c.prototype.values}),o(t),{get Set(){return c},get polyfillSet(){return t}}}),System.get("traceur-runtime@0.0.79/src/runtime/polyfills/Set.js"),System.registerModule("traceur-runtime@0.0.79/node_modules/rsvp/lib/rsvp/asap.js",[],function(){"use strict";function e(e,t){f[s]=e,f[s+1]=t,s+=2,2===s&&a()}function t(){return function(){process.nextTick(o)}}function n(){var e=0,t=new l(o),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function r(){var e=new MessageChannel;return e.port1.onmessage=o,function(){e.port2.postMessage(0)}}function i(){return function(){setTimeout(o,1)}}function o(){for(var e=0;s>e;e+=2){var t=f[e],n=f[e+1];t(n),f[e]=void 0,f[e+1]=void 0}s=0}var a,s=0,c=e,u="undefined"!=typeof window?window:{},l=u.MutationObserver||u.WebKitMutationObserver,d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,f=new Array(1e3);return a="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?t():l?n():d?r():i(),{get default(){return c}}}),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/Promise.js",[],function(){"use strict";function e(e){return e&&"object"==typeof e&&void 0!==e.status_}function t(e){return e}function n(e){throw e}function r(e){var r=void 0!==arguments[1]?arguments[1]:t,o=void 0!==arguments[2]?arguments[2]:n,a=i(e.constructor);switch(e.status_){case void 0:throw TypeError;case 0:e.onResolve_.push(r,a),e.onReject_.push(o,a);break;case 1:l(e.value_,[r,a]);break;case-1:l(e.value_,[o,a])}return a.promise}function i(e){if(this===$){var t=a(new $(v));return{promise:t,resolve:function(e){s(t,e)},reject:function(e){c(t,e)}}}var n={};return n.promise=new e(function(e,t){n.resolve=e,n.reject=t}),n}function o(e,t,n,r,i){return e.status_=t,e.value_=n,e.onResolve_=r,e.onReject_=i,e}function a(e){return o(e,0,void 0,[],[])}function s(e,t){u(e,1,t,e.onResolve_)}function c(e,t){u(e,-1,t,e.onReject_)}function u(e,t,n,r){0===e.status_&&(l(n,r),o(e,t,n))}function l(e,t){h(function(){for(var n=0;n<t.length;n+=2)d(e,t[n],t[n+1])})}function d(t,n,i){try{var o=n(t);if(o===i.promise)throw new TypeError;e(o)?r(o,i.resolve,i.reject):i.resolve(o)}catch(a){try{i.reject(a)}catch(a){}}}function f(e){return e&&("object"==typeof e||"function"==typeof e)}function p(t,n){if(!e(n)&&f(n)){var r;try{r=n.then}catch(o){var a=b.call(t,o);return n[C]=a,a}if("function"==typeof r){var s=n[C];if(s)return s;var c=i(t);n[C]=c.promise;try{r.call(n,c.resolve,c.reject)}catch(o){c.reject(o)}return c.promise}}return n}function m(e){e.Promise||(e.Promise=y)}var h=System.get("traceur-runtime@0.0.79/node_modules/rsvp/lib/rsvp/asap.js")["default"],g=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js").registerPolyfill,v={},y=function(e){if(e!==v){if("function"!=typeof e)throw new TypeError;var t=a(this);try{e(function(e){s(t,e)},function(e){c(t,e)})}catch(n){c(t,n)}}};$traceurRuntime.createClass(y,{"catch":function(e){return this.then(void 0,e)},then:function(i,o){"function"!=typeof i&&(i=t),"function"!=typeof o&&(o=n);var a=this,s=this.constructor;return r(this,function(t){return t=p(s,t),t===a?o(new TypeError):e(t)?t.then(i,o):i(t)},o)}},{resolve:function(t){return this===$?e(t)?t:o(new $(v),1,t):new this(function(e,n){e(t)})},reject:function(e){return this===$?o(new $(v),-1,e):new this(function(t,n){n(e)})},all:function(e){var t=i(this),n=[];try{var r=e.length;if(0===r)t.resolve(n);else for(var o=0;o<e.length;o++)this.resolve(e[o]).then(function(e,i){n[e]=i,0===--r&&t.resolve(n)}.bind(void 0,o),function(e){t.reject(e)})}catch(a){t.reject(a)}return t.promise},race:function(e){var t=i(this);try{for(var n=0;n<e.length;n++)this.resolve(e[n]).then(function(e){t.resolve(e)},function(e){t.reject(e)})}catch(r){t.reject(r)}return t.promise}});var $=y,b=$.reject,C="@@thenable";return g(m),{get Promise(){return y},get polyfillPromise(){return m}}}),System.get("traceur-runtime@0.0.79/src/runtime/polyfills/Promise.js"),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/StringIterator.js",[],function(){"use strict";function e(e){var t=String(e),n=Object.create(u.prototype);return n[o(s)]=t,n[o(c)]=0,n}var t,n=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js"),r=n.createIteratorResultObject,i=n.isObject,o=$traceurRuntime.toProperty,a=Object.prototype.hasOwnProperty,s=Symbol("iteratedString"),c=Symbol("stringIteratorNextIndex"),u=function(){};return $traceurRuntime.createClass(u,(t={},Object.defineProperty(t,"next",{value:function(){var e=this;if(!i(e)||!a.call(e,s))throw new TypeError("this must be a StringIterator object");var t=e[o(s)];if(void 0===t)return r(void 0,!0);var n=e[o(c)],u=t.length;if(n>=u)return e[o(s)]=void 0,r(void 0,!0);var l,d=t.charCodeAt(n);if(55296>d||d>56319||n+1===u)l=String.fromCharCode(d);else{var f=t.charCodeAt(n+1);l=56320>f||f>57343?String.fromCharCode(d):String.fromCharCode(d)+String.fromCharCode(f)}return e[o(c)]=n+l.length,r(l,!1)},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,Symbol.iterator,{value:function(){return this},configurable:!0,enumerable:!0,writable:!0}),t),{}),{get createStringIterator(){return e}}}),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/String.js",[],function(){"use strict";function e(e){var t=String(this);if(null==this||"[object RegExp]"==m.call(e))throw TypeError();var n=t.length,r=String(e),i=(r.length,arguments.length>1?arguments[1]:void 0),o=i?Number(i):0;isNaN(o)&&(o=0);var a=Math.min(Math.max(o,0),n);return h.call(t,r,o)==a}function t(e){var t=String(this);if(null==this||"[object RegExp]"==m.call(e))throw TypeError();var n=t.length,r=String(e),i=r.length,o=n;if(arguments.length>1){var a=arguments[1];void 0!==a&&(o=a?Number(a):0,isNaN(o)&&(o=0))}var s=Math.min(Math.max(o,0),n),c=s-i;return 0>c?!1:g.call(t,r,c)==c}function n(e){if(null==this)throw TypeError();var t=String(this);if(e&&"[object RegExp]"==m.call(e))throw TypeError();var n=t.length,r=String(e),i=r.length,o=arguments.length>1?arguments[1]:void 0,a=o?Number(o):0;a!=a&&(a=0);var s=Math.min(Math.max(a,0),n);return i+s>n?!1:-1!=h.call(t,r,a)}function r(e){if(null==this)throw TypeError();var t=String(this),n=e?Number(e):0;if(isNaN(n)&&(n=0),0>n||n==1/0)throw RangeError();if(0==n)return"";for(var r="";n--;)r+=t;return r}function i(e){if(null==this)throw TypeError();var t=String(this),n=t.length,r=e?Number(e):0;if(isNaN(r)&&(r=0),!(0>r||r>=n)){var i,o=t.charCodeAt(r);return o>=55296&&56319>=o&&n>r+1&&(i=t.charCodeAt(r+1),i>=56320&&57343>=i)?1024*(o-55296)+i-56320+65536:o}}function o(e){var t=e.raw,n=t.length>>>0;if(0===n)return"";for(var r="",i=0;;){if(r+=t[i],i+1===n)return r;r+=arguments[++i]}}function a(){var e,t,n=[],r=Math.floor,i=-1,o=arguments.length;if(!o)return"";for(;++i<o;){var a=Number(arguments[i]);if(!isFinite(a)||0>a||a>1114111||r(a)!=a)throw RangeError("Invalid code point: "+a);65535>=a?n.push(a):(a-=65536,e=(a>>10)+55296,t=a%1024+56320,n.push(e,t))}return String.fromCharCode.apply(null,n)}function s(){var e=$traceurRuntime.checkObjectCoercible(this),t=String(e);return u(t)}function c(c){var u=c.String;d(u.prototype,["codePointAt",i,"endsWith",t,"includes",n,"repeat",r,"startsWith",e]),d(u,["fromCodePoint",a,"raw",o]),f(u.prototype,s,Symbol)}var u=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/StringIterator.js").createStringIterator,l=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js"),d=l.maybeAddFunctions,f=l.maybeAddIterator,p=l.registerPolyfill,m=Object.prototype.toString,h=String.prototype.indexOf,g=String.prototype.lastIndexOf;return p(c),{get startsWith(){return e},get endsWith(){return t},get includes(){return n},get repeat(){return r},get codePointAt(){return i},get raw(){return o},get fromCodePoint(){return a},get stringPrototypeIterator(){return s},get polyfillString(){return c}}}),System.get("traceur-runtime@0.0.79/src/runtime/polyfills/String.js"),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/ArrayIterator.js",[],function(){"use strict";function e(e,t){var n=a(e),r=new f;return r.iteratorObject_=n,r.arrayIteratorNextIndex_=0,r.arrayIterationKind_=t,r}function t(){return e(this,d)}function n(){return e(this,u)}function r(){return e(this,l)}var i,o=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js"),a=o.toObject,s=o.toUint32,c=o.createIteratorResultObject,u=1,l=2,d=3,f=function(){};return $traceurRuntime.createClass(f,(i={},Object.defineProperty(i,"next",{value:function(){var e=a(this),t=e.iteratorObject_;if(!t)throw new TypeError("Object is not an ArrayIterator");var n=e.arrayIteratorNextIndex_,r=e.arrayIterationKind_,i=s(t.length);return n>=i?(e.arrayIteratorNextIndex_=1/0,c(void 0,!0)):(e.arrayIteratorNextIndex_=n+1,r==l?c(t[n],!1):r==d?c([n,t[n]],!1):c(n,!1))},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(i,Symbol.iterator,{value:function(){return this},configurable:!0,enumerable:!0,writable:!0}),i),{}),{get entries(){return t},
get keys(){return n},get values(){return r}}}),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/Array.js",[],function(){"use strict";function e(e){var t,n,r=arguments[1],i=arguments[2],o=this,a=b(e),s=void 0!==r,c=0;if(s&&!p(r))throw TypeError();if(f(a)){t=m(o)?new o:[];for(var u,l=a[$traceurRuntime.toProperty(Symbol.iterator)]();!(u=l.next()).done;){var d=u.value;s?t[c]=r.call(i,d,c):t[c]=d,c++}return t.length=c,t}for(n=$(a.length),t=m(o)?new o(n):new Array(n);n>c;c++)s?t[c]="undefined"==typeof i?r(a[c],c):r.call(i,a[c],c):t[c]=a[c];return t.length=n,t}function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this,r=e.length,i=m(n)?new n(r):new Array(r),o=0;r>o;o++)i[o]=e[o];return i.length=r,i}function n(e){var t=void 0!==arguments[1]?arguments[1]:0,n=arguments[2],r=b(this),i=$(r.length),o=y(t),a=void 0!==n?y(n):i;for(o=0>o?Math.max(i+o,0):Math.min(o,i),a=0>a?Math.max(i+a,0):Math.min(a,i);a>o;)r[o]=e,o++;return r}function r(e){var t=arguments[1];return o(this,e,t)}function i(e){var t=arguments[1];return o(this,e,t,!0)}function o(e,t){var n=arguments[2],r=void 0!==arguments[3]?arguments[3]:!1,i=b(e),o=$(i.length);if(!p(t))throw TypeError();for(var a=0;o>a;a++){var s=i[a];if(t.call(n,s,a,i))return r?a:s}return r?-1:void 0}function a(o){var a=o,s=a.Array,d=a.Object,f=a.Symbol;h(s.prototype,["entries",c,"keys",u,"values",l,"fill",n,"find",r,"findIndex",i]),h(s,["from",e,"of",t]),g(s.prototype,l,f),g(d.getPrototypeOf([].values()),function(){return this},f)}var s=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/ArrayIterator.js"),c=s.entries,u=s.keys,l=s.values,d=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js"),f=d.checkIterable,p=d.isCallable,m=d.isConstructor,h=d.maybeAddFunctions,g=d.maybeAddIterator,v=d.registerPolyfill,y=d.toInteger,$=d.toLength,b=d.toObject;return v(a),{get from(){return e},get of(){return t},get fill(){return n},get find(){return r},get findIndex(){return i},get polyfillArray(){return a}}}),System.get("traceur-runtime@0.0.79/src/runtime/polyfills/Array.js"),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/Object.js",[],function(){"use strict";function e(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function t(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t],i=null==r?[]:f(r),o=i.length;for(n=0;o>n;n++){var a=i[n];d(a)||(e[a]=r[a])}}return e}function n(e,t){var n,r,i=l(t),o=i.length;for(n=0;o>n;n++){var a=i[n];d(a)||(r=u(t,i[n]),c(e,i[n],r))}return e}function r(r){var i=r.Object;o(i,["assign",t,"is",e,"mixin",n])}var i=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js"),o=i.maybeAddFunctions,a=i.registerPolyfill,s=$traceurRuntime,c=s.defineProperty,u=s.getOwnPropertyDescriptor,l=s.getOwnPropertyNames,d=s.isPrivateName,f=s.keys;return a(r),{get is(){return e},get assign(){return t},get mixin(){return n},get polyfillObject(){return r}}}),System.get("traceur-runtime@0.0.79/src/runtime/polyfills/Object.js"),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/Number.js",[],function(){"use strict";function e(e){return a(e)&&f(e)}function t(t){return e(t)&&l(t)===t}function n(e){return a(e)&&p(e)}function r(t){if(e(t)){var n=l(t);if(n===t)return d(n)<=m}return!1}function i(i){var o=i.Number;s(o,["MAX_SAFE_INTEGER",m,"MIN_SAFE_INTEGER",h,"EPSILON",g]),c(o,["isFinite",e,"isInteger",t,"isNaN",n,"isSafeInteger",r])}var o=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js"),a=o.isNumber,s=o.maybeAddConsts,c=o.maybeAddFunctions,u=o.registerPolyfill,l=o.toInteger,d=Math.abs,f=isFinite,p=isNaN,m=Math.pow(2,53)-1,h=-Math.pow(2,53)+1,g=Math.pow(2,-52);return u(i),{get MAX_SAFE_INTEGER(){return m},get MIN_SAFE_INTEGER(){return h},get EPSILON(){return g},get isFinite(){return e},get isInteger(){return t},get isNaN(){return n},get isSafeInteger(){return r},get polyfillNumber(){return i}}}),System.get("traceur-runtime@0.0.79/src/runtime/polyfills/Number.js"),System.registerModule("traceur-runtime@0.0.79/src/runtime/polyfills/polyfills.js",[],function(){"use strict";var e=System.get("traceur-runtime@0.0.79/src/runtime/polyfills/utils.js").polyfillAll;e(Reflect.global);var t=$traceurRuntime.setupGlobals;return $traceurRuntime.setupGlobals=function(n){t(n),e(n)},{}}),System.get("traceur-runtime@0.0.79/src/runtime/polyfills/polyfills.js"),function(e){"use strict";function t(e,t){return t=t||Error,function(){var n,r,i=arguments[0],o=arguments[1],a="["+(e?e+":":"")+i+"] ",s=z(arguments,2).map(function(e){return Se(e,Kr.objectMaxDepth)});for(a+=o.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t<s.length?s[t]:e}),a+="\nhttp://errors.angularjs.org/1.6.3/"+(e?e+"/":"")+i,r=0,n="?";r<s.length;r++,n="&")a+=n+"p"+r+"="+encodeURIComponent(s[r]);return new t(a)}}function n(e){return C(e)?void(b(e.objectMaxDepth)&&(Kr.objectMaxDepth=r(e.objectMaxDepth)?e.objectMaxDepth:NaN)):Kr}function r(e){return E(e)&&e>0}function i(e){if(null==e||x(e))return!1;if(pi(e)||S(e)||ti&&e instanceof ti)return!0;var t="length"in Object(e)&&e.length;return E(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function o(e,t,n){var r,a;if(e)if(P(e))for(r in e)"prototype"!==r&&"length"!==r&&"name"!==r&&e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else if(pi(e)||i(e)){var s="object"!=typeof e;for(r=0,a=e.length;a>r;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==o)e.forEach(t,n,e);else if(w(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)Yr.call(e,r)&&t.call(n,e[r],r,e);return e}function a(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function s(e){return function(t,n){e(n,t)}}function c(){return++di}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function l(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;o>i;++i){var a=t[i];if(C(a)||P(a))for(var s=Object.keys(a),c=0,d=s.length;d>c;c++){var f=s[c],p=a[f];n&&C(p)?I(p)?e[f]=new Date(p.valueOf()):T(p)?e[f]=new RegExp(p):p.nodeName?e[f]=p.cloneNode(!0):j(p)?e[f]=p.clone():(C(e[f])||(e[f]=pi(p)?[]:{}),l(e[f],[p],!0)):e[f]=p}}return u(e,r),e}function d(e){return l(e,ii.call(arguments,1),!1)}function f(e){return l(e,ii.call(arguments,1),!0)}function p(e){return parseInt(e,10)}function m(e,t){return d(Object.create(e),t)}function h(){}function g(e){return e}function v(e){return function(){return e}}function y(e){return P(e.toString)&&e.toString!==si}function $(e){return"undefined"==typeof e}function b(e){return"undefined"!=typeof e}function C(e){return null!==e&&"object"==typeof e}function w(e){return null!==e&&"object"==typeof e&&!ci(e)}function S(e){return"string"==typeof e}function E(e){return"number"==typeof e}function I(e){return"[object Date]"===si.call(e)}function P(e){return"function"==typeof e}function T(e){return"[object RegExp]"===si.call(e)}function x(e){return e&&e.window===e}function k(e){return e&&e.$evalAsync&&e.$watch}function A(e){return"[object File]"===si.call(e)}function D(e){return"[object FormData]"===si.call(e)}function M(e){return"[object Blob]"===si.call(e)}function _(e){return"boolean"==typeof e}function R(e){return e&&P(e.then)}function O(e){return e&&E(e.length)&&mi.test(si.call(e))}function L(e){return"[object ArrayBuffer]"===si.call(e)}function j(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function B(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function N(e){return Jr(e.nodeName||e[0]&&e[0].nodeName)}function H(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function F(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function U(e,t,n){function i(e,t,n){if(n--,0>n)return"...";var r,i=t.$$hashKey;if(pi(e))for(var o=0,s=e.length;s>o;o++)t.push(a(e[o],n));else if(w(e))for(r in e)t[r]=a(e[r],n);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=a(e[r],n));else for(r in e)Yr.call(e,r)&&(t[r]=a(e[r],n));return u(t,i),t}function a(e,t){if(!C(e))return e;var n=c.indexOf(e);if(-1!==n)return l[n];if(x(e)||k(e))throw ui("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,o=s(e);return void 0===o&&(o=pi(e)?[]:Object.create(ci(e)),r=!0),c.push(e),l.push(o),r?i(e,o,t):o}function s(e){switch(si.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(a(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}return P(e.cloneNode)?e.cloneNode(!0):void 0}var c=[],l=[];if(n=r(n)?n:NaN,t){if(O(t)||L(t))throw ui("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw ui("cpi","Can't copy! Source and destination are identical.");return pi(t)?t.length=0:o(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),c.push(e),l.push(t),i(e,t,n)}return a(e,n)}function q(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,i,o=typeof e,a=typeof t;if(o===a&&"object"===o){if(!pi(e)){if(I(e))return I(t)?q(e.getTime(),t.getTime()):!1;if(T(e))return T(t)?e.toString()===t.toString():!1;if(k(e)||k(t)||x(e)||x(t)||pi(t)||I(t)||T(t))return!1;i=ye();for(r in e)if("$"!==r.charAt(0)&&!P(e[r])){if(!q(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&b(t[r])&&!P(t[r]))return!1;return!0}if(!pi(t))return!1;if((n=e.length)===t.length){for(r=0;n>r;r++)if(!q(e[r],t[r]))return!1;return!0}}return!1}function V(e,t,n){return e.concat(ii.call(t,n))}function z(e,t){return ii.call(e,t||0)}function G(e,t){var n=arguments.length>2?z(arguments,2):[];return!P(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,V(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function W(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:x(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":k(n)&&(r="$SCOPE"),r}function Y(e,t){return $(e)?void 0:(E(t)||(t=t?2:null),JSON.stringify(e,W,t))}function K(e){return S(e)?JSON.parse(e):e}function J(e,t){e=e.replace($i,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return fi(n)?t:n}function X(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Z(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset(),i=J(t,r);return X(e,n*(i-r))}function Q(e){e=ti(e).clone();try{e.empty()}catch(t){}var n=ti("<div>").append(e).html();try{return e[0].nodeType===Pi?Jr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+Jr(t)})}catch(t){return Jr(n)}}function ee(e){try{return decodeURIComponent(e)}catch(t){}}function te(e){var t={};return o((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(r=e.substring(0,n),i=e.substring(n+1)),r=ee(r),b(r)&&(i=b(i)?ee(i):!0,Yr.call(t,r)?pi(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function ne(e){var t=[];return o(e,function(e,n){pi(e)?o(e,function(e){t.push(ie(n,!0)+(e===!0?"":"="+ie(e,!0)))}):t.push(ie(n,!0)+(e===!0?"":"="+ie(e,!0)))}),t.length?t.join("&"):""}function re(e){return ie(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ie(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function oe(e,t){var n,r,i=bi.length;for(r=0;i>r;++r)if(n=bi[r]+t,S(n=e.getAttribute(n)))return n;return null}function ae(t){var n=t.currentScript;if(!n)return!0;if(!(n instanceof e.HTMLScriptElement||n instanceof e.SVGScriptElement))return!1;var r=n.attributes,i=[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")];return i.every(function(e){if(!e)return!0;if(!e.value)return!1;var n=t.createElement("a");if(n.href=e.value,t.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}function se(t,n){var r,i,a={};if(o(bi,function(e){var n=e+"app";!r&&t.hasAttribute&&t.hasAttribute(n)&&(r=t,i=t.getAttribute(n))}),o(bi,function(e){var n,o=e+"app";!r&&(n=t.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r){if(!Ci)return void e.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==oe(r,"strict-di"),n(r,i?[i]:[],a)}}function ce(t,n,r){C(r)||(r={});var i={strictDi:!1};r=d(i,r);var a=function(){if(t=ti(t),t.injector()){var i=t[0]===e.document?"document":Q(t);throw ui("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",t)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var o=dt(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),o},s=/^NG_ENABLE_DEBUG_INFO!/,c=/^NG_DEFER_BOOTSTRAP!/;return e&&s.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(s,"")),e&&!c.test(e.name)?a():(e.name=e.name.replace(c,""),li.resumeBootstrap=function(e){return o(e,function(e){n.push(e)}),a()},void(P(li.resumeDeferredBootstrap)&&li.resumeDeferredBootstrap()))}function ue(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function le(e){var t=li.element(e).injector();if(!t)throw ui("test","no injector found for element argument to getTestability");return t.get("$$testability")}function de(e,t){return t=t||"_",e.replace(wi,function(e,n){return(n?t:"")+e.toLowerCase()})}function fe(){var t;if(!Si){var n=yi();ni=$(n)?e.jQuery:n?e[n]:void 0,ni&&ni.fn.on?(ti=ni,d(ni.fn,{scope:qi.scope,isolateScope:qi.isolateScope,controller:qi.controller,injector:qi.injector,inheritedData:qi.inheritedData}),t=ni.cleanData,ni.cleanData=function(e){for(var n,r,i=0;null!=(r=e[i]);i++)n=ni._data(r,"events"),n&&n.$destroy&&ni(r).triggerHandler("$destroy");t(e)}):ti=Le,li.element=ti,Si=!0}}function pe(e,t,n){if(!e)throw ui("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function me(e,t,n){return n&&pi(e)&&(e=e[e.length-1]),pe(P(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function he(e,t){if("hasOwnProperty"===e)throw ui("badname","hasOwnProperty is not a valid {0} name",t)}function ge(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;a>s;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&P(e)?G(o,e):e}function ve(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=ti(ii.call(e,0,i))),t.push(n));return t||e}function ye(){return Object.create(null)}function $e(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!y(e)||pi(e)||I(e)?Y(e):e.toString()}return e}function be(e){function n(e,t,n){return e[t]||(e[t]=n())}var r=t("$injector"),i=t("ng"),o=n(e,"angular",Object);return o.$$minErr=o.$$minErr||t,n(o,"module",function(){var e={};return function(t,o,a){var s={},c=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return c(t,"module"),o&&e.hasOwnProperty(t)&&(e[t]=null),n(e,t,function(){function e(e,t,n,r){return r||(r=c),function(){return r[n||"push"]([e,t,arguments]),f}}function n(e,n,r){return r||(r=c),function(i,o){return o&&P(o)&&(o.$$moduleName=t),r.push([e,n,arguments]),f}}if(!o)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",t);var c=[],u=[],l=[],d=e("$injector","invoke","push",u),f={_invokeQueue:c,_configBlocks:u,_runBlocks:l,info:function(e){if(b(e)){if(!C(e))throw i("aobj","Argument '{0}' must be an object","value");return s=e,this}return s},requires:o,name:t,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:n("$provide","decorator",u),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:d,run:function(e){return l.push(e),this}};return a&&d(a),f})}})}function Ce(e,t){if(pi(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(C(e)){t=t||{};for(var i in e)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=e[i])}return t||e}function we(e,t){var n=[];return r(t)&&(e=U(e,null,t)),JSON.stringify(e,function(e,t){if(t=W(e,t),C(t)){if(n.indexOf(t)>=0)return"...";n.push(t)}return t})}function Se(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):$(e)?"undefined":"string"!=typeof e?we(e,t):e}function Ee(r){d(r,{errorHandlingConfig:n,bootstrap:ce,copy:U,extend:d,merge:f,equals:q,element:ti,forEach:o,injector:dt,noop:h,bind:G,toJson:Y,fromJson:K,identity:g,isUndefined:$,isDefined:b,isString:S,isFunction:P,isObject:C,isNumber:E,isElement:j,isArray:pi,version:Ai,isDate:I,lowercase:Jr,uppercase:Xr,callbacks:{$$counter:0},getTestability:le,reloadWithDebugInfo:ue,$$minErr:t,$$csp:vi,$$encodeUriSegment:re,$$encodeUriQuery:ie,$$stringify:$e}),ri=be(e),ri("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:kn}),e.provider("$compile",wt).directive({a:Qo,input:$a,textarea:$a,form:oa,script:ps,select:gs,option:vs,ngBind:wa,ngBindHtml:Ea,ngBindTemplate:Sa,ngClass:Pa,ngClassEven:xa,ngClassOdd:Ta,ngCloak:ka,ngController:Aa,ngForm:aa,ngHide:as,ngIf:_a,ngInclude:Ra,ngInit:La,ngNonBindable:Xa,ngPluralize:ts,ngRepeat:ns,ngShow:os,ngStyle:ss,ngSwitch:cs,ngSwitchWhen:us,ngSwitchDefault:ls,ngOptions:es,ngTransclude:fs,ngModel:Ya,ngList:ja,ngChange:Ia,pattern:$s,ngPattern:$s,required:ys,ngRequired:ys,minlength:Cs,ngMinlength:Cs,maxlength:bs,ngMaxlength:bs,ngValue:Ca,ngModelOptions:Ja}).directive({ngInclude:Oa}).directive(ea).directive(Da),e.provider({$anchorScroll:ft,$animate:so,$animateCss:lo,$$animateJs:oo,$$animateQueue:ao,$$AnimateRunner:uo,$$animateAsyncRun:co,$browser:yt,$cacheFactory:$t,$controller:xt,$document:kt,$$isDocumentHidden:At,$exceptionHandler:Dt,$filter:Vn,$$forceReflow:yo,$interpolate:zt,$interval:Gt,$http:Ft,$httpParamSerializer:_t,$httpParamSerializerJQLike:Rt,$httpBackend:qt,$xhrFactory:Ut,$jsonpCallbacks:Po,$location:cn,$log:un,$parse:Sn,$rootScope:xn,$q:En,$$q:In,$sce:Rn,$sceDelegate:_n,$sniffer:On,$templateCache:bt,$templateRequest:Ln,$$testability:jn,$timeout:Bn,$window:Fn,$$rAF:Tn,$$jqLite:it,$$Map:Ki,$$cookieReader:qn})}]).info({angularVersion:"1.6.3"})}function Ie(){return++Mi}function Pe(e){return xe(e.replace(Ri,"ms-"))}function Te(e,t){return t.toUpperCase()}function xe(e){return e.replace(_i,Te)}function ke(e){return!Bi.test(e)}function Ae(e){var t=e.nodeType;return t===Ei||!t||t===xi}function De(e){for(var t in Di[e.ng339])return!0;return!1}function Me(e){for(var t=0,n=e.length;n>t;t++)He(e[t])}function _e(e,t){var n,r,i,a,s=t.createDocumentFragment(),c=[];if(ke(e))c.push(t.createTextNode(e));else{for(n=s.appendChild(t.createElement("div")),r=(Ni.exec(e)||["",""])[1].toLowerCase(),i=Fi[r]||Fi._default,n.innerHTML=i[1]+e.replace(Hi,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;c=V(c,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",o(c,function(e){s.appendChild(e)}),s}function Re(t,n){n=n||e.document;var r;return(r=ji.exec(t))?[n.createElement(r[1])]:(r=_e(t,n))?r.childNodes:[]}function Oe(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function Le(e){if(e instanceof Le)return e;var t;if(S(e)&&(e=hi(e),t=!0),!(this instanceof Le)){if(t&&"<"!==e.charAt(0))throw Li("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Le(e)}t?Ge(this,Re(e)):P(e)?Ze(e):Ge(this,e)}function je(e){return e.cloneNode(!0)}function Be(e,t){if(t||He(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;i>r;r++)He(n[r])}function Ne(e,t,n,r){if(b(r))throw Li("offargs","jqLite#off() does not support the `selector` argument");var i=Fe(e),a=i&&i.events,s=i&&i.handle;if(s)if(t){var c=function(t){var r=a[t];b(n)&&F(r||[],n),b(n)&&r&&r.length>0||(e.removeEventListener(t,s),delete a[t])};o(t.split(" "),function(e){c(e),Oi[e]&&c(Oi[e])})}else for(t in a)"$destroy"!==t&&e.removeEventListener(t,s),delete a[t]}function He(e,t){var n=e.ng339,r=n&&Di[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Ne(e)),delete Di[n],e.ng339=void 0}}function Fe(e,t){var n=e.ng339,r=n&&Di[n];return t&&!r&&(e.ng339=n=Ie(),r=Di[n]={events:{},data:{},handle:void 0}),r}function Ue(e,t,n){if(Ae(e)){var r,i=b(n),o=!i&&t&&!C(t),a=!t,s=Fe(e,!o),c=s&&s.data;if(i)c[xe(t)]=n;else{if(a)return c;if(o)return c&&c[xe(t)];for(r in t)c[xe(r)]=t[r]}}}function qe(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Ve(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",hi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+hi(t)+" "," ")))})}function ze(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=hi(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",hi(n))}}function Ge(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;n>r;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function We(e,t){return Ye(e,"$"+(t||"ngController")+"Controller")}function Ye(e,t,n){e.nodeType===xi&&(e=e.documentElement);for(var r=pi(t)?t:[t];e;){for(var i=0,o=r.length;o>i;i++)if(b(n=ti.data(e,r[i])))return n;e=e.parentNode||e.nodeType===ki&&e.host}}function Ke(e){for(Be(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Je(e,t){t||Be(e);var n=e.parentNode;n&&n.removeChild(e)}function Xe(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):ti(n).on("load",t)}function Ze(t){function n(){e.document.removeEventListener("DOMContentLoaded",n),e.removeEventListener("load",n),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))}function Qe(e,t){var n=Vi[t.toLowerCase()];return n&&zi[N(e)]&&n}function et(e){return Gi[e]}function tt(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],o=i?i.length:0;if(o){if($(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var s=i.specialHandlerWrapper||nt;o>1&&(i=Ce(i));for(var c=0;o>c;c++)n.isImmediatePropagationStopped()||s(e,n,i[c])}};return n.elem=e,n}function nt(e,t,n){n.call(e,t)}function rt(e,t,n){var r=t.relatedTarget;(!r||r!==e&&!Ui.call(e,r))&&n.call(e,t)}function it(){this.$get=function(){return d(Le,{hasClass:function(e,t){return e.attr&&(e=e[0]),qe(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),ze(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Ve(e,t)}})}}function ot(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||c)():r+":"+e}function at(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function st(e){return Function.prototype.toString.call(e)}function ct(e){var t=st(e).replace(eo,""),n=t.match(Ji)||t.match(Xi);return n}function ut(e){var t=ct(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function lt(e,t,n){var r,i,a;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw S(n)&&n||(n=e.name||ut(e)),to("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=ct(e),o(i[1].split(Zi),function(e){e.replace(Qi,function(e,t,n){r.push(n)})})}e.$inject=r}}else pi(e)?(a=e.length-1,me(e[a],"fn"),r=e.slice(0,a)):me(e,"fn",!0);return r}function dt(e,t){function n(e){return function(t,n){return C(t)?void o(t,s(e)):e(t,n)}}function r(e,t){if(he(e,"service"),(P(t)||pi(t))&&(t=w.instantiate(t)),!t.$get)throw to("pget","Provider '{0}' must define $get factory method.",e);return b[e+h]=t}function i(e,t){return function(){var n=T.invoke(t,this);if($(n))throw to("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function a(e,t,n){return r(e,{$get:n!==!1?i(e,t):t})}function c(e,t){return a(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return a(e,v(t),!1)}function l(e,t){he(e,"constant"),b[e]=t,E[e]=t}function d(e,t){var n=w.get(e+h),r=n.$get;n.$get=function(){var e=T.invoke(r,n);return T.invoke(t,null,{$delegate:e})}}function f(e){pe($(e)||pi(e),"modulesToLoad","not an array");var t,n=[];return o(e,function(e){function r(e){var t,n;for(t=0,n=e.length;n>t;t++){var r=e[t],i=w.get(r[0]);i[r[1]].apply(i,r[2])}}if(!y.get(e)){y.set(e,!0);try{S(e)?(t=ri(e),T.modules[e]=t,n=n.concat(f(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):P(e)?n.push(w.invoke(e)):pi(e)?n.push(w.invoke(e)):me(e,"module")}catch(i){throw pi(e)&&(e=e[e.length-1]),i.message&&i.stack&&-1===i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),to("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function p(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===m)throw to("cdep","Circular dependency found: {0}",t+" <- "+g.join(" <- "));return e[t]}try{return g.unshift(t),e[t]=m,e[t]=n(t,r),e[t]}catch(i){throw e[t]===m&&delete e[t],i}finally{g.shift()}}function i(e,n,i){for(var o=[],a=dt.$$annotate(e,t,i),s=0,c=a.length;c>s;s++){var u=a[s];if("string"!=typeof u)throw to("itkn","Incorrect injection token! Expected service name as string, got {0}",u);o.push(n&&n.hasOwnProperty(u)?n[u]:r(u,i))}return o}function o(e){if(ei||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return _(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(st(e))),t}function a(e,t,n,r){"string"==typeof n&&(r=n,n=null);var a=i(e,n,r);return pi(e)&&(e=e[e.length-1]),o(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)}function s(e,t,n){var r=pi(e)?e[e.length-1]:e,o=i(e,t,n);return o.unshift(null),new(Function.prototype.bind.apply(r,o))}return{invoke:a,instantiate:s,get:r,annotate:dt.$$annotate,has:function(t){return b.hasOwnProperty(t+h)||e.hasOwnProperty(t)}}}t=t===!0;var m={},h="Provider",g=[],y=new Yi,b={$provide:{provider:n(r),factory:n(a),service:n(c),value:n(u),constant:n(l),decorator:d}},w=b.$injector=p(b,function(e,t){throw li.isString(t)&&g.push(t),to("unpr","Unknown provider: {0}",g.join(" <- "))}),E={},I=p(E,function(e,t){var n=w.get(e+h,t);return T.invoke(n.$get,n,void 0,e)}),T=I;b["$injector"+h]={$get:v(I)},T.modules=w.modules=ye();var x=f(e);return T=I.get("$injector"),T.strictDi=t,o(x,function(e){e&&T.invoke(e)}),T}function ft(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===N(e)?(t=e,!0):void 0}),t}function o(){var e=s.yOffset;if(P(e))e=e();else if(j(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else E(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=S(e)?e:E(e)?e.toString():n.hash();var t;e?(t=c.getElementById(e))?a(t):(t=i(c.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var c=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&Xe(function(){r.$evalAsync(s)})}),s}]}function pt(e,t){return e||t?e?t?(pi(e)&&(e=e.join(" ")),pi(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function mt(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===ro)return n}}function ht(e){S(e)&&(e=e.split(" "));var t=ye();return o(e,function(e){e.length&&(t[e]=!0)}),t}function gt(e){return C(e)?e:{}}function vt(e,t,n,r){function i(e){try{e.apply(null,z(arguments,1))}finally{if(v--,0===v)for(;y.length;)try{y.pop()()}catch(t){n.error(t)}}}function a(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function s(){E=null,u()}function c(){b=I(),b=$(b)?null:b,q(b,x)&&(b=x),x=b,C=b}function u(){var e=C;c(),(w!==l.url()||e!==b)&&(w=l.url(),C=b,o(P,function(e){e(l.url(),b)}))}var l=this,d=e.location,f=e.history,p=e.setTimeout,m=e.clearTimeout,g={};l.isMock=!1;var v=0,y=[];l.$$completeOutstandingRequest=i,l.$$incOutstandingRequestCount=function(){v++},l.notifyWhenNoOutstandingRequests=function(e){0===v?e():y.push(e)};var b,C,w=d.href,S=t.find("base"),E=null,I=r.history?function(){try{return f.state}catch(e){}}:h;c(),l.url=function(t,n,i){if($(i)&&(i=null),d!==e.location&&(d=e.location),f!==e.history&&(f=e.history),t){var o=C===i;if(w===t&&(!r.history||o))return l;var s=w&&Zt(w)===Zt(t);return w=t,C=i,!r.history||s&&o?(s||(E=t),n?d.replace(t):s?d.hash=a(t):d.href=t,d.href!==t&&(E=t)):(f[n?"replaceState":"pushState"](i,"",t),c()),E&&(E=t),l}return E||d.href.replace(/%27/g,"'")},l.state=function(){return b};var P=[],T=!1,x=null;l.onUrlChange=function(t){return T||(r.history&&ti(e).on("popstate",s),ti(e).on("hashchange",s),T=!0),P.push(t),t},l.$$applicationDestroyed=function(){ti(e).off("hashchange popstate",s)},l.$$checkUrlChange=u,l.baseHref=function(){var e=S.attr("href");return e?e.replace(/^(https?:)?\/\/[^\/]*/,""):""},l.defer=function(e,t){var n;return v++,n=p(function(){delete g[n],i(e)},t||0),g[n]=!0,n},l.defer.cancel=function(e){return g[e]?(delete g[e],m(e),i(h),!0):!1}}function yt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new vt(e,r,t,n)}]}function $t(){this.$get=function(){function e(e,r){function i(e){e!==f&&(p?p===e&&(p=e.n):p=e,o(e.n,e.p),o(e,f),f=e,f.n=null)}function o(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in n)throw t("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=d({},r,{id:e}),c=ye(),u=r&&r.capacity||Number.MAX_VALUE,l=ye(),f=null,p=null;return n[e]={put:function(e,t){if(!$(t)){if(u<Number.MAX_VALUE){var n=l[e]||(l[e]={key:e});i(n)}return e in c||a++,c[e]=t,a>u&&this.remove(p.key),t}},get:function(e){if(u<Number.MAX_VALUE){var t=l[e];if(!t)return;i(t)}return c[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=l[e];if(!t)return;t===f&&(f=t.p),t===p&&(p=t.n),o(t.n,t.p),delete l[e]}e in c&&(delete c[e],a--)},removeAll:function(){c=ye(),a=0,l=ye(),f=p=null},destroy:function(){c=null,s=null,l=null,delete n[e]},info:function(){return d({},s,{size:a})}}}var n={};return e.info=function(){var e={};return o(n,function(t,n){e[n]=t.info()}),e},e.get=function(e){return n[e]},e}}function bt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Ct(){}function wt(t,n){function r(e,t,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,i=ye();return o(e,function(e,o){if(e in T)return void(i[o]=T[e]);var a=e.match(r);if(!a)throw fo("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,o,e,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],
attrName:a[4]||o},a[4]&&(T[e]=i[o])}),i}function i(e,t){var n={isolateScope:null,bindToController:null};if(C(e.scope)&&(e.bindToController===!0?(n.bindToController=r(e.scope,t,!0),n.isolateScope={}):n.isolateScope=r(e.scope,t,!1)),C(e.bindToController)&&(n.bindToController=r(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw fo("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}function a(e){var t=e.charAt(0);if(!t||t!==Jr(t))throw fo("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw fo("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function c(e){var t=e.require||e.controller&&e.name;return!pi(t)&&C(t)&&o(t,function(e,n){var r=e.match(E),i=e.substring(r[0].length);i||(t[n]=r[0]+n)}),t}function u(e,t){if(e&&(!S(e)||!/[EACM]/.test(e)))throw fo("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}var l={},f="Directive",p=/^\s*directive:\s*([\w-]+)\s+(.*)$/,y=/(([\w-]+)(?::([^;]+))?;?)/,w=B("ngSrc,ngSrcset,src,srcset"),E=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,I=/^(on[a-z]+|formaction)$/,T=ye();this.directive=function O(e,n){return pe(e,"name"),he(e,"directive"),S(e)?(a(e),pe(n,"directiveFactory"),l.hasOwnProperty(e)||(l[e]=[],t.factory(e+f,["$injector","$exceptionHandler",function(t,n){var r=[];return o(l[e],function(i,o){try{var a=t.invoke(i);P(a)?a={compile:v(a)}:!a.compile&&a.link&&(a.compile=v(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||e,a.require=c(a),a.restrict=u(a.restrict,e),a.$$moduleName=i.$$moduleName,r.push(a)}catch(s){n(s)}}),r}])),l[e].push(n)):o(e,s(O)),this},this.component=function(e,t){function n(e){function n(t){return P(t)||pi(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var i=t.template||t.templateUrl?t.template:"",a={controller:r,controllerAs:Tt(t.controller)||t.controllerAs||"$ctrl",template:n(i),templateUrl:n(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return o(t,function(e,t){"$"===t.charAt(0)&&(a[t]=e)}),a}var r=t.controller||function(){};return o(t,function(e,t){"$"===t.charAt(0)&&(n[t]=e,P(r)&&(r[t]=e))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(e){return b(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return b(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var x=!0;this.debugInfoEnabled=function(e){return b(e)?(x=e,this):x};var A=!1;this.preAssignBindingsEnabled=function(e){return b(e)?(A=e,this):A};var D=10;this.onChangesTtl=function(e){return arguments.length?(D=e,this):D};var M=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(M=e,this):M};var R=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(R=e,this):R},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,r,a,s,c,u,v,T,O){function L(){try{if(!--xe)throw Se=void 0,fo("infchng","{0} $onChanges() iterations reached. Aborting!\n",D);u.$apply(function(){for(var e=[],t=0,n=Se.length;n>t;++t)try{Se[t]()}catch(r){e.push(r)}if(Se=void 0,e.length)throw e})}finally{xe++}}function j(e,t){if(t){var n,r,i,o=Object.keys(t);for(n=0,r=o.length;r>n;n++)i=o[n],this[i]=t[i]}else this.$attr={};this.$$element=e}function B(e,t,n){Ie.innerHTML="<span "+t+">";var r=Ie.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}function H(e,t){try{e.addClass(t)}catch(n){}}function U(e,t,n,r,i){e instanceof ti||(e=ti(e));var o=W(e,t,e,n,r,i);U.$$addScopeClass(e);var a=null;return function(t,n,r){if(!e)throw fo("multilink","This element has already been linked.");pe(t,"scope"),i&&i.needsNewScope&&(t=t.$parent.$new()),r=r||{};var s=r.parentBoundTranscludeFn,c=r.transcludeControllers,u=r.futureParentElement;s&&s.$$boundTransclude&&(s=s.$$boundTransclude),a||(a=V(u));var l;if(l="html"!==a?ti(he(a,ti("<div>").append(e).html())):n?qi.clone.call(e):e,c)for(var d in c)l.data("$"+d+"Controller",c[d].instance);return U.$$addScopeInfo(l,t),n&&n(l,t),o&&o(t,l,l,s),n||(e=o=null),l}}function V(e){var t=e&&e[0];return t&&"foreignobject"!==N(t)&&si.call(t).match(/SVG/)?"svg":"html"}function W(e,t,n,r,i,o){function a(e,n,r,i){var o,a,s,c,u,l,d,f,h;if(p){var g=n.length;for(h=new Array(g),u=0;u<m.length;u+=3)d=m[u],h[d]=n[d]}else h=n;for(u=0,l=m.length;l>u;)s=h[m[u++]],o=m[u++],a=m[u++],o?(o.scope?(c=e.$new(),U.$$addScopeInfo(ti(s),c)):c=e,f=o.transcludeOnThisElement?K(e,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&t?K(e,t):null,o(a,c,s,r,f)):a&&a(e,s.childNodes,void 0,i)}for(var s,c,u,l,d,f,p,m=[],h=pi(e)||e instanceof ti,g=0;g<e.length;g++)s=new j,11===ei&&Y(e,g,h),c=J(e[g],[],s,0===g?r:void 0,i),u=c.length?ne(c,e[g],s,t,n,null,[],[],o):null,u&&u.scope&&U.$$addScopeClass(s.$$element),d=u&&u.terminal||!(l=e[g].childNodes)||!l.length?null:W(l,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||d)&&(m.push(g,u,d),f=!0,p=p||u),o=null;return f?a:null}function Y(e,t,n){var r,i=e[t],o=i.parentNode;if(i.nodeType===Pi)for(;;){if(r=o?i.nextSibling:e[t+1],!r||r.nodeType!==Pi)break;i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===e[t+1]&&e.splice(t+1,1)}}function K(e,t,n){function r(r,i,o,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=ye();for(var o in t.$$slots)t.$$slots[o]?i[o]=K(e,t.$$slots[o],n):i[o]=null;return r}function J(e,t,n,r,i){var o,a,s,c=e.nodeType,u=n.$attr;switch(c){case Ei:a=N(e),ae(t,Et(a),"E",r,i);for(var l,d,f,p,m,h,g=e.attributes,v=0,$=g&&g.length;$>v;v++){var b=!1,w=!1;l=g[v],d=l.name,m=l.value,p=Et(d),h=_e.test(p),h&&(d=d.replace(mo,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var E=p.match(Re);E&&se(E[1])&&(b=d,w=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),f=Et(d.toLowerCase()),u[f]=d,(h||!n.hasOwnProperty(f))&&(n[f]=m,Qe(e,f)&&(n[f]=!0)),ve(e,t,m,f,h),ae(t,f,"A",r,i,b,w)}if("input"===a&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!Te)break;if(s=e.className,C(s)&&(s=s.animVal),S(s)&&""!==s)for(;o=y.exec(s);)f=Et(o[2]),ae(t,f,"C",r,i)&&(n[f]=hi(o[3])),s=s.substr(o.index+o[0].length);break;case Pi:me(t,e.nodeValue);break;case Ti:if(!Pe)break;X(e,t,n,r,i)}return t.sort(le),t}function X(e,t,n,r,i){try{var o=p.exec(e.nodeValue);if(o){var a=Et(o[1]);ae(t,a,"M",r,i)&&(n[a]=hi(o[2]))}}catch(s){}}function Z(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw fo("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===Ei&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return ti(r)}function ee(e,t,n){return function(r,i,o,a,s){return i=Z(i[0],t,n),e(r,i,o,a,s)}}function te(e,t,n,r,i,o){var a;return e?U(t,n,r,i,o):function(){return a||(a=U(t,n,r,i,o),t=n=o=null),a.apply(this,arguments)}}function ne(e,t,n,i,a,s,c,u,l){function f(e,t,n,r){e&&(n&&(e=ee(e,n,r)),e.require=m.require,e.directiveName=h,(E===m||m.$$isolateScope)&&(e=be(e,{isolateScope:!0})),c.push(e)),t&&(n&&(t=ee(t,n,r)),t.require=m.require,t.directiveName=h,(E===m||m.$$isolateScope)&&(t=be(t,{isolateScope:!0})),u.push(t))}function p(e,i,a,s,l){function f(e,t,n,r){var i;if(k(e)||(r=n,n=t,t=e,e=void 0),M&&(i=y),n||(n=M?T.parent():T),!r)return l(e,t,i,n,N);var o=l.$$slots[r];if(o)return o(e,t,i,n,N);if($(o))throw fo("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,Q(T))}var p,m,h,g,v,y,b,T,x,D;t===a?(x=n,T=n.$$element):(T=ti(a),x=new j(T,n)),v=i,E?g=i.$new(!0):w&&(v=i.$parent),l&&(b=f,b.$$boundTransclude=l,b.isSlotFilled=function(e){return!!l.$$slots[e]}),S&&(y=ie(T,x,b,S,g,i,E)),E&&(U.$$addScopeInfo(T,g,!0,!(I&&(I===E||I===E.$$originalDirective))),U.$$addScopeClass(T,!0),g.$$isolateBindings=E.$$isolateBindings,D=we(i,x,g,g.$$isolateBindings,E),D.removeWatches&&g.$on("$destroy",D.removeWatches));for(var _ in y){var R=S[_],O=y[_],L=R.$$bindings.bindToController;if(A){L?O.bindingInfo=we(v,x,O.instance,L,R):O.bindingInfo={};var B=O();B!==O.instance&&(O.instance=B,T.data("$"+R.name+"Controller",B),O.bindingInfo.removeWatches&&O.bindingInfo.removeWatches(),O.bindingInfo=we(v,x,O.instance,L,R))}else O.instance=O(),T.data("$"+R.name+"Controller",O.instance),O.bindingInfo=we(v,x,O.instance,L,R)}for(o(S,function(e,t){var n=e.require;e.bindToController&&!pi(n)&&C(n)&&d(y[t].instance,re(t,n,T,y))}),o(y,function(e){var t=e.instance;if(P(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(n){r(n)}if(P(t.$onInit))try{t.$onInit()}catch(n){r(n)}P(t.$doCheck)&&(v.$watch(function(){t.$doCheck()}),t.$doCheck()),P(t.$onDestroy)&&v.$on("$destroy",function(){t.$onDestroy()})}),p=0,m=c.length;m>p;p++)h=c[p],Ce(h,h.isolateScope?g:i,T,x,h.require&&re(h.directiveName,h.require,T,y),b);var N=i;for(E&&(E.template||null===E.templateUrl)&&(N=g),e&&e(N,a.childNodes,void 0,l),p=u.length-1;p>=0;p--)h=u[p],Ce(h,h.isolateScope?g:i,T,x,h.require&&re(h.directiveName,h.require,T,y),b);o(y,function(e){var t=e.instance;P(t.$postLink)&&t.$postLink()})}l=l||{};for(var m,h,g,v,y,b=-Number.MAX_VALUE,w=l.newScopeDirective,S=l.controllerDirectives,E=l.newIsolateScopeDirective,I=l.templateDirective,T=l.nonTlbTranscludeDirective,x=!1,D=!1,M=l.hasElementTranscludeDirective,_=n.$$element=ti(t),R=s,O=i,L=!1,B=!1,H=0,F=e.length;F>H;H++){m=e[H];var q=m.$$start,V=m.$$end;if(q&&(_=Z(t,q,V)),g=void 0,b>m.priority)break;if(y=m.scope,y&&(m.templateUrl||(C(y)?(fe("new/isolated scope",E||w,m,_),E=m):fe("new/isolated scope",E,m,_)),w=w||m),h=m.name,!L&&(m.replace&&(m.templateUrl||m.template)||m.transclude&&!m.$$tlb)){for(var W,Y=H+1;W=e[Y++];)if(W.transclude&&!W.$$tlb||W.replace&&(W.templateUrl||W.template)){B=!0;break}L=!0}if(!m.templateUrl&&m.controller&&(S=S||ye(),fe("'"+h+"' controller",S[h],m,_),S[h]=m),y=m.transclude)if(x=!0,m.$$tlb||(fe("transclusion",T,m,_),T=m),"element"===y)M=!0,b=m.priority,g=_,_=n.$$element=ti(U.$$createComment(h,n[h])),t=_[0],$e(a,z(g),t),g[0].$$parentNode=g[0].parentNode,O=te(B,g,i,b,R&&R.name,{nonTlbTranscludeDirective:T});else{var K=ye();if(C(y)){g=[];var X=ye(),ne=ye();o(y,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,X[e]=t,K[t]=null,ne[t]=n}),o(_.contents(),function(e){var t=X[Et(N(e))];t?(ne[t]=!0,K[t]=K[t]||[],K[t].push(e)):g.push(e)}),o(ne,function(e,t){if(!e)throw fo("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var ae in K)K[ae]&&(K[ae]=te(B,K[ae],i))}else g=ti(je(t)).contents();_.empty(),O=te(B,g,i,void 0,void 0,{needsNewScope:m.$$isolateScope||m.$$newScope}),O.$$slots=K}if(m.template)if(D=!0,fe("template",I,m,_),I=m,y=P(m.template)?m.template(_,n):m.template,y=Me(y),m.replace){if(R=m,g=ke(y)?[]:Pt(he(m.templateNamespace,hi(y))),t=g[0],1!==g.length||t.nodeType!==Ei)throw fo("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h,"");$e(a,_,t);var se={$attr:{}},le=J(t,[],se),de=e.splice(H+1,e.length-(H+1));(E||w)&&oe(le,E,w),e=e.concat(le).concat(de),ce(n,se),F=e.length}else _.html(y);if(m.templateUrl)D=!0,fe("template",I,m,_),I=m,m.replace&&(R=m),p=ue(e.splice(H,e.length-H),_,n,a,x&&O,c,u,{controllerDirectives:S,newScopeDirective:w!==m&&w,newIsolateScopeDirective:E,templateDirective:I,nonTlbTranscludeDirective:T}),F=e.length;else if(m.compile)try{v=m.compile(_,n,O);var pe=m.$$originalDirective||m;P(v)?f(null,G(pe,v),q,V):v&&f(G(pe,v.pre),G(pe,v.post),q,V)}catch(me){r(me,Q(_))}m.terminal&&(p.terminal=!0,b=Math.max(b,m.priority))}return p.scope=w&&w.scope===!0,p.transcludeOnThisElement=x,p.templateOnThisElement=D,p.transclude=O,l.hasElementTranscludeDirective=M,p}function re(e,t,n,r){var i;if(S(t)){var a=t.match(E),s=t.substring(a[0].length),c=a[1]||a[3],u="?"===a[2];if("^^"===c?n=n.parent():(i=r&&r[s],i=i&&i.instance),!i){var l="$"+s+"Controller";i=c?n.inheritedData(l):n.data(l)}if(!i&&!u)throw fo("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(pi(t)){i=[];for(var d=0,f=t.length;f>d;d++)i[d]=re(e,t[d],n,r)}else C(t)&&(i={},o(t,function(t,o){i[o]=re(e,t,n,r)}));return i||null}function ie(e,t,n,r,i,o,a){var s=ye();for(var u in r){var l=r[u],d={$scope:l===a||l.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:n},f=l.controller;"@"===f&&(f=t[l.name]);var p=c(f,d,!0,l.controllerAs);s[l.name]=p,e.data("$"+l.name+"Controller",p.instance)}return s}function oe(e,t,n){for(var r=0,i=e.length;i>r;r++)e[r]=m(e[r],{$$isolateScope:t,$$newScope:n})}function ae(e,n,r,o,a,s,c){if(n===a)return null;var u=null;if(l.hasOwnProperty(n))for(var d,p=t.get(n+f),h=0,g=p.length;g>h;h++)if(d=p[h],($(o)||o>d.priority)&&-1!==d.restrict.indexOf(r)){if(s&&(d=m(d,{$$start:s,$$end:c})),!d.$$bindings){var v=d.$$bindings=i(d,d.name);C(v.isolateScope)&&(d.$$isolateBindings=v.isolateScope)}e.push(d),u=d}return u}function se(e){if(l.hasOwnProperty(e))for(var n,r=t.get(e+f),i=0,o=r.length;o>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function ce(e,t){var n=t.$attr,r=e.$attr;o(e,function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r.length?r+=("style"===i?";":" ")+t[i]:r=t[i]),e.$set(i,r,!0,n[i]))}),o(t,function(t,i){e.hasOwnProperty(i)||"$"===i.charAt(0)||(e[i]=t,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function ue(e,t,n,i,s,c,u,l){var d,f,p=[],h=t[0],g=e.shift(),v=m(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),y=P(g.templateUrl)?g.templateUrl(t,n):g.templateUrl,$=g.templateNamespace;return t.empty(),a(y).then(function(r){var a,m,b,w;if(r=Me(r),g.replace){if(b=ke(r)?[]:Pt(he($,hi(r))),a=b[0],1!==b.length||a.nodeType!==Ei)throw fo("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,y);m={$attr:{}},$e(i,t,a);var S=J(a,[],m);C(g.scope)&&oe(S,!0),e=S.concat(e),ce(n,m)}else a=h,t.html(r);for(e.unshift(v),d=ne(e,a,n,s,t,g,c,u,l),o(i,function(e,n){e===a&&(i[n]=t[0])}),f=W(t[0].childNodes,s);p.length;){var E=p.shift(),I=p.shift(),P=p.shift(),T=p.shift(),x=t[0];if(!E.$$destroyed){if(I!==h){var k=I.className;l.hasElementTranscludeDirective&&g.replace||(x=je(a)),$e(P,ti(I),x),H(ti(x),k)}w=d.transcludeOnThisElement?K(E,d.transclude,T):T,d(f,E,x,i,w)}}p=null})["catch"](function(e){e instanceof Error&&r(e)}),function(e,t,n,r,i){var o=i;t.$$destroyed||(p?p.push(t,n,r,o):(d.transcludeOnThisElement&&(o=K(t,d.transclude,i)),d(f,t,n,r,o)))}}function le(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function fe(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw fo("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,Q(r))}function me(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&U.$$addBindingClass(t),function(e,t){var i=t.parent();n||U.$$addBindingClass(i),U.$$addBindingInfo(i,r.expressions),e.$watch(r,function(e){t[0].nodeValue=e})}}})}function he(t,n){switch(t=Jr(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function ge(e,t){if("srcdoc"===t)return v.HTML;var n=N(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return v.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return v.RESOURCE_URL}function ve(e,t,r,i,o){var a=ge(e,i),s=!o,c=w[i]||o,u=n(r,s,a,c);if(u){if("multiple"===i&&"select"===N(e))throw fo("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Q(e));if(I.test(i))throw fo("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function(e,t,o){var s=o.$$observers||(o.$$observers=ye()),l=o[i];l!==r&&(u=l&&n(l,!0,a,c),r=l),u&&(o[i]=u(e),(s[i]||(s[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||e).$watch(u,function(e,t){"class"===i&&e!==t?o.$updateClass(e,t):o.$set(i,e)}))}}}})}}function $e(t,n,r){var i,o,a=n[0],s=n.length,c=a.parentNode;if(t)for(i=0,o=t.length;o>i;i++)if(t[i]===a){t[i++]=r;for(var u=i,l=u+s-1,d=t.length;d>u;u++,l++)d>l?t[u]=t[l]:delete t[u];t.length-=s-1,t.context===a&&(t.context=r);break}c&&c.replaceChild(r,a);var f=e.document.createDocumentFragment();for(i=0;s>i;i++)f.appendChild(n[i]);for(ti.hasData(a)&&(ti.data(r,ti.data(a)),ti(a).off("$destroy")),ti.cleanData(f.querySelectorAll("*")),i=1;s>i;i++)delete n[i];n[0]=r,n.length=1}function be(e,t){return d(function(){return e.apply(null,arguments)},e,t)}function Ce(e,t,n,i,o,a){try{e(t,n,i,o,a)}catch(s){r(s,Q(n))}}function we(e,t,r,i,a){function c(t,n,i){!P(r.$onChanges)||n===i||n!==n&&i!==i||(Se||(e.$$postDigest(L),Se=[]),l||(l={},Se.push(u)),l[t]&&(i=l[t].previousValue),l[t]=new St(i,n))}function u(){r.$onChanges(l),l=void 0}var l,d=[],f={};return o(i,function(i,o){var u,l,p,m,g,v=i.attrName,y=i.optional,$=i.mode;switch($){case"@":y||Yr.call(t,v)||(r[o]=t[v]=void 0),g=t.$observe(v,function(e){if(S(e)||_(e)){var t=r[o];c(o,e,t),r[o]=e}}),t.$$observers[v].$$scope=e,u=t[v],S(u)?r[o]=n(u)(e):_(u)&&(r[o]=u),f[o]=new St(po,r[o]),d.push(g);break;case"=":if(!Yr.call(t,v)){if(y)break;t[v]=void 0}if(y&&!t[v])break;l=s(t[v]),m=l.literal?q:function(e,t){return e===t||e!==e&&t!==t},p=l.assign||function(){throw u=r[o]=l(e),fo("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[v],v,a.name)},u=r[o]=l(e);var b=function(t){return m(t,r[o])||(m(t,u)?p(e,t=r[o]):r[o]=t),u=t};b.$stateful=!0,g=i.collection?e.$watchCollection(t[v],b):e.$watch(s(t[v],b),null,l.literal),d.push(g);break;case"<":if(!Yr.call(t,v)){if(y)break;t[v]=void 0}if(y&&!t[v])break;l=s(t[v]);var C=l.literal,w=r[o]=l(e);f[o]=new St(po,r[o]),g=e.$watch(l,function(e,t){if(t===e){if(t===w||C&&q(t,w))return;t=w}c(o,e,t),r[o]=e},C),d.push(g);break;case"&":if(l=t.hasOwnProperty(v)?s(t[v]):h,l===h&&y)break;r[o]=function(t){return l(e,t)}}}),{initialChanges:f,removeWatches:d.length&&function(){for(var e=0,t=d.length;t>e;++e)d[e]()}}}var Se,Ee=/^\w/,Ie=e.document.createElement("div"),Pe=M,Te=R,xe=D;j.prototype={$normalize:Et,$addClass:function(e){e&&e.length>0&&T.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&T.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=It(e,t);n&&n.length&&T.addClass(this.$$element,n);var r=It(t,e);r&&r.length&&T.removeClass(this.$$element,r)},$set:function(e,t,n,i){var a,s=this.$$element[0],c=Qe(s,e),u=et(e),l=e;if(c?(this.$$element.prop(e,t),i=c):u&&(this[u]=t,l=u),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e],i||(this.$attr[e]=i=de(e,"-"))),a=N(this.$$element),"a"===a&&("href"===e||"xlinkHref"===e)||"img"===a&&"src"===e)this[e]=t=O(t,"src"===e);else if("img"===a&&"srcset"===e&&b(t)){for(var d="",f=hi(t),p=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,m=/\s/.test(f)?p:/(,)/,h=f.split(m),g=Math.floor(h.length/2),v=0;g>v;v++){var y=2*v;d+=O(hi(h[y]),!0),d+=" "+hi(h[y+1])}var C=hi(h[2*v]).split(/\s/);d+=O(hi(C[0]),!0),2===C.length&&(d+=" "+hi(C[1])),this[e]=t=d}n!==!1&&(null===t||$(t)?this.$$element.removeAttr(i):Ee.test(i)?this.$$element.attr(i,t):B(this.$$element[0],i,t));var w=this.$$observers;w&&o(w[l],function(e){try{e(t)}catch(n){r(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=ye()),i=r[e]||(r[e]=[]);return i.push(t),u.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||$(n[e])||t(n[e])}),function(){F(i,t)}}};var Ae=n.startSymbol(),De=n.endSymbol(),Me="{{"===Ae&&"}}"===De?g:function(e){return e.replace(/\{\{/g,Ae).replace(/}}/g,De)},_e=/^ngAttr[A-Z]/,Re=/^(.+)Start$/;return U.$$addBindingInfo=x?function(e,t){var n=e.data("$binding")||[];pi(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:h,U.$$addBindingClass=x?function(e){H(e,"ng-binding")}:h,U.$$addScopeInfo=x?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:h,U.$$addScopeClass=x?function(e,t){H(e,t?"ng-isolate-scope":"ng-scope")}:h,U.$$createComment=function(t,n){var r="";return x&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},U}]}function St(e,t){this.previousValue=e,this.currentValue=t}function Et(e){return e.replace(mo,"").replace(ho,Te)}function It(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function Pt(e){e=ti(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];(n.nodeType===Ti||n.nodeType===Pi&&""===n.nodeValue.trim())&&oi.call(e,t,1)}return e}function Tt(e,t){if(t&&S(t))return t;if(S(e)){var n=vo.exec(e);if(n)return n[3]}}function xt(){var e={},n=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){he(t,"controller"),C(t)?d(e,t):e[t]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(r,i){function o(e,n,r,i){if(!e||!C(e.$scope))throw t("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,n);e.$scope[n]=r}return function(t,a,s,c){var u,l,f,p;if(s=s===!0,c&&S(c)&&(p=c),S(t)){if(l=t.match(vo),!l)throw go("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);if(f=l[1],p=p||l[3],t=e.hasOwnProperty(f)?e[f]:ge(a.$scope,f,!0)||(n?ge(i,f,!0):void 0),!t)throw go("ctrlreg","The controller with the name '{0}' is not registered.",f);me(t,f,!0)}if(s){var m=(pi(t)?t[t.length-1]:t).prototype;return u=Object.create(m||null),p&&o(a,p,u,f||t.name),d(function(){var e=r.invoke(t,u,a,f);return e!==u&&(C(e)||P(e))&&(u=e,p&&o(a,p,u,f||t.name)),u},{instance:u,identifier:p})}return u=r.instantiate(t,a,f),p&&o(a,p,u,f||t.name),u}}]}function kt(){this.$get=["$window",function(e){return ti(e.document)}]}function At(){this.$get=["$document","$rootScope",function(e,t){function n(){i=r.hidden}var r=e[0],i=r&&r.hidden;return e.on("visibilitychange",n),t.$on("$destroy",function(){e.off("visibilitychange",n)}),function(){return i}}]}function Dt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function Mt(e){return C(e)?I(e)?e.toISOString():Y(e):e}function _t(){this.$get=function(){return function(e){if(!e)return"";var t=[];return a(e,function(e,n){null===e||$(e)||(pi(e)?o(e,function(e){t.push(ie(n)+"="+ie(Mt(e)))}):t.push(ie(n)+"="+ie(Mt(e))))}),t.join("&")}}}function Rt(){this.$get=function(){return function(e){function t(e,r,i){null===e||$(e)||(pi(e)?o(e,function(e,n){t(e,r+"["+(C(e)?n:"")+"]")}):C(e)&&!I(e)?a(e,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):n.push(ie(r)+"="+ie(Mt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function Ot(e,t){if(S(e)){var n=e.replace(So,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf($o)||Lt(n))&&(e=K(n))}}return e}function Lt(e){var t=e.match(Co);return t&&wo[t[0]].test(e)}function jt(e){function t(e,t){e&&(r[e]=r[e]?r[e]+", "+t:t)}var n,r=ye();return S(e)?o(e.split("\n"),function(e){n=e.indexOf(":"),t(Jr(hi(e.substr(0,n))),hi(e.substr(n+1)))}):C(e)&&o(e,function(e,n){t(Jr(n),hi(e))}),r}function Bt(e){var t;return function(n){if(t||(t=jt(e)),n){var r=t[Jr(n)];return void 0===r&&(r=null),r}return t}}function Nt(e,t,n,r){return P(r)?r(e,t,n):(o(r,function(r){e=r(e,t,n)}),e)}function Ht(e){return e>=200&&300>e}function Ft(){var e=this.defaults={transformResponse:[Ot],transformRequest:[function(e){return!C(e)||A(e)||M(e)||D(e)?e:Y(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ce(bo),put:Ce(bo),patch:Ce(bo)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},n=!1;this.useApplyAsync=function(e){return b(e)?(n=!!e,this):n};var r=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(i,a,s,c,u,l,f,p){function m(n){function r(e,t){for(var n=0,r=t.length;r>n;){var i=t[n++],o=t[n++];e=e.then(i,o)}return t.length=0,e}function a(){i.$$completeOutstandingRequest(h)}function s(e,t){var n,r={};return o(e,function(e,i){P(e)?(n=e(t),null!=n&&(r[i]=n)):r[i]=e}),r}function c(t){var n,r,i,o=e.headers,a=d({},t.headers);o=d({},o.common,o[Jr(t.method)]);e:for(n in o){r=Jr(n);for(i in a)if(Jr(i)===r)continue e;a[n]=o[n]}return s(a,Ce(t))}function u(t){var n=t.headers,r=Nt(t.data,Bt(n),void 0,t.transformRequest);return $(r)&&o(n,function(e,t){"content-type"===Jr(t)&&delete n[t]}),$(t.withCredentials)&&!$(e.withCredentials)&&(t.withCredentials=e.withCredentials),y(t,r).then(m,m)}function m(e){var t=d({},e);return t.data=Nt(e.data,e.headers,e.status,g.transformResponse),Ht(e.status)?t:l.reject(t)}if(!C(n))throw t("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!S(p.valueOf(n.url)))throw t("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var g=d({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},n);g.headers=c(n),g.method=Xr(g.method),g.paramSerializer=S(g.paramSerializer)?f.get(g.paramSerializer):g.paramSerializer,i.$$incOutstandingRequestCount();var v=[],b=[],w=l.resolve(g);return o(T,function(e){(e.request||e.requestError)&&v.unshift(e.request,e.requestError),(e.response||e.responseError)&&b.push(e.response,e.responseError)}),w=r(w,v),w=w.then(u),w=r(w,b),w=w["finally"](a)}function g(e){o(arguments,function(e){m[e]=function(t,n){return m(d({},n||{},{method:e,url:t}))}})}function v(e){o(arguments,function(e){m[e]=function(t,n,r){return m(d({},r||{},{method:e,url:t,data:n}))}})}function y(t,r){function i(e){if(e){var t={};return o(e,function(e,r){t[r]=function(t){function r(){e(t)}n?u.$applyAsync(r):u.$$phase?r():u.$apply(r)}}),t}}function c(e,t,r,i){function o(){d(t,e,r,i)}g&&(Ht(e)?g.put(k,[e,t,jt(r),i]):g.remove(k)),n?u.$applyAsync(o):(o(),u.$$phase||u.$apply())}function d(e,n,r,i){n=n>=-1?n:0,(Ht(n)?y.resolve:y.reject)({data:e,status:n,headers:Bt(r),config:t,statusText:i})}function f(e){d(e.data,e.status,Ce(e.headers()),e.statusText)}function h(){var e=m.pendingRequests.indexOf(t);-1!==e&&m.pendingRequests.splice(e,1)}var g,v,y=l.defer(),P=y.promise,T=t.headers,x="jsonp"===Jr(t.method),k=t.url;if(x?k=p.getTrustedResourceUrl(k):S(k)||(k=p.valueOf(k)),k=w(k,t.paramSerializer(t.params)),x&&(k=E(k,t.jsonpCallbackParam)),m.pendingRequests.push(t),P.then(h,h),!t.cache&&!e.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(g=C(t.cache)?t.cache:C(e.cache)?e.cache:I),g&&(v=g.get(k),b(v)?R(v)?v.then(f,f):pi(v)?d(v[1],v[0],Ce(v[2]),v[3]):d(v,200,{},"OK"):g.put(k,P)),$(v)){var A=Hn(t.url)?s()[t.xsrfCookieName||e.xsrfCookieName]:void 0;A&&(T[t.xsrfHeaderName||e.xsrfHeaderName]=A),a(t.method,k,r,c,T,t.timeout,t.withCredentials,t.responseType,i(t.eventHandlers),i(t.uploadEventHandlers))}return P}function w(e,t){return t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}function E(e,t){if(/[&?][^=]+=JSON_CALLBACK/.test(e))throw Eo("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);var n=new RegExp("[&?]"+t+"=");if(n.test(e))throw Eo("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e);return e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}var I=c("$http");e.paramSerializer=S(e.paramSerializer)?f.get(e.paramSerializer):e.paramSerializer;var T=[];return o(r,function(e){T.unshift(S(e)?f.get(e):f.invoke(e))}),m.pendingRequests=[],g("get","delete","head","jsonp"),v("post","put","patch"),m.defaults=e,m}]}function Ut(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function qt(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return Vt(e,r,e.defer,t,n[0])}]}function Vt(e,t,n,r,i){function a(e,t,n){e=e.replace("JSON_CALLBACK",t);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=e,o.async=!0,a=function(e){o.removeEventListener("load",a),o.removeEventListener("error",a),i.body.removeChild(o),o=null;var s=-1,c="unknown";e&&("load"!==e.type||r.wasCalled(t)||(e={type:"error"}),c=e.type,s="error"===e.type?404:200),n&&n(s,c)},o.addEventListener("load",a),o.addEventListener("error",a),i.body.appendChild(o),a}return function(i,s,c,u,l,d,f,p,m,h){function g(){C&&C(),w&&w.abort()}function v(e,t,r,i,o){b(I)&&n.cancel(I),C=w=null,e(t,r,i,o)}if(s=s||e.url(),"jsonp"===Jr(i))var y=r.createCallback(s),C=a(s,y,function(e,t){var n=200===e&&r.getResponse(y);v(u,e,n,"",t),r.removeCallback(y)});else{var w=t(i,s);w.open(i,s,!0),o(l,function(e,t){b(e)&&w.setRequestHeader(t,e)}),w.onload=function(){var e=w.statusText||"",t="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=t?200:"file"===Nn(s).protocol?404:0),v(u,n,t,w.getAllResponseHeaders(),e)};var S=function(){v(u,-1,null,null,"")};if(w.onerror=S,w.onabort=S,w.ontimeout=S,o(m,function(e,t){w.addEventListener(t,e)}),o(h,function(e,t){w.upload.addEventListener(t,e)}),f&&(w.withCredentials=!0),p)try{w.responseType=p}catch(E){if("json"!==p)throw E}w.send($(c)?null:c)}if(d>0)var I=n(g,d);else R(d)&&d.then(g)}}function zt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(e){return"\\\\\\"+e}function a(n){return n.replace(f,e).replace(p,t)}function s(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function c(o,c,f,p){function m(e){try{return e=D(e),p&&!b(e)?e:$e(e)}catch(t){r(Io.interr(o,t))}}if(!o.length||-1===o.indexOf(e)){var h;if(!c){var g=a(o);h=v(g),h.exp=o,h.expressions=[],h.$$watchDelegate=s}return h}p=!!p;for(var y,C,w,S=0,E=[],I=[],T=o.length,x=[],k=[];T>S;){if(-1===(y=o.indexOf(e,S))||-1===(C=o.indexOf(t,y+u))){S!==T&&x.push(a(o.substring(S)));break}S!==y&&x.push(a(o.substring(S,y))),w=o.substring(y+u,C),E.push(w),I.push(n(w,m)),S=C+l,k.push(x.length),x.push("")}if(f&&x.length>1&&Io.throwNoconcat(o),!c||E.length){var A=function(e){for(var t=0,n=E.length;n>t;t++){if(p&&$(e[t]))return;x[k[t]]=e[t]}return x.join("")},D=function(e){return f?i.getTrusted(f,e):i.valueOf(e)};return d(function(e){var t=0,n=E.length,i=new Array(n);try{for(;n>t;t++)i[t]=I[t](e);return A(i)}catch(a){r(Io.interr(o,a))}},{exp:o,expressions:E,$$watchDelegate:function(e,t){var n;return e.$watchGroup(I,function(r,i){var o=A(r);P(t)&&t.call(this,o,r!==i?n:o,e),n=o})}})}}var u=e.length,l=t.length,f=new RegExp(e.replace(/./g,o),"g"),p=new RegExp(t.replace(/./g,o),"g");return c.startSymbol=function(){return e},c.endSymbol=function(){return t},c}]}function Gt(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,i){function o(o,s,c,u){function l(){d?o.apply(null,f):o(h)}var d=arguments.length>4,f=d?z(arguments,4):[],p=t.setInterval,m=t.clearInterval,h=0,g=b(u)&&!u,v=(g?r:n).defer(),y=v.promise;return c=b(c)?c:0,y.$$intervalId=p(function(){g?i.defer(l):e.$evalAsync(l),v.notify(h++),c>0&&h>=c&&(v.resolve(h),m(y.$$intervalId),delete a[y.$$intervalId]),g||e.$apply()},s),a[y.$$intervalId]=v,y}var a={};return o.cancel=function(e){return e&&e.$$intervalId in a?(a[e.$$intervalId].promise["catch"](h),a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0):!1},o}]}function Wt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=re(t[n]);return t.join("/")}function Yt(e,t){var n=Nn(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=p(n.port)||xo[n.protocol]||null}function Kt(e,t){if(Ao.test(e))throw ko("badpath",'Invalid url "{0}".',e);var n="/"!==e.charAt(0);n&&(e="/"+e);var r=Nn(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),
t.$$search=te(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Jt(e,t){return e.slice(0,t.length)===t}function Xt(e,t){return Jt(t,e)?t.substr(e.length):void 0}function Zt(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function Qt(e){return e.replace(/(#.+)|#$/,"$1")}function en(e){return e.substr(0,Zt(e).lastIndexOf("/")+1)}function tn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function nn(e,t,n){this.$$html5=!0,n=n||"",Yt(e,this),this.$$parse=function(e){var n=Xt(t,e);if(!S(n))throw ko("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Kt(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=ne(this.$$search),n=this.$$hash?"#"+re(this.$$hash):"";this.$$url=Wt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a,s;return b(o=Xt(e,r))?(a=o,s=n&&b(o=Xt(n,o))?t+(Xt("/",o)||o):e+a):b(o=Xt(t,r))?s=t+o:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function rn(e,t,n){Yt(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return Jt(t,n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var o,a=Xt(e,r)||Xt(t,r);$(a)||"#"!==a.charAt(0)?this.$$html5?o=a:(o="",$(a)&&(e=r,this.replace())):(o=Xt(n,a),$(o)&&(o=a)),Kt(o,this),this.$$path=i(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var t=ne(this.$$search),r=this.$$hash?"#"+re(this.$$hash):"";this.$$url=Wt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(t,n){return Zt(e)===Zt(t)?(this.$$parse(t),!0):!1}}function on(e,t,n){this.$$html5=!0,rn.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e===Zt(r)?o=r:(a=Xt(t,r))?o=e+n+a:t===r+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=ne(this.$$search),r=this.$$hash?"#"+re(this.$$hash):"";this.$$url=Wt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url,this.$$urlUpdatedByLocation=!0}}function an(e){return function(){return this[e]}}function sn(e,t){return function(n){return $(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function cn(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return b(t)?(e=t,this):e},this.html5Mode=function(e){return _(e)?(t.enabled=e,this):C(e)?(_(e.enabled)&&(t.enabled=e.enabled),_(e.requireBase)&&(t.requireBase=e.requireBase),(_(e.rewriteLinks)||S(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(e,t,n){var i=u.url(),o=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(a){throw u.url(i),u.$$state=o,a}}function c(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,l,d,f=r.baseHref(),p=r.url();if(t.enabled){if(!f&&t.requireBase)throw ko("nobase","$location in HTML5 mode requires a <base> tag to be present!");d=tn(p)+(f||"/"),l=i.history?nn:on}else d=Zt(p),l=rn;var m=en(d);u=new l(d,m,"#"+e),u.$$parseLinkUrl(p,p),u.$$state=r.state();var h=/^\s*(javascript|mailto):/i;o.on("click",function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=ti(e.target);"a"!==N(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!S(i)||!$(s.attr(i))){var c=s.prop("href"),l=s.attr("href")||s.attr("xlink:href");C(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=Nn(c.animVal).href),h.test(c)||!c||s.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(c,l)&&(e.preventDefault(),u.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),Qt(u.absUrl())!==Qt(p)&&r.url(u.absUrl(),!0);var g=!0;return r.onUrlChange(function(e,t){return Jt(e,m)?(n.$evalAsync(function(){var r,i=u.absUrl(),o=u.$$state;e=Qt(e),u.$$parse(e),u.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,o).defaultPrevented,u.absUrl()===e&&(r?(u.$$parse(i),u.$$state=o,s(i,!1,o)):(g=!1,c(i,o)))}),void(n.$$phase||n.$digest())):void(a.location.href=e)}),n.$watch(function(){if(g||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var e=Qt(r.url()),t=Qt(u.absUrl()),o=r.state(),a=u.$$replace,l=e!==t||u.$$html5&&i.history&&o!==u.$$state;(g||l)&&(g=!1,n.$evalAsync(function(){var t=u.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,u.$$state,o).defaultPrevented;u.absUrl()===t&&(r?(u.$$parse(e),u.$$state=o):(l&&s(t,a,o===u.$$state?null:u.$$state),c(e,o)))}))}u.$$replace=!1}),u}]}function un(){var e=!0,t=this;this.debugEnabled=function(t){return b(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack&&a?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||h,a=!1;try{a=!!i.apply}catch(s){}return a?function(){var e=[];return o(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}var a=ei||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function ln(e){return e+""}function dn(e,t){return"undefined"!=typeof e?e:t}function fn(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function pn(e,t){var n=e(t);return!n.$stateful}function mn(e,t){var n,r,i;switch(e.type){case jo.Program:n=!0,o(e.body,function(e){mn(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case jo.Literal:e.constant=!0,e.toWatch=[];break;case jo.UnaryExpression:mn(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case jo.BinaryExpression:mn(e.left,t),mn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case jo.LogicalExpression:mn(e.left,t),mn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case jo.ConditionalExpression:mn(e.test,t),mn(e.alternate,t),mn(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case jo.Identifier:e.constant=!1,e.toWatch=[e];break;case jo.MemberExpression:mn(e.object,t),e.computed&&mn(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case jo.CallExpression:i=e.filter?pn(t,e.callee.name):!1,n=i,r=[],o(e.arguments,function(e){mn(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=i?r:[e];break;case jo.AssignmentExpression:mn(e.left,t),mn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case jo.ArrayExpression:n=!0,r=[],o(e.elements,function(e){mn(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=r;break;case jo.ObjectExpression:n=!0,r=[],o(e.properties,function(e){mn(e.value,t),n=n&&e.value.constant&&!e.computed,e.value.constant||r.push.apply(r,e.value.toWatch),e.computed&&(mn(e.key,t),e.key.constant||r.push.apply(r,e.key.toWatch))}),e.constant=n,e.toWatch=r;break;case jo.ThisExpression:e.constant=!1,e.toWatch=[];break;case jo.LocalsExpression:e.constant=!1,e.toWatch=[]}}function hn(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function gn(e){return e.type===jo.Identifier||e.type===jo.MemberExpression}function vn(e){return 1===e.body.length&&gn(e.body[0].expression)?{type:jo.AssignmentExpression,left:e.body[0].expression,right:{type:jo.NGValueParameter},operator:"="}:void 0}function yn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===jo.Literal||e.body[0].expression.type===jo.ArrayExpression||e.body[0].expression.type===jo.ObjectExpression)}function $n(e){return e.constant}function bn(e,t){this.astBuilder=e,this.$filter=t}function Cn(e,t){this.astBuilder=e,this.$filter=t}function wn(e){return P(e.valueOf)?e.valueOf():_o.call(e)}function Sn(){var e,t,n=ye(),r={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(e,t){r[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(i){function a(e,t){var r,o,a;switch(typeof e){case"string":if(e=e.trim(),a=e,r=n[a],!r){":"===e.charAt(0)&&":"===e.charAt(1)&&(o=!0,e=e.substring(2));var s=new Lo(m),p=new Bo(s,i,m);r=p.parse(e),r.constant?r.$$watchDelegate=d:o?r.$$watchDelegate=r.literal?l:u:r.inputs&&(r.$$watchDelegate=c),n[a]=r}return f(r,t);case"function":return f(e,t);default:return f(h,t)}}function s(e,t,n){return null==e||null==t?e===t:"object"!=typeof e||n||(e=wn(e),"object"!=typeof e)?e===t||e!==e&&t!==t:!1}function c(e,t,n,r,i){var o,a=r.inputs;if(1===a.length){var c=s;return a=a[0],e.$watch(function(e){var t=a(e);return s(t,c,r.literal)||(o=r(e,void 0,void 0,[t]),c=t&&wn(t)),o},t,n,i)}for(var u=[],l=[],d=0,f=a.length;f>d;d++)u[d]=s,l[d]=null;return e.$watch(function(e){for(var t=!1,n=0,i=a.length;i>n;n++){var c=a[n](e);(t||(t=!s(c,u[n],r.literal)))&&(l[n]=c,u[n]=c&&wn(c))}return t&&(o=r(e,void 0,void 0,l)),o},t,n,i)}function u(e,t,n,r,i){function o(e){return r(e)}function a(e,n,r){u=e,P(t)&&t(e,n,r),b(e)&&r.$$postDigest(function(){b(u)&&s()})}var s,u;return s=r.inputs?c(e,a,n,r,i):e.$watch(o,a,n)}function l(e,t,n,r){function i(e){var t=!0;return o(e,function(e){b(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return r(e)},function(e,n,r){s=e,P(t)&&t(e,n,r),i(e)&&r.$$postDigest(function(){i(s)&&a()})},n)}function d(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function f(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==l&&n!==u,o=i?function(n,i,o,a){var s=r&&a?a[0]:e(n,i,o,a);return t(s,n,i)}:function(n,r,i,o){var a=e(n,r,i,o),s=t(a,n,r);return b(a)?s:a};return r=!e.inputs,e.$$watchDelegate&&e.$$watchDelegate!==c?(o.$$watchDelegate=e.$$watchDelegate,o.inputs=e.inputs):t.$stateful||(o.$$watchDelegate=c,o.inputs=e.inputs?e.inputs:[e]),o}var p=vi().noUnsafeEval,m={csp:p,literals:U(r),isIdentifierStart:P(e)&&e,isIdentifierContinue:P(t)&&t};return a}]}function En(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return Pn(function(e){t.$evalAsync(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return b(t)?(e=t,this):e}}function In(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return Pn(function(e){t.defer(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return b(t)?(e=t,this):e}}function Pn(e,n,r){function i(){return new a}function a(){var e=this.promise=new s;this.resolve=function(t){f(e,t)},this.reject=function(t){m(e,t)},this.notify=function(t){g(e,t)}}function s(){this.$$state={status:0}}function c(t){var n,i,o;o=t.pending,t.processScheduled=!1,t.pending=void 0;try{for(var a=0,s=o.length;s>a;++a){t.pur=!0,i=o[a][0],n=o[a][t.status];try{P(n)?f(i,n(t.value)):1===t.status?f(i,t.value):m(i,t.value)}catch(c){m(i,c)}}}finally{--T,r&&0===T&&e(u)}}function u(){for(;!T&&x.length;){var e=x.shift();if(!e.pur){e.pur=!0;var t="Possibly unhandled rejection: "+Se(e.value);e.value instanceof Error?n(e.value,t):n(t)}}}function l(t){!r||t.pending||2!==t.status||t.pur||(0===T&&0===x.length&&e(u),x.push(t)),!t.processScheduled&&t.pending&&(t.processScheduled=!0,++T,e(function(){c(t)}))}function f(e,t){e.$$state.status||(t===e?h(e,I("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):p(e,t))}function p(e,t){function n(t){a||(a=!0,p(e,t))}function r(t){a||(a=!0,h(e,t))}function i(t){g(e,t)}var o,a=!1;try{(C(t)||P(t))&&(o=t.then),P(o)?(e.$$state.status=-1,o.call(t,n,r,i)):(e.$$state.value=t,e.$$state.status=1,l(e.$$state))}catch(s){r(s)}}function m(e,t){e.$$state.status||h(e,t)}function h(e,t){e.$$state.value=t,e.$$state.status=2,l(e.$$state)}function g(t,r){var i=t.$$state.pending;t.$$state.status<=0&&i&&i.length&&e(function(){for(var e,t,o=0,a=i.length;a>o;o++){t=i[o][0],e=i[o][3];try{g(t,P(e)?e(r):r)}catch(s){n(s)}}})}function v(e){var t=new s;return m(t,e),t}function y(e,t,n){var r=null;try{P(n)&&(r=n())}catch(i){return v(i)}return R(r)?r.then(function(){return t(e)},v):t(e)}function b(e,t,n,r){var i=new s;return f(i,e),i.then(t,n,r)}function w(e){var t=new s,n=0,r=pi(e)?[]:{};return o(e,function(e,i){n++,b(e).then(function(e){r[i]=e,--n||f(t,r)},function(e){m(t,e)})}),0===n&&f(t,r),t}function S(e){var t=i();return o(e,function(e){b(e).then(t.resolve,t.reject)}),t.promise}function E(e){function t(e){f(r,e)}function n(e){m(r,e)}if(!P(e))throw I("norslvr","Expected resolverFn, got '{0}'",e);var r=new s;return e(t,n),r}var I=t("$q",TypeError),T=0,x=[];d(s.prototype,{then:function(e,t,n){if($(e)&&$(t)&&$(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&l(this.$$state),r},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return y(t,k,e)},function(t){return y(t,v,e)},t)}});var k=b;return E.prototype=s.prototype,E.defer=i,E.reject=v,E.when=b,E.resolve=k,E.all=w,E.race=S,E}function Tn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function xn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=c(),this.$$ChildScope=null}return t.prototype=e,t}var n=10,r=t("$rootScope"),a=null,s=null;this.digestTtl=function(e){return arguments.length&&(n=e),n},this.$get=["$exceptionHandler","$parse","$browser",function(t,u,l){function d(e){e.currentScope.$$destroyed=!0}function f(e){9===ei&&(e.$$childHead&&f(e.$$childHead),e.$$nextSibling&&f(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function p(){this.$id=c(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function m(e){if(E.$$phase)throw r("inprog","{0} already in progress",E.$$phase);E.$$phase=e}function g(){E.$$phase=null}function v(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function y(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function b(){}function w(){for(;x.length;)try{x.shift()()}catch(e){t(e)}s=null}function S(){null===s&&(s=l.defer(function(){E.$apply(w)}))}p.prototype={constructor:p,$new:function(t,n){var r;return n=n||this,t?(r=new p,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!==this)&&r.$on("$destroy",d),r},$watch:function(e,t,n,r){var i=u(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var o=this,s=o.$$watchers,c={fn:t,last:b,get:i,exp:r||e,eq:!!n};return a=null,P(t)||(c.fn=h),s||(s=o.$$watchers=[],s.$$digestWatchIndex=-1),s.unshift(c),s.$$digestWatchIndex++,v(this,1),function(){var e=F(s,c);e>=0&&(v(o,-1),e<s.$$digestWatchIndex&&s.$$digestWatchIndex--),a=null}},$watchGroup:function(e,t){function n(){c=!1,u?(u=!1,t(i,i,s)):t(i,r,s)}var r=new Array(e.length),i=new Array(e.length),a=[],s=this,c=!1,u=!0;if(!e.length){var l=!0;return s.$evalAsync(function(){l&&t(i,i,s)}),function(){l=!1}}return 1===e.length?this.$watch(e[0],function(e,n,o){i[0]=e,r[0]=n,t(i,e===n?i:r,o)}):(o(e,function(e,t){var o=s.$watch(e,function(e,o){i[t]=e,r[t]=o,c||(c=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function n(e){o=e;var t,n,r,s,c;if(!$(o)){if(C(o))if(i(o)){a!==p&&(a=p,g=a.length=0,d++),t=o.length,g!==t&&(d++,a.length=g=t);for(var u=0;t>u;u++)c=a[u],s=o[u],r=c!==c&&s!==s,r||c===s||(d++,a[u]=s)}else{a!==m&&(a=m={},g=0,d++),t=0;for(n in o)Yr.call(o,n)&&(t++,s=o[n],c=a[n],n in a?(r=c!==c&&s!==s,r||c===s||(d++,a[n]=s)):(g++,a[n]=s,d++));if(g>t){d++;for(n in a)Yr.call(o,n)||(g--,delete a[n])}}else a!==o&&(a=o,d++);return d}}function r(){if(h?(h=!1,t(o,o,c)):t(o,s,c),l)if(C(o))if(i(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var n in o)Yr.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,c=this,l=t.length>1,d=0,f=u(e,n),p=[],m={},h=!0,g=0;return this.$watch(f,r)},$digest:function(){var e,i,o,c,u,d,f,p,h,v,y,$=n,C=this,S=[];m("$digest"),l.$$checkUrlChange(),this===E&&null!==s&&(l.defer.cancel(s),w()),a=null;do{f=!1,h=C;for(var x=0;x<I.length;x++){try{y=I[x],c=y.fn,c(y.scope,y.locals)}catch(A){t(A)}a=null}I.length=0;e:do{if(d=h.$$watchers)for(d.$$digestWatchIndex=d.length;d.$$digestWatchIndex--;)try{if(e=d[d.$$digestWatchIndex])if(u=e.get,(i=u(h))===(o=e.last)||(e.eq?q(i,o):fi(i)&&fi(o))){if(e===a){f=!1;break e}}else f=!0,a=e,e.last=e.eq?U(i,null):i,c=e.fn,c(i,o===b?i:o,h),5>$&&(v=4-$,S[v]||(S[v]=[]),S[v].push({msg:P(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:i,oldVal:o}))}catch(A){t(A)}if(!(p=h.$$watchersCount&&h.$$childHead||h!==C&&h.$$nextSibling))for(;h!==C&&!(p=h.$$nextSibling);)h=h.$parent}while(h=p);if((f||I.length)&&!$--)throw g(),r("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",n,S)}while(f||I.length);for(g();k<T.length;)try{T[k++]()}catch(A){t(A)}T.length=k=0,l.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&l.$$applicationDestroyed(),v(this,-this.$$watchersCount);for(var t in this.$$listenerCount)y(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=h,this.$on=this.$watch=this.$watchGroup=function(){return h},this.$$listeners={},this.$$nextSibling=null,f(this)}},$eval:function(e,t){return u(e)(this,t)},$evalAsync:function(e,t){E.$$phase||I.length||l.defer(function(){I.length&&E.$digest()}),I.push({scope:this,fn:u(e),locals:t})},$$postDigest:function(e){T.push(e)},$apply:function(e){try{m("$apply");try{return this.$eval(e)}finally{g()}}catch(n){t(n)}finally{try{E.$digest()}catch(n){throw t(n),n}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&x.push(t),e=u(e),S()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,y(i,1,e))}},$emit:function(e,n){var r,i,o,a=[],s=this,c=!1,u={name:e,targetScope:s,stopPropagation:function(){c=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=V([u],arguments,1);do{for(r=s.$$listeners[e]||a,u.currentScope=s,i=0,o=r.length;o>i;i++)if(r[i])try{r[i].apply(null,l)}catch(d){t(d)}else r.splice(i,1),i--,o--;if(c)return u.currentScope=null,u;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(e,n){var r=this,i=r,o=r,a={name:e,targetScope:r,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!r.$$listenerCount[e])return a;for(var s,c,u,l=V([a],arguments,1);i=o;){for(a.currentScope=i,s=i.$$listeners[e]||[],c=0,u=s.length;u>c;c++)if(s[c])try{s[c].apply(null,l)}catch(d){t(d)}else s.splice(c,1),c--,u--;if(!(o=i.$$listenerCount[e]&&i.$$childHead||i!==r&&i.$$nextSibling))for(;i!==r&&!(o=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var E=new p,I=E.$$asyncQueue=[],T=E.$$postDigestQueue=[],x=E.$$applyAsyncQueue=[],k=0;return E}]}function kn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return b(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return b(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return i=Nn(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function An(e){return e.replace(Fo,Te)}function Dn(e){if("self"===e)return e;if(S(e)){if(e.indexOf("***")>-1)throw No("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=gi(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(T(e))return new RegExp("^"+e.source+"$");throw No("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Mn(e){var t=[];return b(e)&&o(e,function(e){t.push(Dn(e))}),t}function _n(){this.SCE_CONTEXTS=Ho;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Mn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Mn(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Hn(t):!!e.exec(t.href)}function i(n){var i,o,a=Nn(n.toString()),s=!1;for(i=0,o=e.length;o>i;i++)if(r(e[i],a)){s=!0;break}if(s)for(i=0,o=t.length;o>i;i++)if(r(t[i],a)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var n=d.hasOwnProperty(e)?d[e]:null;if(!n)throw No("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||$(t)||""===t)return t;if("string"!=typeof t)throw No("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof l?e.$$unwrapTrustedValue():e}function c(e,t){if(null===t||$(t)||""===t)return t;var n=d.hasOwnProperty(e)?d[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===Ho.RESOURCE_URL){if(i(t))return t;throw No("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Ho.HTML)return u(t);throw No("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(e){throw No("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(u=n.get("$sanitize"));var l=o(),d={};return d[Ho.HTML]=o(l),d[Ho.CSS]=o(l),d[Ho.URL]=o(l),d[Ho.JS]=o(l),d[Ho.RESOURCE_URL]=o(d[Ho.URL]),{trustAs:a,getTrusted:c,valueOf:s}}]}function Rn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>ei)throw No("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Ce(Ho);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=g),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,function(t){return r.getTrusted(e,t)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return o(Ho,function(e,t){var n=Jr(t);r[An("parse_as_"+n)]=function(t){return i(e,t)},r[An("get_trusted_"+n)]=function(t){return a(e,t)},r[An("trust_as_"+n)]=function(t){return s(e,t)}}),r}]}function On(){this.$get=["$window","$document",function(e,t){var n={},r=e.nw&&e.nw.process,i=!r&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),o=!i&&e.history&&e.history.pushState,a=p((/android (\d+)/.exec(Jr((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),c=t[0]||{},u=c.body&&c.body.style,l=!1,d=!1;return u&&(l=!!("transition"in u||"webkitTransition"in u),d=!!("animation"in u||"webkitAnimation"in u)),{history:!(!o||4>a||s),hasEvent:function(e){if("input"===e&&ei)return!1;if($(n[e])){var t=c.createElement("div");n[e]="on"+e in t}return n[e]},csp:vi(),transitions:l,animations:d,android:a}}]}function Ln(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,r,i,o){function a(s,c){function u(e){return c||(e=Uo("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText),t(e)),i.reject(e)}a.totalPendingRequests++,(!S(s)||$(n.get(s)))&&(s=o.getTrustedResourceUrl(s));var l=r.defaults&&r.defaults.transformResponse;return pi(l)?l=l.filter(function(e){return e!==Ot}):l===Ot&&(l=null),r.get(s,d({cache:n,transformResponse:l},e))["finally"](function(){a.totalPendingRequests--}).then(function(e){return n.put(s,e.data),e.data},u)}return a.totalPendingRequests=0,a}]}function jn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return o(r,function(e){var r=li.element(e).data("$binding");r&&o(r,function(r){if(n){var o=new RegExp("(^|\\s)"+gi(t)+"(\\s|\\||$)");o.test(r)&&i.push(e)}else-1!==r.indexOf(t)&&i.push(e)})}),i},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function Bn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,s,c){P(o)||(c=s,s=o,o=h);var u,l=z(arguments,3),d=b(c)&&!c,f=(d?r:n).defer(),p=f.promise;return u=t.defer(function(){try{f.resolve(o.apply(null,l))}catch(t){f.reject(t),i(t)}finally{delete a[p.$$timeoutId]}d||e.$apply()},s),p.$$timeoutId=u,a[u]=f,p}var a={};return o.cancel=function(e){return e&&e.$$timeoutId in a?(a[e.$$timeoutId].promise["catch"](h),a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function Nn(e){var t=e;return ei&&(qo.setAttribute("href",t),t=qo.href),qo.setAttribute("href",t),{href:qo.href,protocol:qo.protocol?qo.protocol.replace(/:$/,""):"",host:qo.host,search:qo.search?qo.search.replace(/^\?/,""):"",hash:qo.hash?qo.hash.replace(/^#/,""):"",hostname:qo.hostname,port:qo.port,pathname:"/"===qo.pathname.charAt(0)?qo.pathname:"/"+qo.pathname}}function Hn(e){var t=S(e)?Nn(e):e;return t.protocol===Vo.protocol&&t.host===Vo.host}function Fn(){this.$get=v(e)}function Un(e){function t(e){try{return e.cookie||""}catch(t){return""}}function n(e){try{return decodeURIComponent(e)}catch(t){return e}}var r=e[0]||{},i={},o="";return function(){var e,a,s,c,u,l=t(r);if(l!==o)for(o=l,e=o.split("; "),i={},s=0;s<e.length;s++)a=e[s],c=a.indexOf("="),c>0&&(u=n(a.substring(0,c)),$(i[u])&&(i[u]=n(a.substring(c+1))));return i}}function qn(){this.$get=Un}function Vn(e){function t(r,i){if(C(r)){var a={};return o(r,function(e,n){a[n]=t(n,e)}),a}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Kn),t("date",lr),t("filter",zn),t("json",dr),t("limitTo",fr),t("lowercase",Xo),t("number",Jn),t("orderBy",mr),t("uppercase",Zo)}function zn(){return function(e,n,r,o){if(!i(e)){if(null==e)return e;throw t("filter")("notarray","Expected array but received: {0}",e)}o=o||"$";var a,s,c=Yn(n);switch(c){case"function":a=n;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":a=Gn(n,r,o,s);break;default:return e}return Array.prototype.filter.call(e,a)}}function Gn(e,t,n,r){var i,o=C(e)&&n in e;return t===!0?t=q:P(t)||(t=function(e,t){return $(e)?!1:null===e||null===t?e===t:C(t)||C(e)&&!y(e)?!1:(e=Jr(""+e),t=Jr(""+t),-1!==e.indexOf(t))}),i=function(i){return o&&!C(i)?Wn(i,e[n],t,n,!1):Wn(i,e,t,n,r)}}function Wn(e,t,n,r,i,o){var a=Yn(e),s=Yn(t);if("string"===s&&"!"===t.charAt(0))return!Wn(e,t.substring(1),n,r,i);if(pi(e))return e.some(function(e){return Wn(e,t,n,r,i)});switch(a){case"object":var c;if(i){for(c in e)if(c.charAt&&"$"!==c.charAt(0)&&Wn(e[c],t,n,r,!0))return!0;return o?!1:Wn(e,t,n,r,!1)}if("object"===s){for(c in t){var u=t[c];if(!P(u)&&!$(u)){var l=c===r,d=l?e:e[c];if(!Wn(d,u,n,r,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Yn(e){return null===e?"null":typeof e}function Kn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return $(n)&&(n=t.CURRENCY_SYM),$(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Qn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Jn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Qn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Xn(e){var t,n,r,i,o,a=0;for((n=e.indexOf(Go))>-1&&(e=e.replace(Go,"")),(r=e.search(/e/i))>0?(0>n&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):0>n&&(n=e.length),r=0;e.charAt(r)===Wo;r++);if(r===(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)===Wo;)o--;for(n-=r,t=[],i=0;o>=r;r++,i++)t[i]=+e.charAt(r)}return n>zo&&(t=t.splice(0,zo-1),a=n-1,n=1),{d:t,e:a,i:n}}function Zn(e,t,n,r){var i=e.d,o=i.length-e.i;t=$(t)?Math.min(Math.max(n,o),r):+t;var a=t+e.i,s=i[a];if(a>0){i.splice(Math.max(e.i,a));for(var c=a;c<i.length;c++)i[c]=0}else{o=Math.max(0,o),e.i=1,i.length=Math.max(1,a=t+1),i[0]=0;for(var u=1;a>u;u++)i[u]=0}if(s>=5)if(0>a-1){for(var l=0;l>a;l--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[a-1]++;for(;o<Math.max(0,t);o++)i.push(0);var d=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);d&&(i.unshift(d),e.i++)}function Qn(e,t,n,r,i){if(!S(e)&&!E(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,c=Math.abs(e)+"",u="";if(a)u="∞";else{o=Xn(c),Zn(o,i,t.minFrac,t.maxFrac);var l=o.d,d=o.i,f=o.e,p=[];for(s=l.reduce(function(e,t){return e&&!t},!0);0>d;)l.unshift(0),d++;d>0?p=l.splice(d,l.length):(p=l,l=[0]);var m=[];for(l.length>=t.lgSize&&m.unshift(l.splice(-t.lgSize,l.length).join(""));l.length>t.gSize;)m.unshift(l.splice(-t.gSize,l.length).join(""));l.length&&m.unshift(l.join("")),u=m.join(n),p.length&&(u+=r+p.join("")),f&&(u+="e+"+f)}return 0>e&&!s?t.negPre+u+t.negSuf:t.posPre+u+t.posSuf}function er(e,t,n,r){var i="";for((0>e||r&&0>=e)&&(r?e=-e+1:(e=-e,i="-")),e=""+e;e.length<t;)e=Wo+e;return n&&(e=e.substr(e.length-t)),i+e}function tr(e,t,n,r,i){return n=n||0,function(o){var a=o["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),er(a,t,r,i)}}function nr(e,t,n){return function(r,i){var o=r["get"+e](),a=(n?"STANDALONE":"")+(t?"SHORT":""),s=Xr(a+e);return i[s][o]}}function rr(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=er(Math[r>0?"floor":"ceil"](r/60),2)+er(Math.abs(r%60),2)}function ir(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function or(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function ar(e){return function(t){var n=ir(t.getFullYear()),r=or(t),i=+r-+n,o=1+Math.round(i/6048e5);return er(o,e)}}function sr(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function cr(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function ur(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function lr(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=p(t[9]+t[10]),o=p(t[9]+t[11])),a.call(r,p(t[1]),p(t[2])-1,p(t[3]));var c=p(t[4]||0)-i,u=p(t[5]||0)-o,l=p(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,c,u,l,d),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(n,r,i){var a,s,c="",u=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,S(n)&&(n=Jo.test(n)?p(n):t(n)),E(n)&&(n=new Date(n)),!I(n)||!isFinite(n.getTime()))return n;for(;r;)s=Ko.exec(r),s?(u=V(u,s,1),r=u.pop()):(u.push(r),r=null);var l=n.getTimezoneOffset();return i&&(l=J(i,l),n=Z(n,i,!0)),o(u,function(t){a=Yo[t],c+=a?a(n,e.DATETIME_FORMATS,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}}function dr(){return function(e,t){return $(t)&&(t=2),Y(e,t)}}function fr(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):p(t),fi(t)?e:(E(e)&&(e=e.toString()),i(e)?(n=!n||isNaN(n)?0:p(n),n=0>n?Math.max(0,e.length+n):n,t>=0?pr(e,n,n+t):0===n?pr(e,t,e.length):pr(e,Math.max(0,n+t),n)):e)}}function pr(e,t,n){return S(e)?e.slice(t,n):ii.call(e,t,n)}function mr(e){function n(t){return t.map(function(t){var n=1,r=g;if(P(t))r=t;else if(S(t)&&(("+"===t.charAt(0)||"-"===t.charAt(0))&&(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant))){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})}function r(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function o(e){return P(e.valueOf)&&(e=e.valueOf(),r(e))?e:y(e)&&(e=e.toString(),r(e))?e:e}function a(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=o(e)),{value:e,type:n,index:t}}function s(e,t){var n=0,r=e.type,i=t.type;if(r===i){var o=e.value,a=t.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(C(o)&&(o=e.index),C(a)&&(a=t.index)),o!==a&&(n=a>o?-1:1)}else n=i>r?-1:1;return n}return function(e,r,o,c){function u(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:d.map(function(n){return a(n.get(e),t)})}}function l(e,t){for(var n=0,r=d.length;r>n;n++){var i=p(e.predicateValues[n],t.predicateValues[n]);if(i)return i*d[n].descending*f}return p(e.tieBreaker,t.tieBreaker)*f}if(null==e)return e;if(!i(e))throw t("orderBy")("notarray","Expected array but received: {0}",e);pi(r)||(r=[r]),0===r.length&&(r=["+"]);var d=n(r),f=o?-1:1,p=P(c)?c:s,m=Array.prototype.map.call(e,u);return m.sort(l),e=m.map(function(e){return e.value})}}function hr(e){return P(e)&&(e={link:e}),e.restrict=e.restrict||"AC",v(e)}function gr(e,t){e.$name=t}function vr(e,t,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=ta,this.$$element=e,this.$$animate=r,yr(this)}function yr(e){e.$$classCache={},e.$$classCache[Na]=!(e.$$classCache[Ba]=e.$$element.hasClass(Ba))}function $r(e){function t(e,t,n,r){e[t]||(e[t]={}),a(e[t],n,r)}function n(e,t,n,r){e[t]&&s(e[t],n,r),br(e[t])&&(e[t]=void 0)}function r(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function i(e,t,n){t=t?"-"+de(t,"-"):"",r(e,Ba+t,n===!0),r(e,Na+t,n===!1)}var o=e.clazz,a=e.set,s=e.unset;o.prototype.$setValidity=function(e,o,c){$(o)?t(this,"$pending",e,c):n(this,"$pending",e,c),_(o)?o?(s(this.$error,e,c),a(this.$$success,e,c)):(a(this.$error,e,c),s(this.$$success,e,c)):(s(this.$error,e,c),s(this.$$success,e,c)),this.$pending?(r(this,na,!0),this.$valid=this.$invalid=void 0,i(this,"",null)):(r(this,na,!1),this.$valid=br(this.$error),this.$invalid=!this.$valid,i(this,"",this.$valid));var u;u=this.$pending&&this.$pending[e]?void 0:this.$error[e]?!1:this.$$success[e]?!0:null,i(this,e,u),this.$$parentForm.$setValidity(e,u,this)}}function br(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Cr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function wr(e,t,n,r,i,o){Sr(e,t,n,r,i,o),Cr(r)}function Sr(e,t,n,r,i,o){var a=Jr(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,u()})}var c,u=function(e){if(c&&(o.defer.cancel(c),c=null),!s){var i=t.val(),u=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=hi(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))t.on("input",u);else{var l=function(e,t,n){c||(c=o.defer(function(){c=null,t&&t.value===n||u(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||l(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",l)}t.on("change",u),va[a]&&r.$$hasNativeValidators&&a===n.type&&t.on(ga,function(e){if(!c){var t=this[Wr],n=t.badInput,r=t.typeMismatch;c=o.defer(function(){c=null,(t.badInput!==n||t.typeMismatch!==r)&&u(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function Er(e,t){if(I(e))return e;if(S(e)){pa.lastIndex=0;var n=pa.exec(e);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,c=0,u=ir(r),l=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds()),new Date(r,0,u.getDate()+l,o,a,s,c)}}return NaN}function Ir(e,t){return function(n,r){var i,a;if(I(n))return n;if(S(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),sa.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function Pr(e,t,n,r){return function(i,o,a,s,c,u,l){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function f(e){return b(e)&&!I(e)?n(e)||void 0:e}Tr(i,o,a,s),Sr(i,o,a,s,c,u);var p,m=s&&s.$options.getOption("timezone");if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var r=n(e,p);return m&&(r=Z(r,m)),r}}),s.$formatters.push(function(e){if(e&&!I(e))throw Ga("datefmt","Expected `{0}` to be a date",e);return d(e)?(p=e,p&&m&&(p=Z(p,m,!0)),l("date")(e,r,m)):(p=null,"")}),b(a.min)||a.ngMin){var h;s.$validators.min=function(e){return!d(e)||$(h)||n(e)>=h},a.$observe("min",function(e){h=f(e),s.$validate()})}if(b(a.max)||a.ngMax){var g;s.$validators.max=function(e){return!d(e)||$(g)||n(e)<=g},a.$observe("max",function(e){g=f(e),s.$validate()})}}}function Tr(e,t,n,r){var i=t[0],o=r.$$hasNativeValidators=C(i.validity);o&&r.$parsers.push(function(e){var n=t.prop(Wr)||{};return n.badInput||n.typeMismatch?void 0:e})}function xr(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:la.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!E(t))throw Ga("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function kr(e){return b(e)&&!E(e)&&(e=parseFloat(e)),fi(e)?void 0:e}function Ar(e){return(0|e)===e}function Dr(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(e>-1&&1>e){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function Mr(e,t,n){var r=Number(e),i=!Ar(r),o=!Ar(t),a=!Ar(n);if(i||o||a){var s=i?Dr(r):0,c=o?Dr(t):0,u=a?Dr(n):0,l=Math.max(s,c,u),d=Math.pow(10,l);r*=d,t*=d,n*=d,i&&(r=Math.round(r)),o&&(t=Math.round(t)),a&&(n=Math.round(n))}return(r-t)%n===0}function _r(e,t,n,r,i,o){Tr(e,t,n,r),xr(r),Sr(e,t,n,r,i,o);var a,s;if((b(n.min)||n.ngMin)&&(r.$validators.min=function(e){return r.$isEmpty(e)||$(a)||e>=a},n.$observe("min",function(e){a=kr(e),r.$validate()})),(b(n.max)||n.ngMax)&&(r.$validators.max=function(e){return r.$isEmpty(e)||$(s)||s>=e},n.$observe("max",function(e){s=kr(e),r.$validate()})),b(n.step)||n.ngStep){var c;r.$validators.step=function(e,t){return r.$isEmpty(t)||$(c)||Mr(t,a||0,c)},n.$observe("step",function(e){c=kr(e),r.$validate()})}}function Rr(e,t,n,r,i,o){function a(e,r){t.attr(e,n[e]),n.$observe(e,r)}function s(e){if(d=kr(e),!fi(r.$modelValue))if(l){var n=t.val();d>n&&(n=d,t.val(n)),r.$setViewValue(n)}else r.$validate()}function c(e){if(f=kr(e),!fi(r.$modelValue))if(l){var n=t.val();n>f&&(t.val(f),n=d>f?d:f),r.$setViewValue(n)}else r.$validate()}function u(e){p=kr(e),fi(r.$modelValue)||(l&&r.$viewValue!==t.val()?r.$setViewValue(t.val()):r.$validate())}Tr(e,t,n,r),xr(r),Sr(e,t,n,r,i,o);var l=r.$$hasNativeValidators&&"range"===t[0].type,d=l?0:void 0,f=l?100:void 0,p=l?1:void 0,m=t[0].validity,h=b(n.min),g=b(n.max),v=b(n.step),y=r.$render;r.$render=l&&b(m.rangeUnderflow)&&b(m.rangeOverflow)?function(){y(),r.$setViewValue(t.val())}:y,h&&(r.$validators.min=l?function(){return!0}:function(e,t){return r.$isEmpty(t)||$(d)||t>=d},a("min",s)),g&&(r.$validators.max=l?function(){return!0}:function(e,t){return r.$isEmpty(t)||$(f)||f>=t},a("max",c)),v&&(r.$validators.step=l?function(){return!m.stepMismatch}:function(e,t){return r.$isEmpty(t)||$(p)||Mr(t,d||0,p)},a("step",u))}function Or(e,t,n,r,i,o){Sr(e,t,n,r,i,o),Cr(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||ca.test(n)}}function Lr(e,t,n,r,i,o){Sr(e,t,n,r,i,o),Cr(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||ua.test(n)}}function jr(e,t,n,r){var i=!n.ngTrim||"false"!==hi(n.ngTrim);$(n.name)&&t.attr("name",c());var o=function(e){var o;t[0].checked&&(o=n.value,i&&(o=hi(o)),r.$setViewValue(o,e&&e.type))};t.on("click",o),r.$render=function(){var e=n.value;i&&(e=hi(e)),t[0].checked=e===r.$viewValue},n.$observe("value",r.$render)}function Br(e,t,n,r,i){var o;if(b(r)){if(o=e(r),!o.constant)throw Ga("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return i}function Nr(e,t,n,r,i,o,a,s){var c=Br(s,e,"ngTrueValue",n.ngTrueValue,!0),u=Br(s,e,"ngFalseValue",n.ngFalseValue,!1),l=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",l),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return q(e,c)}),r.$parsers.push(function(e){return e?c:u})}function Hr(e,t){function n(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i===t[o])continue e;n.push(i)}return n}function r(e){return e&&e.split(" ")}function i(e){var t=e;return pi(e)?t=e.map(i).join(" "):C(e)&&(t=Object.keys(e).filter(function(t){return e[t]}).join(" ")),t}function a(e){var t=e;if(pi(e))t=e.map(a);else if(C(e)){var n=!1;t=Object.keys(e).filter(function(t){var r=e[t];return!n&&$(r)&&(n=!0),r}),n&&t.push(void 0)}return t}e="ngClass"+e;var s;return["$parse",function(c){return{restrict:"AC",link:function(u,l,d){function f(e){e=h(r(e),1),d.$addClass(e)}function p(e){e=h(r(e),-1),d.$removeClass(e)}function m(e,t){var i=r(e),o=r(t),a=n(i,o),s=n(o,i),c=h(a,-1),u=h(s,1);d.$addClass(u),d.$removeClass(c)}function h(e,t){var n=[];return o(e,function(e){(t>0||I[e])&&(I[e]=(I[e]||0)+t,I[e]===+(t>0)&&n.push(e))}),n.join(" ")}function g(e){e===t?f($):p($),P=e}function v(e){var t=i(e);t!==$&&y(t)}function y(e){P===t&&m($,e),$=e}var $,b=d[e].trim(),C=":"===b.charAt(0)&&":"===b.charAt(1),w=C?a:i,S=c(b,w),E=C?v:y,I=l.data("$classCounts"),P=!0;I||(I=ye(),l.data("$classCounts",I)),"ngClass"!==e&&(s||(s=c("$index",function(e){return 1&e})),u.$watch(s,g)),u.$watch(S,E,C)}}}]}function Fr(e,t,n,r,i,o,a,s,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(e),this.$$parentForm=ta,this.$options=Wa,this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,this.$$scope=e,this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,yr(this),Ur(this)}function Ur(e){e.$$scope.$watch(function(){var t=e.$$ngModelGet(e.$$scope);if(t!==e.$modelValue&&(e.$modelValue===e.$modelValue||t===t)){e.$modelValue=e.$$rawModelValue=t,e.$$parserValid=void 0;for(var n=e.$formatters,r=n.length,i=t;r--;)i=n[r](i);e.$viewValue!==i&&(e.$$updateEmptyClasses(i),e.$viewValue=e.$$lastCommittedViewValue=i,e.$render(),e.$$runValidators(e.$modelValue,e.$viewValue,h))}return t})}function qr(e){this.$$options=e}function Vr(e,t){o(t,function(t,n){b(e[n])||(e[n]=t)})}function zr(e,t){e.prop("selected",t),e.attr("selected",t)}var Gr=/^\/(.+)\/([a-z]*)$/,Wr="validity",Yr=Object.prototype.hasOwnProperty,Kr={objectMaxDepth:5},Jr=function(e){return S(e)?e.toLowerCase():e},Xr=function(e){return S(e)?e.toUpperCase():e},Zr=function(e){return S(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Qr=function(e){return S(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Jr=Zr,Xr=Qr);var ei,ti,ni,ri,ii=[].slice,oi=[].splice,ai=[].push,si=Object.prototype.toString,ci=Object.getPrototypeOf,ui=t("ng"),li=e.angular||(e.angular={}),di=0;ei=e.document.documentMode;var fi=Number.isNaN||function(e){return e!==e};h.$inject=[],g.$inject=[];var pi=Array.isArray,mi=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,hi=function(e){return S(e)?e.trim():e},gi=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},vi=function(){function t(){try{return new Function(""),!1}catch(e){return!0}}if(!b(vi.rules)){var n=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");vi.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else vi.rules={noUnsafeEval:t(),noInlineStyle:!1}}return vi.rules},yi=function(){if(b(yi.name_))return yi.name_;var t,n,r,i,o=bi.length;for(n=0;o>n;++n)if(r=bi[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return yi.name_=i},$i=/:/g,bi=["ng-","data-ng-","ng:","x-ng-"],Ci=ae(e.document),wi=/[A-Z]/g,Si=!1,Ei=1,Ii=2,Pi=3,Ti=8,xi=9,ki=11,Ai={full:"1.6.3",major:1,minor:6,dot:3,codeName:"scriptalicious-bootstrapping"};Le.expando="ng339";var Di=Le.cache={},Mi=1;Le._data=function(e){return this.cache[e[this.expando]]||{}};var _i=/-([a-z])/g,Ri=/^-ms-/,Oi={mouseleave:"mouseout",mouseenter:"mouseover"},Li=t("jqLite"),ji=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Bi=/<|&#?\w+;/,Ni=/<([\w:-]+)/,Hi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Fi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fi.optgroup=Fi.option,Fi.tbody=Fi.tfoot=Fi.colgroup=Fi.caption=Fi.thead,Fi.th=Fi.td;var Ui=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},qi=Le.prototype={ready:Ze,toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return ti(e>=0?this[e]:this[this.length+e])},length:0,push:ai,sort:[].sort,splice:[].splice},Vi={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Vi[Jr(e)]=e});var zi={};o("input,select,option,textarea,button,form,details".split(","),function(e){zi[e]=!0});var Gi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};o({data:Ue,removeData:He,hasData:De,cleanData:Me},function(e,t){Le[t]=e}),o({data:Ue,inheritedData:Ye,scope:function(e){return ti.data(e,"$scope")||Ye(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return ti.data(e,"$isolateScope")||ti.data(e,"$isolateScopeNoTemplate")},controller:We,injector:function(e){return Ye(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:qe,css:function(e,t,n){return t=Pe(t),b(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,n){var r,i=e.nodeType;if(i!==Pi&&i!==Ii&&i!==Ti&&e.getAttribute){var o=Jr(t),a=Vi[o];return b(n)?void(null===n||n===!1&&a?e.removeAttribute(t):e.setAttribute(t,a?o:n)):(r=e.getAttribute(t),a&&null!==r&&(r=o),null===r?void 0:r)}},prop:function(e,t,n){return b(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if($(t)){var n=e.nodeType;return n===Ei||n===Pi?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if($(t)){if(e.multiple&&"select"===N(e)){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){return $(t)?e.innerHTML:(Be(e,!0),void(e.innerHTML=t))},empty:Ke},function(e,t){Le.prototype[t]=function(t,n){var r,i,o=this.length;if(e!==Ke&&$(2===e.length&&e!==qe&&e!==We?t:n)){if(C(t)){for(r=0;o>r;r++)if(e===Ue)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var a=e.$dv,s=$(a)?Math.min(o,1):o,c=0;s>c;c++){var u=e(this[c],t,n);a=a?a+u:u}return a}for(r=0;o>r;r++)e(this[r],t,n);return this}}),o({removeData:He,on:function(e,t,n,r){if(b(r))throw Li("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ae(e)){var i=Fe(e,!0),o=i.events,a=i.handle;a||(a=i.handle=tt(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],c=s.length,u=function(t,r,i){var s=o[t];s||(s=o[t]=[],s.specialHandlerWrapper=r,"$destroy"===t||i||e.addEventListener(t,a)),s.push(n)};c--;)t=s[c],Oi[t]?(u(Oi[t],rt),u(t,void 0,!0)):u(t)}},off:Ne,one:function(e,t,n){e=ti(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;Be(e),o(new Le(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){e.nodeType===Ei&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Ei||n===ki){t=new Le(t);for(var r=0,i=t.length;i>r;r++){var o=t[r];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===Ei){var n=e.firstChild;o(new Le(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){Oe(e,ti(t).eq(0).clone()[0])},remove:Je,detach:function(e){Je(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r){t=new Le(t);for(var i=0,o=t.length;o>i;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}}},addClass:ze,removeClass:Ve,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var r=n;$(r)&&(r=!qe(e,t)),(r?ze:Ve)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==ki?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:je,triggerHandler:function(e,t,n){var r,i,a,s=t.type||t,c=Fe(e),u=c&&c.events,l=u&&u[s];l&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:h,type:s,target:e},t.type&&(r=d(r,t)),i=Ce(l),a=n?[r].concat(n):[r],o(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){Le.prototype[t]=function(t,n,r){for(var i,o=0,a=this.length;a>o;o++)$(i)?(i=e(this[o],t,n,r),b(i)&&(i=ti(i))):Ge(i,e(this[o],t,n,r));return b(i)?i:this}}),Le.prototype.bind=Le.prototype.on,Le.prototype.unbind=Le.prototype.off;var Wi=Object.create(null);at.prototype={_idx:function(e){return e===this._lastKey?this._lastIndex:(this._lastKey=e,this._lastIndex=this._keys.indexOf(e),this._lastIndex)},_transformKey:function(e){return fi(e)?Wi:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t?this._values[t]:void 0},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},"delete":function(e){e=this._transformKey(e);var t=this._idx(e);return-1===t?!1:(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Yi=at,Ki=[function(){this.$get=[function(){return Yi}]}],Ji=/^([^(]+?)=>/,Xi=/^[^(]*\(\s*([^)]*)\)/m,Zi=/,/,Qi=/^\s*(_?)(\S+?)\1\s*$/,eo=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,to=t("$injector");dt.$$annotate=lt;var no=t("$animate"),ro=1,io="ng-animate",oo=function(){this.$get=h},ao=function(){var e=new Yi,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(e,t,n){var r=!1;return t&&(t=S(t)?t.split(" "):pi(t)?t:[],o(t,function(t){t&&(r=!0,e[t]=n)})),r}function a(){o(t,function(t){var n=e.get(t);if(n){var r=ht(t.attr("class")),i="",a="";o(n,function(e,t){var n=!!r[t];e!==n&&(e?i+=(i.length?" ":"")+t:a+=(a.length?" ":"")+t)}),o(t,function(e){i&&ze(e,i),a&&Ve(e,a)}),e["delete"](t)}}),t.length=0}function s(n,o,s){var c=e.get(n)||{},u=i(c,o,!0),l=i(c,s,!1);(u||l)&&(e.set(n,c),t.push(n),1===t.length&&r.$$postDigest(a))}return{enabled:h,on:h,off:h,pin:h,push:function(e,t,r,i){i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var o=new n;return o.complete(),o}}}]},so=["$provide",function(e){var t=this,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw no("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(n=e instanceof RegExp?e:null)){var t=new RegExp("[(\\s|\\/)]"+io+"[(\\s|\\/)]");if(t.test(n.toString()))throw n=null,no("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',io)}return n},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=mt(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,o){return r=r&&ti(r),i=i&&ti(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",gt(o))},move:function(n,r,i,o){return r=r&&ti(r),i=i&&ti(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",gt(o))},leave:function(t,n){return e.push(t,"leave",gt(n),function(){t.remove()})},addClass:function(t,n,r){return r=gt(r),r.addClass=pt(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=gt(r),r.removeClass=pt(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=gt(i),i.addClass=pt(i.addClass,n),i.removeClass=pt(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,o){return o=gt(o),o.from=o.from?d(o.from,n):n,o.to=o.to?d(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=pt(o.tempClasses,i),e.push(t,"animate",o)}}}]}],co=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},uo=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,r,i){function a(e){this.setHost(e);var t=n(),o=function(e){i(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){r()?o(e):t(e)},this._state=0}var s=0,c=1,u=2;return a.chain=function(e,t){function n(){return r===e.length?void t(!0):void e[r](function(e){return e===!1?void t(!1):(r++,void n())})}var r=0;n()},a.all=function(e,t){function n(n){i=i&&n,++r===e.length&&t(i)}var r=0,i=!0;o(e,function(e){e.done(n)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===u?e():this._doneCallbacks.push(e)},progress:h,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===s&&(t._state=c,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==u&&(o(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=u)}},a}]},lo=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function i(){return e(function(){o(),s||c.complete(),s=!0}),c}function o(){a.addClass&&(t.addClass(a.addClass),a.addClass=null),a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null),a.to&&(t.css(a.to),a.to=null)}var a=r||{};a.$$prepared||(a=U(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var s,c=new n;return{start:i,end:i}}}]},fo=t("$compile"),po=new Ct;wt.$inject=["$provide","$$sanitizeUriProvider"],St.prototype.isFirstChange=function(){return this.previousValue===po};var mo=/^((?:x|data)[:\-_])/i,ho=/[:\-_]+(.)/g,go=t("$controller"),vo=/^(\S+)(\s+as\s+([\w$]+))?$/,yo=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof ti&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},$o="application/json",bo={"Content-Type":$o+";charset=utf-8"},Co=/^\[|^\{(?!\{)/,wo={"[":/]$/,"{":/}$/},So=/^\)]\}',?\n/,Eo=t("$http"),Io=li.$interpolateMinErr=t("$interpolate");Io.throwNoconcat=function(e){throw Io("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},Io.interr=function(e,t){return Io("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Po=function(){this.$get=function(){function e(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var t=li.callbacks,n={};return{createCallback:function(r){var i="_"+(t.$$counter++).toString(36),o="angular.callbacks."+i,a=e(i);return n[o]=t[i]=a,o},wasCalled:function(e){return n[e].called},getResponse:function(e){return n[e].data},removeCallback:function(e){var r=n[e];delete t[r.id],delete n[e]}}}},To=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,xo={http:80,https:443,ftp:21},ko=t("$location"),Ao=/^\s*[\\/]{2,}/,Do={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:an("$$absUrl"),url:function(e){if($(e))return this.$$url;var t=To.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:an("$$protocol"),host:an("$$host"),port:an("$$port"),path:sn("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(S(e)||E(e))e=e.toString(),this.$$search=te(e);else{if(!C(e))throw ko("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=U(e,{}),o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:$(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:sn("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};o([on,rn,nn],function(e){e.prototype=Object.create(Do),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==nn||!this.$$html5)throw ko("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=$(t)?null:t,this.$$urlUpdatedByLocation=!0,this}});var Mo=t("$parse"),_o={}.constructor.prototype.valueOf,Ro=ye();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Ro[e]=!0});var Oo={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},Lo=function(e){this.options=e};Lo.prototype={constructor:Lo,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=Ro[t],o=Ro[n],a=Ro[r];if(i||o||a){var s=a?r:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||"\x0B"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&56319>=n&&r>=56320&&57343>=r?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=b(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Mo("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Jr(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=Oo[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var jo=function(e,t){this.lexer=e,this.options=t};jo.Program="Program",jo.ExpressionStatement="ExpressionStatement",jo.AssignmentExpression="AssignmentExpression",jo.ConditionalExpression="ConditionalExpression",jo.LogicalExpression="LogicalExpression",jo.BinaryExpression="BinaryExpression",jo.UnaryExpression="UnaryExpression",jo.CallExpression="CallExpression",jo.MemberExpression="MemberExpression",jo.Identifier="Identifier",jo.Literal="Literal",jo.ArrayExpression="ArrayExpression",
jo.Property="Property",jo.ObjectExpression="ObjectExpression",jo.ThisExpression="ThisExpression",jo.LocalsExpression="LocalsExpression",jo.NGValueParameter="NGValueParameter",jo.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:jo.Program,body:e}},expressionStatement:function(){return{type:jo.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!gn(e))throw Mo("lval","Trying to assign a value to a non l-value");e={type:jo.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:jo.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:jo.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:jo.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:jo.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:jo.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:jo.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:jo.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:jo.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=U(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:jo.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:jo.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:jo.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:jo.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:jo.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.filterChain());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:jo.Identifier,name:e.text}},constant:function(){return{type:jo.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:jo.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:jo.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:jo.ObjectExpression,properties:t}},throwError:function(e,t){throw Mo("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Mo("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Mo("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===r||a===i||!t&&!n&&!r&&!i)return o}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},selfReferential:{"this":{type:jo.ThisExpression},$locals:{type:jo.LocalsExpression}}},bn.prototype={compile:function(e){var t=this,n=this.astBuilder.ast(e);this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},mn(n,t.$filter);var r,i="";if(this.stage="assign",r=vn(n)){this.state.computing="assign";var a=this.nextId();this.recurse(r,a),this.return_(a),i="fn.assign="+this.generateFunction("assign","s,v,l")}var s=hn(n.body);t.stage="inputs",o(s,function(e,n){var r="fn"+n;t.state[r]={vars:[],body:[],own:{}},t.state.computing=r;var i=t.nextId();t.recurse(e,i),t.return_(i),t.state.inputs.push(r),e.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(n);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+i+this.watchFns()+"return fn;",u=new Function("$filter","getStringValue","ifDefined","plus",c)(this.$filter,ln,dn,fn);return this.state=this.stage=void 0,u.literal=yn(n),u.constant=$n(n),u},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return o(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return o(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,r,i,a){var s,c,u,l,d,f=this;if(r=r||h,!a&&b(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,r,i,!0));switch(e.type){case jo.Program:o(e.body,function(t,n){f.recurse(t.expression,void 0,void 0,function(e){c=e}),n!==e.body.length-1?f.current().body.push(c,";"):f.return_(c)});break;case jo.Literal:l=this.escape(e.value),this.assign(t,l),r(t||l);break;case jo.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){c=e}),l=e.operator+"("+this.ifDefined(c,0)+")",this.assign(t,l),r(l);break;case jo.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){c=e}),l="+"===e.operator?this.plus(s,c):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(c,0):"("+s+")"+e.operator+"("+c+")",this.assign(t,l),r(l);break;case jo.LogicalExpression:t=t||this.nextId(),f.recurse(e.left,t),f.if_("&&"===e.operator?t:f.not(t),f.lazyRecurse(e.right,t)),r(t);break;case jo.ConditionalExpression:t=t||this.nextId(),f.recurse(e.test,t),f.if_(t,f.lazyRecurse(e.alternate,t),f.lazyRecurse(e.consequent,t)),r(t);break;case jo.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",e.name)),function(){f.if_("inputs"===f.stage||"s",function(){i&&1!==i&&f.if_(f.isNull(f.nonComputedMember("s",e.name)),f.lazyAssign(f.nonComputedMember("s",e.name),"{}")),f.assign(t,f.nonComputedMember("s",e.name))})},t&&f.lazyAssign(t,f.nonComputedMember("l",e.name))),r(t);break;case jo.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),f.recurse(e.object,s,void 0,function(){f.if_(f.notNull(s),function(){e.computed?(c=f.nextId(),f.recurse(e.property,c),f.getStringValue(c),i&&1!==i&&f.if_(f.not(f.computedMember(s,c)),f.lazyAssign(f.computedMember(s,c),"{}")),l=f.computedMember(s,c),f.assign(t,l),n&&(n.computed=!0,n.name=c)):(i&&1!==i&&f.if_(f.isNull(f.nonComputedMember(s,e.property.name)),f.lazyAssign(f.nonComputedMember(s,e.property.name),"{}")),l=f.nonComputedMember(s,e.property.name),f.assign(t,l),n&&(n.computed=!1,n.name=e.property.name))},function(){f.assign(t,"undefined")}),r(t)},!!i);break;case jo.CallExpression:t=t||this.nextId(),e.filter?(c=f.filter(e.callee.name),u=[],o(e.arguments,function(e){var t=f.nextId();f.recurse(e,t),u.push(t)}),l=c+"("+u.join(",")+")",f.assign(t,l),r(t)):(c=f.nextId(),s={},u=[],f.recurse(e.callee,c,s,function(){f.if_(f.notNull(c),function(){o(e.arguments,function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,function(e){u.push(e)})}),l=s.name?f.member(s.context,s.name,s.computed)+"("+u.join(",")+")":c+"("+u.join(",")+")",f.assign(t,l)},function(){f.assign(t,"undefined")}),r(t)}));break;case jo.AssignmentExpression:c=this.nextId(),s={},this.recurse(e.left,void 0,s,function(){f.if_(f.notNull(s.context),function(){f.recurse(e.right,c),l=f.member(s.context,s.name,s.computed)+e.operator+c,f.assign(t,l),r(t||l)})},1);break;case jo.ArrayExpression:u=[],o(e.elements,function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,function(e){u.push(e)})}),l="["+u.join(",")+"]",this.assign(t,l),r(t||l);break;case jo.ObjectExpression:u=[],d=!1,o(e.properties,function(e){e.computed&&(d=!0)}),d?(t=t||this.nextId(),this.assign(t,"{}"),o(e.properties,function(e){e.computed?(s=f.nextId(),f.recurse(e.key,s)):s=e.key.type===jo.Identifier?e.key.name:""+e.key.value,c=f.nextId(),f.recurse(e.value,c),f.assign(f.member(t,s,e.computed),c)})):(o(e.properties,function(t){f.recurse(t.value,e.constant?void 0:f.nextId(),void 0,function(e){u.push(f.escape(t.key.type===jo.Identifier?t.key.name:""+t.key.value)+":"+e)})}),l="{"+u.join(",")+"}",this.assign(t,l)),r(t||l);break;case jo.ThisExpression:this.assign(t,"s"),r(t||"s");break;case jo.LocalsExpression:this.assign(t,"l"),r(t||"l");break;case jo.NGValueParameter:this.assign(t,"v"),r(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){return e?(this.current().body.push(e,"=",t,";"),e):void 0},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,r=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(r,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,i,o){var a=this;return function(){a.recurse(e,t,n,r,i,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(S(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(E(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw Mo("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Cn.prototype={compile:function(e){var t=this,n=this.astBuilder.ast(e);mn(n,t.$filter);var r,i;(r=vn(n))&&(i=this.recurse(r));var a,s=hn(n.body);s&&(a=[],o(s,function(e,n){var r=t.recurse(e);e.input=r,a.push(r),e.watchId=n}));var c=[];o(n.body,function(e){c.push(t.recurse(e.expression))});var u=0===n.body.length?h:1===n.body.length?c[0]:function(e,t){var n;return o(c,function(r){n=r(e,t)}),n};return i&&(u.assign=function(e,t,n){return i(e,n,t)}),a&&(u.inputs=a),u.literal=yn(n),u.constant=$n(n),u},recurse:function(e,t,n){var r,i,a,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case jo.Literal:return this.value(e.value,t);case jo.UnaryExpression:return i=this.recurse(e.argument),this["unary"+e.operator](i,t);case jo.BinaryExpression:return r=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](r,i,t);case jo.LogicalExpression:return r=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](r,i,t);case jo.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case jo.Identifier:return s.identifier(e.name,t,n);case jo.MemberExpression:return r=this.recurse(e.object,!1,!!n),e.computed||(i=e.property.name),e.computed&&(i=this.recurse(e.property)),e.computed?this.computedMember(r,i,t,n):this.nonComputedMember(r,i,t,n);case jo.CallExpression:return a=[],o(e.arguments,function(e){a.push(s.recurse(e))}),e.filter&&(i=this.$filter(e.callee.name)),e.filter||(i=this.recurse(e.callee,!0)),e.filter?function(e,n,r,o){for(var s=[],c=0;c<a.length;++c)s.push(a[c](e,n,r,o));var u=i.apply(void 0,s,o);return t?{context:void 0,name:void 0,value:u}:u}:function(e,n,r,o){var s,c=i(e,n,r,o);if(null!=c.value){for(var u=[],l=0;l<a.length;++l)u.push(a[l](e,n,r,o));s=c.value.apply(c.context,u)}return t?{value:s}:s};case jo.AssignmentExpression:return r=this.recurse(e.left,!0,1),i=this.recurse(e.right),function(e,n,o,a){var s=r(e,n,o,a),c=i(e,n,o,a);return s.context[s.name]=c,t?{value:c}:c};case jo.ArrayExpression:return a=[],o(e.elements,function(e){a.push(s.recurse(e))}),function(e,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,r,i));return t?{value:o}:o};case jo.ObjectExpression:return a=[],o(e.properties,function(e){e.computed?a.push({key:s.recurse(e.key),computed:!0,value:s.recurse(e.value)}):a.push({key:e.key.type===jo.Identifier?e.key.name:""+e.key.value,computed:!1,value:s.recurse(e.value)})}),function(e,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(e,n,r,i)]=a[s].value(e,n,r,i):o[a[s].key]=a[s].value(e,n,r,i);return t?{value:o}:o};case jo.ThisExpression:return function(e){return t?{value:e}:e};case jo.LocalsExpression:return function(e,n){return t?{value:n}:n};case jo.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=b(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=b(a)?-a:-0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,i,o){var a=!e(n,r,i,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),c=t(r,i,o,a),u=fn(s,c);return n?{value:u}:u}},"binary-":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),c=t(r,i,o,a),u=(b(s)?s:0)-(b(c)?c:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)*t(r,i,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)/t(r,i,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)%t(r,i,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)===t(r,i,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!==t(r,i,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)==t(r,i,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!=t(r,i,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<t(r,i,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>t(r,i,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<=t(r,i,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>=t(r,i,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)&&t(r,i,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)||t(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,o,a,s){var c=e(i,o,a,s)?t(i,o,a,s):n(i,o,a,s);return r?{value:c}:c}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(r,i,o,a){var s=i&&e in i?i:r;n&&1!==n&&s&&null==s[e]&&(s[e]={});var c=s?s[e]:void 0;return t?{context:s,name:e,value:c}:c}},computedMember:function(e,t,n,r){return function(i,o,a,s){var c,u,l=e(i,o,a,s);return null!=l&&(c=t(i,o,a,s),c=ln(c),r&&1!==r&&l&&!l[c]&&(l[c]={}),u=l[c]),n?{context:l,name:c,value:u}:u}},nonComputedMember:function(e,t,n,r){return function(i,o,a,s){var c=e(i,o,a,s);r&&1!==r&&c&&null==c[t]&&(c[t]={});var u=null!=c?c[t]:void 0;return n?{context:c,name:t,value:u}:u}},inputs:function(e,t){return function(n,r,i,o){return o?o[t]:e(n,r,i)}}};var Bo=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new jo(e,n),this.astCompiler=n.csp?new Cn(this.ast,t):new bn(this.ast,t)};Bo.prototype={constructor:Bo,parse:function(e){return this.astCompiler.compile(e)}};var No=t("$sce"),Ho={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Fo=/_([a-z])/g,Uo=t("$compile"),qo=e.document.createElement("a"),Vo=Nn(e.location.href);Un.$inject=["$document"],Vn.$inject=["$provide"];var zo=22,Go=".",Wo="0";Kn.$inject=["$locale"],Jn.$inject=["$locale"];var Yo={yyyy:tr("FullYear",4,0,!1,!0),yy:tr("FullYear",2,0,!0,!0),y:tr("FullYear",1,0,!1,!0),MMMM:nr("Month"),MMM:nr("Month",!0),MM:tr("Month",2,1),M:tr("Month",1,1),LLLL:nr("Month",!1,!0),dd:tr("Date",2),d:tr("Date",1),HH:tr("Hours",2),H:tr("Hours",1),hh:tr("Hours",2,-12),h:tr("Hours",1,-12),mm:tr("Minutes",2),m:tr("Minutes",1),ss:tr("Seconds",2),s:tr("Seconds",1),sss:tr("Milliseconds",3),EEEE:nr("Day"),EEE:nr("Day",!0),a:sr,Z:rr,ww:ar(2),w:ar(1),G:cr,GG:cr,GGG:cr,GGGG:ur},Ko=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Jo=/^-?\d+$/;lr.$inject=["$locale"];var Xo=v(Jr),Zo=v(Xr);mr.$inject=["$parse"];var Qo=v({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===si.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),ea={};o(Vi,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!==e){var r=Et("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),ea[r]=function(){return{restrict:"A",priority:100,link:i}}}}),o(Gi,function(e,t){ea[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(Gr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),o(["src","srcset","href"],function(e){var t=Et("ng-"+e);ea[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===si.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(ei&&o&&r.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var ta={$addControl:h,$$renameControl:gr,$removeControl:h,$setValidity:h,$setDirty:h,$setPristine:h,$setSubmitted:h},na="ng-pending",ra="ng-submitted";vr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],vr.prototype={$rollbackViewValue:function(){o(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){o(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){he(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],o(this.$pending,function(t,n){this.$setValidity(n,null,e)},this),o(this.$error,function(t,n){this.$setValidity(n,null,e)},this),o(this.$$success,function(t,n){this.$setValidity(n,null,e)},this),F(this.$$controls,e),e.$$parentForm=ta},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ha),this.$$animate.addClass(this.$$element,Fa),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ha,Fa+" "+ra),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,o(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){o(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,ra),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},$r({clazz:vr,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(F(r,n),0===r.length&&delete e[t])}});var ia=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||h}var i={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:vr,compile:function(n,i){n.addClass(Ha).addClass(Ba);var o=i.name?"name":e&&i.ngForm?"ngForm":!1;return{pre:function(e,n,i,a){var s=a[0];if(!("action"in i)){var c=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};n[0].addEventListener("submit",c),n.on("$destroy",function(){t(function(){n[0].removeEventListener("submit",c)},0,!1)})}var u=a[1]||s.$$parentForm;u.$addControl(s);var l=o?r(s.$name):h;o&&(l(e,s),i.$observe(o,function(t){s.$name!==t&&(l(e,void 0),s.$$parentForm.$$renameControl(s,t),(l=r(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),l(e,void 0),d(s,ta)})}}}};return i}]},oa=ia(),aa=ia(!0),sa=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ca=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,ua=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,la=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,da=/^(\d{4,})-(\d{2})-(\d{2})$/,fa=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,pa=/^(\d{4,})-W(\d\d)$/,ma=/^(\d{4,})-(\d\d)$/,ha=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ga="keydown wheel mousedown",va=ye();o("date,datetime-local,month,time,week".split(","),function(e){va[e]=!0});var ya={text:wr,date:Pr("date",da,Ir(da,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Pr("datetimelocal",fa,Ir(fa,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Pr("time",ha,Ir(ha,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Pr("week",pa,Er,"yyyy-Www"),month:Pr("month",ma,Ir(ma,["yyyy","MM"]),"yyyy-MM"),number:_r,url:Or,email:Lr,radio:jr,range:Rr,checkbox:Nr,hidden:h,button:h,submit:h,reset:h,file:h},$a=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(ya[Jr(a.type)]||ya.text)(i,o,a,s[0],t,e,n,r)}}}}],ba=/^(true|false|\d+)$/,Ca=function(){function e(e,t,n){var r=b(n)?n:9===ei?"":null;e.prop("value",r),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,n){return ba.test(n.ngValue)?function(t,n,r){var i=t.$eval(r.ngValue);e(n,r,i)}:function(t,n,r){t.$watch(r.ngValue,function(t){e(n,r,t)})}}}},wa=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=$e(e)})}}}}],Sa=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var o=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(e){r.textContent=$(e)?"":e})}}}}],Ea=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var o=t(i.ngBindHtml),a=t(i.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(a,function(){var n=o(t);r.html(e.getTrustedHtml(n)||"")})}}}}],Ia=v({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Pa=Hr("",!0),Ta=Hr("Odd",0),xa=Hr("Even",1),ka=hr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Aa=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Da={},Ma={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Et("ng-"+e);Da[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[t]);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};Ma[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var _a=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,c,u;n.$watch(i.ngIf,function(n){n?c||a(function(n,o){c=o,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),c&&(c.$destroy(),c=null),s&&(u=ve(s.clone),e.leave(u).done(function(e){e!==!1&&(u=null)}),s=null))})}}}],Ra=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:li.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,c,u,l){var d,f,p,m=0,h=function(){f&&(f.remove(),f=null),d&&(d.$destroy(),d=null),p&&(n.leave(p).done(function(e){e!==!1&&(f=null)}),f=p,p=null)};r.$watch(o,function(o){var c=function(e){e===!1||!b(s)||s&&!r.$eval(s)||t()},f=++m;o?(e(o,!0).then(function(e){if(!r.$$destroyed&&f===m){var t=r.$new();u.template=e;var s=l(t,function(e){h(),n.enter(e,null,i).done(c)});d=t,p=s,d.$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||f===m&&(h(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(h(),u.template=null)})}}}}],Oa=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return si.call(r[0]).match(/SVG/)?(r.empty(),void t(_e(o.template,e.document).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(o.template),void t(r.contents())(n))}}}],La=hr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),ja=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var i=n.ngList||", ",a="false"!==n.ngTrim,s=a?hi(i):i,c=function(e){if(!$(e)){var t=[];return e&&o(e.split(s),function(e){e&&t.push(a?hi(e):e)}),t}};r.$parsers.push(c),r.$formatters.push(function(e){return pi(e)?e.join(i):void 0}),r.$isEmpty=function(e){return!e||!e.length}}}},Ba="ng-valid",Na="ng-invalid",Ha="ng-pristine",Fa="ng-dirty",Ua="ng-untouched",qa="ng-touched",Va="ng-empty",za="ng-not-empty",Ga=t("ngModel");Fr.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Fr.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return P(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){P(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw Ga("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,Q(this.$$element))},$render:h,$isEmpty:function(e){return $(e)||""===e||null===e||e!==e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,za),this.$$animate.addClass(this.$$element,Va)):(this.$$animate.removeClass(this.$$element,Va),this.$$animate.addClass(this.$$element,za))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Fa),this.$$animate.addClass(this.$$element,Ha)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Ha),this.$$animate.addClass(this.$$element,Fa),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Ua,qa)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,qa,Ua)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!fi(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(t,e,function(e){i||n===e||(o.$modelValue=e?t:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(e,t,n){function r(){var e=l.$$parserName||"parse";return $(l.$$parserValid)?(s(e,null),!0):(l.$$parserValid||(o(l.$validators,function(e,t){s(t,null)}),o(l.$asyncValidators,function(e,t){s(t,null)})),s(e,l.$$parserValid),l.$$parserValid)}function i(){var n=!0;return o(l.$validators,function(r,i){var o=Boolean(r(e,t));n=n&&o,s(i,o)}),n?!0:(o(l.$asyncValidators,function(e,t){s(t,null)}),!1)}function a(){var n=[],r=!0;o(l.$asyncValidators,function(i,o){var a=i(e,t);if(!R(a))throw Ga("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),n.push(a.then(function(){s(o,!0)},function(){r=!1,s(o,!1)}))}),n.length?l.$$q.all(n).then(function(){c(r)},h):c(!0)}function s(e,t){u===l.$$currentValidationRunId&&l.$setValidity(e,t)}function c(e){u===l.$$currentValidationRunId&&n(e)}this.$$currentValidationRunId++;var u=this.$$currentValidationRunId,l=this;return r()&&i()?void a():void c(!1)},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function e(){r.$modelValue!==o&&r.$$writeModelToScope()}var t=this.$$lastCommittedViewValue,n=t,r=this;if(this.$$parserValid=$(n)?void 0:!0,
this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(n=this.$parsers[i](n),$(n)){this.$$parserValid=!1;break}fi(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var o=this.$modelValue,a=this.$options.getOption("allowInvalid");this.$$rawModelValue=n,a&&(this.$modelValue=n,e()),this.$$runValidators(n,this.$$lastCommittedViewValue,function(t){a||(r.$modelValue=t?n:void 0,e())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),o(this.$viewChangeListeners,function(e){try{e()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");E(t[e])?t=t[e]:E(t["default"])&&(t=t["default"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e)}},$r({clazz:Fr,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Wa,Ya=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Fr,priority:1,compile:function(t){return t.addClass(Ha).addClass(Ua).addClass(Ba),{pre:function(e,t,n,r){var i=r[0],o=r[1]||i.$$parentForm,a=r[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,n,r,i){function o(){a.$setTouched()}var a=i[0];a.$options.getOption("updateOn")&&n.on(a.$options.getOption("updateOn"),function(e){a.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){a.$touched||(e.$$phase?t.$evalAsync(o):t.$apply(o))})}}}}}],Ka=/(\s+|^)default(\s+|$)/;qr.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return e=d({},e),o(e,function(n,r){"$inherit"===n?"*"===r?t=!0:(e[r]=this.$$options[r],"updateOn"===r&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(e.updateOnDefault=!1,e[r]=hi(n.replace(Ka,function(){return e.updateOnDefault=!0," "})))},this),t&&(delete e["*"],Vr(e,this.$$options)),Vr(e,Wa.$$options),new qr(e)}},Wa=new qr({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Ja=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Wa,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}},Xa=hr({terminal:!0,priority:1e3}),Za=t("ngOptions"),Qa=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,es=["$compile","$document","$parse",function(t,n,r){function a(e,t,n){function o(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function a(e){var t;if(!u&&i(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var s=e.match(Qa);if(!s)throw Za("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Q(t));var c=s[5]||s[7],u=s[6],l=/ as /.test(s[0])&&s[1],d=s[9],f=r(s[2]?s[1]:c),p=l&&r(l),m=p||f,h=d&&r(d),g=d?function(e,t){return h(n,t)}:function(e){return ot(e)},v=function(e,t){return g(e,S(e,t))},y=r(s[2]||s[1]),$=r(s[3]||""),b=r(s[4]||""),C=r(s[8]),w={},S=u?function(e,t){return w[u]=t,w[c]=e,w}:function(e){return w[c]=e,w};return{trackBy:d,getTrackByValue:v,getWatchables:r(C,function(e){var t=[];e=e||[];for(var r=a(e),i=r.length,o=0;i>o;o++){var c=e===r?o:r[o],u=e[c],l=S(u,c),d=g(u,l);if(t.push(d),s[2]||s[1]){var f=y(n,l);t.push(f)}if(s[4]){var p=b(n,l);t.push(p)}}return t}),getOptions:function(){for(var e=[],t={},r=C(n)||[],i=a(r),s=i.length,c=0;s>c;c++){var u=r===i?c:i[c],l=r[u],f=S(l,u),p=m(n,f),h=g(p,f),w=y(n,f),E=$(n,f),I=b(n,f),P=new o(h,p,w,E,I);e.push(P),t[h]=P}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[v(e)]},getViewValueFromOption:function(e){return d?U(e.viewValue):e.viewValue}}}}}function s(e,r,i,s){function l(e,t){var n=c.cloneNode(!1);t.appendChild(n),f(e,n)}function d(e){var t=S.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}function f(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}function p(){var e=S&&m.readValue();if(S)for(var t=S.items.length-1;t>=0;t--){var n=S.items[t];Je(b(n.group)?n.element.parentNode:n.element)}S=E.getOptions();var i={};if(C&&r.prepend(m.emptyOption),S.items.forEach(function(e){var t;b(e.group)?(t=i[e.group],t||(t=u.cloneNode(!1),I.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),l(e,t)):l(e,I)}),r[0].appendChild(I),h.$render(),!h.$isEmpty(e)){var o=m.readValue(),a=E.trackBy||g;(a?q(e,o):e===o)||(h.$setViewValue(o),h.$render())}}for(var m=s[0],h=s[1],g=i.multiple,v=0,y=r.children(),$=y.length;$>v;v++)if(""===y[v].value){m.hasEmptyOption=!0,m.emptyOption=y.eq(v);break}var C=!!m.emptyOption,w=ti(c.cloneNode(!1));w.val("?");var S,E=a(i.ngOptions,r,e),I=n[0].createDocumentFragment();m.generateUnknownOptionValue=function(e){return"?"},g?(m.writeValue=function(e){var t=e&&e.map(d)||[];S.items.forEach(function(e){e.element.selected&&!H(t,e)&&(e.element.selected=!1)})},m.readValue=function(){var e=r.val()||[],t=[];return o(e,function(e){var n=S.selectValueMap[e];n&&!n.disabled&&t.push(S.getViewValueFromOption(n))}),t},E.trackBy&&e.$watchCollection(function(){return pi(h.$viewValue)?h.$viewValue.map(function(e){return E.getTrackByValue(e)}):void 0},function(){h.$render()})):(m.writeValue=function(e){var t=S.selectValueMap[r.val()],n=S.getOptionFromViewValue(e);t&&t.element.removeAttribute("selected"),n?(r[0].value!==n.selectValue&&(m.removeUnknownOption(),m.unselectEmptyOption(),r[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):C?m.selectEmptyOption():m.unknownOption.parent().length?m.updateUnknownOption(e):m.renderUnknownOption(e)},m.readValue=function(){var e=S.selectValueMap[r.val()];return e&&!e.disabled?(m.unselectEmptyOption(),m.removeUnknownOption(),S.getViewValueFromOption(e)):null},E.trackBy&&e.$watch(function(){return E.getTrackByValue(h.$viewValue)},function(){h.$render()})),C&&(m.emptyOption.remove(),t(m.emptyOption)(e),m.emptyOption[0].nodeType===Ti?(m.hasEmptyOption=!1,m.registerOption=function(e,t){""===t.val()&&(m.hasEmptyOption=!0,m.emptyOption=t,m.emptyOption.removeClass("ng-scope"),h.$render(),t.on("$destroy",function(){m.hasEmptyOption=!1,m.emptyOption=void 0}))}):m.emptyOption.removeClass("ng-scope")),r.empty(),p(),e.$watchCollection(E.getWatchables,p)}var c=e.document.createElement("option"),u=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=h},post:s}}}],ts=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,s,c){function u(e){s.text(e||"")}var l,d=c.count,f=c.$attr.when&&s.attr(c.$attr.when),p=c.offset||0,m=a.$eval(f)||{},g={},v=t.startSymbol(),y=t.endSymbol(),b=v+d+"-"+p+y,C=li.noop;o(c,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+Jr(n[2]);m[r]=s.attr(c.$attr[t])}}),o(m,function(e,n){g[n]=t(e.replace(r,b))}),a.$watch(d,function(t){var r=parseFloat(t),i=fi(r);if(i||r in m||(r=e.pluralCat(r-p)),!(r===l||i&&fi(l))){C();var o=g[r];$(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),C=h,u()):C=a.$watch(o,u),l=r}})}}}],ns=["$parse","$animate","$compile",function(e,n,r){var a="$$NG_REMOVED",s=t("ngRepeat"),c=function(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},u=function(e){return e.clone[0]},l=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,d){var f=d.ngRepeat,p=r.$$createComment("end ngRepeat",f),m=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var h=m[1],g=m[2],v=m[3],y=m[4];if(m=h.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/),!m)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",h);var $=m[3]||m[1],b=m[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var C,w,S,E,I={$id:ot};return y?C=e(y):(S=function(e,t){return ot(t)},E=function(e){return e}),function(e,t,r,d,m){C&&(w=function(t,n,r){return b&&(I[b]=t),I[$]=n,I.$index=r,C(e,I)});var h=ye();e.$watchCollection(g,function(r){var d,g,y,C,I,P,T,x,k,A,D,M,_=t[0],R=ye();if(v&&(e[v]=r),i(r))k=r,x=w||S;else{x=w||E,k=[];for(var O in r)Yr.call(r,O)&&"$"!==O.charAt(0)&&k.push(O)}for(C=k.length,D=new Array(C),d=0;C>d;d++)if(I=r===k?d:k[d],P=r[I],T=x(I,P,d),h[T])A=h[T],delete h[T],R[T]=A,D[d]=A;else{if(R[T])throw o(D,function(e){e&&e.scope&&(h[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,T,P);D[d]={id:T,scope:void 0,clone:void 0},R[T]=!0}for(var L in h){if(A=h[L],M=ve(A.clone),n.leave(M),M[0].parentNode)for(d=0,g=M.length;g>d;d++)M[d][a]=!0;A.scope.$destroy()}for(d=0;C>d;d++)if(I=r===k?d:k[d],P=r[I],A=D[d],A.scope){y=_;do y=y.nextSibling;while(y&&y[a]);u(A)!==y&&n.move(ve(A.clone),null,_),_=l(A),c(A.scope,d,$,P,b,I,C)}else m(function(e,t){A.scope=t;var r=p.cloneNode(!1);e[e.length++]=r,n.enter(e,null,_),_=r,A.clone=e,R[A.id]=A,c(A.scope,d,$,P,b,I,C)});h=R})}}}}],rs="ng-hide",is="ng-hide-animate",os=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,rs,{tempClasses:is})})}}}],as=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,rs,{tempClasses:is})})}}}],ss=hr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),cs=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var s=i.ngSwitch||i.on,c=[],u=[],l=[],d=[],f=function(e,t){return function(n){n!==!1&&e.splice(t,1)}};n.$watch(s,function(n){for(var r,i;l.length;)e.cancel(l.pop());for(r=0,i=d.length;i>r;++r){var s=ve(u[r].clone);d[r].$destroy();var p=l[r]=e.leave(s);p.done(f(l,r))}u.length=0,d.length=0,(c=a.cases["!"+n]||a.cases["?"])&&o(c,function(n){n.transclude(function(r,i){d.push(i);var o=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:r};u.push(a),e.enter(r,o.parent(),o)})})})}}}],us=hr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){var a=n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e});o(a,function(e){r.cases["!"+e]=r.cases["!"+e]||[],r.cases["!"+e].push({transclude:i,element:t})})}}),ls=hr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),ds=t("ngTransclude"),fs=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,i,o){function a(e,n){e.length&&c(e)?t.append(e):(s(),n.$destroy())}function s(){n(e,function(e){t.append(e)})}function c(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];if(r.nodeType!==Pi||r.nodeValue.trim())return!0}}if(!o)throw ds("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Q(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var u=r.ngTransclude||r.ngTranscludeSlot;o(a,null,u),u&&!o.isSlotFilled(u)&&s()}}}}],ps=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],ms={$setViewValue:h,$render:h},hs=["$element","$scope",function(t,n){function r(){s||(s=!0,n.$$postDigest(function(){s=!1,o.ngModelCtrl.$render()}))}function i(e){c||(c=!0,n.$$postDigest(function(){n.$$destroyed||(c=!1,o.ngModelCtrl.$setViewValue(o.readValue()),e&&o.ngModelCtrl.$render())}))}var o=this,a=new Yi;o.selectValueMap={},o.ngModelCtrl=ms,o.multiple=!1,o.unknownOption=ti(e.document.createElement("option")),o.hasEmptyOption=!1,o.emptyOption=void 0,o.renderUnknownOption=function(e){var n=o.generateUnknownOptionValue(e);o.unknownOption.val(n),t.prepend(o.unknownOption),zr(o.unknownOption,!0),t.val(n)},o.updateUnknownOption=function(e){var n=o.generateUnknownOptionValue(e);o.unknownOption.val(n),zr(o.unknownOption,!0),t.val(n)},o.generateUnknownOptionValue=function(e){return"? "+ot(e)+" ?"},o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.selectEmptyOption=function(){o.emptyOption&&(t.val(""),zr(o.emptyOption,!0))},o.unselectEmptyOption=function(){o.hasEmptyOption&&o.emptyOption.removeAttr("selected")},n.$on("$destroy",function(){o.renderUnknownOption=h}),o.readValue=function(){var e=t.val(),n=e in o.selectValueMap?o.selectValueMap[e]:e;return o.hasOption(n)?n:null},o.writeValue=function(e){var n=t[0].options[t[0].selectedIndex];if(n&&zr(ti(n),!1),o.hasOption(e)){o.removeUnknownOption();var r=ot(e);t.val(r in o.selectValueMap?r:e);var i=t[0].options[t[0].selectedIndex];zr(ti(i),!0)}else null==e&&o.emptyOption?(o.removeUnknownOption(),o.selectEmptyOption()):o.unknownOption.parent().length?o.updateUnknownOption(e):o.renderUnknownOption(e)},o.addOption=function(e,t){if(t[0].nodeType!==Ti){he(e,'"option value"'),""===e&&(o.hasEmptyOption=!0,o.emptyOption=t);var n=a.get(e)||0;a.set(e,n+1),r()}},o.removeOption=function(e){var t=a.get(e);t&&(1===t?(a["delete"](e),""===e&&(o.hasEmptyOption=!1,o.emptyOption=void 0)):a.set(e,t-1))},o.hasOption=function(e){return!!a.get(e)};var s=!1,c=!1;o.registerOption=function(e,t,n,a,s){if(n.$attr.ngValue){var c,u=NaN;n.$observe("value",function(e){var n,r=t.prop("selected");b(u)&&(o.removeOption(c),delete o.selectValueMap[u],n=!0),u=ot(e),c=e,o.selectValueMap[u]=e,o.addOption(e,t),t.attr("value",u),n&&r&&i()})}else a?n.$observe("value",function(e){o.readValue();var n,r=t.prop("selected");b(c)&&(o.removeOption(c),n=!0),c=e,o.addOption(e,t),n&&r&&i()}):s?e.$watch(s,function(e,r){n.$set("value",e);var a=t.prop("selected");r!==e&&o.removeOption(r),o.addOption(e,t),r&&a&&i()}):o.addOption(n.value,t);n.$observe("disabled",function(e){("true"===e||e&&t.prop("selected"))&&(o.multiple?i(!0):(o.ngModelCtrl.$setViewValue(null),o.ngModelCtrl.$render()))}),t.on("$destroy",function(){var e=o.readValue(),t=n.value;o.removeOption(t),r(),(o.multiple&&e&&-1!==e.indexOf(t)||e===t)&&i(!0)})}}],gs=function(){function e(e,t,n,r){var i=r[0],a=r[1];if(!a)return void(i.registerOption=h);if(i.ngModelCtrl=a,t.on("change",function(){i.removeUnknownOption(),e.$apply(function(){a.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var e=[];return o(t.find("option"),function(t){if(t.selected&&!t.disabled){var n=t.value;e.push(n in i.selectValueMap?i.selectValueMap[n]:n)}}),e},i.writeValue=function(e){o(t.find("option"),function(t){var n=!!e&&(H(e,t.value)||H(e,i.selectValueMap[t.value])),r=t.selected;n!==r&&zr(ti(t),n)})};var s,c=NaN;e.$watch(function(){c!==a.$viewValue||q(s,a.$viewValue)||(s=Ce(a.$viewValue),a.$render()),c=a.$viewValue}),a.$isEmpty=function(e){return!e||0===e.length}}}function t(e,t,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:hs,priority:1,link:{pre:e,post:t}}},vs=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,i;return b(n.ngValue)||(b(n.value)?r=e(n.value,!0):(i=e(t.text(),!0),i||n.$set("value",t.text()))),function(e,t,n){var o="$selectController",a=t.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(e,t,n,r,i)}}}}],ys=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},$s=function(){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(S(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw t("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,Q(n));o=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||$(o)||o.test(t)}}}}},bs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=p(e);i=fi(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return 0>i||r.$isEmpty(t)||t.length<=i}}}}},Cs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=p(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void(e.console&&console.log("WARNING: Tried to load angular more than once.")):(fe(),Ee(li),li.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var i=Math.pow(10,r),o=(e*i|0)%i;return{v:r,f:o}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,o=n(e,t);return 1==i&&0==o.v?r.ONE:r.OTHER}})}]),void ti(function(){se(e.document,ce)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(e,t){"use strict";function n(e,n,r){function i(e,r,i){var a,s;i=i||{},s=i.expires,a=t.isDefined(i.path)?i.path:o,t.isUndefined(r)&&(s="Thu, 01 Jan 1970 00:00:00 GMT",r=""),t.isString(s)&&(s=new Date(s));var c=encodeURIComponent(e)+"="+encodeURIComponent(r);c+=a?";path="+a:"",c+=i.domain?";domain="+i.domain:"",c+=s?";expires="+s.toUTCString():"",c+=i.secure?";secure":"";var u=c.length+1;return u>4096&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+u+" > 4096 bytes)!"),c}var o=r.baseHref(),a=e[0];return function(e,t,n){a.cookie=i(e,t,n)}}t.module("ngCookies",["ng"]).info({angularVersion:"1.6.3"}).provider("$cookies",[function(){function e(e){return e?t.extend({},n,e):n}var n=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(n,r){return{get:function(e){return n()[e]},getObject:function(e){var n=this.get(e);return n?t.fromJson(n):n},getAll:function(){return n()},put:function(t,n,i){r(t,n,e(i))},putObject:function(e,n,r){this.put(e,t.toJson(n),r)},remove:function(t,n){r(t,void 0,e(n))}}}]}]),t.module("ngCookies").factory("$cookieStore",["$cookies",function(e){return{get:function(t){return e.getObject(t)},put:function(t,n){e.putObject(t,n)},remove:function(t){e.remove(t)}}}]),n.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",function(){this.$get=n})}(window,window.angular),function(){angular.module("angular-jwt",["angular-jwt.interceptor","angular-jwt.jwt"]),angular.module("angular-jwt.interceptor",[]).provider("jwtInterceptor",function(){this.authHeader="Authorization",this.authPrefix="Bearer ",this.tokenGetter=function(){return null};var e=this;this.$get=["$q","$injector","$rootScope",function(t,n,r){return{request:function(r){if(r.skipAuthorization)return r;if(r.headers=r.headers||{},r.headers[e.authHeader])return r;var i=t.when(n.invoke(e.tokenGetter,this,{config:r}));return i.then(function(t){return t&&(r.headers[e.authHeader]=e.authPrefix+t),r})},responseError:function(e){return 401===e.status&&r.$broadcast("unauthenticated",e),t.reject(e)}}}]}),angular.module("angular-jwt.jwt",[]).service("jwtHelper",function(){this.urlBase64Decode=function(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)},this.decodeToken=function(e){var t=e.split(".");if(3!==t.length)throw new Error("JWT must have 3 parts");var n=this.urlBase64Decode(t[1]);if(!n)throw new Error("Cannot decode the token");return JSON.parse(n)},this.getTokenExpirationDate=function(e){var t;if(t=this.decodeToken(e),!t.exp)return null;var n=new Date(0);return n.setUTCSeconds(t.exp),n},this.isTokenExpired=function(e){var t=this.getTokenExpirationDate(e);return t?!(t.valueOf()>(new Date).valueOf()):!1}})}(),angular.module("ngLocale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["a. m.","p. m."],DAY:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],ERANAMES:["antes de Cristo","después de Cristo"],ERAS:["a. C.","d. C."],FIRSTDAYOFWEEK:6,MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","setiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],SHORTMONTH:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","set.","oct.","nov.","dic."],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d 'de' MMM 'de' y h:mm:ss a",mediumDate:"d 'de' MMM 'de' y",mediumTime:"h:mm:ss a","short":"d/M/yy h:mm a",shortDate:"d/M/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤-",negSuf:"",posPre:"¤",posSuf:""}]},id:"es-ar",pluralCat:function(e,n){return 1==e?t.ONE:t.OTHER}})}]),function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e.angular)}):"object"==typeof exports?module.exports=t(e.angular||window&&window.angular):t(e.angular)}(this,function(e){"use strict";e.module("angular-locker",[]).provider("locker",function(){var t=function(t,n){return e.isFunction(t)?t(n):t},n=function(t){return e.isDefined(t)&&null!==t},r=function(e){throw new Error("[angular-locker] "+e)},i={driver:"local",namespace:"locker",eventsEnabled:!0,separator:".",extend:{}};return{defaults:function(t){return n(t)?void e.forEach(t,function(e,t){i.hasOwnProperty(t)&&(i[t]=e)}):i},$get:["$window","$rootScope","$parse",function(o,a,s){function c(i){this._options=i,this._registeredDrivers=e.extend({local:o.localStorage,session:o.sessionStorage},i.extend),this._resolveDriver=function(e){return this._registeredDrivers.hasOwnProperty(e)||r('The driver "'+e+'" was not found.'),this._registeredDrivers[e]},this._driver=this._resolveDriver(i.driver),this._namespace=i.namespace,this._separator=i.separator,this._watchers={},this._checkSupport=function(e){if(!n(this._supported)){var t="l";try{this._resolveDriver(e||i.driver).setItem(t,t),this._resolveDriver(e||i.driver).removeItem(t),this._supported=!0}catch(r){this._supported=!1}}return this._supported},this._getPrefix=function(e){return this._namespace?this._namespace+this._separator+e:e},this._serialize=function(t){try{return e.toJson(t)}catch(n){return t}},this._unserialize=function(t){try{return e.fromJson(t)}catch(n){return t}},this._event=function(t,n){this._options.eventsEnabled&&a.$emit(t,e.extend(n,{driver:this._options.driver,namespace:this._namespace}))},this._setItem=function(t,n){this._checkSupport()||r('The browser does not support the "'+i.driver+'" driver');try{var o=this._getItem(t);this._driver.setItem(this._getPrefix(t),this._serialize(n)),this._exists(t)&&!e.equals(o,n)?this._event("locker.item.updated",{key:t,oldValue:o,newValue:n}):this._event("locker.item.added",{key:t,value:n})}catch(a){r(-1!==["QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED","QuotaExceededError"].indexOf(a.name)?"The browser storage quota has been exceeded":'Could not add item with key "'+t+'"')}},this._getItem=function(e){return this._checkSupport()||r('The browser does not support the "'+i.driver+'" driver'),this._unserialize(this._driver.getItem(this._getPrefix(e)))},this._exists=function(e){return this._checkSupport()||r('The browser does not support the "'+i.driver+'" driver'),this._driver.hasOwnProperty(this._getPrefix(t(e)))},this._removeItem=function(e){return this._checkSupport()||r('The browser does not support the "'+i.driver+'" driver'),this._exists(e)?(this._driver.removeItem(this._getPrefix(e)),this._event("locker.item.forgotten",{key:e}),!0):!1}}return c.prototype={put:function(r,i,o){if(!n(r))return!1;if(r=t(r),e.isObject(r))e.forEach(r,function(e,t){this._setItem(t,n(e)?e:o)},this);else{if(!n(i))return!1;var a=this._getItem(r);this._setItem(r,t(i,n(a)?a:o))}return this},add:function(e,t,n){return this.has(e)?!1:(this.put(e,t,n),!0)},get:function(t,n){if(e.isArray(t)){var r={};return e.forEach(t,function(e){this.has(e)&&(r[e]=this._getItem(e))},this),r}return this.has(t)?this._getItem(t):2===arguments.length?n:void 0},has:function(e){return this._exists(e)},forget:function(n){return n=t(n),e.isArray(n)?n.map(this._removeItem,this):this._removeItem(n),this},pull:function(e,t){var n=this.get(e,t);return this.forget(e),n},all:function(){var t={};return e.forEach(this._driver,function(e,n){if(this._namespace){var r=this._namespace+this._separator;0===n.indexOf(r)&&(n=n.substring(r.length))}this.has(n)&&(t[n]=this.get(n))},this),t},keys:function(){return Object.keys(this.all())},clean:function(){return this.forget(this.keys())},empty:function(){return this._driver.clear(),this},count:function(){return this.keys().length},bind:function(t,r,i){n(t.$eval(r))||(s(r).assign(t,this.get(r,i)),this.add(r,i));var o=this;return this._watchers[r+t.$id]=t.$watch(r,function(e){o.put(r,e)},e.isObject(t[r])),this},unbind:function(e,t){s(t).assign(e,void 0),this.forget(t);var n=t+e.$id;return this._watchers[n]&&(this._watchers[n](),delete this._watchers[n]),this},driver:function(t){return this.instance(e.extend(this._options,{driver:t}))},getDriver:function(){return this._driver},namespace:function(t){return this.instance(e.extend(this._options,{namespace:t}))},getNamespace:function(){return this._namespace},supported:function(e){return this._checkSupport(e)},instance:function(e){return new c(e)}},new c(i)}]}})}),function(e,t){"use strict";function n(){function e(e,t){return e?i(e)?e.indexOf(t)>=0:e.hasOwnProperty(t):void 0}return["$animate",function(t){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(n,r,o,a,s){var c,u=r[0],l=o.ngMessage||o.when,d=o.ngMessageExp||o.whenExp,f=function(e){c=e?i(e)?e:e.split(/[\s,]+/):null,a.reRender()};d?(f(n.$eval(d)),n.$watchCollection(d,f)):f(l);var p,m;a.register(u,m={test:function(t){return e(c,t)},attach:function(){p||s(function(e,n){t.enter(e,null,r),p=e;var i=p.$$attachId=a.getAttachId();p.on("$destroy",function(){p&&p.$$attachId===i&&(a.deregister(u),m.detach()),n.$destroy()})})},detach:function(){if(p){var e=p;p=null,t.leave(e)}}})}}}]}var r,i,o,a;t.module("ngMessages",[],function(){r=t.forEach,i=t.isArray,o=t.isString,a=t.element}).info({angularVersion:"1.6.3"}).directive("ngMessages",["$animate",function(e){function t(e,t){return o(t)&&0===t.length||n(e.$eval(t))}function n(e){return o(e)?e.length:!!e}var i="ng-active",a="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(o,s,c){function u(e,t){for(var n=t,r=[];n&&n!==e;){var i=n.$$ngMessageNode;if(i&&i.length)return v[i];n.childNodes.length&&-1===r.indexOf(n)?(r.push(n),n=n.childNodes[n.childNodes.length-1]):n.previousSibling?n=n.previousSibling:(n=n.parentNode,r.push(n))}}function l(e,t,n){var r=v[n];if(f.head){var i=u(e,t);i?(r.next=i.next,i.next=r):(r.next=f.head,f.head=r)}else f.head=r}function d(e,t,n){var r=v[n],i=u(e,t);i?i.next=r.next:f.head=r.next}var f=this,p=0,m=0;this.getAttachId=function(){return m++};var h,g,v=this.messages={};this.render=function(u){u=u||{},h=!1,g=u;for(var l=t(s,c.ngMessagesMultiple)||t(s,c.multiple),d=[],p={},m=f.head,v=!1,y=0;null!=m;){y++;var $=m.message,b=!1;v||r(u,function(e,t){if(!b&&n(e)&&$.test(t)){if(p[t])return;p[t]=!0,b=!0,$.attach()}}),b?v=!l:d.push($),m=m.next}r(d,function(e){e.detach()}),d.length!==y?e.setClass(o,i,a):e.setClass(o,a,i)},s.$watchCollection(c.ngMessages||c["for"],f.render),o.on("$destroy",function(){r(v,function(e){e.message.detach()})}),this.reRender=function(){h||(h=!0,s.$evalAsync(function(){h&&g&&f.render(g)}))},this.register=function(e,t){var n=p.toString();v[n]={message:t},l(o[0],e,n),e.$$ngMessageNode=n,p++,f.reRender()},this.deregister=function(e){var t=e.$$ngMessageNode;delete e.$$ngMessageNode,d(o[0],e,t),delete v[t],f.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(e,t,n){function r(e,r){var i=n.$$createComment?n.$$createComment("ngMessagesInclude",r):t[0].createComment(" ngMessagesInclude: "+r+" "),o=a(i);e.after(o),e.remove()}return{restrict:"AE",require:"^^ngMessages",link:function(t,i,a){var s=a.ngMessagesInclude||a.src;e(s).then(function(e){t.$$destroyed||(o(e)&&!e.trim()?r(i,s):n(e)(t,function(e){i.after(e),r(i,s)}))})}}}]).directive("ngMessage",n()).directive("ngMessageExp",n())}(window,window.angular),function(e,t){"use strict";function n(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&a.test("."+e)}function r(e,r){if(!n(r))throw o("badmember",'Dotted member path "@{0}" is invalid.',r);for(var i=r.split("."),a=0,s=i.length;s>a&&t.isDefined(e);a++){var c=i[a];e=null!==e?e[c]:void 0}return e}function i(e,n){n=n||{},t.forEach(n,function(e,t){delete n[t]});for(var r in e)!e.hasOwnProperty(r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(n[r]=e[r]);
return n}var o=t.$$minErr("$resource"),a=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;t.module("ngResource",["ng"]).info({angularVersion:"1.6.3"}).provider("$resource",function(){var e=/^https?:\/\/\[[^\]]*][^\/]*/,n=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(a,s,c,u){function l(e,t){this.template=e,this.defaults=m({},n.defaults,t),this.urlParams={}}function d(e,t,b,C){function w(e,n){var i={};return n=m({},t,n),p(n,function(t,n){y(t)&&(t=t(e)),i[n]=t&&t.charAt&&"@"===t.charAt(0)?r(e,t.substr(1)):t}),i}function S(e){return e.resource}function E(e){i(e||{},this)}var I=new l(e,C);return b=m({},n.defaults.actions,b),E.prototype.toJSON=function(){var e=m({},this);return delete e.$promise,delete e.$resolved,delete e.$cancelRequest,e},p(b,function(e,t){var n=/^(POST|PUT|PATCH)$/i.test(e.method),r=e.timeout,l=v(e.cancellable)?e.cancellable:I.defaults.cancellable;r&&!$(r)&&(s.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete e.timeout,r=null),E[t]=function(s,d,v,$){function b(e){B["catch"](f),k.resolve(e)}var C,P,T,x={};switch(arguments.length){case 4:T=$,P=v;case 3:case 2:if(!y(d)){x=s,C=d,P=v;break}if(y(s)){P=s,T=d;break}P=d,T=v;case 1:y(s)?P=s:n?C=s:x=s;break;case 0:break;default:throw o("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var k,A,D=this instanceof E,M=D?C:e.isArray?[]:new E(C),_={},R=e.interceptor&&e.interceptor.response||S,O=e.interceptor&&e.interceptor.responseError||void 0,L=!!T,j=!!O;p(e,function(e,t){switch(t){default:_[t]=h(e);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!D&&l&&(k=c.defer(),_.timeout=k.promise,r&&(A=u(k.resolve,r))),n&&(_.data=C),I.setUrlParams(_,m({},w(C,e.params||{}),x),e.url);var B=a(_).then(function(n){var r=n.data;if(r){if(g(r)!==!!e.isArray)throw o("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",t,e.isArray?"array":"object",g(r)?"array":"object",_.method,_.url);if(e.isArray)M.length=0,p(r,function(e){"object"==typeof e?M.push(new E(e)):M.push(e)});else{var a=M.$promise;i(r,M),M.$promise=a}}return n.resource=M,n});return B=B["finally"](function(){M.$resolved=!0,!D&&l&&(M.$cancelRequest=f,u.cancel(A),k=A=_.timeout=null)}),B=B.then(function(e){var t=R(e);return(P||f)(t,e.headers,e.status,e.statusText),t},L||j?function(e){return L&&!j&&B["catch"](f),L&&T(e),j?O(e):c.reject(e)}:void 0),D?B:(M.$promise=B,M.$resolved=!1,l&&(M.$cancelRequest=b),M)},E.prototype["$"+t]=function(e,n,r){y(e)&&(r=n,n=e,e={});var i=E[t].call(this,e,this,n,r);return i.$promise||i}}),E.bind=function(n){var r=m({},t,n);return d(e,r,b,C)},E}var f=t.noop,p=t.forEach,m=t.extend,h=t.copy,g=t.isArray,v=t.isDefined,y=t.isFunction,$=t.isNumber,b=t.$$encodeUriQuery,C=t.$$encodeUriSegment;return l.prototype={setUrlParams:function(t,n,r){var i,a,s=this,c=r||s.template,u="",l=s.urlParams=Object.create(null);p(c.split(/\W/),function(e){if("hasOwnProperty"===e)throw o("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(c)&&(l[e]={isQueryParamValue:new RegExp("\\?.*=:"+e+"(?:\\W|$)").test(c)})}),c=c.replace(/\\:/g,":"),c=c.replace(e,function(e){return u=e,""}),n=n||{},p(s.urlParams,function(e,t){i=n.hasOwnProperty(t)?n[t]:s.defaults[t],v(i)&&null!==i?(a=e.isQueryParamValue?b(i,!0):C(i),c=c.replace(new RegExp(":"+t+"(\\W|$)","g"),function(e,t){return a+t})):c=c.replace(new RegExp("(/?):"+t+"(\\W|$)","g"),function(e,t,n){return"/"===n.charAt(0)?n:t+n})}),s.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/"),c=c.replace(/\/\.(?=\w+($|\?))/,"."),t.url=u+c.replace(/\/(\\|%5C)\./,"/."),p(n,function(e,n){s.urlParams[n]||(t.params=t.params||{},t.params[n]=e)})}},d}]})}(window,window.angular),function(e,t){"use strict";function n(e,t){if(c(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(u(e)){t=t||{};for(var i in e)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=e[i])}return t||e}function r(){function e(e,n){return t.extend(Object.create(e),n)}function r(e,t){var n=t.caseInsensitiveMatch,r={originalPath:e,regexp:e},i=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(e,t,n,r){var o="?"===r||"*?"===r?"?":null,a="*"===r||"*?"===r?"*":null;return i.push({name:n,optional:!!o}),t=t||"",""+(o?"":t)+"(?:"+(o?t:"")+(a&&"(.+?)"||"([^/]+)")+(o||"")+")"+(o||"")}).replace(/([\/$*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",n?"i":""),r}c=t.isArray,u=t.isObject,l=t.isDefined,d=t.noop;var i={};this.when=function(e,o){var a=n(o);if(t.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),t.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),i[e]=t.extend(a,e&&r(e,a)),e){var s="/"===e[e.length-1]?e.substr(0,e.length-1):e+"/";i[s]=t.extend({redirectTo:e},r(s,a))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},f=!0,this.eagerInstantiationEnabled=function(e){return l(e)?(f=e,this):f},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(n,r,o,a,s,c,u,l){function f(e,t){var n=t.keys,r={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var o=1,a=i.length;a>o;++o){var s=n[o-1],c=i[o];s&&c&&(r[s.name]=c)}return r}function p(e){var r=I.current;w=b(),S=w&&r&&w.$$route===r.$$route&&t.equals(w.pathParams,r.pathParams)&&!w.reloadOnSearch&&!E,S||!r&&!w||n.$broadcast("$routeChangeStart",w,r).defaultPrevented&&e&&e.preventDefault()}function h(){var e=I.current,r=w;if(S)e.params=r.params,t.copy(e.params,o),n.$broadcast("$routeUpdate",e);else if(r||e){E=!1,I.current=r;var i=a.resolve(r);l.$$incOutstandingRequestCount(),i.then(g).then(v).then(function(a){return a&&i.then(y).then(function(i){r===I.current&&(r&&(r.locals=i,t.copy(r.params,o)),n.$broadcast("$routeChangeSuccess",r,e))})})["catch"](function(t){r===I.current&&n.$broadcast("$routeChangeError",r,e,t)})["finally"](function(){l.$$completeOutstandingRequest(d)})}}function g(e){var n={route:e,hasRedirection:!1};if(e)if(e.redirectTo)if(t.isString(e.redirectTo))n.path=C(e.redirectTo,e.params),n.search=e.params,n.hasRedirection=!0;else{var i=r.path(),o=r.search(),c=e.redirectTo(e.pathParams,i,o);t.isDefined(c)&&(n.url=c,n.hasRedirection=!0)}else if(e.resolveRedirectTo)return a.resolve(s.invoke(e.resolveRedirectTo)).then(function(e){return t.isDefined(e)&&(n.url=e,n.hasRedirection=!0),n});return n}function v(e){var t=!0;if(e.route!==I.current)t=!1;else if(e.hasRedirection){var n=r.url(),i=e.url;i?r.url(i).replace():i=r.path(e.path).search(e.search).replace().url(),i!==n&&(t=!1)}return t}function y(e){if(e){var n=t.extend({},e.resolve);t.forEach(n,function(e,r){n[r]=t.isString(e)?s.get(e):s.invoke(e,null,null,r)});var r=$(e);return t.isDefined(r)&&(n.$template=r),a.all(n)}}function $(e){var n,r;return t.isDefined(n=e.template)?t.isFunction(n)&&(n=n(e.params)):t.isDefined(r=e.templateUrl)&&(t.isFunction(r)&&(r=r(e.params)),t.isDefined(r)&&(e.loadedTemplateUrl=u.valueOf(r),n=c(r))),n}function b(){var n,o;return t.forEach(i,function(i,a){!o&&(n=f(r.path(),i))&&(o=e(i,{params:t.extend({},r.search(),n),pathParams:n}),o.$$route=i)}),o||i[null]&&e(i[null],{params:{},pathParams:{}})}function C(e,n){var r=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)r.push(e);else{var i=e.match(/(\w+)(?:[?*])?(.*)/),o=i[1];r.push(n[o]),r.push(i[2]||""),delete n[o]}}),r.join("")}var w,S,E=!1,I={routes:i,reload:function(){E=!0;var e={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,E=!1}};n.$evalAsync(function(){p(e),e.defaultPrevented||h()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw m("norout","Tried updating route when with no current route");e=t.extend({},this.current.params,e),r.path(C(this.current.$$route.originalPath,e)),r.search(e)}};return n.$on("$locationChangeStart",p),n.$on("$locationChangeSuccess",h),I}]}function i(e){f&&e.get("$route")}function o(){this.$get=function(){return{}}}function a(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,o,a,s,c){function u(){p&&(r.cancel(p),p=null),d&&(d.$destroy(),d=null),f&&(p=r.leave(f),p.done(function(e){e!==!1&&(p=null)}),f=null)}function l(){var a=e.current&&e.current.locals,s=a&&a.$template;if(t.isDefined(s)){var l=i.$new(),p=e.current,g=c(l,function(e){r.enter(e,null,f||o).done(function(e){e===!1||!t.isDefined(m)||m&&!i.$eval(m)||n()}),u()});f=g,d=p.scope=l,d.$emit("$viewContentLoaded"),d.$eval(h)}else u()}var d,f,p,m=a.autoscroll,h=a.onload||"";i.$on("$routeChangeSuccess",l),l()}}}function s(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,i){var o=n.current,a=o.locals;i.html(a.$template);var s=e(i.contents());if(o.controller){a.$scope=r;var c=t(o.controller,a);o.controllerAs&&(r[o.controllerAs]=c),i.data("$ngControllerController",c),i.children().data("$ngControllerController",c)}r[o.resolveAs||"$resolve"]=a,s(r)}}}var c,u,l,d,f,p=t.module("ngRoute",[]).info({angularVersion:"1.6.3"}).provider("$route",r).run(i),m=t.$$minErr("ngRoute");i.$inject=["$injector"],p.provider("$routeParams",o),p.directive("ngView",a),p.directive("ngView",s),a.$inject=["$route","$anchorScroll","$animate"],s.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t){"use strict";function n(){function n(e,t){var n,r={},i=e.split(",");for(n=0;n<i.length;n++)r[t?c(i[n]):i[n]]=!0;return r}function r(t,n){null===t||void 0===t?t="":"string"!=typeof t&&(t=""+t),b.innerHTML=t;var r=5;do{if(0===r)throw p("uinput","Failed to sanitize html because the input is unstable");r--,e.document.documentMode&&v(b),t=b.innerHTML,b.innerHTML=t}while(t!==b.innerHTML);for(var i=b.firstChild;i;){switch(i.nodeType){case 1:n.start(i.nodeName.toLowerCase(),m(i.attributes));break;case 3:n.chars(i.textContent)}var o;if(!(o=i.firstChild)&&(1===i.nodeType&&n.end(i.nodeName.toLowerCase()),o=y("nextSibling",i),!o))for(;null==o&&(i=y("parentNode",i),i!==b);)o=y("nextSibling",i),1===i.nodeType&&n.end(i.nodeName.toLowerCase());i=o}for(;i=b.firstChild;)b.removeChild(i)}function m(e){for(var t={},n=0,r=e.length;r>n;n++){var i=e[n];t[i.name]=i.value}return t}function h(e){return e.replace(/&/g,"&amp;").replace(C,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(w,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(e,t){var n=!1,r=i(e,e.push);return{start:function(e,i){e=c(e),!n&&A[e]&&(n=e),n||D[e]!==!0||(r("<"),r(e),a(i,function(n,i){var o=c(i),a="img"===e&&"src"===o||"background"===o;O[o]!==!0||M[o]===!0&&!t(n,a)||(r(" "),r(i),r('="'),r(h(n)),r('"'))}),r(">"))},end:function(e){e=c(e),n||D[e]!==!0||S[e]===!0||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(h(e))}}}function v(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;i>r;r++){var o=n[r],a=o.name.toLowerCase();("xmlns:ns1"===a||0===a.lastIndexOf("ns1:",0))&&(t.removeAttributeNode(o),r--,i--)}var s=t.firstChild;s&&v(s),t=y("nextSibling",t)}}function y(e,t){var n=t[e];if(n&&l.call(t,n))throw p("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}var $=!1;this.$get=["$$sanitizeUri",function(e){return $&&o(D,k),function(t){var n=[];return d(t,f(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return s(e)?($=e,this):$},i=t.bind,o=t.extend,a=t.forEach,s=t.isDefined,c=t.lowercase,u=t.noop,d=r,f=g,l=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var b,C=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^#-~ |!])/g,S=n("area,br,col,hr,img,wbr"),E=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),I=n("rp,rt"),P=o({},I,E),T=o({},E,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),x=o({},I,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),k=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),A=n("script,style"),D=o({},S,T,x,P),M=n("background,cite,href,longdesc,src,xlink:href"),_=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),R=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),O=o({},M,R,_);!function(e){var t;if(!e.document||!e.document.implementation)throw p("noinert","Can't create an inert html document");t=e.document.implementation.createHTMLDocument("inert");var n=t.documentElement||t.getDocumentElement(),r=n.getElementsByTagName("body");if(1===r.length)b=r[0];else{var i=t.createElement("html");b=t.createElement("body"),i.appendChild(b),t.appendChild(i)}}(e)}function r(e){var t=[],n=f(t,u);return n.chars(e),t.join("")}var i,o,a,s,c,u,l,d,f,p=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",n).info({angularVersion:"1.6.3"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,o=t.$$minErr("linky"),a=t.isDefined,s=t.isFunction,c=t.isObject,u=t.isString;return function(t,l,d){function f(e){e&&$.push(r(e))}function p(e,t){var n,r=v(e);$.push("<a ");for(n in r)$.push(n+'="'+r[n]+'" ');!a(l)||"target"in r||$.push('target="',l,'" '),$.push('href="',e.replace(/"/g,"&quot;"),'">'),f(t),$.push("</a>")}if(null==t||""===t)return t;if(!u(t))throw o("notstring","Expected string but received: {0}",t);for(var m,h,g,v=s(d)?d:c(d)?function(){return d}:function(){return{}},y=t,$=[];m=y.match(n);)h=m[0],m[2]||m[4]||(h=(m[3]?"http://":"mailto:")+h),g=m.index,f(y.substr(0,g)),p(h,m[0].replace(i,"")),y=y.substring(g+m[0].length);return f(y),e($.join(""))}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,n){"use strict";function r(e,t){return z(new(z(function(){},{prototype:e})),t)}function i(e){return V(arguments,function(t){t!==e&&V(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function o(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function a(e){if(Object.keys)return Object.keys(e);var t=[];return V(e,function(e,n){t.push(n)}),t}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=n);n>r;r++)if(r in e&&e[r]===t)return r;return-1}function c(e,t,n,r){var i,c=o(n,r),u={},l=[];for(var d in c)if(c[d]&&c[d].params&&(i=a(c[d].params),i.length))for(var f in i)s(l,i[f])>=0||(l.push(i[f]),u[i[f]]=e[i[f]]);return z({},u,t)}function u(e,t,n){if(!n){n=[];for(var r in e)n.push(r)}for(var i=0;i<n.length;i++){var o=n[i];if(e[o]!=t[o])return!1}return!0}function l(e,t){var n={};return V(e,function(e){n[e]=t[e]}),n}function d(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return V(n,function(n){n in e&&(t[n]=e[n])}),t}function f(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)-1==s(n,r)&&(t[r]=e[r]);return t}function p(e,t){var n=q(e),r=n?[]:{};return V(e,function(e,i){t(e,i)&&(r[n?r.length:i]=e)}),r}function m(e,t){var n=q(e)?[]:{};return V(e,function(e,r){n[r]=t(e,r)}),n}function h(e){return e.then(n,function(){})&&e}function g(e,t){var r=1,o=2,c={},u=[],l=c,d=z(e.when(c),{$$promises:c,$$values:c});this.study=function(c){function p(e,n){if($[n]!==o){if(y.push(n),$[n]===r)throw y.splice(0,s(y,n)),new Error("Cyclic dependency: "+y.join(" -> "));if($[n]=r,F(e))v.push(n,[function(){return t.get(e)}],u);else{var i=t.annotate(e);V(i,function(e){e!==n&&c.hasOwnProperty(e)&&p(c[e],e)}),v.push(n,e,i)}y.pop(),$[n]=o}}function m(e){return U(e)&&e.then&&e.$$promises}if(!U(c))throw new Error("'invocables' must be an object");var g=a(c||{}),v=[],y=[],$={};return V(c,p),c=y=$=null,function(r,o,a){function s(){--C||(w||i(b,o.$$values),y.$$values=b,y.$$promises=y.$$promises||!0,delete y.$$inheritedValues,p.resolve(b))}function c(e){y.$$failure=e,p.reject(e)}function u(n,i,o){function u(e){d.reject(e),c(e)}function l(){if(!N(y.$$failure))try{d.resolve(t.invoke(i,a,b)),d.promise.then(function(e){b[n]=e,s()},u)}catch(e){u(e)}}var d=e.defer(),f=0;V(o,function(e){$.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(f++,$[e].then(function(t){b[e]=t,--f||l()},u))}),f||l(),$[n]=h(d.promise)}if(m(r)&&a===n&&(a=o,o=r,r=null),r){if(!U(r))throw new Error("'locals' must be an object")}else r=l;if(o){if(!m(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=d;var p=e.defer(),y=h(p.promise),$=y.$$promises={},b=z({},r),C=1+v.length/3,w=!1;if(h(y),N(o.$$failure))return c(o.$$failure),y;o.$$inheritedValues&&i(b,f(o.$$inheritedValues,g)),z($,o.$$promises),o.$$values?(w=i(b,f(o.$$values,g)),y.$$inheritedValues=f(o.$$values,g),s()):(o.$$inheritedValues&&(y.$$inheritedValues=f(o.$$inheritedValues,g)),o.then(s,c));for(var S=0,E=v.length;E>S;S+=3)r.hasOwnProperty(v[S])?s():u(v[S],v[S+1],v[S+2]);return y}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function v(){var e=t.version.minor<3;this.shouldUnsafelyUseHttp=function(t){e=!!t},this.$get=["$http","$templateCache","$injector",function(t,n,r){return new y(t,n,r,e)}]}function y(e,t,n,r){this.fromConfig=function(e,t,n){return N(e.template)?this.fromString(e.template,t):N(e.templateUrl)?this.fromUrl(e.templateUrl,t):N(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return H(e)?e(t):e},this.fromUrl=function(i,o){return H(i)&&(i=i(o)),null==i?null:r?e.get(i,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data}):n.get("$templateRequest")(i)},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function $(e,t,i){function o(t,n,r,i){if(g.push(t),m[t])return m[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(h[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return h[t]=new Y.Param(t,n,r,i),h[t]}function a(e,t,n,r){var i=["",""],o=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return o;switch(n){case!1:i=["(",")"+(r?"?":"")];break;case!0:o=o.replace(/\/$/,""),i=["(?:/(",")|/)?"];break;default:i=["("+n+"|",")?"]}return o+i[0]+t+i[1]}function s(i,o){var a,s,c,u,l;return a=i[2]||i[3],l=t.params[a],c=e.substring(f,i.index),s=o?i[4]:i[4]||("*"==i[1]?".*":null),s&&(u=Y.type(s)||r(Y.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":n)})),{id:a,regexp:s,segment:c,type:u,cfg:l}}t=z({params:{}},U(t)?t:{});var c,u=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,d="^",f=0,p=this.segments=[],m=i?i.params:{},h=this.params=i?i.params.$$new():new Y.ParamSet,g=[];this.source=e;for(var v,y,$;(c=u.exec(e))&&(v=s(c,!1),!(v.segment.indexOf("?")>=0));)y=o(v.id,v.type,v.cfg,"path"),d+=a(v.segment,y.type.pattern.source,y.squash,y.isOptional),p.push(v.segment),f=u.lastIndex;$=e.substring(f);var b=$.indexOf("?");if(b>=0){var C=this.sourceSearch=$.substring(b);if($=$.substring(0,b),this.sourcePath=e.substring(0,f+b),C.length>0)for(f=0;c=l.exec(C);)v=s(c,!0),y=o(v.id,v.type,v.cfg,"search"),f=u.lastIndex}else this.sourcePath=e,this.sourceSearch="";d+=a($)+(t.strict===!1?"/?":"")+"$",p.push($),this.regexp=new RegExp(d,t.caseInsensitive?"i":n),this.prefix=p[0],this.$$paramNames=g}function b(e){z(this,e)}function C(){function e(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e}function i(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}function o(){return{strict:h,caseInsensitive:f}}function c(e){return H(e)||q(e)&&H(e[e.length-1])}function u(){for(;w.length;){var e=w.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(v[e.name],d.invoke(e.def))}}function l(e){z(this,e||{})}Y=this;var d,f=!1,h=!0,g=!1,v={},y=!0,w=[],S={string:{encode:e,decode:i,is:function(e){return null==e||!N(e)||"string"==typeof e},pattern:/[^\/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return e!==n&&null!==e&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};C.$$getDefaultValue=function(e){if(!c(e.value))return e.value;if(!d)throw new Error("Injectable functions cannot be called at configuration time");return d.invoke(e.value)},this.caseInsensitive=function(e){return N(e)&&(f=e),f},this.strictMode=function(e){return N(e)&&(h=e),h},this.defaultSquashPolicy=function(e){if(!N(e))return g;if(e!==!0&&e!==!1&&!F(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return g=e,e},this.compile=function(e,t){return new $(e,z(o(),t))},this.isMatcher=function(e){if(!U(e))return!1;var t=!0;return V($.prototype,function(n,r){H(n)&&(t=t&&N(e[r])&&H(e[r]))}),t},this.type=function(e,t,n){if(!N(t))return v[e];if(v.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return v[e]=new b(z({name:e},t)),n&&(w.push({name:e,def:n}),y||u()),this},V(S,function(e,t){v[t]=new b(z({name:t},e))}),v=r(v,{}),this.$get=["$injector",function(e){return d=e,y=!1,u(),V(S,function(e,t){v[t]||(v[t]=new b(e))}),this}],this.Param=function(e,r,i,o){function u(e){var t=U(e)?a(e):[],n=-1===s(t,"value")&&-1===s(t,"type")&&-1===s(t,"squash")&&-1===s(t,"array");return n&&(e={value:e}),e.$$fn=c(e.value)?e.value:function(){return e.value},e}function l(n,r,i){if(n.type&&r)throw new Error("Param '"+e+"' has two type configurations.");return r?r:n.type?t.isString(n.type)?v[n.type]:n.type instanceof b?n.type:new b(n.type):"config"===i?v.any:v.string}function f(){var t={array:"search"===o?"auto":!1},n=e.match(/\[\]$/)?{array:!0}:{};return z(t,n,i).array}function h(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!N(n)||null==n)return g;if(n===!0||F(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function y(e,t,r,i){var o,a,c=[{from:"",to:r||t?n:""},{from:null,to:r||t?n:""}];return o=q(e.replace)?e.replace:[],F(i)&&o.push({from:i,to:n}),a=m(o,function(e){return e.from}),p(c,function(e){return-1===s(a,e.from)}).concat(o)}function $(){if(!d)throw new Error("Injectable functions cannot be called at configuration time");var e=d.invoke(i.$$fn);if(null!==e&&e!==n&&!S.type.is(e))throw new Error("Default value ("+e+") for parameter '"+S.id+"' is not an instance of Type ("+S.type.name+")");return e}function C(e){function t(e){return function(t){return t.from===e}}function n(e){var n=m(p(S.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),N(e)?S.type.$normalize(e):$()}function w(){return"{Param:"+e+" "+r+" squash: '"+P+"' optional: "+I+"}"}var S=this;i=u(i),r=l(i,r,o);var E=f();r=E?r.$asArray(E,"search"===o):r,"string"!==r.name||E||"path"!==o||i.value!==n||(i.value="");var I=i.value!==n,P=h(i,I),T=y(i,E,I,P);z(this,{id:e,type:r,location:o,array:E,squash:P,replace:T,isOptional:I,value:C,dynamic:n,config:i,toString:w})},l.prototype={$$new:function(){return r(this,z(new l,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,r=a(l.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),V(t,function(t){V(a(t),function(t){-1===s(e,t)&&-1===s(r,t)&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return V(n.$$keys(),function(r){t[r]=n[r].value(e&&e[r])}),t},$$equals:function(e,t){var n=!0,r=this;return V(r.$$keys(),function(i){var o=e&&e[i],a=t&&t[i];r[i].type.equals(o,a)||(n=!1)}),n},$$validates:function(e){var r,i,o,a,s,c=this.$$keys();for(r=0;r<c.length&&(i=this[c[r]],o=e[c[r]],o!==n&&null!==o||!i.isOptional);r++){if(a=i.type.$normalize(o),!i.type.is(a))return!1;if(s=i.type.encode(a),t.isString(s)&&!i.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=l}function w(e,r){function i(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function o(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function a(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return N(r)?r:!0}function s(r,i,o,a,s){function f(e,t,n){return"/"===g?e:t?g.slice(0,-1)+e:n?g.slice(1)+e:e}function p(e){function t(e){var t=e(o,r);return t?(F(t)&&r.replace().url(t),!0):!1}if(!e||!e.defaultPrevented){h&&r.url()===h;h=n;var i,a=u.length;for(i=0;a>i;i++)if(t(u[i]))return;l&&t(l)}}function m(){return c=c||i.$on("$locationChangeSuccess",p)}var h,g=a.baseHref(),v=r.url();return d||m(),{sync:function(){p()},listen:function(){return m()},update:function(e){return e?void(v=r.url()):void(r.url()!==v&&(r.url(v),r.replace()))},push:function(e,t,i){var o=e.format(t||{});null!==o&&t&&t["#"]&&(o+="#"+t["#"]),r.url(o),h=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,o){if(!n.validates(i))return null;var a=e.html5Mode();t.isObject(a)&&(a=a.enabled),a=a&&s.history;var c=n.format(i);if(o=o||{},a||null===c||(c="#"+e.hashPrefix()+c),null!==c&&i&&i["#"]&&(c+="#"+i["#"]),c=f(c,a,o.absolute),!o.absolute||!c)return c;var u=!a&&c?"/":"",l=r.port();return l=80===l||443===l?"":":"+l,[r.protocol(),"://",r.host(),l,u,c].join("")}}}var c,u=[],l=null,d=!1;this.rule=function(e){if(!H(e))throw new Error("'rule' must be a function");return u.push(e),this},this.otherwise=function(e){if(F(e)){var t=e;e=function(){return t}}else if(!H(e))throw new Error("'rule' must be a function");return l=e,this},this.when=function(e,t){var n,s=F(t);if(F(e)&&(e=r.compile(e)),!s&&!H(t)&&!q(t))throw new Error("invalid 'handler' in when()");var c={matcher:function(e,t){return s&&(n=r.compile(t),t=["$match",function(e){return n.format(e)}]),z(function(n,r){return a(n,t,e.exec(r.path(),r.search()))},{prefix:F(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=t,t=["$match",function(e){return o(n,e)}]),z(function(n,r){return a(n,t,e.exec(r.path()))},{prefix:i(e)})}},u={matcher:r.isMatcher(e),regex:e instanceof RegExp};for(var l in u)if(u[l])return this.rule(c[l](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),d=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function S(e,i){function o(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function f(e,t){if(!e)return n;var r=F(e),i=r?e:e.name,a=o(i);if(a){if(!t)throw new Error("No reference point given for path '"+i+"'");t=f(t);for(var s=i.split("."),c=0,u=s.length,l=t;u>c;c++)if(""!==s[c]||0!==c){if("^"!==s[c])break;if(!l.parent)throw new Error("Path '"+i+"' not valid for state '"+t.name+"'");l=l.parent}else l=t;s=s.slice(c).join("."),i=l.name+(l.name&&s?".":"")+s}var d=P[i];return!d||!r&&(r||d!==e&&d.self!==e)?n:d}function p(e,t){T[e]||(T[e]=[]),T[e].push(t)}function g(e){for(var t=T[e]||[];t.length;)v(t.shift())}function v(t){t=r(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!F(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(P.hasOwnProperty(n))throw new Error("State '"+n+"' is already defined");var i=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):F(t.parent)?t.parent:U(t.parent)&&F(t.parent.name)?t.parent.name:"";if(i&&!P[i])return p(i,t.self);for(var o in k)H(k[o])&&(t[o]=k[o](t,k.$delegates[o]));return P[n]=t,!t[x]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){I.$current.navigable==t&&u(e,n)||I.transitionTo(t,e,{inherit:!0,location:!1})}]),g(n),t}function y(e){return e.indexOf("*")>-1}function $(e){for(var t=e.split("."),n=I.$current.name.split("."),r=0,i=t.length;i>r;r++)"*"===t[r]&&(n[r]="*");return"**"===t[0]&&(n=n.slice(s(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(s(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length!=n.length?!1:n.join("")===t.join("")}function b(e,t){return F(e)&&!N(t)?k[e]:H(t)&&F(e)?(k[e]&&!k.$delegates[e]&&(k.$delegates[e]=k[e]),k[e]=t,this):this}function C(e,t){return U(e)?t=e:t.name=e,v(t),this}function w(e,i,o,s,u,d,p,g,v){function b(t,n,r,o){var a=e.$broadcast("$stateNotFound",t,n,r);if(a.defaultPrevented)return p.update(),A;if(!a.retry)return null;if(o.$retry)return p.update(),D;var s=I.transition=i.when(a.retry);return s.then(function(){return s!==I.transition?(e.$broadcast("$stateChangeCancel",t.to,t.toParams,n,r),T):(t.options.$retry=!0,I.transitionTo(t.to,t.toParams,t.options))},function(){return A}),p.update(),s}function C(e,n,r,a,c,d){function f(){var n=[];return V(e.views,function(r,i){var a=r.resolve&&r.resolve!==e.resolve?r.resolve:{};a.$template=[function(){return o.load(i,{view:r,locals:c.globals,params:p,notify:d.notify})||""}],n.push(u.resolve(a,c.globals,c.resolve,e).then(function(n){if(H(r.controllerProvider)||q(r.controllerProvider)){
var o=t.extend({},a,c.globals);n.$$controller=s.invoke(r.controllerProvider,null,o)}else n.$$controller=r.controller;n.$$state=e,n.$$controllerAs=r.controllerAs,n.$$resolveAs=r.resolveAs,c[i]=n}))}),i.all(n).then(function(){return c.globals})}var p=r?n:l(e.params.$$keys(),n),m={$stateParams:p};c.resolve=u.resolve(e.resolve,m,c.resolve,e);var h=[c.resolve.then(function(e){c.globals=e})];return a&&h.push(a),i.all(h).then(f).then(function(e){return c})}var w=new Error("transition superseded"),T=h(i.reject(w)),k=h(i.reject(new Error("transition prevented"))),A=h(i.reject(new Error("transition aborted"))),D=h(i.reject(new Error("transition failed")));return E.locals={resolve:null,globals:{$stateParams:{}}},I={params:{},current:E.self,$current:E,transition:null},I.reload=function(e){return I.transitionTo(I.current,d,{reload:e||!0,inherit:!1,notify:!0})},I.go=function(e,t,n){return I.transitionTo(e,t,z({inherit:!0,relative:I.$current},n))},I.transitionTo=function(t,n,o){n=n||{},o=z({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,u=I.$current,m=I.params,g=u.path,v=f(t,o.relative),y=n["#"];if(!N(v)){var $={to:t,toParams:n,options:o},P=b($,u.self,m,o);if(P)return P;if(t=$.to,n=$.toParams,o=$.options,v=f(t,o.relative),!N(v)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(v[x])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit&&(n=c(d,n||{},I.$current,v)),!v.params.$$validates(n))return D;n=v.params.$$values(n),t=v;var A=t.path,M=0,_=A[M],R=E.locals,O=[];if(o.reload){if(F(o.reload)||U(o.reload)){if(U(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var L=o.reload===!0?g[0]:f(o.reload);if(o.reload&&!L)throw new Error("No such reload state '"+(F(o.reload)?o.reload:o.reload.name)+"'");for(;_&&_===g[M]&&_!==L;)R=O[M]=_.locals,M++,_=A[M]}}else for(;_&&_===g[M]&&_.ownParams.$$equals(n,m);)R=O[M]=_.locals,M++,_=A[M];if(S(t,n,u,m,R,o))return y&&(n["#"]=y),I.params=n,G(I.params,d),G(l(t.params.$$keys(),d),t.locals.globals.$stateParams),o.location&&t.navigable&&t.navigable.url&&(p.push(t.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),p.update(!0)),I.transition=null,i.when(I.current);if(n=l(t.params.$$keys(),n||{}),y&&(n["#"]=y),o.notify&&e.$broadcast("$stateChangeStart",t.self,n,u.self,m,o).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,n,u.self,m),null==I.transition&&p.update(),k;for(var j=i.when(R),B=M;B<A.length;B++,_=A[B])R=O[B]=r(R),j=C(_,n,_===t,j,R,o);var H=I.transition=j.then(function(){var r,i,a;if(I.transition!==H)return e.$broadcast("$stateChangeCancel",t.self,n,u.self,m),T;for(r=g.length-1;r>=M;r--)a=g[r],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(r=M;r<A.length;r++)i=A[r],i.locals=O[r],i.self.onEnter&&s.invoke(i.self.onEnter,i.self,i.locals.globals);return I.transition!==H?(e.$broadcast("$stateChangeCancel",t.self,n,u.self,m),T):(I.$current=t,I.current=t.self,I.params=n,G(I.params,d),I.transition=null,o.location&&t.navigable&&p.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,u.self,m),p.update(!0),I.current)}).then(null,function(r){return r===w?T:I.transition!==H?(e.$broadcast("$stateChangeCancel",t.self,n,u.self,m),T):(I.transition=null,a=e.$broadcast("$stateChangeError",t.self,n,u.self,m,r),a.defaultPrevented||p.update(),i.reject(r))});return h(H),H},I.is=function(e,t,r){r=z({relative:I.$current},r||{});var i=f(e,r.relative);return N(i)?I.$current!==i?!1:!t||a(t).reduce(function(e,n){var r=i.params[n];return e&&!r||r.type.equals(d[n],t[n])},!0):n},I.includes=function(e,t,r){if(r=z({relative:I.$current},r||{}),F(e)&&y(e)){if(!$(e))return!1;e=I.$current.name}var i=f(e,r.relative);if(!N(i))return n;if(!N(I.$current.includes[i.name]))return!1;if(!t)return!0;for(var o=a(t),s=0;s<o.length;s++){var c=o[s],u=i.params[c];if(u&&!u.type.equals(d[c],t[c]))return!1}return a(t).reduce(function(e,n){var r=i.params[n];return e&&!r||r.type.equals(d[n],t[n])},!0)},I.href=function(e,t,r){r=z({lossy:!0,inherit:!0,absolute:!1,relative:I.$current},r||{});var i=f(e,r.relative);if(!N(i))return null;r.inherit&&(t=c(d,t||{},I.$current,i));var o=i&&r.lossy?i.navigable:i;return o&&o.url!==n&&null!==o.url?p.href(o.url,l(i.params.$$keys().concat("#"),t||{}),{absolute:r.absolute}):null},I.get=function(e,t){if(0===arguments.length)return m(a(P),function(e){return P[e].self});var n=f(e,t||I.$current);return n&&n.self?n.self:null},I}function S(e,t,n,r,i,o){function a(e,t,n){function r(t){return"search"!=e.params[t].location}var i=e.params.$$keys().filter(r),o=d.apply({},[e.params].concat(i)),a=new Y.ParamSet(o);return a.$$equals(t,n)}return!o.reload&&e===n&&(i===n.locals||e.self.reloadOnSearch===!1&&a(n,r,t))?!0:void 0}var E,I,P={},T={},x="abstract",k={parent:function(e){if(N(e.parent)&&e.parent)return f(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?f(t[1]):E},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=r(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(F(t))return"^"==t.charAt(0)?i.compile(t.substring(1),n):(e.parent.navigable||E).url.concat(t,n);if(!t||i.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new Y.ParamSet;return V(e.params||{},function(e,n){t[n]||(t[n]=new Y.Param(n,null,e,"config"))}),t},params:function(e){var t=d(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?z(e.parent.params.$$new(),t):new Y.ParamSet},views:function(e){var t={};return V(N(e.views)?e.views:{"":e},function(n,r){r.indexOf("@")<0&&(r+="@"+e.parent.name),n.resolveAs=n.resolveAs||e.resolveAs||"$resolve",t[r]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?z({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};E=v({name:"",url:"^",views:null,"abstract":!0}),E.navigable=null,this.decorator=b,this.state=C,this.$get=w,w.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function E(){function e(e,t){return{load:function(e,n){var r,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=z(i,n),n.view&&(r=t.fromConfig(n.view,n.params,n.locals)),r}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function I(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}function P(e,n,r,i,o){function a(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(t){return null}}}function s(e,n){var r=function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}};if(l)return{enter:function(e,n,r){t.version.minor>2?l.enter(e,null,n).then(r):l.enter(e,null,n,r)},leave:function(e,n){t.version.minor>2?l.leave(e).then(n):l.leave(e,n)}};if(u){var i=u&&u(n,e);return{enter:function(e,t,n){i.enter(e,null,t),n()},leave:function(e,t){i.leave(e),t()}}}return r()}var c=a(),u=c("$animator"),l=c("$animate"),d={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,a,c){return function(n,a,u){function l(){if(f&&(f.remove(),f=null),m&&(m.$destroy(),m=null),p){var e=p.data("$uiViewAnim");y.leave(p,function(){e.$$animLeave.resolve(),f=null}),f=p,p=null}}function d(s){var d,f=x(n,u,a,i),$=f&&e.$current&&e.$current.locals[f];if(s||$!==h){d=n.$new(),h=e.$current.locals[f],d.$emit("$viewContentLoading",f);var b=c(d,function(e){var i=o.defer(),s=o.defer(),c={$animEnter:i.promise,$animLeave:s.promise,$$animLeave:s};e.data("$uiViewAnim",c),y.enter(e,a,function(){i.resolve(),m&&m.$emit("$viewContentAnimationEnded"),(t.isDefined(v)&&!v||n.$eval(v))&&r(e)}),l()});p=b,m=d,m.$emit("$viewContentLoaded",f),m.$eval(g)}}var f,p,m,h,g=u.onload||"",v=u.autoscroll,y=s(u,n);a.inheritedData("$uiView");n.$on("$stateChangeSuccess",function(){d(!1)}),d(!0)}}};return d}function T(e,n,r,i){return{restrict:"ECA",priority:-400,compile:function(o){var a=o.html();return o.empty?o.empty():o[0].innerHTML=null,function(o,s,c){var u=r.$current,l=x(o,c,s,i),d=u&&u.locals[l];if(!d)return s.html(a),void e(s.contents())(o);s.data("$uiView",{name:l,state:d.$$state}),s.html(d.$template?d.$template:a);var f=t.extend({},d);o[d.$$resolveAs]=f;var p=e(s.contents());if(d.$$controller){d.$scope=o,d.$element=s;var m=n(d.$$controller,d);d.$$controllerAs&&(o[d.$$controllerAs]=m,o[d.$$controllerAs][d.$$resolveAs]=f),H(m.$onInit)&&m.$onInit(),s.data("$ngControllerController",m),s.children().data("$ngControllerController",m)}p(o)}}}}function x(e,t,n,r){var i=r(t.uiView||t.name||"")(e),o=n.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function k(e,t){var n,r=e.match(/^\s*({[^}]*})\s*$/);if(r&&(e=t+"("+r[1]+")"),n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function A(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function D(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),n="FORM"===e[0].nodeName;return{attr:n?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!n}}function M(e,t,n,r,i){return function(o){var a=o.which||o.button,s=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||e.attr("target"))){var c=n(function(){t.go(s.state,s.params,s.options)});o.preventDefault();var u=r.isAnchor&&!s.href?1:0;o.preventDefault=function(){u--<=0&&n.cancel(c)}}}}function _(e,t){return{relative:A(e)||t.$current,inherit:!0}}function R(e,n){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,o,a){var s,c=k(o.uiSref,e.current.name),u={state:c.state,href:null,params:null},l=D(i),d=a[1]||a[0],f=null;u.options=z(_(i,e),o.uiSrefOpts?r.$eval(o.uiSrefOpts):{});var p=function(n){n&&(u.params=t.copy(n)),u.href=e.href(c.state,u.params,u.options),f&&f(),d&&(f=d.$$addStateInfo(c.state,u.params)),null!==u.href&&o.$set(l.attr,u.href)};c.paramExpr&&(r.$watch(c.paramExpr,function(e){e!==u.params&&p(e)},!0),u.params=t.copy(r.$eval(c.paramExpr))),p(),l.clickable&&(s=M(i,e,n,l,function(){return u}),i[i.on?"on":"bind"]("click",s),r.$on("$destroy",function(){i[i.off?"off":"unbind"]("click",s)}))}}}function O(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,r,i,o){function a(t){f.state=t[0],f.params=t[1],f.options=t[2],f.href=e.href(f.state,f.params,f.options),p&&p(),u&&(p=u.$$addStateInfo(f.state,f.params)),f.href&&i.$set(c.attr,f.href)}var s,c=D(r),u=o[1]||o[0],l=[i.uiState,i.uiStateParams||null,i.uiStateOpts||null],d="["+l.map(function(e){return e||"null"}).join(", ")+"]",f={state:null,params:null,options:null,href:null},p=null;n.$watch(d,a,!0),a(n.$eval(d)),c.clickable&&(s=M(r,e,t,c,function(){return f}),r[r.on?"on":"bind"]("click",s),n.$on("$destroy",function(){r[r.off?"off":"unbind"]("click",s)}))}}}function L(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,r,i,o){function a(t,n,i){var o=e.get(t,A(r)),a=s(t,n),c={state:o||{name:t},params:n,hash:a};return h.push(c),g[a]=i,function(){var e=h.indexOf(c);-1!==e&&h.splice(e,1)}}function s(e,n){if(!F(e))throw new Error("state should be a string");return U(n)?e+W(n):(n=t.$eval(n),U(n)?e+W(n):e)}function c(){for(var e=0;e<h.length;e++)d(h[e].state,h[e].params)?u(r,g[h[e].hash]):l(r,g[h[e].hash]),f(h[e].state,h[e].params)?u(r,p):l(r,p)}function u(e,t){o(function(){e.addClass(t)})}function l(e,t){e.removeClass(t)}function d(t,n){return e.includes(t.name,n)}function f(t,n){return e.is(t.name,n)}var p,m,h=[],g={};p=n(i.uiSrefActiveEq||"",!1)(t);try{m=t.$eval(i.uiSrefActive)}catch(v){}m=m||n(i.uiSrefActive||"",!1)(t),U(m)&&V(m,function(n,r){if(F(n)){var i=k(n,e.current.name);a(i.state,t.$eval(i.paramExpr),r)}}),this.$$addStateInfo=function(e,t){if(!(U(m)&&h.length>0)){var n=a(e,t,m);return c(),n}},t.$on("$stateChangeSuccess",c),c()}]}}function j(e){var t=function(t,n){return e.is(t,n)};return t.$stateful=!0,t}function B(e){var t=function(t,n,r){return e.includes(t,n,r)};return t.$stateful=!0,t}var N=t.isDefined,H=t.isFunction,F=t.isString,U=t.isObject,q=t.isArray,V=t.forEach,z=t.extend,G=t.copy,W=t.toJson;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),t.module("ui.router.util").provider("$templateFactory",v);var Y;$.prototype.concat=function(e,t){var n={caseInsensitive:Y.caseInsensitive(),strict:Y.strictMode(),squash:Y.defaultSquashPolicy()};return new $(this.sourcePath+e+this.sourceSearch,z(n,t),this)},$.prototype.toString=function(){return this.source},$.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/g,"-")}var r=t(e).split(/-(?!\\)/),i=m(r,t);return m(i,n).reverse()}var r=this.regexp.exec(e);if(!r)return null;t=t||{};var i,o,a,s=this.parameters(),c=s.length,u=this.segments.length-1,l={};if(u!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var d,f;for(i=0;u>i;i++){for(a=s[i],d=this.params[a],f=r[i+1],o=0;o<d.replace.length;o++)d.replace[o].from===f&&(f=d.replace[o].to);f&&d.array===!0&&(f=n(f)),N(f)&&(f=d.type.decode(f)),l[a]=d.value(f)}for(;c>i;i++){for(a=s[i],l[a]=this.params[a].value(t[a]),d=this.params[a],f=t[a],o=0;o<d.replace.length;o++)d.replace[o].from===f&&(f=d.replace[o].to);N(f)&&(f=d.type.decode(f)),l[a]=d.value(f)}return l},$.prototype.parameters=function(e){return N(e)?this.params[e]||null:this.$$paramNames},$.prototype.validates=function(e){return this.params.$$validates(e)},$.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var n=this.segments,r=this.parameters(),i=this.params;if(!this.validates(e))return null;var o,a=!1,s=n.length-1,c=r.length,u=n[0];for(o=0;c>o;o++){var l=s>o,d=r[o],f=i[d],p=f.value(e[d]),h=f.isOptional&&f.type.equals(f.value(),p),g=h?f.squash:!1,v=f.type.encode(p);if(l){var y=n[o+1],$=o+1===s;if(g===!1)null!=v&&(u+=q(v)?m(v,t).join("-"):encodeURIComponent(v)),u+=y;else if(g===!0){var b=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=y.match(b)[1]}else F(g)&&(u+=g+y);$&&f.squash===!0&&"/"===u.slice(-1)&&(u=u.slice(0,-1))}else{if(null==v||h&&g!==!1)continue;if(q(v)||(v=[v]),0===v.length)continue;v=m(v,encodeURIComponent).join("&"+d+"="),u+=(a?"&":"?")+(d+"="+v),a=!0}}return u},b.prototype.is=function(e,t){return!0},b.prototype.encode=function(e,t){return e},b.prototype.decode=function(e,t){return e},b.prototype.equals=function(e,t){return e==t},b.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},b.prototype.pattern=/.*/,b.prototype.toString=function(){return"{Type:"+this.name+"}"},b.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},b.prototype.$asArray=function(e,t){function r(e,t){function r(e,t){return function(){return e[t].apply(e,arguments)}}function i(e){return q(e)?e:N(e)?[e]:[]}function o(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function a(e){return!e}function s(e,t){return function(n){if(q(n)&&0===n.length)return n;n=i(n);var r=m(n,e);return t===!0?0===p(r,a).length:o(r)}}function c(e){return function(t,n){var r=i(t),o=i(n);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!e(r[a],o[a]))return!1;return!0}}this.encode=s(r(e,"encode")),this.decode=s(r(e,"decode")),this.is=s(r(e,"is"),!0),this.equals=c(r(e,"equals")),this.pattern=e.pattern,this.$normalize=s(r(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new r(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",C),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),w.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",w),S.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",S).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]),E.$inject=[],t.module("ui.router.state").provider("$view",E),t.module("ui.router.state").provider("$uiViewScroll",I),P.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],T.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",P),t.module("ui.router.state").directive("uiView",T),R.$inject=["$state","$timeout"],O.$inject=["$state","$timeout"],L.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",R).directive("uiSrefActive",L).directive("uiSrefActiveEq",L).directive("uiState",O),j.$inject=["$state"],B.$inject=["$state"],t.module("ui.router.state").filter("isState",j).filter("includedByState",B)}(window,window.angular);var module=angular.module("lvl.directives.dragdrop",["lvl.services"]);module.directive("lvlDraggable",["$rootScope","uuid",function(e,t){return{restrict:"A",link:function(n,r,i,o){angular.element(r).attr("draggable","true");var a=angular.element(r).attr("id");a||(a=t["new"](),angular.element(r).attr("id",a)),r.bind("dragstart",function(t){t.dataTransfer.setData("text",a),t.dataTransfer.effectAllowed="copyMove",e.$emit("LVL-DRAG-START"),setTimeout(function(){angular.element(r).addClass("lvl-source")},0)}),r.bind("dragend",function(t){e.$emit("LVL-DRAG-END"),angular.element(r).removeClass("lvl-source")})}}}]),module.directive("lvlDropTarget",["$rootScope","uuid",function(e,t){return{restrict:"A",scope:{onDrop:"&"},link:function(n,r,i,o){var a=angular.element(r).attr("id");a||(a=t["new"](),angular.element(r).attr("id",a)),r.bind("dragover",function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="copyMove",!1}),r.bind("dragenter",function(e){angular.element(e.target).addClass("lvl-over")}),r.bind("dragleave",function(e){angular.element(e.target).removeClass("lvl-over")}),r.bind("drop",function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var t=e.dataTransfer.getData("text"),r=document.getElementById(a),i=document.getElementById(t),o=e.dataTransfer.dropEffect;n.onDrop({event:{dragEl:i,dropEl:r,dropEffect:o}})}),e.$on("LVL-DRAG-START",function(){var e=document.getElementById(a);angular.element(e).addClass("lvl-target")}),e.$on("LVL-DRAG-END",function(){var e=document.getElementById(a);angular.element(e).removeClass("lvl-target"),angular.element(e).removeClass("lvl-over")})}}}]);var module;try{module=angular.module("lvl.services")}catch(e){module=angular.module("lvl.services",[])}module.factory("uuid",function(){var e={"new":function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()},empty:function(){return"00000000-0000-0000-0000-000000000000"}};return e}),function(){function e(e,t){angular.element(t).bind("resize",function(){e.$emit("resizeMsg")})}angular.module("googlechart",[]).run(e),e.$inject=["$rootScope","$window"]}(),function(){function e(){function e(e){function t(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r))for(n=0;n<a.iFormats[r].length;n++)e[r][n].columnNum<t.getNumberOfColumns()&&a.iFormats[r][n].format(t,e[r][n].columnNum)}function n(e,t,n){var r;if(angular.isArray(n[e])&&!angular.equals(n[e],s[e]))if(s[e]=n[e],a.iFormats[e]=[],"color"===e)i(n);else for(r=0;r<n[e].length;r++)a.iFormats[e].push(new t(n[e][r]))}function r(e,r,i){var a,s,c=!1;if(!angular.isDefined(r)||!angular.isDefined(e))return{requiresHtml:!1};for(a in r)if(r.hasOwnProperty(a)){if(s=o(a,i),!angular.isFunction(s))continue;n(a,s,r),("arrow"===a||"bar"===a||"color"===a)&&(c=!0)}return t(r,e),{requiresHtml:c}}function i(t){var n,r,i,o,s="color";for(n=0;n<t[s].length;n++){for(r=new e.visualization.ColorFormat,i=0;i<t[s][n].formats.length;i++)o=t[s][n].formats[i],"undefined"!=typeof o.fromBgColor&&"undefined"!=typeof o.toBgColor?r.addGradientRange(o.from,o.to,o.color,o.fromBgColor,o.toBgColor):r.addRange(o.from,o.to,o.color,o.bgcolor);a.iFormats[s].push(r)}}function o(t,n){var r=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()+"Format";return e.visualization.hasOwnProperty(r)?google.visualization[r]:angular.isDefined(n)&&n.hasOwnProperty(t)?n[t]:void 0}var a=this,s={};a.iFormats={},a.applyFormats=r}return e}angular.module("googlechart").factory("FormatManager",e)}(),function(){function e(e,t,n,r,i,o,a,s){function c(){g()}function u(){u.triggered||void 0===y.chart?void 0!==y.chart&&(i.cancel(u.recallTimeout),u.recallTimeout=i(u,10)):(u.triggered=!0,i(p,0,!0))}function l(){v.getReadyPromise().then(u)}function d(){v.draw(),u.triggered=!1}function f(){v=new s,y.registerChartListener=v.registerChartListener,y.registerWrapperListener=v.registerWrapperListener,y.registerServiceListener=v.registerServiceListener,e.$watch(h,m,!0),g=a.$on("resizeMsg",l),e.$on("$destroy",c)}function p(){v.setup(t,y.chart.type,y.chart.data,y.chart.view,y.chart.options,y.chart.formatters,y.chart.customFormatters),i(d)}function m(){y.chart=e.$eval(n.chart),l()}function h(){var t=e.$eval(n.chart);return angular.isDefined(t)&&angular.isObject(t)?{customFormatters:t.customFormatters,data:t.data,formatters:t.formatters,options:t.options,type:t.type,view:t.view}:void 0}var g,v,y=this;f()}angular.module("googlechart").controller("GoogleChartController",e),e.$inject=["$scope","$element","$attrs","$injector","$timeout","$window","$rootScope","GoogleChartService"]}(),function(){function e(){return{restrict:"A",scope:!1,require:"googleChart",link:function(e,t,n,r){function i(t){e.$apply(function(){e.$eval(n.agcBeforeDraw,{chartWrapper:t})})}i.$inject=["chartWrapper"],r.registerServiceListener("beforeDraw",i,this)}}}angular.module("googlechart").directive("agcBeforeDraw",e)}(),function(){function e(){return{restrict:"A",scope:!1,require:"googleChart",link:function(e,t,n,r){function i(t,r,i){e.$apply(function(){e.$eval(n.agcOnClick,{args:t,chart:r,chartWrapper:i})})}i.$inject=["args","chart","chartWrapper"],r.registerChartListener("click",i,this)}}}angular.module("googlechart").directive("agcOnClick",e)}(),function(){function e(){return{restrict:"A",scope:!1,require:"googleChart",link:function(e,t,n,r){function i(t,r,i){var o={chartWrapper:t,chart:r,args:i,error:i[0],err:i[0],id:i[0].id,message:i[0].message};e.$apply(function(){e.$eval(n.agcOnError,o)})}i.$inject=["chartWrapper","chart","args"],r.registerWrapperListener("error",i,this)}}}angular.module("googlechart").directive("agcOnError",e)}(),function(){function e(){return{restrict:"A",scope:!1,require:"googleChart",link:function(e,t,n,r){function i(t,r,i){var o={chartWrapper:i,chart:r,args:t,column:t[0].column,row:t[0].row};e.$apply(function(){e.$eval(n.agcOnMouseout,o)})}i.$inject=["args","chart","chartWrapper"],r.registerChartListener("onmouseout",i,this)}}}angular.module("googlechart").directive("agcOnMouseout",e)}(),function(){function e(){return{restrict:"A",scope:!1,require:"googleChart",link:function(e,t,n,r){function i(t,r,i){var o={chartWrapper:i,chart:r,args:t,column:t[0].column,row:t[0].row};e.$apply(function(){e.$eval(n.agcOnMouseover,o)})}i.$inject=["args","chart","chartWrapper"],r.registerChartListener("onmouseover",i,this)}}}angular.module("googlechart").directive("agcOnMouseover",e)}(),function(){function e(){return{restrict:"A",scope:!1,require:"googleChart",link:function(e,t,n,r){function i(t){e.$apply(function(){e.$eval(n.agcOnReady,{chartWrapper:t})})}i.$inject=["chartWrapper"],r.registerWrapperListener("ready",i,this)}}}angular.module("googlechart").directive("agcOnReady",e)}(),function(){function e(){return{restrict:"A",scope:!1,require:"googleChart",link:function(e,t,n,r){function i(t,r){var i={selectedItems:r.getSelection()};i.selectedItem=i.selectedItems[0],i.chartWrapper=t,i.chart=r,e.$apply(function(){e.$eval(n.agcOnSelect,i)})}i.$inject=["chartWrapper","chart"],r.registerWrapperListener("select",i,this)}}}angular.module("googlechart").directive("agcOnSelect",e)}(),function(){function e(){return{restrict:"A",scope:!1,controller:"GoogleChartController"}}angular.module("googlechart").directive("googleChart",e),e.$inject=[]}(),function(){angular.module("googlechart").value("googleChartApiConfig",{version:"1",optionalSettings:{packages:["corechart"]}})}(),function(){function e(e,t,n,r){n.optionalSettings=n.optionalSettings||{};var i=t.defer(),o=function(){var t={callback:function(){var t=n.optionalSettings.callback;e.$apply(function(){i.resolve(google)}),angular.isFunction(t)&&t.call(this)}};t=angular.extend({},n.optionalSettings,t),window.google.load("visualization",n.version,t)},a=document.getElementsByTagName("head")[0],s=document.createElement("script");return s.setAttribute("type","text/javascript"),s.src=r,s.addEventListener?s.addEventListener("load",o,!1):s.onreadystatechange=function(){("loaded"===s.readyState||"complete"===s.readyState)&&(s.onreadystatechange=null,o())},a.appendChild(s),i.promise}angular.module("googlechart").factory("googleChartApiPromise",e),e.$inject=["$rootScope","$q","googleChartApiConfig","googleJsapiUrl"]}(),function(){function e(e,t,n,r){function i(){function i(e){var t;if(angular.isArray(Y[e]))for(t=0;t<Y[e].length;t++)Y[e][t]()}function o(e){return e}function a(e){return _=e,O=!0,G.resolve(),e}function s(){angular.isDefined(L)?(L.setChartType(B),L.setDataTable(N),L.setView(H),L.setOptions(F)):(L=new _.visualization.ChartWrapper({chartType:B,dataTable:N,view:H,options:F,containerId:j[0]}),f(L,K)),V||(V=new r(_)),V.applyFormats(L.getDataTable(),U,z).requiresHtml&&L.setOption("allowHtml",!0),W=!1}function c(e,t,n){for(var r=t?t.split("."):[];r.length&&e;){var i=r.shift();new RegExp("(.+)\\[([0-9]*)\\]").exec(i);n&&(void 0===e[i]&&(e[i]={}),0===r.length&&(e[i]=n)),e=e[i]}return e}function u(){q!==L.getChart()&&(q=L.getChart(),f(q,J))}function l(){O=!1,G=n.defer(),R=e.then(a)["catch"](o),I("ready",u,M)}function d(e,n,r,i){var o=function(){var e={chartWrapper:L,chart:L.getChart(),args:arguments};t.invoke(r,i||this,e)};return angular.isDefined(e)&&angular.isObject(e)?(angular.isArray(e[n])||(e[n]=[]),e[n].push(o),function(){angular.isDefined(o.googleListenerHandle)&&_.visualization.events.removeListener(o.googleListenerHandle);var t=e[n].indexOf(o);e[n].splice(t,1),0===e[n].length&&(e[n]=void 0)}):void 0}function f(e,t){for(var n in t)if(t.hasOwnProperty(n)&&angular.isArray(t[n]))for(var r=0;r<t[n].length;r++)angular.isFunction(t[n][r])&&(t[n][r].googleListenerHandle=_.visualization.events.addListener(e,n,t[n][r]))}function p(){i("beforeDraw"),L.draw()}function m(){W&&(R=R.then(s)),R=R.then(p())}function h(){return L}function g(){var e=N||{};return angular.copy(e)}function v(){return j}function y(e){var t=F||{};return c(t,e)}function $(){var e=F||{};return angular.copy(e)}function b(){return G.promise}function C(){var e=H||{};return angular.copy(e)}function w(){return O}function S(e,t,n){return d(J,e,t,n)}function E(e,t,n){return d(Y,e,t,n)}function I(e,t,n){return d(K,e,t,n)}function P(e){angular.isDefined(e)&&(N=angular.copy(e),W=!0)}function T(e){angular.isElement(e)&&j!==e&&(j=e,L=null,W=!0)}function x(e,t){F=F||{},c(F,e,angular.copy(t)),W=!0}function k(e){angular.isDefined(e)&&(F=angular.copy(e),W=!0)}function A(e,t,n,r,i,o,a){j=e||j,B=t||B,N=n||N,H=r||H,F=i||F,U=o||U,z=a||z,R=R.then(s)}function D(e){H=angular.copy(e)}var M=this;M.draw=m,M.getChartWrapper=h,M.getData=g,M.getElement=v,M.getOption=y,M.getOptions=$,M.getView=C,M.getReadyPromise=b,M.isApiReady=w,M.registerChartListener=S,M.registerServiceListener=E,M.registerWrapperListener=I,M.setData=P,M.setElement=T,M.setOption=x,M.setOptions=k,M.setup=A,M.setView=D;var _,R,O,L,j,B,N,H,F,U,q,V,z,G,W=!0,Y={},K={},J={};l()}return i}angular.module("googlechart").factory("GoogleChartService",e),e.$inject=["googleChartApiPromise","$injector","$q","FormatManager"]}(),function(){function e(){var e="https:",t="//www.google.com/jsapi";this.setProtocol=function(t){e=t},this.setUrl=function(e){t=e},this.$get=function(){return(e?e:"")+t}}angular.module("googlechart").provider("googleJsapiUrl",e)}(),!function(e){var t=function(e,t){this.extension=e,this.protocol=t};$traceurRuntime.createClass(t,{getPaymentType:function(e){var t=this,n=this.protocol.getPaymentType(e);return this.sendCommand(n).then(function(e){return t.protocol.getPaymentTypeResponse(e)})},setPaymentType:function(e,t){var n=this.protocol.setPaymentType(e,t);return this.sendCommand(n)},getDateTime:function(){var e=this,t=this.protocol.getDateTime();return this.sendCommand(t).then(function(t){return e.protocol.getDateTimeResponse(t)})},setDateTime:function(e){var t=this.protocol.setDateTime(e);return this.sendCommand(t)},dailyClose:function(e){var t=this.protocol.dailyClose(e);return this.sendCommand(t)},reportByDate:function(e,t,n){var r=this.protocol.reportByDate(e,t,n);return this.sendCommand(r)},reportByNumber:function(e,t,n){var r=this.protocol.reportByNumber(e,t,n);return this.sendCommand(r)},startTransactionReportByNumber:function(e,t,n){var r=this.protocol.startTransactionReportByNumber(e,t,n);return this.sendCommand(r)},fetchTransactionReportData:function(){var e=this.protocol.fetchTransactionReportData();return this.sendCommand(e).then(function(e){return e})},finalizeTransactionReport:function(){var e=this.protocol.finalizeTransactionReport();return this.sendCommand(e)},cancelTransactionReport:function(){var e=this.protocol.cancelTransactionReport();return this.sendCommand(e)},setEmbarkNumber:function(e){var t=this.protocol.setEmbarkNumber(e);return console.log("setEmbarkNumber: "+t),this.sendCommand(t)},setCustomerData:function(e){var t=this.protocol.setCustomerData(e);return console.log("setCustomerData: "+t),this.sendCommand(t)},openCreditNote:function(e){var t=this.protocol.openCreditNote(e);return console.log("openCreditNote: "+t),this.sendCommand(t)},closeCreditNote:function(e){var t=this,n=this.protocol.closeCreditNote(e);return console.log("closeCreditNote: "+n),this.sendCommand(n).then(function(n){return console.log("closeCreditResponse: "+n),t.protocol.getCloseCreditNoteResponse(n,e)})},openReceipt:function(e){var t=this.protocol.openReceipt(e);return this.sendCommand(t)},cancelReceipt:function(e){var t=this.protocol.cancelReceipt(e);return this.sendCommand(t)},openDrawer:function(){var e=this.protocol.openDrawer();return this.sendCommand(e)},queryStatus:function(){var e=this.protocol.queryStatus();return this.sendCommand(e)},addItem:function(e,t,n,r){var i=this.protocol.addItem(e,t,n,r);return this.sendCommand(i)},addDiscount:function(e,t){var n=this.protocol.addDiscount(e,t);return this.sendCommand(n)},getSubtotal:function(){var e=this,t=this.protocol.getSubtotal();return this.sendCommand(t).then(function(t){return e.protocol.getSubtotalResponse(t)})},addPayment:function(e,t,n){var r=this.protocol.addPayment(e,t,n);return this.sendCommand(r)},closeReceipt:function(e){var t=this,n=this.protocol.closeReceipt(e);return this.sendCommand(n).then(function(n){return t.protocol.getCloseReceiptResponse(n,e)})},getDocumentInfo:function(){var e=this,t=this.protocol.getDocumentInfo();return this.sendCommand(t).then(function(t){return e.protocol.getDocumentInfoResponse(t)})},getPaymentsInfo:function(){
var e=this,t=this.protocol.getPaymentsInfo();return this.sendCommand(t).then(function(t){return e.protocol.getPaymentsInfoResponse(t)})},sendCommand:function(e){var t=this,n=this.protocol.nextSeq();return this.extension.sendToFiscalPrinter(n,e).then(function(e){if(e.error)throw new Error(e.error);var n=t.protocol.buildComandResponse(e);if(n.success)return n;throw n.error})}},{}),e.Eresto||(e.Eresto={}),e.Eresto.FiscalPrinter=t}(window),!function(e){var t=function(e){this.setFields(e),this.setErrors()};$traceurRuntime.createClass(t,{setFields:function(e){this.fields=e.slice(2,-5).reduce(function(e,t){return 28===t?e.push(""):(hexString=16>t?"0"+t.toString(16):t.toString(16),e[e.length-1]+=hexString),e},[""])},hexStr2arr:function(e){return function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.match(/.{1,2}/g)[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=String.fromCharCode(parseInt(c,16))}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}()},setErrors:function(){var e={},t=parseInt(this.hexStr2arr(this.fields[1]).join(""),16),n=parseInt(this.hexStr2arr(this.fields[2]).join(""),16);4&t&&(e[102]="Error y/o falla de impresora"),8&t&&(e[103]="Impresorea fuera de línea"),16384&t&&(e[114]="Impresora sin papel para imprimir"),1&n&&(e[200]="Error de comprobación de memoria fiscal"),2&n&&(e[201]="Error de comprobación de memoria de trabajo"),4&n&&(e[202]="Poca batería"),8&n&&(e[203]="Comando no reconocido"),16&n&&(e[204]="Campo de datos inválido"),32&n&&(e[205]="Comando no válido para estado fiscal"),64&n&&(e[206]="Desbordamiento de totales"),128&n&&(e[207]="Memoria fiscal llena"),256&n&&(e[208]="Memoria fiscal casi llena"),2048&n&&(e[211]="Es necesario hacer un cierre de la Jornada Fiscal"),this.errors=e},get success(){return 0===Object.keys(this.errors).length},get error(){var e=Object.keys(this.errors);return{code:e[0],message:this.errors[e[0]]}}},{});var n=function(){this.name="epson_ar_compat",this.maxSeq=127,this.minSeq=32,this.seq=this.minSeq};$traceurRuntime.createClass(n,{nextSeq:function(){return this.seq=this.seq+1>this.maxSeq?this.minSeq:++this.seq},hexStr2arr:function(e){return function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.match(/.{1,2}/g)[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=String.fromCharCode(parseInt(c,16))}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}()},str2arr:function(e){return e?function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.split("")[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=c.charCodeAt(0)}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}():[]},stripAccents:function(e){var t=/[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ]/g,n="aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY";return e.replace(t,function(e){return n.substr(t.source.indexOf(e)-1,1)})},getCloseReceiptResponse:function(e){var t=e.fields,n=this.hexStr2arr(t[3]).join("");return{receiptNumber:n}},getDateTimeResponse:function(e){var t=e.fields,n=this.hexStr2arr(t[3]),r=this.hexStr2arr(t[4]),i="20"+n[4]+n[5],o=n[2]+n[3]-1,a=n[0]+n[1],s=r[0]+r[1],c=r[2]+r[3],u=r[4]+r[5];return new Date(i,o,a,s,c,u)},getDateTime:function(){return[[89]]},isTicket:function(e){return!e||!e.documentType||"C"===e.documentType},openReceipt:function(e){return this.isTicket(e)?this.openTicketReceipt():this.openDocumentReceipt(e)},openTicketReceipt:function(){return[[64],this.str2arr("C")]},openDocumentReceipt:function(e){var t=this.stripAccents(e.customerName),n=this.stripAccents(e.customerAddress);return[[96],this.str2arr(e.documentType),this.str2arr("C"),this.str2arr(e.documentLetter),this.str2arr("1"),this.str2arr("F"),this.str2arr("10"),this.str2arr("I"),this.str2arr(e.customerIvaType),this.str2arr(t.substr(0,40)),this.str2arr(t.substr(40,40)||"."),this.str2arr(e.customerIdType),this.str2arr(e.customerIdValue),this.str2arr("N"),this.str2arr(n.substr(0,40)),this.str2arr(n.substr(40,40)||"."),this.str2arr(n.substr(80,40)||"."),this.str2arr(e.embarkNumber.substr(0,40)),this.str2arr(e.embarkNumber.substr(40,40)||"."),this.str2arr("C")]},queryStatus:function(){return[[89]]},openDrawer:function(){return[[123]]},addItem:function(e,t,n,r){return this.isTicket(r)?this.addTicketItem(e,t,n):this.addDocumentItem(e,t,n,r)},addTicketItem:function(e,t,n){return t=this.stripAccents(t.substr(0,20)),e=(1e3*e).toFixed(0),n=(100*n).toFixed(0),[[66],this.str2arr(t),this.str2arr(e),this.str2arr(n),this.str2arr("2100"),this.str2arr("M"),this.str2arr("0"),this.str2arr("0")]},addDocumentItem:function(e,t,n,r){return r&&"A"===r.documentLetter&&(n/=1.21),t=this.stripAccents(t),e=(1e3*e).toFixed(0),n=(100*n).toFixed(0),[[98],this.str2arr(t.substr(54,18)||"."),this.str2arr(e),this.str2arr(n),this.str2arr("2100"),this.str2arr("M"),this.str2arr("0"),this.str2arr("0"),this.str2arr(t.substr(0,18)),this.str2arr(t.substr(18,18)||"."),this.str2arr(t.substr(36,18)||"."),this.str2arr("0"),this.str2arr("0")]},addDiscount:function(e,t){var n=this.isTicket(t)?68:100;return t&&"A"===t.documentLetter&&(e/=1.21),e=(100*e).toFixed(0),[[n],this.str2arr("DESCUENTO"),this.str2arr(e),this.str2arr("D")]},addPayment:function(e,t,n){e=e.toString().substr(0,26),t=(100*t).toFixed(0);var r=this.isTicket(n)?68:100;return[[r],this.str2arr(e),this.str2arr(t),this.str2arr("T")]},closeReceipt:function(e){return this.isTicket(e)?this.closeTicketReceipt():this.closeDocumentReceipt(e)},closeDocumentReceipt:function(e){return[[101],this.str2arr(e.documentType),this.str2arr(e.documentLetter),this.str2arr("")]},closeTicketReceipt:function(){return[[69],this.str2arr("C")]},cancelReceipt:function(e){var t=this.isTicket(e)?68:100;return[[t],this.str2arr(""),this.str2arr(""),this.str2arr("C")]},dailyClose:function(e){return[[57],this.str2arr(e.toUpperCase())]},reportByDate:function(e,t){var n=e.toISOString().substr(2,8).split("-").join(""),r=t.toISOString().substr(2,8).split("-").join("");return[[58],this.str2arr(n),this.str2arr(r),this.str2arr("t")]},reportByNumber:function(e,t){return[[59],this.str2arr(e.toString()),this.str2arr(t.toString()),this.str2arr("t")]},buildComandResponse:function(e){return new t(e)}},{}),e.Eresto||(e.Eresto={}),e.Eresto.EpsonArCompatProtocol=n}(window),!function(e){var t=function(e){this.setFields(e),this.setErrors()};$traceurRuntime.createClass(t,{setFields:function(e){this.fields=e.slice(2,-5).reduce(function(e,t){return 28===t?e.push(""):(hexString=16>t?"0"+t.toString(16):t.toString(16),e[e.length-1]+=hexString),e},[""])},hexStr2arr:function(e){return function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.match(/.{1,2}/g)[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=String.fromCharCode(parseInt(c,16))}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}()},setErrors:function(){var e={"0000":"Resultado exitoso","0001":"Error interno","0002":"Error de inicialización del equipo","0003":"Error de proceso interno","0101":"Comando inválido para el estado actual","0102":"Comando inválido para el documento actual","0103":"Comando sólo aceptado en modo técnico","0104":"Comando sólo aceptado sin Jumper de Servicio","0105":"Comando sólo aceptado con Jumper de Servicio","0106":"Comando sólo aceptado sin Jumper de Uso Interno","0107":"Comando sólo aceptado con Jumper de Uso Interno","0108":"Sub estado inválido","0109":"Demasiadas intervenciones técnicas","0201":"El frame no contiene el largo mínimo aceptado","0202":"Comando inválido","0203":"Campos en exceso","0204":"Campos en defecto","0205":"Campo no opcional","0206":"Campo alfanumérico inválido","0207":"Campo alfabético inválido","0208":"Campo numérico inválido","0209":"Campo binario inválido","020a":"Campo imprimible inválido","020B":"Campo hexadecimal inválido","020C":"Campo fecha inválido","020D":"Campo hora inválido","020E":"Campo fiscal rich text inválido","020F":"Campo booleano inválido","0210":"Largo del campo inválido","0211":"Extensión del comando inválida","0212":"Código de barra no permitido","0213":"Atributos de impresión no permitidos","0214":"Atributos de impresión inválidos","0215":"Código de barras incorrectamente definido","0216":"Combianación de la palabra 'total' no aceptada","0301":"Error de hardware","0302":"Impresora fuera de línea","0303":"Error de Impresión","0304":"Problemas de papel, no se encuentra en condiciones para realizar la acción requerida","0305":"Poco papel disponible","0306":"Error en carga o expulsión de papel","0307":"Característica de impresora no soportada","0308":"Error de display","0309":"Secuencia de scan inválida","030a":"Número de área de recorte (crop área) inválido","030B":"Scanner no preparado","030C":"Resolución de logotipo de la empresa no permitida","030D":"Imposible imprimir documento en estación térmica","0401":"Número de serie inválido","0402":"Deben configurarse los datos de fiscalización","0501":"Fecha / Hora no configurada","0502":"Error en cambio de fecha","0503":"Fecha fuera de rango","0505":"Número de caja inválido","0506":"RUT inválido","0508":"Número de línea de Encabezado/Cola inválido","0509":"Demasiadas fiscalizaciones","050B":"Demasiados cambios de datos de fiscalización","050C":"Demasiados tipos de pagos definidos","050D":"Tipo de pago definido previamente","050E":"Número de pago inválido","050F":"Descripción de pago inválida","0510":"Máximo porcentaje de descuento inválido","0511":"Claves de firma digital inválidas","0512":"Claves de firma digital no configuradas","0513":"Logo de usuario inválido","0514":"Secuencia de definición de logos de usuario inválida","0515":"Configuración de display inválida","0516":"Tipo de letra de MICR inválida","0518":"Líneas de establecimiento no configuradas","0519":"Datos fiscales no configurados","0520":"Situación tributaria no configurada","0521":"Tasa de IVA estándar no configurada","0522":"Límite de tique-factura no configurado","0524":"Monto máximo de tique-factura no permitido","0525":"Largo del logotipo de la empresa no permitido","0526":"Posición del logotipo de la empresa inválido","0527":"El tamaño del logotipo de la empresa excede el máximo","0801":"Comando inválido fuera de la jornada fiscal","0802":"Comando inválido dentro de la jornada fiscal","0803":"Memoria fiscal llena. Imposible la apertura de la jornada fiscal","0807":"Periodo auditado sin datos","0808":"Rango auditado inválido","0809":"Restan datos por auditar","080A":"No hay más datos a descarga","080B":"No es posible abrir la jornada fiscal","080C":"No es posible cerrar la jornada fiscal","0901":"Overflow","0902":"Underflow","0903":"Demasiados ítems involucrados en la transacción","0904":"Demasiadas tasas de impuesto utilizadas","0905":"Demasiados descuentos/recargos sobre subtotal involucradas en la transacción","0906":"Demasiados pagos involucrados en la transacción","0907":"Item no encontrado","0908":"Pago no encontrado","0909":"El total debe ser mayor a cero","090C":"Tipo de pago no definido","090D":"Demasiadas donaciones","090E":"Donación no encontrada","0A01":"No permitido luego de descuentos/recargos sobre el subtotal","0A02":"No permitido luego de iniciar la fase de pago","0A03":"Tipo de ítem inválido","0A04":"Línea de descripción en blanco","0A05":"Cantidad resultante menor que cero","0A06":"Cantidad resultante mayor a lo permitido","0A07":"Precio total del ítem mayor al permitido","0A08":"No permitido antes de iniciar la fase pago","0A09":"Fase de pago no finalizada","0A0A":"Fase de pago finalizada","0A0B":"Monto de pago no permitido","0A0C":"Monto de descuento/recargo no permitido","0A0F":"No permitido antes de un ítem","0A10":"Demasiadas descripciones extras","0B01":"Tipo de documento del comprador inválido","0B02":"Máximo valor aceptado fue superado","0B03":"CUIT/CUIL inválido","0B04":"Tipo de percepción inválida","0B05":"Exceso en la cantidad de líneas de separación de la firma","0B06":"Monto cero de percepción no permitido","0B07":"Demasiadas percepciones involucradas en la transacción","0B08":"Percepción no encontrada","0B09":"Operación no permitida luego de percepciones","0B0A":"Exceso de operaciones dentro del documento con triplicado","0B0B":"Tique factura del turista solo es aceptado en tique-factura B","0B0C":"Datos del turista inválidos","0B0D":"Número de documento inválido"};this.errors={},"0000"!==this.fields[3]&&(this.errors[this.fields[3]]=e[this.fields[3]])},get success(){return 0===Object.keys(this.errors).length},get error(){var e=Object.keys(this.errors);return{code:e[0],message:this.errors[e[0]]}}},{});var n=function(){this.name="epson_ar",this.maxSeq=255,this.minSeq=129,this.seq=this.minSeq};$traceurRuntime.createClass(n,{nextSeq:function(){return this.seq=this.seq+1>this.maxSeq?this.minSeq:++this.seq},hexStr2arr:function(e){return function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.match(/.{1,2}/g)[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=String.fromCharCode(parseInt(c,16))}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}()},str2arr:function(e){return e?function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.split("")[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=c.charCodeAt(0)}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}():[]},stripAccents:function(e){var t=/[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ]/g,n="aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY";return e.replace(t,function(e){return n.substr(t.source.indexOf(e)-1,1)})},getSubtotalResponse:function(e){var t=e.fields.slice(5);return this.hexStr2arr(t[0]).join("")},getDocumentInfoResponse:function(e){var t=this,n=e.fields.slice(5);return function(){var e=0,r=[],i=!0,o=!1,a=void 0;try{for(var s=void 0,c=n[$traceurRuntime.toProperty(Symbol.iterator)]();!(i=(s=c.next()).done);i=!0){var u=s.value;u&&(r[e++]=t.hexStr2arr(u).join(""))}}catch(l){o=!0,a=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(o)throw a}}return r}()},getPaymentsInfoResponse:function(e){var t=this,n=e.fields.slice(5);return function(){var e=0,r=[],i=!0,o=!1,a=void 0;try{for(var s=void 0,c=n[$traceurRuntime.toProperty(Symbol.iterator)]();!(i=(s=c.next()).done);i=!0){var u=s.value;u&&(r[e++]=t.hexStr2arr(u).join(""))}}catch(l){o=!0,a=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(o)throw a}}return r}()},getCloseCreditNoteResponse:function(e){var t=e.fields.slice(5),n=this.hexStr2arr(t[0]).join(""),r=this.hexStr2arr(t[1]).join(""),i=this.hexStr2arr(t[2]).join(""),o=this.hexStr2arr(t[3]).join(""),a=this.hexStr2arr(t[4]).join("");return{creditNoteNumber:n,creditNoteType:r,amount:i,iva:o,cashback:a}},getCloseReceiptResponse:function(e,t){var n=e.fields.slice(5);if(this.isTicket(t)){var r=this.hexStr2arr(n[0]).join(""),i=this.hexStr2arr(n[1]).join(""),o=this.hexStr2arr(n[2]).join(""),a=this.hexStr2arr(n[3]).join("");return{receiptNumber:r,amount:i,iva:o,cashback:a}}var s=this.hexStr2arr(n[0]).join(""),c=this.hexStr2arr(n[1]).join(""),u=this.hexStr2arr(n[2]).join(""),l=this.hexStr2arr(n[3]).join(""),d=this.hexStr2arr(n[4]).join("");return{receiptNumber:s,documentLetter:c,amount:u,iva:l,cashback:d}},getDateTimeResponse:function(e){var t=e.fields.slice(5),n=this.hexStr2arr(t[0]),r=this.hexStr2arr(t[1]),i="20"+n[4]+n[5],o=n[2]+n[3]-1,a=n[0]+n[1],s=r[0]+r[1],c=r[2]+r[3],u=r[4]+r[5];return new Date(i,o,a,s,c,u)},pad:function(e){return 10>e?"0"+e:e.toString()},date2dateStr:function(e){return this.pad(e.getDate())+this.pad(e.getMonth()+1)+e.getFullYear().toString().substr(2)},date2timeStr:function(e){return this.pad(e.getHours())+this.pad(e.getMinutes())+this.pad(e.getSeconds())},getDateTime:function(){return[[5,2],[0,0]]},setDateTime:function(e){var t=this.date2dateStr(e),n=this.date2timeStr(e);return[[5,1],[0,0],this.str2arr(t),this.str2arr(n)]},getPaymentsInfo:function(){return[[10,12],[0,2]]},getDocumentInfo:function(){return[[10,10],[0,0]]},dailyClose:function(e){var t,n;return e.match(/Z/i)?(t=[8,1],n=[0,0]):(t=[8,2],n=[0,1]),[t,n]},reportByDate:function(e,t,n){var r=n?1:0,i=e.toISOString().substr(2,8).split("-").reverse().join(""),o=t.toISOString().substr(2,8).split("-").reverse().join("");return[[8,16],[0,r],this.str2arr(i),this.str2arr(o)]},reportByNumber:function(e,t,n){var r=n?1:0;return[[8,17],[0,r],this.str2arr(e.toString()),this.str2arr(t.toString())]},openDrawer:function(){return[[7,7],[0,0]]},queryStatus:function(){return[[0,1],[0,0]]},isTicket:function(e){return!e||!e.documentType||"C"===e.documentType},isCreditNote:function(e){return e&&"TNC"===e.documentType},openCreditNote:function(e){var t={DNI:"D",CUIL:"L",CUIT:"T"};console.log(e);var n=this.stripAccents(e.customerName||""),r=this.stripAccents(e.customerAddress||""),i=t[e.customerIdType],o=this.stripAccents(e.embarkNumber||"");return[[13,1],[0,0],this.str2arr(n.substr(0,40)),this.str2arr(n.substr(40,40)),this.str2arr(r.substr(0,40)),this.str2arr(r.substr(40,40)),this.str2arr(r.substr(80,40)),this.str2arr(i),this.str2arr(e.customerIdValue),this.str2arr(e.customerIvaType),this.str2arr("0000000"),this.str2arr(""),this.str2arr(o.substr(0,40))]},openReceipt:function(e){if(this.isTicket(e))return[[10,1],[0,0]];var t={DNI:"D",CUIL:"L",CUIT:"T"},n=this.stripAccents(e.customerName||""),r=this.stripAccents(e.customerAddress||""),i=t[e.customerIdType],o=this.stripAccents(e.embarkNumber||"");return[[11,1],[0,0],this.str2arr(n.substr(0,40)),this.str2arr(n.substr(40,40)),this.str2arr(r.substr(0,40)),this.str2arr(r.substr(40,40)),this.str2arr(r.substr(80,40)),this.str2arr(i),this.str2arr(e.customerIdValue),this.str2arr(e.customerIvaType),this.str2arr(o.substr(0,40)),this.str2arr(o.substr(40,40)),[]]},addItem:function(e,t,n,r){var i;return this.isTicket(r)?i=[10,2]:this.isCreditNote(r)?(i=[13,2],n/=1.21):(i=[11,2],n/=1.21),t=this.stripAccents(t),e=(1e4*e).toFixed(0),n=(1e4*n).toFixed(0),[i,[0,0],this.str2arr(t.substr(40,40)),this.str2arr(t.substr(80,40)),this.str2arr(t.substr(120,40)),this.str2arr(t.substr(160,40)),this.str2arr(t.substr(0,40)),this.str2arr(e),this.str2arr(n),this.str2arr("2100"),[],[]]},getSubtotal:function(e){var t;return t=this.isTicket(e)?[10,3]:this.isCreditNote(e)?[13,3]:[11,3],[t,[0,0]]},addDiscount:function(e,t){var n;return this.isTicket(t)?n=[10,4]:this.isCreditNote(t)?n=[13,4]:(n=[11,4],t&&"A"===t.documentLetter&&(e/=1.21)),e=(100*e).toFixed(0),[n,[0,0],this.str2arr("DESCUENTO"),this.str2arr(e)]},addPayment:function(e,t,n){var r=this.isTicket(n)?[10,5]:[11,5];return e=e.toString().substr(0,26),t=(100*t).toFixed(0),[r,[0,0],[],this.str2arr(e),this.str2arr(t)]},closeReceipt:function(e){var t=this.isTicket(e)?[10,6]:[11,6];return[t,[0,3],[],[],[],[],[],[]]},closeCreditNote:function(){return[[13,6],[0,3],[],[],[],[],[],[],[]]},cancelReceipt:function(e){var t=this.isTicket(e)?[10,7]:[11,7];return[t,[0,0]]},buildComandResponse:function(e){return new t(e)}},{}),e.Eresto||(e.Eresto={}),e.Eresto.EpsonArProtocol=n}(window),!function(e){var t=function(e){this.documentInProgress=0!=(e>>0&15),this.fiscalPeriodOpen=1==(e>>7&1),this.memoryAlmostFull=1==(e>>10&3),this.memoryFull=2==(e>>10&3),this.memoryError=3==(e>>10&3)};$traceurRuntime.createClass(t,{},{});var n=function(e){this.lowPaper=1==(e>>0&3),this.noPaper=2==(e>>0&3),this.cashdrawerOpen=1==(e>>12&1),this.coverOpen=1==(e>>13&1),this.printerError=1==(e>>14&1),this.offline=1==(e>>15&1)};$traceurRuntime.createClass(n,{},{});var r=function(e){var t=e.slice(2,-5).reduce(function(e,t){return 28==t?e.push(""):e[e.length-1]+=16>t?"0"+t.toString(16):t.toString(16),e},[""]);this.frame_=e,this.printerStatus_=t[0],this.fiscalStatus_=t[1],this.commandSuccess_=t[2].toUpperCase(),this.commandResult_=t[3].toUpperCase(),this.extraFields_=t.slice(5),this.returnCodes_={"0001":"Error interno","0002":"Error de inicialización del equipo","0003":"Error de proceso interno","0101":"Comando inválido para el estado actual","0102":"Comando inválido para el documento actual","0103":"Comando sólo aceptado en modo técnico","0104":"Comando sólo aceptado sin Jumper de Servicio","0105":"Comando sólo aceptado con Jumper de Servicio","0106":"Comando sólo aceptado sin Jumper de Desbloqueo por Software","0107":"Comando sólo aceptado con Jumper de Desbloqueo por Software","0108":"Proceso de scan o carga de logos en progreso","0109":"Demasiadas intervenciones técnicas","0201":"El frame no contiene el largo mínimo aceptado","0202":"Comando inválido","0203":"Campos en exceso","0204":"Campos en defecto","0205":"Campo no opcional","0206":"Campo alfanumérico inválido","0207":"Campo alfabético inválido","0208":"Campo numérico inválido","0209":"Campo binario inválido","020a":"Campo imprimible inválido","020B":"Campo hexadecimal inválido","020C":"Campo fecha inválido","020D":"Campo hora inválido","020E":"Campo fiscal rich text inválido","020F":"Campo booleano inválido","0210":"Largo del campo inválido","0211":"Extensión del comando inválida","0212":"Código de barra no permitido","0213":"Atributos de impresión no permitidos","0214":"Atributos de impresión inválidos","0215":"Código de barras incorrectamente definido","0301":"Error de hardware","0302":"Impresora fuera de línea","0303":"Error de Impresión","0304":"Problemas de papel, no se encuentra en condiciones para realizar la acción requerida","0305":"Poco papel disponible","0306":"Error en carga o expulsión de papel","0307":"Característica de impresora no soportada","0308":"Error de display","0309":"Secuencia de scan inválida","030a":"Número de área de recorte (crop área) inválido","030B":"Scanner no preparado","0401":"Número de serie inválido","0402":"Deben configurarse los datos de fiscalización","0501":"Fecha / Hora no configurada","0502":"Error en cambio de fecha","0503":"Fecha fuera de rango","0505":"Número de caja inválido","0506":"RUT inválido","0508":"Número de línea de Encabezado/Cola inválido","0509":"Demasiadas fiscalizaciones","050B":"Demasiados cambios de datos de fiscalización","050C":"Demasiados tipos de pagos definidos","050D":"Tipo de pago definido previamente","050E":"Número de pago inválido","050F":"Descripción de pago inválida","0510":"Máximo porcentaje de descuento inválido","0511":"Claves de firma digital inválidas","0512":"Claves de firma digital no configuradas","0513":"Logo de usuario inválido","0514":"Secuencia de definición de logos de usuario inválida","0515":"Configuración de display inválida","0516":"Tipo de letra de MICR inválida","0523":"Time out en generación de claves","0601":"Memoria de transacciones llena","0705":"Cajón de Dinero no abierto","0801":"Comando inválido fuera de la jornada fiscal","0802":"Comando inválido dentro de la jornada fiscal","0803":"Memoria fiscal llena. Imposible la apertura de la jornada fiscal","0804":"Más de 24 hs. desde la apertura de la jornada fiscal. Se requiere cierre Z","0805":"Pagos no definidos","0806":"Demasiados pagos utilizados en la jornada fiscal","0807":"Periodo auditado sin datos","0901":"Overflow","0902":"Underflow","0903":"Demasiados ítems involucrados en la transacción","0904":"Demasiadas tasas de impuesto utilizadas","0905":"Demasiados descuentos/recargos sobre subtotal involucradas en la transacción","0906":"Demasiados pagos involucrados en la transacción","0907":"Item no encontrado","0908":"Pago no encontrado","0909":"El total debe ser mayor a cero","090C":"Tipo de pago no definido","090D":"Demasiadas donaciones","090E":"Donación no encontrada","0A02":"No permitido luego de descuentos/recargos sobre el subtotal","0A03":"No permitido luego de iniciar la fase de pago","0A04":"Tipo de ítem inválido","0A05":"Línea de descripción en blanco","0A06":"Cantidad resultante menor que cero","0A07":"Cantidad resultante mayor a lo permitido","0A08":"Precio total del ítem mayor al permitido","0A09":"No permitido antes de iniciar la fase pago","0A0A":"Fase de pago no finalizada","0A0B":"Fase de pago finalizada","0A0C":"Monto de pago no permitido","0A0D":"Monto de descuento no permitido","0A0E":"Monto de donación no permitido","0A0F":"Vuelto no mayo a cero","0A01":"No permitido antes de un ítem","0E01":"Se llegó al limite de 30 líneas",FFFF:"Error desconocido"}};$traceurRuntime.createClass(r,{get success(){return""==this.commandSuccess_?0==this.commandResult_:0==this.commandSuccess_},get frame(){return this.frame_},get error(){return{code:this.commandResult_,message:this.returnCodes_[this.commandResult_]}},get printerStatus(){return new n(parseInt("0x"+this.printerStatus_))},get fiscalStatus(){return new t(parseInt("0x"+this.fiscalStatus_))},get extraFields(){return this.extraFields_}},{});var i=function(){this.name="epson_cl",this.maxSeq=255,this.minSeq=129,this.seq=this.minSeq};$traceurRuntime.createClass(i,{nextSeq:function(){return this.seq=this.seq+1>this.maxSeq?this.minSeq:++this.seq},str2arr:function(e){return function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.split("")[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=c.charCodeAt(0)}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}()},hexStr2arr:function(e){return function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.match(/.{1,2}/g)[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=String.fromCharCode(parseInt("0x"+c))}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}()},getSubtotalResponse:function(e){var t=e.extraFields;return this.hexStr2arr(t[0]).join("")},getDocumentInfoResponse:function(e){var t=this,n=e.extraFields;return function(){var e=0,r=[],i=!0,o=!1,a=void 0;try{for(var s=void 0,c=n[$traceurRuntime.toProperty(Symbol.iterator)]();!(i=(s=c.next()).done);i=!0){var u=s.value;u&&(r[e++]=t.hexStr2arr(u).join(""))}}catch(l){o=!0,a=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(o)throw a}}return r}()},getPaymentsInfoResponse:function(e){var t=this,n=e.extraFields;return function(){var e=0,r=[],i=!0,o=!1,a=void 0;try{for(var s=void 0,c=n[$traceurRuntime.toProperty(Symbol.iterator)]();!(i=(s=c.next()).done);i=!0){var u=s.value;u&&(r[e++]=t.hexStr2arr(u).join(""))}}catch(l){o=!0,a=l}finally{try{i||null==c["return"]||c["return"]()}finally{if(o)throw a}}return r}()},getPaymentTypeResponse:function(e){var t=e.extraFields;return this.hexStr2arr(t[0]).join("")},getCloseReceiptResponse:function(e){var t=e.extraFields,n=this.hexStr2arr(t[0]).join(""),r=this.hexStr2arr(t[1]).join(""),i=this.hexStr2arr(t[2]).join("");return{receiptNumber:n,amount:r,cashback:i}},getDateTimeResponse:function(e){var t=e.extraFields,n=this.hexStr2arr(t[0]),r=this.hexStr2arr(t[1]),i="20"+n[4]+n[5],o=n[2]+n[3]-1,a=n[0]+n[1],s=r[0]+r[1],c=r[2]+r[3],u=r[4]+r[5];return new Date(i,o,a,s,c,u)},pad:function(e){return 10>e?"0"+e:e.toString()},date2dateStr:function(e){return this.pad(e.getDate())+this.pad(e.getMonth()+1)+e.getFullYear().toString().substr(2)},date2timeStr:function(e){return this.pad(e.getHours())+this.pad(e.getMinutes())+this.pad(e.getSeconds())},setPaymentType:function(e,t){return e=e.toString(),[[5,12],[0,0],this.str2arr(e),this.str2arr(t)]},getPaymentType:function(e){return e=e.toString(),[[5,13],[0,0],this.str2arr(e)]},getDateTime:function(){return[[5,2],[0,0]]},setDateTime:function(e){var t=this.date2dateStr(e),n=this.date2timeStr(e);return[[5,1],[0,0],this.str2arr(t),this.str2arr(n)]},getPaymentsInfo:function(){return[[10,12],[0,2]]},getDocumentInfo:function(){return[[10,10],[0,0]]},dailyClose:function(e){var t=e.match(/Z/i)?[8,1]:[8,2];return[t,[0,0]]},reportByDate:function(e,t,n){var r=n?1:0,i=e.toISOString().substr(2,8).split("-").reverse().join(""),o=t.toISOString().substr(2,8).split("-").reverse().join("");return[[8,14],[0,r],this.str2arr(i),this.str2arr(o)]},reportByNumber:function(e,t,n){var r=n?1:0;return[[8,15],[0,r],this.str2arr(e.toString()),this.str2arr(t.toString())]},startTransactionReportByNumber:function(e,t,n){var r=n?1:0;return[[8,17],[0,r],this.str2arr(e.toString()),this.str2arr(t.toString())]},fetchTransactionReportData:function(){return[[8,32],[0,0]]},finalizeTransactionReport:function(){return[[8,33],[0,0]]},cancelTransactionReport:function(){return[[8,34],[0,0]]},openDrawer:function(){return[[7,7],[0,1]]},queryStatus:function(){return[[0,1],[0,0]]},openReceipt:function(){return[[10,1],[0,0],[],[]]},addItem:function(e,t,n){return e=e.toFixed(4).replace(".",""),n=n.toFixed(4).replace(".",""),[[10,2],[0,0],[],[],[],[],[],this.str2arr(t),this.str2arr(e),this.str2arr(n),[]]},getSubtotal:function(){return[[10,3],[0,0]]},addDiscount:function(e){return e=e.toFixed(),[[10,4],[0,0],this.str2arr("Descuento"),this.str2arr(e)]},addPayment:function(e,t){return e=e.toString(),t=Math.round(t).toString(),[[10,5],[0,0],this.str2arr(e),this.str2arr(t)]},closeReceipt:function(){return[[10,6],[0,1],[],[],[],[],[],[]]},buildComandResponse:function(e){return new r(e)}},{}),e.Eresto||(e.Eresto={}),e.Eresto.EpsonClProtocol=i}(window),!function(e){var t=function(e){this.setFields(e),this.setErrors()};$traceurRuntime.createClass(t,{setFields:function(e){this.fields=e.slice(2,-5).reduce(function(e,t){return 28===t?e.push(""):(hexString=16>t?"0"+t.toString(16):t.toString(16),e[e.length-1]+=hexString),e},[""])},hexStr2arr:function(e){return function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.match(/.{1,2}/g)[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=String.fromCharCode(parseInt(c,16))}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}()},setErrors:function(){var e={},t=parseInt(this.hexStr2arr(this.fields[1]).join(""),16),n=parseInt(this.hexStr2arr(this.fields[2]).join(""),16);4&t&&(e[102]="Error de impresora"),8&t&&(e[103]="Impresorea offline"),16&t&&(e[104]="Falta papel del diario"),32&t&&(e[105]="Falta papel de tiques"),256&t&&(e[108]="Tapa de impresora abierta"),1&n&&(e[200]="Error en chequeo de memoria fiscal"),2&n&&(e[201]="Error en chequeo de memoria de trabajo"),4&n&&(e[202]="Carga de batería baja"),8&n&&(e[203]="Comando desconocido"),16&n&&(e[204]="Datos no válidos en un campo"),32&n&&(e[205]="Comando no válido para el estado fiscal actual"),64&n&&(e[206]="Desborde del total"),128&n&&(e[207]="Memoria fiscal llena, bloqueda o dada de baja"),256&n&&(e[208]="Memoria fiscal a punto de llenarse"),this.errors=e},get success(){return 0===Object.keys(this.errors).length},get error(){var e=Object.keys(this.errors);return{code:e[0],message:this.errors[e[0]]}}},{});var n=function(){this.name="hasar_ar",this.maxSeq=127,this.minSeq=32,this.seq=this.minSeq};$traceurRuntime.createClass(n,{nextSeq:function(){return this.seq=this.seq+1>this.maxSeq?this.minSeq:++this.seq},hexStr2arr:function(e){return function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.match(/.{1,2}/g)[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=String.fromCharCode(parseInt(c,16))}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}()},str2arr:function(e){return function(){var t=0,n=[],r=!0,i=!1,o=void 0;try{for(var a=void 0,s=e.split("")[$traceurRuntime.toProperty(Symbol.iterator)]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[t++]=c.charCodeAt(0)}}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}()},stripAccents:function(e){var t=/[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ]/g,n="aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY";return e.replace(t,function(e){return n.substr(t.source.indexOf(e)-1,1)})},getCloseReceiptResponse:function(e){var t=e.fields,n=this.hexStr2arr(t[3]).join("");
return{receiptNumber:n}},getCloseCreditNoteResponse:function(e){var t=e.fields,n=this.hexStr2arr(t[3]).join("");return{creditNoteNumber:n}},getDateTimeResponse:function(e){var t=e.fields,n=this.hexStr2arr(t[3]),r=this.hexStr2arr(t[4]),i="20"+n[4]+n[5],o=n[2]+n[3]-1,a=n[0]+n[1],s=r[0]+r[1],c=r[2]+r[3],u=r[4]+r[5];return new Date(i,o,a,s,c,u)},getDateTime:function(){return[[89]]},openDrawer:function(){return[[123]]},isTicket:function(e){return!e||!e.documentType||"C"===e.documentType},setEmbarkNumber:function(e){return[[147],this.str2arr("1"),this.str2arr(e)]},setCustomerData:function(e){var t={CUIT:"C",CUIL:"L",DNI:"2"},n=this.stripAccents(e.customerName),r=this.stripAccents(e.customerAddress),i=t[e.customerIdType];return[[98],this.str2arr(n.substr(0,40)),this.str2arr(e.customerIdValue),this.str2arr(e.customerIvaType),this.str2arr(i),this.str2arr(r.substr(0,40))]},openCreditNote:function(e){var t="A"===e?"R":"S";return[[128],this.str2arr(t),this.str2arr("T"),this.str2arr("0000000")]},closeCreditNote:function(){return[[129]]},openReceipt:function(e){var t;return t=this.isTicket(e)?"T":"A"===e.documentLetter?"A":"B",[[64],this.str2arr(t),this.str2arr("T")]},addItem:function(e,t,n){return e=e.toFixed(2),t=this.stripAccents(t.substr(0,20)),n=n.toFixed(2),[[66],this.str2arr(t),this.str2arr(e),this.str2arr(n),this.str2arr("21.00"),this.str2arr("M"),this.str2arr("0.0"),this.str2arr("0"),this.str2arr("T")]},addDiscount:function(e){return e=e.toFixed(2),[[84],this.str2arr("DESCUENTO"),this.str2arr(e),this.str2arr("m"),this.str2arr("0"),this.str2arr("T")]},addPayment:function(e,t){return e=e.toString().substr(0,28),t=t.toFixed(2),[[68],this.str2arr(e),this.str2arr(t),this.str2arr("T"),this.str2arr("0")]},closeReceipt:function(){return[[69]]},cancelReceipt:function(){return[[152]]},dailyClose:function(e){return[[57],this.str2arr(e.toUpperCase())]},reportByDate:function(e,t){var n=e.toISOString().substr(2,8).split("-").join(""),r=t.toISOString().substr(2,8).split("-").join("");return[[58],this.str2arr(n),this.str2arr(r),this.str2arr("T")]},reportByNumber:function(e,t){return[[59],this.str2arr(e.toString()),this.str2arr(t.toString()),this.str2arr("T")]},buildComandResponse:function(e){return new t(e)}},{}),e.Eresto||(e.Eresto={}),e.Eresto.HasarArProtocol=n}(window),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return h(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return g.call(e,t)}function a(e){return!o(v,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return y[e]})}function c(t,n){function i(){if(v&&!y)for(;g.length;)delete m[g.pop()];else g=[];v=!1,y=!1}function o(e){if("string"==typeof e&&(e=e.split(b,2)),!h(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(r(e[0])+"\\s*"),c=new RegExp("\\s*"+r(e[1])),f=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var s,c,f,p=[],m=[],g=[],v=!1,y=!1;o(n||e.tags);for(var E,I,P,T,x,k,A=new d(t);!A.eos();){if(E=A.pos,P=A.scanUntil(s))for(var D=0,M=P.length;M>D;++D)T=P.charAt(D),a(T)?g.push(m.length):y=!0,m.push(["text",T,E,E+1]),E+=1,"\n"===T&&i();if(!A.scan(s))break;if(v=!0,I=A.scan(S)||"name",A.scan($),"="===I?(P=A.scanUntil(C),A.scan(C),A.scanUntil(c)):"{"===I?(P=A.scanUntil(f),A.scan(w),A.scanUntil(c),I="&"):P=A.scanUntil(c),!A.scan(c))throw new Error("Unclosed tag at "+A.pos);if(x=[I,P,E,A.pos],m.push(x),"#"===I||"^"===I)p.push(x);else if("/"===I){if(k=p.pop(),!k)throw new Error('Unopened section "'+P+'" at '+E);if(k[1]!==P)throw new Error('Unclosed section "'+k[1]+'" at '+E)}else"name"===I||"{"===I||"&"===I?y=!0:"="===I&&o(P)}if(k=p.pop())throw new Error('Unclosed section "'+k[1]+'" at '+A.pos);return l(u(m))}function u(e){for(var t,n,r=[],i=0,o=e.length;o>i;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function l(e){for(var t,n,r=[],i=r,o=[],a=0,s=e.length;s>a;++a)switch(t=e[a],t[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(t)}return r}function d(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var m=Object.prototype.toString,h=Array.isArray||function(e){return"[object Array]"===m.call(e)},g=RegExp.prototype.test,v=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},$=/\s*/,b=/\s+/,C=/\s*=/,w=/\s*\}/,S=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},d.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var o,a,s=this,c=!1;s;){if(e.indexOf(".")>0)for(n=s.view,o=e.split("."),a=0;null!=n&&a<o.length;)a===o.length-1&&(c=i(n,o[a])),n=n[o[a++]];else n=s.view[e],c=i(s.view,e);if(c)break;s=s.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=c(e,t)),r},p.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof f?t:new f(t);return this.renderTokens(r,i,n,e)},p.prototype.renderTokens=function(e,t,n,r){for(var i,o,a,s="",c=0,u=e.length;u>c;++c)a=void 0,i=e[c],o=i[0],"#"===o?a=this.renderSection(i,t,n,r):"^"===o?a=this.renderInverted(i,t,n,r):">"===o?a=this.renderPartial(i,t,n,r):"&"===o?a=this.unescapedValue(i,t):"name"===o?a=this.escapedValue(i,t):"text"===o&&(a=this.rawValue(i)),void 0!==a&&(s+=a);return s},p.prototype.renderSection=function(e,n,r,i){function o(e){return a.render(e,n,r)}var a=this,s="",c=n.lookup(e[1]);if(c){if(h(c))for(var u=0,l=c.length;l>u;++u)s+=this.renderTokens(e[4],n.push(c[u]),r,i);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)s+=this.renderTokens(e[4],n.push(c),r,i);else if(t(c)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,i.slice(e[3],e[5]),o),null!=c&&(s+=c)}else s+=this.renderTokens(e[4],n,r,i);return s}},p.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);return!i||h(i)&&0===i.length?this.renderTokens(e[4],t,n,r):void 0},p.prototype.renderPartial=function(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},p.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);return null!=n?n:void 0},p.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);return null!=r?e.escape(r):void 0},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.1",e.tags=["{{","}}"];var E=new p;e.clearCache=function(){return E.clearCache()},e.parse=function(e,t){return E.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return E.render(e,t,r)},e.to_html=function(n,r,i,o){var a=e.render(n,r,i);return t(o)?void o(a):a},e.escape=s,e.Scanner=d,e.Context=f,e.Writer=p}),function(){function e(n,r){t(n),r=r||{};var i=this;this.key=n,this.config=e.Util.extend(e.getGlobalConfig(),r.cluster?e.getClusterConfig(r.cluster):{},r),this.channels=new e.Channels,this.global_emitter=new e.EventsDispatcher,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new e.Timeline(this.key,this.sessionID,{cluster:this.config.cluster,features:e.Util.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:e.Timeline.INFO,version:e.VERSION}),this.config.disableStats||(this.timelineSender=new e.TimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/jsonp"}));var o=function(t){var n=e.Util.extend({},i.config,t);return e.StrategyBuilder.build(e.getDefaultStrategy(n),n)};this.connection=new e.ConnectionManager(this.key,e.Util.extend({getStrategy:o,timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){i.subscribeAll(),i.timelineSender&&i.timelineSender.send(i.connection.isEncrypted())}),this.connection.bind("message",function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=i.channel(e.channel);n&&n.handleEvent(e.event,e.data)}t||i.global_emitter.emit(e.event,e.data)}),this.connection.bind("disconnected",function(){i.channels.disconnect()}),this.connection.bind("error",function(t){e.warn("Error",t)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&i.connect()}function t(t){(null===t||void 0===t)&&e.warn("Warning","You must pass your app key when you instantiate Pusher.")}var n=e.prototype;e.instances=[],e.isReady=!1,e.debug=function(){e.log&&e.log(e.Util.stringify.apply(this,arguments))},e.warn=function(){var t=e.Util.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(t):window.console.log&&window.console.log(t)),e.log&&e.log(t)},e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;n>t;t++)e.instances[t].connect()},n.channel=function(e){return this.channels.find(e)},n.allChannels=function(){return this.channels.all()},n.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isEncrypted(),n=this.timelineSender;this.timelineSenderTimer=new e.PeriodicTimer(6e4,function(){n.send(t)})}},n.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},n.bind=function(e,t){return this.global_emitter.bind(e,t),this},n.bind_all=function(e){return this.global_emitter.bind_all(e),this},n.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},n.subscribe=function(e){var t=this.channels.add(e,this);return"connected"===this.connection.state&&t.subscribe(),t},n.unsubscribe=function(e){var t=this.channels.remove(e);"connected"===this.connection.state&&t.unsubscribe()},n.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},n.isEncrypted=function(){return"https:"===e.Util.getDocument().location.protocol?!0:Boolean(this.config.encrypted)},e.HTTP={},this.Pusher=e}.call(this),function(){function e(e){window.clearTimeout(e)}function t(e){window.clearInterval(e)}function n(e,t,n,r){var i=this;this.clear=t,this.timer=e(function(){null!==i.timer&&(i.timer=r(i.timer))},n)}var r=n.prototype;r.isRunning=function(){return null!==this.timer},r.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},Pusher.Timer=function(t,r){return new n(setTimeout,e,t,function(e){return r(),null})},Pusher.PeriodicTimer=function(e,r){return new n(setInterval,t,e,function(e){return r(),e})}}.call(this),function(){Pusher.Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new Pusher.Timer(0,e)},extend:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n[r]&&n[r].constructor&&n[r].constructor===Object?e[r]=Pusher.Util.extend(e[r]||{},n[r]):e[r]=n[r]}return e},stringify:function(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):void 0===window.JSON?e.push(arguments[t].toString()):e.push(JSON.stringify(arguments[t]));return e.join(" : ")},arrayIndexOf:function(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;i>r;r++)if(e[r]===t)return r;return-1},objectApply:function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)},keys:function(e){var t=[];return Pusher.Util.objectApply(e,function(e,n){t.push(n)}),t},values:function(e){var t=[];return Pusher.Util.objectApply(e,function(e){t.push(e)}),t},apply:function(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)},map:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n},mapObject:function(e,t){var n={};return Pusher.Util.objectApply(e,function(e,r){n[r]=t(e)}),n},filter:function(e,t){t=t||function(e){return!!e};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n},filterObject:function(e,t){var n={};return Pusher.Util.objectApply(e,function(r,i){(t&&t(r,i,e,n)||Boolean(r))&&(n[i]=r)}),n},flatten:function(e){var t=[];return Pusher.Util.objectApply(e,function(e,n){t.push([n,e])}),t},any:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},all:function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},method:function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t.concat(arguments))}},getWindow:function(){return window},getDocument:function(){return document},getNavigator:function(){return navigator},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},getClientFeatures:function(){return Pusher.Util.keys(Pusher.Util.filterObject({ws:Pusher.WSTransport,flash:Pusher.FlashTransport},function(e){return e.isSupported({})}))},addWindowListener:function(e,t){var n=Pusher.Util.getWindow();void 0!==n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent("on"+e,t)},removeWindowListener:function(e,t){var n=Pusher.Util.getWindow();void 0!==n.addEventListener?n.removeEventListener(e,t,!1):n.detachEvent("on"+e,t)},isXHRSupported:function(){var e=window.XMLHttpRequest;return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported:function(e){var t=e?"https:":"http:",n=Pusher.Util.getDocument().location.protocol;return Boolean(window.XDomainRequest)&&n===t}}}.call(this),function(){Pusher.VERSION="2.2.2",Pusher.PROTOCOL=7,Pusher.host="ws.pusherapp.com",Pusher.ws_port=80,Pusher.wss_port=443,Pusher.sockjs_host="sockjs.pusher.com",Pusher.sockjs_http_port=80,Pusher.sockjs_https_port=443,Pusher.sockjs_path="/pusher",Pusher.stats_host="stats.pusher.com",Pusher.channel_auth_endpoint="/pusher/auth",Pusher.channel_auth_transport="ajax",Pusher.activity_timeout=12e4,Pusher.pong_timeout=3e4,Pusher.unavailable_timeout=1e4,Pusher.cdn_http="http://js.pusher.com/",Pusher.cdn_https="https://js.pusher.com/",Pusher.dependency_suffix="",Pusher.getDefaultStrategy=function(e){var t;return t=e.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:e.wsHost+":"+e.wsPort,hostEncrypted:e.wsHost+":"+e.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:e.httpHost+":"+e.httpPort,hostEncrypted:e.httpHost+":"+e.httpsPort}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:0,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","flash","flash",2,":ws_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","flash_loop",[":sequential",":timeouts",":flash"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],t,[":if",[":is_supported",":flash"],[":best_connected_ever",":flash_loop",[":delayed",2e3,[":http_fallback_loop"]]],[":http_fallback_loop"]]]]]]]}}.call(this),function(){Pusher.getGlobalConfig=function(){return{wsHost:Pusher.host,wsPort:Pusher.ws_port,wssPort:Pusher.wss_port,httpHost:Pusher.sockjs_host,httpPort:Pusher.sockjs_http_port,httpsPort:Pusher.sockjs_https_port,httpPath:Pusher.sockjs_path,statsHost:Pusher.stats_host,authEndpoint:Pusher.channel_auth_endpoint,authTransport:Pusher.channel_auth_transport,activity_timeout:Pusher.activity_timeout,pong_timeout:Pusher.pong_timeout,unavailable_timeout:Pusher.unavailable_timeout}},Pusher.getClusterConfig=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}}}.call(this),function(){function e(e){var t=function(t){Error.call(this,t),this.name=e};return Pusher.Util.extend(t.prototype,Error.prototype),t}Pusher.Errors={BadEventName:e("BadEventName"),RequestTimedOut:e("RequestTimedOut"),TransportPriorityTooLow:e("TransportPriorityTooLow"),TransportClosed:e("TransportClosed"),UnsupportedTransport:e("UnsupportedTransport"),UnsupportedStrategy:e("UnsupportedStrategy")}}.call(this),function(){function e(e){this.callbacks=new t,this.global_callbacks=[],this.failThrough=e}function t(){this._callbacks={}}function n(e){return"_"+e}var r=e.prototype;r.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},r.bind_all=function(e){return this.global_callbacks.push(e),this},r.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},r.unbind_all=function(e,t){return this.callbacks.remove(e,t),this},r.emit=function(e,t){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](e,t);var r=this.callbacks.get(e);if(r&&r.length>0)for(n=0;n<r.length;n++)r[n].fn.call(r[n].context||window,t);else this.failThrough&&this.failThrough(e,t);return this},t.prototype.get=function(e){return this._callbacks[n(e)]},t.prototype.add=function(e,t,r){var i=n(e);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:t,context:r})},t.prototype.remove=function(e,t,r){if(!e&&!t&&!r)return void(this._callbacks={});var i=e?[n(e)]:Pusher.Util.keys(this._callbacks);t||r?Pusher.Util.apply(i,function(e){this._callbacks[e]=Pusher.Util.filter(this._callbacks[e]||[],function(e){return t&&t!==e.fn||r&&r!==e.context}),0===this._callbacks[e].length&&delete this._callbacks[e]},this):Pusher.Util.apply(i,function(e){delete this._callbacks[e]},this)},Pusher.EventsDispatcher=e}.call(this),function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}var t=e.prototype;t.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,r=this.name+"["+t+"]",i=!1,o=function(){i||(e.apply(null,arguments),i=!0)};return this[t]=o,{number:t,id:n,name:r,callback:o}},t.remove=function(e){delete this[e.number]},Pusher.ScriptReceiverFactory=e,Pusher.ScriptReceivers=new e("_pusher_script_","Pusher.ScriptReceivers")}.call(this),function(){function e(e){this.src=e}var t=e.prototype;t.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){("loaded"===t.script.readyState||"complete"===t.script.readyState)&&e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(t.script,r.firstChild),t.errorScript&&r.insertBefore(t.errorScript,t.script.nextSibling)},t.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},Pusher.ScriptRequest=e}.call(this),function(){function e(e){this.options=e,this.receivers=e.receivers||Pusher.ScriptReceivers,this.loading={}}var t=e.prototype;t.load=function(e,t){var n=this;if(n.loading[e]&&n.loading[e].length>0)n.loading[e].push(t);else{n.loading[e]=[t];var r=new Pusher.ScriptRequest(n.getPath(e)),i=n.receivers.create(function(t){if(n.receivers.remove(i),n.loading[e]){var o=n.loading[e];delete n.loading[e];for(var a=function(e){e||r.cleanup()},s=0;s<o.length;s++)o[s](t,a)}});r.send(i)}},t.getRoot=function(e){var t,n=Pusher.Util.getDocument().location.protocol;return t=e&&e.encrypted||"https:"===n?this.options.cdn_https:this.options.cdn_http,t.replace(/\/*$/,"")+"/"+this.options.version},t.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},Pusher.DependencyLoader=e}.call(this),function(){function e(){Pusher.ready()}function t(e){document.body?e():setTimeout(function(){t(e)},0)}function n(){t(e)}Pusher.DependenciesReceivers=new Pusher.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:Pusher.cdn_http,cdn_https:Pusher.cdn_https,version:Pusher.VERSION,suffix:Pusher.dependency_suffix,receivers:Pusher.DependenciesReceivers}),window.JSON?n():Pusher.Dependencies.load("json2",n)}(),function(){for(var e={encode:function(e){return u(s(e))}},t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={},i=0,o=n.length;o>i;i++)r[n.charAt(i)]=i;var a=function(e){var n=e.charCodeAt(0);return 128>n?e:2048>n?t(192|n>>>6)+t(128|63&n):t(224|n>>>12&15)+t(128|n>>>6&63)+t(128|63&n)},s=function(e){return e.replace(/[^\x00-\x7F]/g,a)},c=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),i=[n.charAt(r>>>18),n.charAt(r>>>12&63),t>=2?"=":n.charAt(r>>>6&63),t>=1?"=":n.charAt(63&r)];return i.join("")},u=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,c)};Pusher.Base64=e}.call(this),function(){function e(e,t){this.url=e,this.data=t}function t(e){return Pusher.Util.mapObject(e,function(e){return"object"==typeof e&&(e=JSON.stringify(e)),encodeURIComponent(Pusher.Base64.encode(e.toString()))})}var n=e.prototype;n.send=function(e){if(!this.request){var n=Pusher.Util.filterObject(this.data,function(e){return void 0!==e}),r=Pusher.Util.map(Pusher.Util.flatten(t(n)),Pusher.Util.method("join","=")).join("&"),i=this.url+"/"+e.number+"?"+r;this.request=new Pusher.ScriptRequest(i),this.request.send(e)}},n.cleanup=function(){this.request&&this.request.cleanup()},Pusher.JSONPRequest=e}.call(this),function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}var t=e.prototype;e.ERROR=3,e.INFO=6,e.DEBUG=7,t.log=function(e,t){e<=this.options.level&&(this.events.push(Pusher.Util.extend({},t,{timestamp:Pusher.Util.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.error=function(t){this.log(e.ERROR,t)},t.info=function(t){this.log(e.INFO,t)},t.debug=function(t){this.log(e.DEBUG,t)},t.isEmpty=function(){return 0===this.events.length},t.send=function(e,t){var n=this,r=Pusher.Util.extend({session:n.session,bundle:n.sent+1,key:n.key,lib:"js",version:n.options.version,cluster:n.options.cluster,features:n.options.features,timeline:n.events},n.options.params);return n.events=[],e(r,function(e,r){e||n.sent++,t&&t(e,r)}),!0},t.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Pusher.Timeline=e}.call(this),function(){function e(e,t){this.timeline=e,this.options=t||{}}var t=e.prototype;t.send=function(e,t){var n=this;if(!n.timeline.isEmpty()){var r=function(t,r){var i="http"+(e?"s":"")+"://",o=i+(n.host||n.options.host)+n.options.path,a=new Pusher.JSONPRequest(o,t),s=Pusher.ScriptReceivers.create(function(e,t){Pusher.ScriptReceivers.remove(s),a.cleanup(),t&&t.host&&(n.host=t.host),r&&r(e,t)});a.send(s)};n.timeline.send(r,t)}},Pusher.TimelineSender=e}.call(this),function(){function e(e){this.strategies=e}function t(e,t,n){var i=Pusher.Util.map(e,function(e,r,i,o){return e.connect(t,n(r,o))});return{abort:function(){Pusher.Util.apply(i,r)},forceMinPriority:function(e){Pusher.Util.apply(i,function(t){t.forceMinPriority(e)})}}}function n(e){return Pusher.Util.all(e,function(e){return Boolean(e.error)})}function r(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}var i=e.prototype;i.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},i.connect=function(e,r){return t(this.strategies,e,function(e,t){return function(i,o){return t[e].error=i,i?void(n(t)&&r(!0)):(Pusher.Util.apply(t,function(e){e.forceMinPriority(o.transport.priority)}),void r(null,o))}})},Pusher.BestConnectedEverStrategy=e}.call(this),function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.encrypted=n.encrypted,this.timeline=n.timeline}function t(e){return"pusherTransport"+(e?"Encrypted":"Unencrypted")}function n(e){var n=Pusher.Util.getLocalStorage();if(n)try{var r=n[t(e)];if(r)return JSON.parse(r)}catch(o){i(e)}return null}function r(e,n,r){var i=Pusher.Util.getLocalStorage();if(i)try{i[t(e)]=JSON.stringify({timestamp:Pusher.Util.now(),transport:n,latency:r})}catch(o){}}function i(e){var n=Pusher.Util.getLocalStorage();if(n)try{delete n[t(e)]}catch(r){}}var o=e.prototype;o.isSupported=function(){return this.strategy.isSupported()},o.connect=function(e,t){var o=this.encrypted,a=n(o),s=[this.strategy];if(a&&a.timestamp+this.ttl>=Pusher.Util.now()){var c=this.transports[a.transport];c&&(this.timeline.info({cached:!0,transport:a.transport,latency:a.latency}),s.push(new Pusher.SequentialStrategy([c],{timeout:2*a.latency+1e3,failFast:!0})))}var u=Pusher.Util.now(),l=s.pop().connect(e,function d(n,a){n?(i(o),s.length>0?(u=Pusher.Util.now(),l=s.pop().connect(e,d)):t(n)):(r(o,a.transport.name,Pusher.Util.now()-u),t(null,a))});return{abort:function(){l.abort()},forceMinPriority:function(t){e=t,l&&l.forceMinPriority(t)}}},Pusher.CachedStrategy=e}.call(this),function(){function e(e,t){this.strategy=e,this.options={delay:t.delay}}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n,r=this.strategy,i=new Pusher.Timer(this.options.delay,function(){n=r.connect(e,t)});return{abort:function(){i.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},Pusher.DelayedStrategy=e}.call(this),function(){function e(e){this.strategy=e}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n=this.strategy.connect(e,function(e,r){r&&n.abort(),t(e,r)});return n},Pusher.FirstConnectedStrategy=e}.call(this),function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}var t=e.prototype;t.isSupported=function(){var e=this.test()?this.trueBranch:this.falseBranch;return e.isSupported()},t.connect=function(e,t){var n=this.test()?this.trueBranch:this.falseBranch;return n.connect(e,t)},Pusher.IfStrategy=e}.call(this),function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}var t=e.prototype;t.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},t.connect=function(e,t){var n=this,r=this.strategies,i=0,o=this.timeout,a=null,s=function(c,u){u?t(null,u):(i+=1,n.loop&&(i%=r.length),i<r.length?(o&&(o=2*o,n.timeoutLimit&&(o=Math.min(o,n.timeoutLimit))),a=n.tryStrategy(r[i],e,{timeout:o,failFast:n.failFast},s)):t(!0))};return a=this.tryStrategy(r[i],e,{timeout:o,failFast:this.failFast},s),{abort:function(){a.abort()},forceMinPriority:function(t){e=t,a&&a.forceMinPriority(t)}}},t.tryStrategy=function(e,t,n,r){var i=null,o=null;return n.timeout>0&&(i=new Pusher.Timer(n.timeout,function(){o.abort(),r(!0)})),o=e.connect(t,function(e,t){e&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),r(e,t))}),{abort:function(){i&&i.ensureAborted(),o.abort()},forceMinPriority:function(e){o.forceMinPriority(e)}}},Pusher.SequentialStrategy=e}.call(this),function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}function t(e,t){return Pusher.Util.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var n=e.prototype;n.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},n.connect=function(e,n){if(!this.isSupported())return t(new Pusher.Errors.UnsupportedStrategy,n);if(this.priority<e)return t(new Pusher.Errors.TransportPriorityTooLow,n);var r=this,i=!1,o=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),a=null,s=function(){o.unbind("initialized",s),o.connect()},c=function(){a=new Pusher.Handshake(o,function(e){i=!0,d(),n(null,e)})},u=function(e){d(),n(e)},l=function(){d(),n(new Pusher.Errors.TransportClosed(o))},d=function(){o.unbind("initialized",s),o.unbind("open",c),o.unbind("error",u),o.unbind("closed",l)};return o.bind("initialized",s),o.bind("open",c),o.bind("error",u),o.bind("closed",l),o.initialize(),{abort:function(){i||(d(),a?a.close():o.close())},forceMinPriority:function(e){i||r.priority<e&&(a?a.close():o.close())}}},Pusher.TransportStrategy=e}.call(this),function(){function e(e,t,n){var r=e+(t.encrypted?"s":""),i=t.encrypted?t.hostEncrypted:t.hostUnencrypted;return r+"://"+i+n}function t(e,t){var n="/app/"+e,r="?protocol="+Pusher.PROTOCOL+"&client=js&version="+Pusher.VERSION+(t?"&"+t:"");return n+r}Pusher.URLSchemes={ws:{getInitial:function(n,r){return e("ws",r,t(n,"flash=false"))}},flash:{getInitial:function(n,r){return e("ws",r,t(n,"flash=true"))}},sockjs:{getInitial:function(t,n){return e("http",n,n.httpPath||"/pusher","")},getPath:function(e,n){return t(e)}},http:{getInitial:function(n,r){var i=(r.httpPath||"/pusher")+t(n);return e("http",r,i)}}}}.call(this),function(){function e(e,t,n,r,i){Pusher.EventsDispatcher.call(this),this.hooks=e,this.name=t,this.priority=n,this.key=r,this.options=i,this.state="new",this.timeline=i.timeline,this.activityTimeout=i.activityTimeout,this.id=this.timeline.generateUniqueID()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.initialize=function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.encrypted?"s":"")})),e.hooks.beforeInitialize&&e.hooks.beforeInitialize(),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),
Pusher.Dependencies.load(e.hooks.file,function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},t.connect=function(){var e=this;if(e.socket||"initialized"!==e.state)return!1;var t=e.hooks.urls.getInitial(e.key,e.options);try{e.socket=e.hooks.getSocket(t,e.options)}catch(n){return Pusher.Util.defer(function(){e.onError(n),e.changeState("closed")}),!1}return e.bindListeners(),Pusher.debug("Connecting",{transport:e.name,url:t}),e.changeState("connecting"),!0},t.close=function(){return this.socket?(this.socket.close(),!0):!1},t.send=function(e){var t=this;return"open"===t.state?(Pusher.Util.defer(function(){t.socket&&t.socket.send(e)}),!0):!1},t.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.onMessage=function(e){this.emit("message",e)},t.onActivity=function(){this.emit("activity")},t.bindListeners=function(){var e=this;e.socket.onopen=function(){e.onOpen()},e.socket.onerror=function(t){e.onError(t)},e.socket.onclose=function(t){e.onClose(t)},e.socket.onmessage=function(t){e.onMessage(t)},e.supportsPing()&&(e.socket.onactivity=function(){e.onActivity()})},t.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.buildTimelineMessage=function(e){return Pusher.Util.extend({cid:this.id},e)},Pusher.TransportConnection=e}.call(this),function(){function e(e){this.hooks=e}var t=e.prototype;t.isSupported=function(e){return this.hooks.isSupported(e)},t.createConnection=function(e,t,n,r){return new Pusher.TransportConnection(this.hooks,e,t,n,r)},Pusher.Transport=e}.call(this),function(){Pusher.WSTransport=new Pusher.Transport({urls:Pusher.URLSchemes.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(window.WebSocket||window.MozWebSocket)},isSupported:function(){return Boolean(window.WebSocket||window.MozWebSocket)},getSocket:function(e){var t=window.WebSocket||window.MozWebSocket;return new t(e)}}),Pusher.FlashTransport=new Pusher.Transport({file:"flashfallback",urls:Pusher.URLSchemes.flash,handlesActivityChecks:!1,supportsPing:!1,isSupported:function(){try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){try{var t=Pusher.Util.getNavigator();return Boolean(t&&t.mimeTypes&&void 0!==t.mimeTypes["application/x-shockwave-flash"])}catch(n){return!1}}},beforeInitialize:function(){void 0===window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&(window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0),window.WEB_SOCKET_SWF_LOCATION=Pusher.Dependencies.getRoot()+"/WebSocketMain.swf"},isInitialized:function(){return void 0!==window.FlashWebSocket},getSocket:function(e){return new FlashWebSocket(e)}}),Pusher.SockJSTransport=new Pusher.Transport({file:"sockjs",urls:Pusher.URLSchemes.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new SockJS(e,null,{js_path:Pusher.Dependencies.getPath("sockjs",{encrypted:t.encrypted}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}});var e={urls:Pusher.URLSchemes.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return Boolean(Pusher.HTTP.Socket)}},t=Pusher.Util.extend({getSocket:function(e){return Pusher.HTTP.getStreamingSocket(e)}},e),n=Pusher.Util.extend({getSocket:function(e){return Pusher.HTTP.getPollingSocket(e)}},e),r={file:"xhr",isSupported:Pusher.Util.isXHRSupported},i={file:"xdr",isSupported:function(e){return Pusher.Util.isXDRSupported(e.encrypted)}};Pusher.XHRStreamingTransport=new Pusher.Transport(Pusher.Util.extend({},t,r)),Pusher.XDRStreamingTransport=new Pusher.Transport(Pusher.Util.extend({},t,i)),Pusher.XHRPollingTransport=new Pusher.Transport(Pusher.Util.extend({},n,r)),Pusher.XDRPollingTransport=new Pusher.Transport(Pusher.Util.extend({},n,i))}.call(this),function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}var t=e.prototype;t.createConnection=function(e,t,n,r){var i=this;r=Pusher.Util.extend({},r,{activityTimeout:i.pingDelay});var o=i.transport.createConnection(e,t,n,r),a=null,s=function(){o.unbind("open",s),o.bind("closed",c),a=Pusher.Util.now()},c=function(e){if(o.unbind("closed",c),1002===e.code||1003===e.code)i.manager.reportDeath();else if(!e.wasClean&&a){var t=Pusher.Util.now()-a;t<2*i.maxPingDelay&&(i.manager.reportDeath(),i.pingDelay=Math.max(t/2,i.minPingDelay))}};return o.bind("open",s),o},t.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},Pusher.AssistantToTheTransportManager=e}.call(this),function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}var t=e.prototype;t.getAssistant=function(e){return new Pusher.AssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.isAlive=function(){return this.livesLeft>0},t.reportDeath=function(){this.livesLeft-=1},Pusher.TransportManager=e}.call(this),function(){function e(e){return function(t){return[e.apply(this,arguments),t]}}function t(e){return"string"==typeof e&&":"===e.charAt(0)}function n(e,t){return t[e.slice(1)]}function r(e,t){if(0===e.length)return[[],t];var n=a(e[0],t),i=r(e.slice(1),n[1]);return[[n[0]].concat(i[0]),i[1]]}function i(e,r){if(!t(e))return[e,r];var i=n(e,r);if(void 0===i)throw"Undefined symbol "+e;return[i,r]}function o(e,i){if(t(e[0])){var o=n(e[0],i);if(e.length>1){if("function"!=typeof o)throw"Calling non-function "+e[0];var s=[Pusher.Util.extend({},i)].concat(Pusher.Util.map(e.slice(1),function(e){return a(e,Pusher.Util.extend({},i))[0]}));return o.apply(this,s)}return[o,i]}return r(e,i)}function a(e,t){return"string"==typeof e?i(e,t):"object"==typeof e&&e instanceof Array&&e.length>0?o(e,t):[e,t]}var s={build:function(e,t){var n=Pusher.Util.extend({},l,t);return a(e,n)[1].strategy}},c={ws:Pusher.WSTransport,flash:Pusher.FlashTransport,sockjs:Pusher.SockJSTransport,xhr_streaming:Pusher.XHRStreamingTransport,xdr_streaming:Pusher.XDRStreamingTransport,xhr_polling:Pusher.XHRPollingTransport,xdr_polling:Pusher.XDRPollingTransport},u={isSupported:function(){return!1},connect:function(e,t){var n=Pusher.Util.defer(function(){t(new Pusher.Errors.UnsupportedStrategy)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},l={extend:function(e,t,n){return[Pusher.Util.extend({},t,n),e]},def:function(e,t,n){if(void 0!==e[t])throw"Redefining symbol "+t;return e[t]=n,[void 0,e]},def_transport:function(e,t,n,r,i,o){var a=c[n];if(!a)throw new Pusher.Errors.UnsupportedTransport(n);var s,l=!(e.enabledTransports&&-1===Pusher.Util.arrayIndexOf(e.enabledTransports,t)||e.disabledTransports&&-1!==Pusher.Util.arrayIndexOf(e.disabledTransports,t)||"flash"===t&&e.disableFlash===!0);s=l?new Pusher.TransportStrategy(t,r,o?o.getAssistant(a):a,Pusher.Util.extend({key:e.key,encrypted:e.encrypted,timeline:e.timeline,ignoreNullOrigin:e.ignoreNullOrigin},i)):u;var d=e.def(e,t,s)[1];return d.transports=e.transports||{},d.transports[t]=s,[void 0,d]},transport_manager:e(function(e,t){return new Pusher.TransportManager(t)}),sequential:e(function(e,t){var n=Array.prototype.slice.call(arguments,2);return new Pusher.SequentialStrategy(n,t)}),cached:e(function(e,t,n){return new Pusher.CachedStrategy(n,e.transports,{ttl:t,timeline:e.timeline,encrypted:e.encrypted})}),first_connected:e(function(e,t){return new Pusher.FirstConnectedStrategy(t)}),best_connected_ever:e(function(){var e=Array.prototype.slice.call(arguments,1);return new Pusher.BestConnectedEverStrategy(e)}),delayed:e(function(e,t,n){return new Pusher.DelayedStrategy(n,{delay:t})}),"if":e(function(e,t,n,r){return new Pusher.IfStrategy(t,n,r)}),is_supported:e(function(e,t){return function(){return t.isSupported()}})};Pusher.StrategyBuilder=s}.call(this),function(){var e={};e.decodeMessage=function(e){try{var t=JSON.parse(e.data);if("string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(n){if(!(n instanceof SyntaxError))throw n}return t}catch(n){throw{type:"MessageParseError",error:n,data:e.data}}},e.encodeMessage=function(e){return JSON.stringify(e)},e.processHandshake=function(e){if(e=this.decodeMessage(e),"pusher:connection_established"===e.event){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:1e3*e.data.activity_timeout}}if("pusher:error"===e.event)return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},e.getCloseAction=function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"ssl_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},e.getCloseError=function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null},Pusher.Protocol=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.send=function(e){return this.transport.send(e)},t.send_event=function(e,t,n){var r={event:e,data:t};return n&&(r.channel=n),Pusher.debug("Event sent",r),this.send(Pusher.Protocol.encodeMessage(r))},t.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.close=function(){this.transport.close()},t.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=Pusher.Protocol.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(void 0!==n){switch(Pusher.debug("Event recd",n),n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){Pusher.Util.objectApply(t,function(t,n){e.transport.unbind(n,t)})};Pusher.Util.objectApply(t,function(t,n){e.transport.bind(n,t)})},t.handleCloseEvent=function(e){var t=Pusher.Protocol.getCloseAction(e),n=Pusher.Protocol.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t)},Pusher.Connection=e}.call(this),function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}var t=e.prototype;t.close=function(){this.unbindListeners(),this.transport.close()},t.bindListeners=function(){var e=this;e.onMessage=function(t){e.unbindListeners();try{var n=Pusher.Protocol.processHandshake(t);"connected"===n.action?e.finish("connected",{connection:new Pusher.Connection(n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())}catch(r){e.finish("error",{error:r}),e.transport.close()}},e.onClosed=function(t){e.unbindListeners();var n=Pusher.Protocol.getCloseAction(t)||"backoff",r=Pusher.Protocol.getCloseError(t);e.finish(n,{error:r})},e.transport.bind("message",e.onMessage),e.transport.bind("closed",e.onClosed)},t.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.finish=function(e,t){this.callback(Pusher.Util.extend({transport:this.transport,action:e},t))},Pusher.Handshake=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.key=e,this.options=t||{},this.state="initialized",this.connection=null,this.encrypted=!!t.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=this;Pusher.Network.bind("online",function(){n.timeline.info({netinfo:"online"}),("connecting"===n.state||"unavailable"===n.state)&&n.retryIn(0)}),Pusher.Network.bind("offline",function(){n.timeline.info({netinfo:"offline"}),n.connection&&n.sendActivityCheck()}),this.updateStrategy()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.send=function(e){return this.connection?this.connection.send(e):!1},t.send_event=function(e,t,n){return this.connection?this.connection.send_event(e,t,n):!1},t.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.isEncrypted=function(){return this.encrypted},t.startConnecting=function(){var e=this,t=function(n,r){n?e.runner=e.strategy.connect(0,t):"error"===r.action?(e.emit("error",{type:"HandshakeError",error:r.error}),e.timeline.error({handshakeError:r.error})):(e.abortConnecting(),e.handshakeCallbacks[r.action](r))};e.runner=e.strategy.connect(0,t)},t.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var e=this.abandonConnection();e.close()}},t.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},t.retryIn=function(e){var t=this;t.timeline.info({action:"retry",delay:e}),e>0&&t.emit("connecting_in",Math.round(e/1e3)),t.retryTimer=new Pusher.Timer(e||0,function(){t.disconnectInternally(),t.connect()})},t.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.setUnavailableTimer=function(){var e=this;e.unavailableTimer=new Pusher.Timer(e.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.sendActivityCheck=function(){var e=this;e.stopActivityCheck(),e.connection.ping(),e.activityTimer=new Pusher.Timer(e.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)})},t.resetActivityCheck=function(){var e=this;e.stopActivityCheck(),e.connection.handlesActivityChecks()||(e.activityTimer=new Pusher.Timer(e.activityTimeout,function(){e.sendActivityCheck()}))},t.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.buildConnectionCallbacks=function(){var e=this;return{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}}},t.buildHandshakeCallbacks=function(e){var t=this;return Pusher.Util.extend({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.buildErrorCallbacks=function(){function e(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}}var t=this;return{ssl_only:e(function(){t.encrypted=!0,t.updateStrategy(),t.retryIn(0)}),refused:e(function(){t.disconnect()}),backoff:e(function(){t.retryIn(1e3)}),retry:e(function(){t.retryIn(0)})}},t.setConnection=function(e){this.connection=e;for(var t in this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var e in this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.updateState=function(e,t){var n=this.state;this.state=e,n!==e&&(Pusher.debug("State changed",n+" -> "+e),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t))},t.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},Pusher.ConnectionManager=e}.call(this),function(){function e(){Pusher.EventsDispatcher.call(this);var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}Pusher.Util.extend(e.prototype,Pusher.EventsDispatcher.prototype);var t=e.prototype;t.isOnline=function(){return void 0===window.navigator.onLine?!0:window.navigator.onLine},Pusher.NetInfo=e,Pusher.Network=new e}.call(this),function(){function e(){this.reset()}var t=e.prototype;t.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},t.each=function(e){var t=this;Pusher.Util.objectApply(t.members,function(n,r){e(t.get(r))})},t.setMyID=function(e){this.myID=e},t.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},t.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},t.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},t.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},Pusher.Members=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this,function(t,n){Pusher.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=t,this.subscribed=!1}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.authorize=function(e,t){return t(!1,{})},t.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new Pusher.Errors.BadEventName("Event '"+e+"' does not start with 'client-'");return this.pusher.send_event(e,t,this.name)},t.disconnect=function(){this.subscribed=!1},t.handleEvent=function(e,t){0===e.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===e&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",t)):this.emit(e,t)},t.subscribe=function(){var e=this;e.authorize(e.pusher.connection.socket_id,function(t,n){t?e.handleEvent("pusher:subscription_error",n):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})})},t.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Pusher.Channel=e}.call(this),function(){function e(e,t){Pusher.Channel.call(this,e,t)}var t=e.prototype;Pusher.Util.extend(t,Pusher.Channel.prototype),t.authorize=function(e,t){var n=new Pusher.Channel.Authorizer(this,this.pusher.config);return n.authorize(e,t)},Pusher.PrivateChannel=e}.call(this),function(){function e(e,t){Pusher.PrivateChannel.call(this,e,t),this.members=new Pusher.Members}var t=e.prototype;Pusher.Util.extend(t,Pusher.PrivateChannel.prototype),t.authorize=function(e,t){var n=Pusher.PrivateChannel.prototype.authorize,r=this;n.call(r,e,function(e,n){if(!e){if(void 0===n.channel_data)return Pusher.warn("Invalid auth response for channel '"+r.name+"', expected 'channel_data' field"),void t("Invalid auth response");var i=JSON.parse(n.channel_data);r.members.setMyID(i.user_id)}t(e,n)})},t.handleEvent=function(e,t){switch(e){case"pusher_internal:subscription_succeeded":this.members.onSubscription(t),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":var n=this.members.addMember(t);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var r=this.members.removeMember(t);r&&this.emit("pusher:member_removed",r);break;default:Pusher.PrivateChannel.prototype.handleEvent.call(this,e,t)}},t.disconnect=function(){this.members.reset(),Pusher.PrivateChannel.prototype.disconnect.call(this)},Pusher.PresenceChannel=e}.call(this),function(){function e(){this.channels={}}function t(e,t){return 0===e.indexOf("private-")?new Pusher.PrivateChannel(e,t):0===e.indexOf("presence-")?new Pusher.PresenceChannel(e,t):new Pusher.Channel(e,t)}var n=e.prototype;n.add=function(e,n){return this.channels[e]||(this.channels[e]=t(e,n)),this.channels[e]},n.all=function(e){return Pusher.Util.values(this.channels)},n.find=function(e){return this.channels[e]},n.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},n.disconnect=function(){Pusher.Util.objectApply(this.channels,function(e){e.disconnect()})},Pusher.Channels=e}.call(this),function(){Pusher.Channel.Authorizer=function(e,t){this.channel=e,this.type=t.authTransport,this.options=t,this.authOptions=(t||{}).auth||{}},Pusher.Channel.Authorizer.prototype={composeQuery:function(e){var t="&socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return t},authorize:function(e,t){return Pusher.authorizers[this.type].call(this,e,t)}};var e=1;Pusher.auth_callbacks={},Pusher.authorizers={ajax:function(e,t){var n,r=this;n=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("POST",r.options.authEndpoint,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var i in this.authOptions.headers)n.setRequestHeader(i,this.authOptions.headers[i]);return n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var e,r=!1;try{e=JSON.parse(n.responseText),r=!0}catch(i){t(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+n.responseText)}r&&t(!1,e)}else Pusher.warn("Couldn't get auth info from your webapp",n.status),t(!0,n.status)},n.send(this.composeQuery(e)),n},jsonp:function(t,n){void 0!==this.authOptions.headers&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=e.toString();e++;var i=Pusher.Util.getDocument(),o=i.createElement("script");Pusher.auth_callbacks[r]=function(e){n(!1,e)};var a="Pusher.auth_callbacks['"+r+"']";o.src=this.options.authEndpoint+"?callback="+encodeURIComponent(a)+this.composeQuery(t);var s=i.getElementsByTagName("head")[0]||i.documentElement;s.insertBefore(o,s.firstChild)}}}.call(this);var app=angular.module("app",["ui.router","app.services","app.interceptors","app.controllers","app.directives","app.filters","app.providers","app.constants","app.config","ngResource","ngMessages","ngCookies","ngSanitize","angular-jwt","lvl.directives.dragdrop","googlechart","angular-locker"]),services=angular.module("app.services",[]),interceptors=angular.module("app.interceptors",[]),filters=angular.module("app.filters",[]),controllers=angular.module("app.controllers",[]),directives=angular.module("app.directives",[]),providers=angular.module("app.providers",[]),constants=angular.module("app.constants",[]),config=angular.module("app.config",[]);app.config(["$httpProvider","jwtInterceptorProvider","lockerProvider","APIUrlProvider","pusherProvider","config",function(e,t,n,r,i,o){t.tokenGetter=["Session",function(e){return e.getToken()}],e.interceptors.push("jwtInterceptor"),r.base=o.api.baseURL,i.host=o.pusher.host,i.port=o.pusher.port,i.encrypted=o.pusher.encrypted,i.authEndpoint=r.base+o.pusher.authEndpoint,i.appKey=o.pusher.appKey,i.log=function(e){return console.log(e)},i.onSubscriptionSucceeded=["Table",function(e){return e.query()}],i.authHeaders=["Session",function(e){var t=e.getToken();return t?{headers:{Authorization:"Bearer "+t}}:void 0}],i.channelName=["Session",function(e){return"private-channel-"+e.getTokenVal("ai")}],i.channelNameV1=["Session",function(e){return"channel-"+e.getTokenVal("ai")}],e.interceptors.push("pusherSocketIdInterceptor"),e.interceptors.push("blockedAccountInterceptor"),e.interceptors.push("requestIdInterceptor"),n.defaults({namespace:"",eventsEnabled:!1})}]),app.run(["$rootScope","Session","Account","$state","$cookies",function(e,t,n,r,i){e.authenticated=function(){return t.authenticated()},e.$on("blockedAccount",function(e){r.go("blockedAccount")}),t.authenticated()?(n.get(),n.startPoller()):r.go("login"),e.fontSize=i.get("rootFontSize")||"s2"}]),app.value("googleChartApiConfig",{version:1.1,optionalSettings:{language:"es"}}),angular.module("app.config",[]).constant("config",{api:{baseURL:"https://api.e-resto.com"},pusher:{host:"ws.e-resto.com",port:"8080",encrypted:!0,authEndpoint:"/pusher/auth",appKey:"23mefjf853nsfndc7537"},extensionId:"ohklogkcjolnhpaddjdfhhpmpnjdaofl",mercadopago:{backUrl:"https://app-v2.e-resto.com/#!/account/payments"},paypal:{backUrl:"https://app-v2.e-resto.com/#!/account/payments",env:"production"}}),constants.constant("erestoDomains",{ar:"e-resto.com.ar",cl:"e-resto.com",mx:"e-resto.mx",uy:"e-resto.uy",co:"e-resto.com.co","int":"e-resto.com"}),constants.constant("fiscalProtocolsAr",[{id:"epson_ar",name:"Epson"},{id:"epson_ar_compat",name:"Epson Compatible"},{id:"hasar_ar",name:"Hasar"}]),constants.constant("fiscalProtocolsCl",[{id:"epson_cl",name:"Epson"}]),constants.constant("fontSizes",{1:{id:1,label:"Simple"},2:{id:2,label:"Doble"}}),constants.constant("fontTypes",{0:{id:0,label:"Normal"},1:{id:1,label:"Pequeña"}}),constants.constant("permissions",{restaurant:{close_sales:"Cerrar mesa",print_control:"Imprimir control de mesa",cancel_additions:"Cancelar adiciones",create_discounts:"Crear descuentos",cancel_discounts:"Cancelar descuentos",change_addition_price:"Modificar precio al adicionar"},delivery:{list_orders:"Listar",update_orders:"Actualizar",create_orders:"Crear",open_cash_drawer_from_delivery:"Abrir cajón de dinero"},sales:{list_sales:"Listar",update_sales:"Actualizar",cancel_sales:"Eliminar",export_sales:"Exportar",view_sales_summary:"Ver resúmen"},products:{list_products:"Listar",update_products:"Actualizar",create_products:"Crear",destroy_products:"Eliminar",export_products:"Exportar",view_products_cost:"Ver costo"},product_categories:{list_product_categories:"Listar",update_product_categories:"Actualizar",create_product_categories:"Crear",destroy_product_categories:"Eliminar"},ingredients:{list_ingredients:"Listar",update_ingredients:"Actualizar",create_ingredients:"Crear",destroy_ingredients:"Eliminar",export_ingredients:"Exportar",view_ingredients_cost:"Ver costo"},stock:{export_stock:"Exportar",list_stock:"Listar",update_stock:"Actualizar"},stock_movements:{export_stock_movements:"Exportar",list_stock_movements:"Listar"},expenses:{list_expenses:"Listar",update_expenses:"Actualizar",create_expenses:"Crear",cancel_expenses:"Eliminar",export_expenses:"Exportar",view_expenses_summary:"Ver resúmen"},expense_categories:{list_expense_categories:"Listar",update_expense_categories:"Actualizar",create_expense_categories:"Crear",destroy_expense_categories:"Eliminar"},cash_counts:{list_cash_counts:"Listar",update_cash_counts:"Actualizar",create_cash_counts:"Crear",cancel_cash_counts:"Eliminar",export_cash_counts:"Exportar"},cash_movements:{list_cash_movements:"Listar",create_cash_movements:"Crear",cancel_cash_movements:"Eliminar",export_cash_movements:"Exportar"},guests:{list_guests:"Listar",update_guests:"Actualizar",create_guests:"Crear",destroy_guests:"Eliminar",export_guests:"Exportar"},stats:{view_products_stats:"Ver estadísticas de productos",view_sales_stats:"Ver estadísticas de ventas"},admin:{admin_rooms:"Administrar salas y mesas",admin_shifts:"Administrar turnos",admin_printers:"Administrar impresoras",admin_users:"Administrar usuarios",admin_roles:"Administrar perfiles",admin_providers:"Administrar proveedores",admin_taxes:"Administrar impuestos",admin_payment_types:"Administrar medios de pago",admin_receipt_types:"Administrar tipos de comprobante"}}),constants.constant("printerInterfaces",{usb:{id:"usb",name:"USB"},serial:{id:"serial",name:"Serial"}}),controllers.controller("AccountCtrl",["Account",function(e){e.get()}]),controllers.controller("BlockedAccountCtrl",["Account","erestoDomains",function(e,t){var n=e.account;this.domain=function(){return t[n.plan.countryCode]}}]),controllers.controller("BodyCtrl",["Account",function(e){this.blockingAlert=function(){return e.blockingAlert()}}]),controllers.controller("CashCountsCtrl",["CashCount",function(e){var t=this;e.cleanup(),this.cashCounts=e.query();var n=!1,r=1;this.addNextPageData=function(){if(!n){n=!0;var i={page:++r};t.cashCount=e.query(i,function(){n=!1})}}}]),controllers.controller("CashCountsShowCtrl",["$stateParams","$state","CashCount",function(e,t,n){this.currentCashCount=function(){return n.cashCounts[e.cashCountId]};var r=this.currentCashCount();!r||r.canceled||r.closedAt||t.go("cashCounts.show.edit",{cashCountId:r.id})}]),controllers.controller("CashCountsEditCtrl",["$stateParams","$state","CashCount",function(e,t,n){this.currentCashCount=function(){return n.cashCounts[e.cashCountId]};var r=this.currentCashCount();r&&(r.canceled||r.closedAt)&&t.go("cashCounts.show",{cashCountId:r.id})}]),controllers.controller("CashMovementsCtrl",["$state","$timeout","CashMovement","CashMovementsSummary",function(e,t,n,r){var i=this;this.dateFilter={},this.optionsFilter={},this.cashMovements={};var o=1,a=!1;this.getFilter=function(){return angular.extend({},i.dateFilter,i.optionsFilter)},this.addNextPageData=function(){if(!a){a=!0;var e=i.getFilter(),t=angular.extend({page:++o},e);i.cashMovements=n.query(t,function(){a=!1})}},this.loadData=function(){o=1;var t=i.getFilter();i.cashMovements=n.query(t,n.cleanup),i.cashMovementsSummary=r.query(t),e.go("cashMovements")}}]),controllers.controller("CashMovementsShowCtrl",["$stateParams","$state","CashMovement",function(e,t,n){this.currentCashMovement=function(){return n.cashMovements[e.cashMovementId]}}]),controllers.controller("DeliveryCtrl",["$state","Account",function(e,t){t.account.delivery||e.go("tables")}]),controllers.controller("DeliveryShowCtrl",["$stateParams","Delivery",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("DeliveryEditCtrl",["$stateParams","Delivery",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("DeliveryEditPaymentsCtrl",["$stateParams","Delivery",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("DeliveryShowAddCtrl",["$stateParams","Delivery",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("ExpenseCategoriesCtrl",["ExpenseCategory",function(e){this.categories=e.expenseCategories}]),controllers.controller("ExpenseCategoriesShowCtrl",["$stateParams","ExpenseCategory",function(e,t){this.currentCategory=function(){return t.expenseCategories[+e.expenseCategoryId]}}]),controllers.controller("ExpenseCategoriesEditCtrl",["$stateParams","ExpenseCategory",function(e,t){this.currentCategory=function(){return t.expenseCategories[+e.expenseCategoryId]}}]),controllers.controller("ExpensesShowCtrl",["$stateParams","ExpenseArray",function(e,t){this.currentExpense=function(){return t.get(+e.expenseId)}}]),controllers.controller("ExpensesEditCtrl",["$stateParams","ExpenseArray",function(e,t){
this.currentExpense=function(){return t.get(+e.expenseId)}}]),controllers.controller("ExpensesEditExpenseItemsCtrl",["$stateParams","StockableItem","ExpenseArray",function(e,t,n){t.query(),this.currentExpense=function(){return n.get(+e.expenseId)}}]),controllers.controller("GuestsCtrl",["Guest",function(e){this.guests=e.query()}]),controllers.controller("GuestsShowCtrl",["$stateParams","Guest",function(e,t){this.currentGuest=function(){return t.guests[+e.guestId]}}]),controllers.controller("GuestsEditCtrl",["$stateParams","Guest",function(e,t){this.currentGuest=function(){return t.guests[+e.guestId]}}]),controllers.controller("IngredientCategoriesShowCtrl",["$stateParams","IngredientCategory",function(e,t){this.currentCategory=function(){return t.ingredientCategories[+e.ingredientCategoryId]}}]),controllers.controller("IngredientCategoriesEditCtrl",["$stateParams","IngredientCategory",function(e,t){this.currentCategory=function(){return t.ingredientCategories[+e.ingredientCategoryId]}}]),controllers.controller("IngredientsCtrl",["Ingredient",function(e){this.ingredients=e.query(),this.ingredientCategory=null}]),controllers.controller("IngredientsShowCtrl",["$scope","$stateParams","Ingredient",function(e,t,n){this.currentIngredient=function(){return n.ingredients[+t.ingredientId]}}]),controllers.controller("IngredientsEditCtrl",["$stateParams","Ingredient",function(e,t){this.currentIngredient=function(){return t.ingredients[+e.ingredientId]}}]),controllers.controller("LoginCtrl",["$http","$scope","config","Session","$state","pusher","Account","Analytics",function(e,t,n,r,i,o,a,s){var c=this,u=n.api.baseURL+"/authenticate";this.focus={onUser:!0},this.autofilled=!0,r.delToken(),this.acceptDisabled=function(){return t.form.$invalid||c.loading},this.authenticate=function(){c.messageClass="",c.message="Ingresando...",c.loading=!0,e.post(u,c.user).then(function(e){c.autofilled||document.getElementById("loginForm").submit(),r.login(e.data.token),a.get().$promise.then(function(){a.isBlocked()&&i.go("blockedAccount")}),a.startPoller(),s.ga("send","pageview")})["catch"](function(e){c.messageClass="error",c.message="Usuario o contraseña incorrecto",c.loading=!1})}}]),controllers.controller("NotificationsShowCtrl",["$stateParams","NotificationArray","Notification",function(e,t,n){this.notification=t.get(+e.notificationId);var r=function(e){n.read(e,function(){n.get(e.id,function(t){angular.extend(e,t)})})};this.notification.readAt||r(this.notification)}]),controllers.controller("PaymentsCtrl",["$timeout","$state","$scope","Payment","PaymentsSummary",function(e,t,n,r,i){var o=this;this.payments={},this.optionsFilter={};var a=1,s=!1;this.addNextPageData=function(){if(!s){s=!0;var e=angular.extend({page:++a},o.optionsFilter);o.payments=r.query(e,function(){s=!1})}},this.loadData=function(){a=1,o.payments=r.query(o.optionsFilter,r.cleanup),o.paymentsSummary=i.query(o.optionsFilter),t.go("payments")},n.$on("payments-data-update",function(e,t){o.paymentsSummary=i.query(o.optionsFilter)}),e(this.loadData)}]),controllers.controller("PaymentsShowCtrl",["$stateParams","Payment",function(e,t){this.currentPayment=function(){return t.payments[+e.paymentId]}}]),controllers.controller("ProductCategoriesCtrl",["ProductCategory",function(e){this.categories=e.productCategories}]),controllers.controller("ProductCategoriesShowCtrl",["$stateParams","ProductCategory",function(e,t){this.currentCategory=function(){return t.productCategories[+e.productCategoryId]}}]),controllers.controller("ProductCategoriesEditCtrl",["$stateParams","ProductCategory",function(e,t){this.currentCategory=function(){return t.productCategories[+e.productCategoryId]}}]),controllers.controller("ProductsCtrl",["Product",function(e){this.products=e.query({a:-1}),this.productSearch=null,this.productCategory=null}]),controllers.controller("ProductsShowCtrl",["$stateParams","Product",function(e,t){this.currentProduct=function(){return t.products[+e.productId]}}]),controllers.controller("ProductsShowEditCtrl",["$stateParams","Product",function(e,t){this.currentProduct=function(){return t.products[+e.productId]}}]),controllers.controller("ProductsShowEditIconCtrl",["$stateParams","Product",function(e,t){this.currentProduct=function(){return t.products[+e.productId]}}]),controllers.controller("ProductsShowEditProportionsCtrl",["$stateParams","Product",function(e,t){this.currentProduct=function(){return t.products[+e.productId]}}]),controllers.controller("ProductsShowEditProductsCtrl",["$stateParams","Product",function(e,t){this.currentProduct=function(){return t.products[+e.productId]}}]),controllers.controller("SalesShowCtrl",["$stateParams","Sale",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("SalesEditCtrl",["$stateParams","Sale",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("SalesEditPaymentsCtrl",["$stateParams","Sale",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("StockCtrl",["Stock",function(e){this.ingredients=e.queryIngredients(),this.products=e.queryProducts()}]),controllers.controller("StockProductsShowCtrl",["$stateParams","Stock",function(e,t){this.currentProduct=t.products[+e.productId]}]),controllers.controller("StockProductsEditCtrl",["$stateParams","Stock",function(e,t){this.currentProduct=t.products[+e.productId]}]),controllers.controller("StockIngredientsShowCtrl",["$stateParams","Stock",function(e,t){this.currentIngredient=t.ingredients[+e.ingredientId]}]),controllers.controller("StockIngredientsEditCtrl",["$stateParams","Stock",function(e,t){this.currentIngredient=t.ingredients[+e.ingredientId]}]),controllers.controller("StockMovementsShowCtrl",["$stateParams","StockMovementArray",function(e,t){this.stockMovement=t.get(+e.stockMovementId)}]),controllers.controller("TablesCtrl",["Room",function(e){this.currentRoomId=+Object.keys(e.rooms)[0]||1,this.focus={onTableSearch:!0}}]),controllers.controller("TablesShowCtrl",["$stateParams","Table",function(e,t){this.currentTable=function(){return t.tables[+e.tableId]}}]),controllers.controller("TablesShowCloseCtrl",["$stateParams","$state","Table",function(e,t,n){var r=this;this.currentTable=function(){return n.tables[+e.tableId]},this.onConfirm=function(){t.go("tables.show",{tableId:r.currentTable().id})},this.onCancel=function(){t.go("tables.show",{tableId:r.currentTable().id})}}]),controllers.controller("TablesShowAddCtrl",["$stateParams","$state","Table",function(e,t,n){this.currentTable=function(){return n.tables[+e.tableId]}}]),controllers.controller("TakeAwaySalesShowCtrl",["$stateParams","Sale",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("TakeAwaySalesShowCloseCtrl",["$stateParams","$state","Sale",function(e,t,n){var r=this;this.currentSale=function(){return n.sales[+e.saleId]},this.onConfirm=function(){t.go("take_away_sales.new")},this.onCancel=function(){t.go("take_away_sales.show",{saleId:r.currentSale().id})}}]),controllers.controller("TakeAwaySalesEditCtrl",["$stateParams","Sale",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("TakeAwaySalesShowAddCtrl",["$stateParams","Sale",function(e,t){this.currentSale=function(){return t.sales[+e.saleId]}}]),controllers.controller("TipsCtrl",["Tips",function(e){this.tips=e.query()}]),controllers.controller("TipsShowCtrl",["$stateParams","Tips",function(e,t){this.currentTip=function(){return t.tips[+e.tipId]}}]),filters.filter("localizedOrderBy",[function(){return function(e,t){return e.length?e.sort(function(e,n){return e[t].localeCompare(n[t].trim(),[],{sensitivity:"base"})}):e}}]),filters.filter("changedExpenseItems",["Product","Ingredient",function(e,t){return function(n){var r=function(n){var r;if(n.ingredientId)r=t.ingredients[n.ingredientId].cost;else{if(!n.productId)return;r=e.products[n.productId].cost}return(r&&r.toFixed(2))!==(n.price/n.quantity).toFixed(2)};return function(){for(var e,t=0,i=[],o=n[$traceurRuntime.toProperty(Symbol.iterator)]();!(e=o.next()).done;){var a=e.value;!a.canceled&&r(a)&&(i[t++]=a)}return i}()}}]),filters.filter("object2Array",[function(){return function(e){if(e){var t=Object.keys(e);return function(){for(var n,r=0,i=[],o=t[$traceurRuntime.toProperty(Symbol.iterator)]();!(n=o.next()).done;){var a=n.value;"$"!=a[0]&&(i[r++]=e[a])}return i}()}}}]),filters.filter("productFilter",[function(){return function(e,t,n){return e.filter(function(e){if(t){var r=new RegExp(t.replace(/ /g,""),"i");return 3!=e.productTypeId&&(e.active||n)&&(e.code+e.name).replace(/ /g,"").match(r)}})}}]),filters.filter("autocompleteFilter",[function(){return function(e,t){return e.filter(function(e){if(t){var n=new RegExp(t.replace(/ /g,""),"i");return e.name.replace(/ /g,"").match(n)}})}}]),filters.filter("booleanLabel",[function(){return function(e){return e?"Si":"No"}}]),filters.filter("percentage",["$filter",function(e){return function(t){return t?e("number")(t,2)+" %":""}}]),filters.filter("ertCurrency",["$filter","Setting",function(e,t){return function(n,r,i){var o=n%1!==0,a=t.pluck("locale"),s=["es-CL","es-CO"];return void 0===r&&(r=t.pluck("currency_symbol")),-1===s.indexOf(a)||o||(i=0),e("currency")(n,r,i)}}]),filters.filter("availabilityLabel",["Unit",function(e){return function(t){return null===t.availability?"-":null!==t.stock?t.stock+" "+e.units[t.unitId].label:t.availability+" "+e.units[1].label}}]),filters.filter("stockLabel",["Unit",function(e){return function(t,n){return null===t?"-":t+" "+e.units[n].label}}]),filters.filter("ertDateRangeInWords",["$filter",function(e){function t(t,n){return e("date")(t,n)}var n=function(e,t){return e.getDay()===t.getDay()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()};return function(e,r,i){return i=i||"longDate",e&&r?n(e,r)?"el "+t(e,i):"entre el "+t(e,i)+" y el "+t(r,i):""}}]),filters.filter("ertHourRangeInWords",["$filter",function(e){function t(t,n){return e("date")(t,n)}var n=function(e,t){return e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()};return function(e,r,i){return i=i||"shortTime",e&&r?n(e,r)?"a las "+t(e,i):"entre las "+t(e,i)+" y las "+t(r,i):""}}]),interceptors.factory("blockedAccountInterceptor",["$q","$rootScope",function(e,t){var n=function(n){return 403===n.status&&"blocked_account"===n.data&&t.$broadcast("blockedAccount",n),e.reject(n)};return{responseError:n}}]),interceptors.factory("pusherSocketIdInterceptor",["pusher",function(e){var t=function(t){return t.method.match(/POST|PUT|DELETE/)&&(t.headers["Pusher-Socket-Id"]=e.getSocketId()),t};return{request:t}}]),interceptors.factory("requestIdInterceptor",[function(){var e=function(e){return e.method.match(/POST|PUT|DELETE/)&&(e.headers["X-Request-Id"]=Math.random()),e};return{request:e}}]),providers.provider("APIUrl",[function(){var e=this;this.base="",this.$get=function(){return{base:e.base}}}]),providers.provider("pusher",[function(){var e=this;this.appKey=null,this.authEndpoint=null,this.host=null,this.log=null,this.port=null,this.encrypted=!1,this.transports=["ws"],this.authHeaders=function(){return null},this.channelName=function(){return null},this.channelNameV1=function(){return null},this.onSubscriptionSucceeded=function(){return null},this.$get=["$window","$injector",function(t,n){t.Pusher.host=e.host,t.Pusher.log=e.log,t.Pusher.ws_port=e.port,t.Pusher.wss_port=e.port;var r={authEndpoint:e.authEndpoint,disableFlash:!0,disableStats:!0,enabledTransports:e.transports,encrypted:e.encrypted},i=null,o=null,a=null,s=new t.Pusher(e.appKey,r);s.connection.bind("connected",function(){i=s.connection.socket_id});var c=function(){var t=n.invoke(e.channelName,e);return s.config.auth=n.invoke(e.authHeaders,e),new Promise(function(r,i){o=s.channel(t),o?r(o):(o=s.subscribe(t),o.bind("pusher:subscription_error",function(e){i(e)}),o.bind("pusher:subscription_succeeded",function(t){n.invoke(e.onSubscriptionSucceeded,e),r(o)}))})},u=function(){var t=n.invoke(e.channelNameV1,e);return new Promise(function(e,n){a=s.channel(t),a?e(a):(a=s.subscribe(t),a.bind("pusher:subscription_error",function(e){n(e)}),a.bind("pusher:subscription_succeeded",function(t){e(a)}))})},l=function(){return c().then(function(e){return e})},d=function(){return u().then(function(e){return e})},f=function(){o&&o.unbind()},p=function(){a&&a.unbind()},m=function(){return i};return{getChannel:l,getChannelV1:d,getSocketId:m,subscribe:c,subscribeV1:u,unbind:f,unbindV1:p}}]}]),app.config(["$stateProvider",function(e){e.state("account",{url:"/account",controller:"AccountCtrl as AccountCtrl",template:document.getElementById("ert-account-state-tpl").innerHTML}).state("account.info",{url:"/info",template:document.getElementById("ert-account-info-state-tpl").innerHTML}).state("account.payments",{url:"/payments",template:document.getElementById("ert-account-payments-state-tpl").innerHTML}).state("account.reset",{url:"/reset",template:document.getElementById("ert-account-reset-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin",{url:"/admin",template:document.getElementById("ert-admin-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("blockedAccount",{url:"/blocked_account",controller:"BlockedAccountCtrl as BlockedAccountCtrl",template:document.getElementById("ert-blocked-account-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("cashCounts",{url:"/cash_counts",controller:"CashCountsCtrl as CashCountsCtrl",template:document.getElementById("ert-cash-counts-state-tpl").innerHTML}).state("cashCounts.show",{url:"/{cashCountId:int}",controller:"CashCountsShowCtrl as CashCountsShowCtrl",template:document.getElementById("ert-cash-counts-show-state-tpl").innerHTML}).state("cashCounts.show.edit",{url:"/edit",controller:"CashCountsEditCtrl as CashCountsEditCtrl",template:document.getElementById("ert-cash-counts-edit-state-tpl").innerHTML}).state("cashCounts.new",{url:"/new",template:document.getElementById("ert-cash-counts-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("cashMovements",{url:"/cash_movements",controller:"CashMovementsCtrl as CashMovementsCtrl",template:document.getElementById("ert-cash-movements-state-tpl").innerHTML}).state("cashMovements.show",{url:"/{cashMovementId:int}",controller:"CashMovementsShowCtrl as CashMovementsShowCtrl",template:document.getElementById("ert-cash-movements-show-state-tpl").innerHTML}).state("cashMovements.new",{url:"/new",template:document.getElementById("ert-cash-movements-new-state-tpl").innerHTML})}]),app.config(["$urlRouterProvider",function(e){e.when(/^$|^\/$/,"/tables")}]),app.config(["$stateProvider",function(e){e.state("delivery",{url:"/delivery",controller:"DeliveryCtrl as DeliveryCtrl",template:document.getElementById("ert-delivery-state-tpl").innerHTML}).state("delivery.show",{url:"/{saleId:int}",controller:"DeliveryShowCtrl as DeliveryShowCtrl",template:document.getElementById("ert-delivery-show-state-tpl").innerHTML}).state("delivery.edit",{url:"/{saleId:int}/edit",controller:"DeliveryEditCtrl as DeliveryEditCtrl",template:document.getElementById("ert-delivery-edit-state-tpl").innerHTML}).state("delivery.new",{url:"/new",template:document.getElementById("ert-delivery-new-state-tpl").innerHTML}).state("delivery.show.editPayments",{url:"/edit_payments",controller:"DeliveryEditPaymentsCtrl as DeliveryEditPaymentsCtrl",template:document.getElementById("ert-delivery-edit-payments-state-tpl").innerHTML}).state("delivery.show.add",{url:"/add",views:{"show-add@delivery":{controller:"DeliveryShowAddCtrl as DeliveryShowAddCtrl",template:document.getElementById("ert-delivery-show-add-state-tpl").innerHTML}}})}]),app.config(["$stateProvider",function(e){e.state("expenseCategories",{url:"/expense_categories",controller:"ExpenseCategoriesCtrl as ExpenseCategoriesCtrl",template:document.getElementById("ert-expense-categories-state-tpl").innerHTML}).state("expenseCategories.show",{url:"/{expenseCategoryId:int}",controller:"ExpenseCategoriesShowCtrl as ExpenseCategoriesShowCtrl",template:document.getElementById("ert-expense-categories-show-state-tpl").innerHTML}).state("expenseCategories.edit",{url:"/{expenseCategoryId:int}/edit",controller:"ExpenseCategoriesEditCtrl as ExpenseCategoriesEditCtrl",template:document.getElementById("ert-expense-categories-edit-state-tpl").innerHTML}).state("expenseCategories.new",{url:"/new",template:document.getElementById("ert-expense-categories-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("expenses",{url:"/expenses",template:document.getElementById("ert-expenses-state-tpl").innerHTML}).state("expenses.show",{url:"/{expenseId:int}",controller:"ExpensesShowCtrl as ExpensesShowCtrl",template:document.getElementById("ert-expenses-show-state-tpl").innerHTML}).state("expenses.edit",{url:"/{expenseId:int}/edit",controller:"ExpensesEditCtrl as ExpensesEditCtrl",template:document.getElementById("ert-expenses-edit-state-tpl").innerHTML}).state("expenses.editExpenseItems",{url:"/{expenseId:int}/edit/expense_items",controller:"ExpensesEditExpenseItemsCtrl as ExpensesEditExpenseItemsCtrl",template:document.getElementById("ert-expenses-edit-expense-items-state-tpl").innerHTML}).state("expenses.new",{url:"/new",template:document.getElementById("ert-expenses-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("guests",{url:"/guests",controller:"GuestsCtrl as GuestsCtrl",template:document.getElementById("ert-guests-state-tpl").innerHTML}).state("guests.show",{url:"/{guestId:int}",controller:"GuestsShowCtrl as GuestsShowCtrl",template:document.getElementById("ert-guests-show-state-tpl").innerHTML}).state("guests.edit",{url:"/{guestId:int}/edit",controller:"GuestsEditCtrl as GuestsEditCtrl",template:document.getElementById("ert-guests-edit-state-tpl").innerHTML}).state("guests.new",{url:"/new",template:document.getElementById("ert-guests-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("ingredientCategories",{url:"/ingredient_categories",template:document.getElementById("ert-ingredient-categories-state-tpl").innerHTML}).state("ingredientCategories.show",{url:"/{ingredientCategoryId:int}",controller:"IngredientCategoriesShowCtrl as IngredientCategoriesShowCtrl",template:document.getElementById("ert-ingredient-categories-show-state-tpl").innerHTML}).state("ingredientCategories.edit",{url:"/{ingredientCategoryId:int}/edit",controller:"IngredientCategoriesEditCtrl as IngredientCategoriesEditCtrl",template:document.getElementById("ert-ingredient-categories-edit-state-tpl").innerHTML}).state("ingredientCategories.new",{url:"/new",template:document.getElementById("ert-ingredient-categories-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("ingredients",{url:"/ingredients",controller:"IngredientsCtrl as IngredientsCtrl",template:document.getElementById("ert-ingredients-state-tpl").innerHTML}).state("ingredients.edit",{url:"/{ingredientId:[0-9]{1,8}}/edit",controller:"IngredientsEditCtrl as IngredientsEditCtrl",template:document.getElementById("ert-ingredients-edit-state-tpl").innerHTML}).state("ingredients.show",{url:"/{ingredientId:[0-9]{1,8}}",controller:"IngredientsShowCtrl as IngredientsShowCtrl",template:document.getElementById("ert-ingredients-show-state-tpl").innerHTML}).state("ingredients.new",{url:"/new",template:document.getElementById("ert-ingredients-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("login",{controller:"LoginCtrl as LoginCtrl",url:"/login",template:document.getElementById("ert-login-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("notifications",{url:"/notifications",template:document.getElementById("ert-notifications-state-tpl").innerHTML,resolve:{notifications:["Notification","NotificationArray",function(e,t){return e.query({},t.setItems)}]}}).state("notifications.show",{url:"/{notificationId:int}",controller:"NotificationsShowCtrl as NotificationsShowCtrl",template:document.getElementById("ert-notifications-show-state-tpl").innerHTML,resolve:{notifications:["notifications",function(e){return e.$promise}]}})}]),app.config(["$stateProvider",function(e){e.state("payments",{url:"/payments",controller:"PaymentsCtrl as PaymentsCtrl",template:document.getElementById("ert-payments-state-tpl").innerHTML}).state("payments.show",{url:"/{paymentId:int}",controller:"PaymentsShowCtrl as PaymentsShowCtrl",template:document.getElementById("ert-payments-show-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("productCategories",{url:"/product_categories",controller:"ProductCategoriesCtrl as ProductCategoriesCtrl",template:document.getElementById("ert-product-categories-state-tpl").innerHTML}).state("productCategories.show",{url:"/{productCategoryId:int}",controller:"ProductCategoriesShowCtrl as ProductCategoriesShowCtrl",template:document.getElementById("ert-product-categories-show-state-tpl").innerHTML}).state("productCategories.edit",{url:"/{productCategoryId:int}/edit",controller:"ProductCategoriesEditCtrl as ProductCategoriesEditCtrl",template:document.getElementById("ert-product-categories-edit-state-tpl").innerHTML}).state("productCategories.new",{url:"/new",params:{parentId:null},template:document.getElementById("ert-product-categories-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("products",{url:"/products",controller:"ProductsCtrl as ProductsCtrl",template:document.getElementById("ert-products-state-tpl").innerHTML}).state("products.show",{url:"/{productId:int}",controller:"ProductsShowCtrl as ProductsShowCtrl",template:document.getElementById("ert-products-show-state-tpl").innerHTML}).state("products.show.edit",{url:"/edit",controller:"ProductsShowEditCtrl as ProductsShowEditCtrl",template:document.getElementById("ert-products-show-edit-state-tpl").innerHTML}).state("products.show.edit.icon",{url:"/icon",views:{"show-edit-icon@products":{controller:"ProductsShowEditIconCtrl as ProductsShowEditIconCtrl",template:document.getElementById("ert-products-show-edit-icon-state-tpl").innerHTML}}}).state("products.show.editProportions",{url:"/edit_proportions",controller:"ProductsShowEditProportionsCtrl as ProductsShowEditProportionsCtrl",template:document.getElementById("ert-products-show-edit-proportions-state-tpl").innerHTML}).state("products.show.editProducts",{url:"/edit_products",controller:"ProductsShowEditProductsCtrl as ProductsShowEditProductsCtrl",template:document.getElementById("ert-products-show-edit-products-state-tpl").innerHTML}).state("products.new",{url:"/new",template:document.getElementById("ert-products-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("sales",{url:"/sales",template:document.getElementById("ert-sales-state-tpl").innerHTML}).state("sales.show",{url:"/{saleId:int}",controller:"SalesShowCtrl as SalesShowCtrl",template:document.getElementById("ert-sales-show-state-tpl").innerHTML}).state("sales.edit",{url:"/{saleId:int}/edit",controller:"SalesEditCtrl as SalesEditCtrl",template:document.getElementById("ert-sales-edit-state-tpl").innerHTML}).state("sales.show.editPayments",{url:"/edit_payments",controller:"SalesEditPaymentsCtrl as SalesEditPaymentsCtrl",template:document.getElementById("ert-sales-edit-payments-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("stats",{url:"/stats",template:document.getElementById("ert-stats-state-tpl").innerHTML}).state("stats.products",{url:"/products",template:document.getElementById("ert-stats-products-state-tpl").innerHTML}).state("stats.products.select",{url:"/select",views:{"modal@stats":{template:document.getElementById("ert-stats-select-state-tpl").innerHTML}}}).state("stats.sales",{url:"/sales",template:document.getElementById("ert-stats-sales-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("stock",{url:"/stock",controller:"StockCtrl as StockCtrl",template:document.getElementById("ert-stock-state-tpl").innerHTML}).state("stock.products",{url:"/products","abstract":!0,template:"<ui-view/>"}).state("stock.products.show",{url:"/{productId:int}",controller:"StockProductsShowCtrl as StockProductsShowCtrl",template:document.getElementById("ert-stock-products-show-state-tpl").innerHTML}).state("stock.products.edit",{url:"/{productId:int}/edit",controller:"StockProductsEditCtrl as StockProductsEditCtrl",template:document.getElementById("ert-stock-products-edit-state-tpl").innerHTML}).state("stock.ingredients",{url:"/ingredients","abstract":!0,template:"<ui-view/>"}).state("stock.ingredients.show",{url:"/{ingredientId:int}",controller:"StockIngredientsShowCtrl as StockIngredientsShowCtrl",template:document.getElementById("ert-stock-ingredients-show-state-tpl").innerHTML}).state("stock.ingredients.edit",{url:"/{ingredientId:int}/edit",controller:"StockIngredientsEditCtrl as StockIngredientsEditCtrl",template:document.getElementById("ert-stock-ingredients-edit-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("stockMovements",{url:"/stock_movements",template:document.getElementById("ert-stock-movements-state-tpl").innerHTML}).state("stockMovements.show",{url:"/{stockMovementId:int}",controller:"StockMovementsShowCtrl as StockMovementsShowCtrl",template:document.getElementById("ert-stock-movements-show-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("tables",{url:"/tables",controller:"TablesCtrl as TablesCtrl",template:document.getElementById("ert-tables-state-tpl").innerHTML}).state("tables.show",{url:"/:tableId",controller:"TablesShowCtrl as TablesShowCtrl",template:document.getElementById("ert-tables-show-state-tpl").innerHTML}).state("tables.show.close",{url:"/close",views:{"show-close@tables":{controller:"TablesShowCloseCtrl as TablesShowCloseCtrl",template:document.getElementById("ert-tables-show-close-state-tpl").innerHTML}}}).state("tables.show.add",{url:"/add",views:{"show-add@tables":{controller:"TablesShowAddCtrl as TablesShowAddCtrl",template:document.getElementById("ert-tables-show-add-state-tpl").innerHTML}}})}]),app.config(["$stateProvider",function(e){e.state("take_away_sales",{url:"/take_away_sales",template:document.getElementById("ert-take-away-sales-state-tpl").innerHTML}).state("take_away_sales.show",{url:"/{saleId:int}",controller:"TakeAwaySalesShowCtrl as TakeAwaySalesShowCtrl",template:document.getElementById("ert-take-away-sales-show-state-tpl").innerHTML}).state("take_away_sales.edit",{url:"/{saleId:int}/edit",controller:"TakeAwaySalesEditCtrl as TakeAwaySalesEditCtrl",template:document.getElementById("ert-take-away-sales-edit-state-tpl").innerHTML}).state("take_away_sales.show.close",{url:"/close",views:{"show-close@take_away_sales":{controller:"TakeAwaySalesShowCloseCtrl as TakeAwaySalesShowCloseCtrl",template:document.getElementById("ert-take-away-sales-show-close-state-tpl").innerHTML}}}).state("take_away_sales.show.add",{url:"/add",views:{"show-add@take_away_sales":{controller:"TakeAwaySalesShowAddCtrl as TakeAwaySalesShowAddCtrl",template:document.getElementById("ert-take-away-sales-show-add-state-tpl").innerHTML}}}).state("take_away_sales.new",{url:"/new",template:document.getElementById("ert-take-away-sales-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("tips",{url:"/tips",controller:"TipsCtrl as TipsCtrl",template:document.getElementById("ert-tips-state-tpl").innerHTML}).state("tips.show",{url:"/{tipId:int}",controller:"TipsShowCtrl as TipsShowCtrl",template:document.getElementById("ert-tips-show-state-tpl").innerHTML})}]),directives.directive("ertAdminSidebar",["Setting",function(e){function t(t){var n=e.pluck("locale");-1===["es-AR","es-CL"].indexOf(n)&&(t.fiscalPrinterStyle={display:"none"}),-1===["es-CO","es-HN"].indexOf(n)&&(t.taxStyle={display:"none"})}return{link:t,template:function(){return document.getElementById("ert-admin-sidebar-tpl").innerHTML},scope:{}}}]),directives.directive("ertAdminSubtop",["$state","Room",function(e,t){function n(n,r,i){n.defaultRoomId=+Object.keys(t.rooms)[0],n.inRoomsState=function(){return e.includes("admin.rooms")}}return{link:n,restrict:"E",template:function(){return document.getElementById("ert-admin-subtop").innerHTML},scope:{}}}]),directives.directive("ertAlertDialog",[function(){return{restrict:"E",transclude:!0,scope:{caption:"@",iconClass:"@",onAccept:"&",focus:"=?"},template:function(){return document.getElementById("ert-alert-dialog-tpl").innerHTML}}}]),directives.directive("ertCompareTo",[function(){return{require:"ngModel",scope:{otherModelValue:"=ertCompareTo"},link:function(e,t,n,r){r.$validators.compareTo=function(t){return t==e.otherModelValue},e.$watch("otherModelValue",function(){r.$validate()})}}}]),directives.directive("ertConfirmClick",[function(){function e(e,t,n){t.on("click",function(t){t.stopPropagation();var r=n.ertConfirmMsg;r&&confirm(r)&&e.$apply(n.ertConfirmClick)})}return{restrict:"A",link:e}}]),directives.directive("ertCurrencySymbol",["Setting",function(e){function t(t,n,r){t.currencySymbol=e.pluck("currency_symbol")}return{link:t,restrict:"E",template:"{{ currencySymbol }}"}}]),directives.directive("ertDate",[function(){return{restrict:"E",template:"{{ date | date: 'dd/MM/yy'}}",scope:{date:"="}}}]),directives.directive("ertDateTimeSummary",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-date-time-summary-tpl").innerHTML},scope:{dateFilter:"=",count:"="}}}]),directives.directive("ertDatetime",[function(){return{restrict:"E",template:"{{ date | date: 'dd/MM/yy HH:mm:ss'}}",scope:{date:"="}}}]),directives.directive("ertDialog",["$q","$window",function(e,t){var n=function(n,r,i){var o=function(e){27===e.keyCode&&(e.preventDefault(),n.onCancel())};t.addEventListener("keydown",o),r.on("$destroy",function(){t.removeEventListener("keydown",o)}),n.inProgress=!1,n.acceptDisabled=function(){return n.inProgress||n.form.$invalid},n.cancelDisabled=function(){return n.inProgress},n.onAccept=function(){n.form.$setPristine(),n.inProgress=!0,e.when(n.accept()).then(function(){n.inProgress=!1})["catch"](function(e){throw n.inProgress=!1,e})},n.onCancel=function(){n.form.$setPristine(),n.inProgress=!0,e.when(n.cancel()).then(function(){n.inProgress=!1})["catch"](function(e){throw n.inProgress=!1,e})}};return{link:n,restrict:"E",transclude:!0,scope:{caption:"@",accept:"&onAccept",cancel:"&onCancel",focus:"=?"},template:function(){return document.getElementById("ert-dialog-tpl").innerHTML}}}]),directives.directive("ertEditDeliverySale",["Delivery","Sale","User","Guest",function(e,t,n,r){function i(n,i,o){var a=function(){n.guests=r.guests,n.masterFormSale={guest:{},guestId:null},n.guest=n.guests[n.masterSale.guestId],n.initialValue=null,n.masterSale.deliveryData.guestPhone&&(n.initialValue=n.masterSale.deliveryData.guestPhone);var e=n.masterSale.guestId;if(e){var t=r.guests[e];n.masterFormSale.guest.phone=t.phone,n.masterFormSale.guest.name=t.name,n.masterFormSale.guest.address=t.address,n.masterFormSale.guestId=t.id}else n.masterFormSale.guest.phone=n.masterSale.deliveryData.guestPhone,n.masterFormSale.guest.name=n.masterSale.deliveryData.guestName,n.masterFormSale.guest.address=n.masterSale.deliveryData.guestAddress;n.masterFormSale.comment=n.masterSale.comment,n.masterFormSale.saleStateId=n.masterSale.saleStateId,n.formSale=angular.copy(n.masterFormSale)};n.deliveryStates=[{id:2,label:"En preparación"},{id:6,label:"Enviado"},{id:3,label:"Entregado"}],n.disallowedState=function(e){return e.id===t.STATES.CLOSED},n.acceptDisabled=function(){return n.form.$invalid||angular.equals(n.formSale,n.masterFormSale)},n.onSelectGuest=function(e){n.formSale.guest=e,n.formSale.guestId=e.id,n.focus={onSubmit:!0}},n.onDiscardGuest=function(){n.formSale.guest={active:!0,address:[]},n.formSale.guestId=null},n.onAccept=function(){return e.update(n.masterSale,n.formSale,n.afterUpdate).$promise;
},n.onCancel=function(){n.afterCancel()},n.isSent=function(e){return e.saleStateId===t.STATES.DELIVERY_SENT},a()}return{restrict:"E",template:function(){return document.getElementById("ert-edit-delivery-sale-tpl").innerHTML},link:i,scope:{masterSale:"=sale",afterUpdate:"&",afterCancel:"&"}}}]),directives.directive("ertEditSale",["User","Guest","Table",function(e,t,n){function r(r,i,o){r.tables=n.tables,r.guests=t.guests,r.waiters=e.waiters,r.sale=angular.copy(r.masterSale),r.acceptDisabled=function(){return r.editSaleForm.$invalid||angular.equals(r.sale,r.masterSale)},r.onAccept=function(){return n.updateSale(r.masterSale,r.sale,r.afterUpdate).$promise},r.onCancel=function(){r.afterCancel()}}return{restrict:"E",template:function(){return document.getElementById("ert-edit-sale-tpl").innerHTML},link:r,scope:{masterSale:"=sale",afterUpdate:"&",afterCancel:"&"}}}]),directives.directive("ertEditTakeAwaySale",["Sale","User","Guest",function(e,t,n){function r(t,r,i){t.sale=angular.copy(t.masterSale),t.guests=n.guests,t.guest=t.guests[t.masterSale.guestId],t.focus={onGuestName:!0},t.initialValue=null,t.masterSale.deliveryData.guestName&&(t.initialValue=t.masterSale.deliveryData.guestName),t.acceptDisabled=function(){return t.form.$invalid||angular.equals(t.sale,t.masterSale)},t.onAccept=function(){return t.sale.guestId&&(t.sale.deliveryData={}),e.update(t.masterSale,t.sale,t.afterUpdate).$promise},t.onCancel=function(){t.afterCancel()},t.onSelectGuest=function(e){t.sale.guestId=e.id,t.focus={onSubmit:!0}},t.onDiscardGuest=function(){t.sale.guestId=null,t.sale.deliveryData={}}}return{restrict:"E",template:function(){return document.getElementById("ert-edit-take-away-sale-tpl").innerHTML},link:r,scope:{masterSale:"=sale",afterUpdate:"&",afterCancel:"&"}}}]),directives.directive("ertFiscalDatetime",["Printer",function(e){function t(t,n,r){t.getDatetime=function(){e.getDatetime().then(function(e){t.$apply(function(){return t.datetimeResponse=e})})["catch"](function(e){alert(e.message)})},t.setDatetime=function(t,n){var r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());e.setDatetime(r).then(function(){alert("Ok")})["catch"](function(e){alert(e.message)})}}return{restrict:"E",template:function(){return document.getElementById("ert-fiscal-datetime-tpl").innerHTML},link:t}}]),directives.directive("ertFiscalPayments",["Printer",function(e){function t(t,n,r){t.paymentTypes=[],t.setNewPaymentType=function(n){if(confirm('¿Seguro desea definir un nuevo tipo de pago "'+n+'"?.\nEsta acción no podrá deshacerse.')){var r=parseInt(t.paymentTypes[t.paymentTypes.length-1].number)+1;e.setPaymentType(r,n).then(function(){alert("OK")})["catch"](function(e){alert(e.message)})}},t.getPaymentTypes=function(){t.paymentTypes=[],e.getPaymentTypes().then(function(e){t.$apply(function(){return t.paymentTypes=e})})["catch"](function(e){alert(e.message)})},t.paymentAlreadyDefined=function(e){return t.paymentTypes.find(function(t){return t.text.toUpperCase()==e.toUpperCase()})},t.disabledNewPaymentTypeForm=function(e){return t.newPaymentTypeForm.$invalid||t.paymentAlreadyDefined(e)||t.paymentTypes.length<=0}}return{restrict:"E",template:function(){return document.getElementById("ert-fiscal-payments-tpl").innerHTML},link:t}}]),directives.directive("ertFiscalReports",["FiscalReport",function(e){function t(t,n,r){t.reports=e.query()}return{restrict:"E",template:function(){return document.getElementById("ert-fiscal-reports-tpl").innerHTML},link:t}}]),directives.directive("ertFocus",["$timeout",function(e){function t(t,n,r){t.$watch("ertFocus",function(t){t&&!r.disabled&&e(function(){n[0].select&&n[0].select(),n[0].focus()})},!0),n.bind("blur",function(){e(function(){t.ertFocus=!1})})}return{link:t,scope:{ertFocus:"="}}}]),directives.directive("ertIconAddDiscount",["Sale",function(e){return{restrict:"E",template:function(){return document.getElementById("ert-icon-add-discount-tpl").innerHTML},scope:{sale:"=",disabled:"="}}}]),directives.directive("ertIconEdit",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-icon-edit-tpl").innerHTML},scope:{disabled:"=",onClick:"&"}}}]),directives.directive("ertIconPrintOrder",["Sale","KitchenReceipt",function(e,t){function n(e,n,r){e.printOrder=function(e){t.print(e,e.additions)},e.disabled=function(){return e.sale&&e.sale.additions?!e.sale.additions.filter(function(e){return!e.canceled}).length:void 0}}return{restrict:"E",template:function(){return document.getElementById("ert-icon-print-order-tpl").innerHTML},link:n,scope:{sale:"="}}}]),directives.directive("ertNavTime",["$interval",function(e){function t(t,n,r){function i(){t.currentTime=new Date}var o;n.on("$destroy",function(){e.cancel(o)}),o=e(function(){i()},5e3),i()}return{restrict:"E",template:function(){return document.getElementById("ert-nav-time-tpl").innerHTML},link:t,scope:{}}}]),directives.directive("ertPagination",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-pagination-tpl").innerHTML},link:e,scope:{pageInfo:"="}}}]),directives.directive("ertProductCategoriesList",["ProductCategory",function(e){function t(e,t,n){e.setCurrentProductCategoryId=function(t){e.currentProductCategoryId=t}}return{restrict:"E",link:t,scope:{productCategories:"=",currentProductCategoryId:"="},template:function(){return document.getElementById("ert-product-categories-list-tpl").innerHTML}}}]),directives.directive("ertProductEdit",["Product","Util",function(e,t){function n(n,r,i){n.product=angular.copy(n.masterProduct),n.submitingEditProduct=!1,n.invalidEditProductForm=function(){return n.editProductForm.$invalid||n.submitingEditProduct||angular.equals(n.product,n.masterProduct)},n.updateProduct=function(r,i){var o=["name","productCategoryId","price","code","unitId","active","favourite","description"],a=t.slice(r,o,i);n.submitingEditProduct=!0,e.update(r.id,a).$promise.then(n.onSaveClick())},n.unitTypes={1:{id:1,name:"unid."},2:{id:2,name:"Kg"},3:{id:3,name:"L"}}}return{restrict:"E",template:function(){return document.getElementById("ert-product-edit-tpl").innerHTML},link:n,scope:{masterProduct:"=product",productCategories:"=",onSaveClick:"&",onCancelClick:"&"}}}]),directives.directive("ertProductsList",["Product",function(e){function t(e,t,n){e.isProductActive=function(t){return t==e.currentProductId},e.toggleProductFavourite=function(t){e.products[t.id].favourite=!t.favourite}}return{restrict:"E",template:function(){return document.getElementById("ert-products-list-tpl").innerHTML},link:t,scope:{products:"=",currentProductId:"=",currentProductCategoryId:"="}}}]),directives.directive("ertProductsSubtop",[function(){function e(e,t,n){e.resetSearch=function(){e.productSearch=null,e.productCategory=null}}return{restrict:"E",link:e,template:function(){return document.getElementById("ert-products-subtop").innerHTML},scope:{productSearch:"=",productCategory:"="}}}]),directives.directive("ertSelectDate",["$locale","$filter","$timeout","CashCount","Shift",function(e,t,n,r,i){function o(o,a,s){function c(e,t){var n=new Date(e),r=new Date(t);return n.getMinutes()+60*n.getHours()>r.getMinutes()+60*r.getHours()}o.cashCountDateFormat="dd/MM/yy HH:mm:ss",r.query().$promise.then(function(){o.cashCounts=t("object2Array")(r.cashCounts).reverse(),o.cashCount=o.cashCounts[0]}),o.types={d:"Diario",m:"Mensual",y:"Anual",r:"Rango",cc:"Arqueo"},o.shifts=i.shifts,o.model={t1:new Date,t2:new Date,s1:null,s2:null},o.t1=new Date(o.model.t1.getFullYear(),o.model.t1.getMonth(),o.model.t1.getDate(),0,0,null,null),o.t2=new Date(o.model.t2.getFullYear(),o.model.t2.getMonth(),o.model.t2.getDate()+1,0,0,null,null),o.refreshDate=function(){switch(o.type){case"d":o.model.t1=new Date(o.year,o.month,o.day,0,0),o.model.t2=new Date(o.year,o.month,o.day+1,0,0);break;case"m":o.model.t1=new Date(o.year,o.month,1,0,0),o.model.t2=new Date(o.year,o.month+1,1,0,0);break;case"y":o.model.t1=new Date(o.year,0,1,0,0),o.model.t2=new Date(o.year+1,0,1,0,0);break;case"r":var e=o.model.t1,t=o.model.t2;o.model.t1=new Date(e.getFullYear(),e.getMonth(),e.getDate(),o.t1.getHours(),o.t1.getMinutes(),null,null),o.model.t2=new Date(t.getFullYear(),t.getMonth(),t.getDate(),o.t2.getHours(),o.t2.getMinutes(),null,null);break;case"cc":o.model.t1=new Date(o.cashCount.openedAt),o.model.t2=o.cashCount.closedAt&&new Date(o.cashCount.closedAt)}if(o.model.s1&&c(o.model.s1,o.model.s2)&&"r"!==o.type&&"cc"!==o.type){var n=new Date(o.model.s1),r=o.model.t1,i=new Date(o.model.s2),a=o.model.t2;r.setHours(r.getHours()+n.getHours()),r.setMinutes(r.getMinutes()+n.getMinutes()),a.setHours(a.getHours()+i.getHours()),a.setMinutes(a.getMinutes()+i.getMinutes())}u()},o.refreshShift=function(){var e=o.model.shift;o.model.s1=e&&new Date(o.shifts[e].start_time),o.model.s2=e&&new Date(o.shifts[e].end_time),o.refreshDate(),o.onChange()},o.blur=function(){document.activeElement.blur()};var u=function(){var e=new Date(o.year,o.month+1,0).getDate();o.days=Array.apply(null,{length:e}).map(function(e,t){return t+1})},l=function(){o.months=e.DATETIME_FORMATS.SHORTMONTH},d=function(){o.years=[2013,2014,2015,2016,2017]};d(),l(),u(),o.year=o.model.t1.getFullYear(),o.month=o.model.t1.getMonth(),o.day=o.model.t1.getDate(),o.type="d",n(function(){o.refreshShift(),o.dateColumns&&(o.model.dc=o.dateColumns[0].id),o.groupable&&(delete o.types.d,o.type="m",o.model.g="daily")}),o.$watch("type",function(e,t){e!==t&&o.refreshDate()}),o.$watchGroup(["model.t1 | json","model.t2 | json","model.dc"],function(e,t){e!==t&&o.onChange()})}return{restrict:"E",template:function(){return document.getElementById("ert-select-date-tpl").innerHTML},link:o,scope:{cashCounts:"=?",model:"=ngModel",onChange:"&",dateColumns:"=",groupable:"=",hideShift:"="}}}]),directives.directive("ertSelectFilter",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-select-filter-tpl").innerHTML},scope:{items:"=",label:"@",model:"="}}}]),directives.directive("ertSelectItemClarification",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-select-item-clarification-tpl").innerHTML},scope:{text:"@"}}}]),directives.directive("ertSelectItems",[function(){function e(e,t,n){e.required="required"in n}return{restrict:"E",link:e,template:function(){return document.getElementById("ert-select-items-tpl").innerHTML},scope:{items:"=",label:"@",model:"=",name:"@",onChange:"&"}}}]),directives.directive("ertSelectTime",["$locale",function(e){function t(e,t,n){var r=new Date;e.type="a",e.types={a:"Todo el día",r:"Rango horario"},e.model={h1:new Date,h2:new Date},e.h1=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,null,null),e.h2=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,null,null),e.refreshTime=function(){switch(e.type){case"a":e.model.h1=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,null,null),e.model.h2=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,null,null);break;case"r":e.model.h1=e.h1,e.model.h2=e.h2}},e.$watch("type",function(t,n){e.refreshTime()}),e.$watchGroup(["model.h1 | json","model.h2 | json"],function(t,n){e.onChange()}),e.refreshTime()}return{restrict:"E",template:function(){return document.getElementById("ert-select-time-tpl").innerHTML},link:t,scope:{model:"=ngModel",onChange:"&"}}}]),directives.directive("ertSerialDevices",["Printer",function(e){function t(t,n,r){t.setSerialDevice=function(t){e.setSerialPath(t.path)},e.getSerialDevices().then(function(e){t.$apply(function(){return t.devices=e})})}return{restrict:"E",template:function(){return document.getElementById("ert-serial-devices-tpl").innerHTML},link:t}}]),directives.directive("ertShowSale",["$window","$state","Sale","Guest","Table","PendingAddition","PrinterJob","Product",function(e,t,n,r,i,o,a,s){function c(r,c,u){r.products=s.products,r.tables=i.tables,r.confirmAdditionsErrorDialog=!1;var l=function(e){e.ctrlKey&&67===e.keyCode&&r.gotoCloseTable()};e.addEventListener("keydown",l),r.$on("$destroy",function(){e.removeEventListener("keydown",l)}),r.focus={onAdder:!0,onErrorsDialogAccept:!1},r.focusOnAdder=function(){r.focus.onAdder=!0},r.hideEditItems=function(){r.editItems=!1,r.focusOnAdder()},r.showEditItems=function(){r.editItems=!0},r.disabledAddDiscount=function(e){return 0===n.subtotal(e)},r.closeConfirmAdditionsErrorDialog=function(){r.confirmAdditionsErrorDialog=!1,r.focusOnAdder()},r.disabledEditItems=function(e){return r.editItems||0===n.subtotal(e)},r.gotoCloseTable=function(){t.go(".close",{tableId:r.sale.tableId})},r.confirmPendingAdditions=function(){var e=o.additions[r.sale.id];return e?i.saveSaleAdditions(r.sale,e).$promise.then(function(){a.printKitchenReceipt(r.sale,e),r.discardPendingAdditions()})["catch"](function(e){r.errors=e.data,r.confirmAdditionsErrorDialog=!0,r.focus.onErrorsDialogAccept=!0}):Promise.resolve()},r.discardPendingAdditions=function(){o.discard(r.sale.id),r.focusOnAdder()},r.addPendingAddition=function(e){o.add(r.sale.id,e.count,e.product),r.focusOnAdder()}}return{restrict:"E",template:function(){return document.getElementById("ert-show-sale-tpl").innerHTML},link:c,scope:{sale:"="}}}]),directives.directive("ertStockLabel",["Unit",function(e){function t(t,n,r){t.units=e.units}return{restrict:"E",template:'<span ng-if="resource.stock">{{ resource.stock }} {{ units[resource.unitId].label }}</span>',link:t,scope:{resource:"="}}}]),directives.directive("ertTime",[function(){return{restrict:"E",template:"{{ date | date: 'HH:mm:ss'}}",scope:{date:"="}}}]),directives.directive("ertTopBar",["$rootScope","$state","CurrentUser","Account","Listener","CurrentUser",function(e,t,n,r,i,n){function o(i,o,a){var s=864e6;i.showWelcomeVideo=1===n.signInCount()&&null===localStorage.getItem("welcomeVideo"),i.closeWelcomeVideo=function(){localStorage.setItem("welcomeVideo","1"),i.showWelcomeVideo=!1,i.showHelpBubble=!0},i.isCurrentState=function(e){return t.includes(e)},i.account=r.account,i.blockingDate=(new Date).setDate(20),i.blockingAlertDate=function(){return new Date(Date.parse(i.account.statusUpdatedAt)+s)},i.tablesClass=function(){var e=t.includes("tables")||t.includes("take_away_sales")||t.includes("delivery");return{active:e}},i.toggleHelp=function(){e.displayHelp=!e.displayHelp},i.salesClass=function(){var e=t.includes("sales")||t.includes("cashMovements")||t.includes("cashCounts")||t.includes("tips");return{active:e}},i.productsClass=function(){var e=t.includes("products")||t.includes("ingredients")||t.includes("stock")||t.includes("productCategories")||t.includes("ingredientCategories")||t.includes("stockMovements");return{active:e}},i.guestsClass=function(){var e=t.includes("guests")||t.includes("payments");return{active:e}},i.statsClass=function(){var e=t.includes("stats");return{active:e}},i.onSalesClick=function(){n.can("list_sales")?t.go("sales"):(n.can("list_cash_counts")||n.can("create_cash_counts")||n.can("update_cash_counts")||n.can("cancel_cash_counts"))&&t.go("cashCounts")},i.onProductsClick=function(){n.can("list_products")?t.go("products"):n.can("list_ingredients")?t.go("ingredients"):n.can("list_stock")&&t.go("stock")},i.pendingPaymentWarning=function(){return r.pendingPaymentWarning()},i.pendingPaymentAlert=function(){return r.pendingPaymentAlert()},i.blockingAlert=function(){return r.blockingAlert()},i.paymentVerification=function(){return r.paymentVerification()},i.accountIsActive=function(){return r.isActive()},i.accountIsBlocked=function(){return r.isBlocked()}}return{restrict:"E",template:function(){return document.getElementById("ert-top-bar-tpl").innerHTML},link:o,scope:{}}}]),directives.directive("ertTopBarLogin",["$window","Session",function(e,t){var n=function(n,r,i){n.showMenu=!1,t.authenticated()&&(n.login=t.getTokenVal("ul").split("@")[0]);var o=function(e){var t=0===r[0].getElementsByClassName(e.target.className).length;t&&(a(),n.$digest())},a=function(){n.showMenu=!1,e.removeEventListener("click",o)},s=function(){n.showMenu=!0,e.addEventListener("click",o)};n.toggleMenu=function(){n.showMenu?a():s()},n.logout=function(){t.logout()}};return{link:n,restrict:"E",scope:{},template:function(){return document.getElementById("ert-top-bar-login-tpl").innerHTML}}}]),directives.directive("ertTopBarNotifications",["$window","Notification","TopBarNotificationArray",function(e,t,n){var r=function(r,i,o){t.query({r:!1},n.setItems),r.showMenu=!1,r.notifications=n.getItems();var a=function(e){e.forEach(s)},s=function(e){t.view(e,function(){t.get(e.id,function(t){angular.extend(e,t)})})},c=function(e){var t=0===i[0].getElementsByClassName(e.target.className).length;t&&(u(),r.$digest())},u=function(){r.showMenu=!1,e.removeEventListener("click",c)},l=function(){r.showMenu=!0,e.addEventListener("click",c),r.notViewed=r.getNotViewed().slice(),a(r.notViewed)};r.getNotViewed=function(){return r.notifications.filter(function(e){return!e.viewedAt})},r.getNotViewedCount=function(){return r.getNotViewed().length},r.toggleMenu=function(){r.showMenu?u():l()}};return{link:r,restrict:"E",scope:{},template:function(){return document.getElementById("ert-top-bar-notifications-tpl").innerHTML}}}]),directives.directive("ertUnavailable",["$location",function(e){function t(e,t,n){e.email="info@e-resto.com"}return{link:t,restrict:"E",template:function(){return document.getElementById("ert-unavailable-tpl").innerHTML},scope:{}}}]),services.factory("Account",["$resource","$rootScope","$interval","locker","APIUrl","Util","Session",function(e,t,n,r,i,o,a){var s=i.base+"/account/:action",c=r.namespace(a.getTokenVal("ai")).get("account",{}),u=function(){return r.namespace(a.getTokenVal("ai")).put("account",c)},l=e(s,null,{toPaymentVerification:{params:{action:"to_payment_verification"},method:"PUT"},destroyData:{method:"DELETE"}}),d=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=l).get.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){o.cleanup(c),angular.extend(c,e),u()}),angular.extend(c,r)},f=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=(t=l).toPaymentVerification.apply(t,$traceurRuntime.spread(n));return i.$promise.then(function(){e.status="PAYMENT_VERIFICATION",u()}),i},p=function(){var e=new Date(Date.parse(c.statusUpdatedAt)),t=o.diffInDays(e,new Date);return"PENDING_PAYMENT"===c.status&&7>t},m=function(){var e=new Date(Date.parse(c.statusUpdatedAt)),t=o.diffInDays(e,new Date);return"PENDING_PAYMENT"===c.status&&t>=7},h=function(){return"BLOCKING_ALERT"===c.status},g=function(){return"PAYMENT_VERIFICATION"===c.status},v=function(){return"ACTIVE"===c.status},y=function(){return"BLOCKED"===c.status},$=function(){t.accountPoller=n(function(){return d()},36e5)},b=function(){angular.isDefined(t.accountPoller)&&n.cancel(t.accountPoller)},C=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=l).destroyData.apply(e,$traceurRuntime.spread([{dg:"sales"}],t))};return{account:c,blockingAlert:h,destroySales:C,get:d,isActive:v,isBlocked:y,paymentVerification:g,pendingPaymentAlert:m,pendingPaymentWarning:p,startPoller:$,stopPoller:b,toPaymentVerification:f}}]),services.factory("Addition",["$resource","APIUrl","Product","ProductCategory","Tax",function(e,t,n,r,i){var o=t.base+"/additions/:id",a=e(o,null,{cancel:{method:"PUT",url:o+"/cancel"},saveBatch:{method:"POST"}}),s=function(e,t){return e?e.reduce(function(e,n){return t(n)?e+n.price:e},0):0},c=function(e){var t=n.products,i=r.productCategories;return e.reduce(function(e,n){var r=t[n.productId],o=r.kitchenId||i[r.productCategoryId].kitchenId||null;return e.has(o)||e.set(o,[]),e.get(o).push(n),e},new Map)},u=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(t=a).saveBatch.apply(t,$traceurRuntime.spread([e],n))},l=function(e){return s(e,function(e){return!e.canceled})},d=function(e){return s(e,function(e){return!e.canceled&&!e.paid})},f=function(e){return s(e,function(e){return!e.canceled&&!e.paid&&e.selected})},p=function(e){var t=r.productCategories;return e.map(function(e){var r=n.products[e.productId],i=t[r.productCategoryId].taxes,o=i.map(function(e){return e.percentage}).reduce(function(e,t){return e+t},0);return Object.assign({},e,{price:e.price/(1+o/100)})})},m=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=(t=a).cancel.apply(t,$traceurRuntime.spread([{id:e.id},null],n));return i.$promise.then(function(){e.canceled=!0}),i};return{cancel:m,groupByKitchenId:c,saveBatch:u,total:l,totalSelected:f,totalRemaining:d,withoutTaxes:p}}]),services.factory("Analytics",["$window",function(e){var t="UA-31652780-8",n=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(t=e).ga.apply(t,$traceurRuntime.spread(n))};return n("create",t,"auto"),{ga:n}}]),services.factory("BaseArray",[function(){return function(){var e=[];this.append=function(t){var n;(n=e).push.apply(n,$traceurRuntime.spread(t))},this.get=function(t){return e.find(function(e){return e.id===t})},this.getItems=function(){return e},this.setItems=function(t){var n;(n=e).splice.apply(n,$traceurRuntime.spread([0,e.length],t))}}}]),services.factory("BaseService",["$resource","$timeout","locker","pusher","APIUrl","Util","Session",function(e,t,n,r,i,o,a){return function(s){var c=i.base+"/"+o.underscorize(s)+":format/:id",u=e(c,null,{destroy:{method:"DELETE"},"import":{method:"POST",url:c+"/import",transformRequest:[],headers:{"Content-Type":null}},query:{isArray:!1},queryXLS:{params:{format:".xls"}},update:{method:"PUT"}}),l=this[s]=n.namespace(a.getTokenVal("ai")).get(s,{}),d=this.sync=function(){n.namespace(a.getTokenVal("ai")).put(s,l)};r.getChannel().then(function(e){var n=o.dasherize(s);e.bind(n+"-create",function(e){t(function(){l[e.id]=e,d()})}),e.bind(n+"-update",function(e){t(function(){angular.extend(l[e.id],e),d()})}),e.bind(n+"-destroy",function(e){t(function(){delete l[e.id],d()})})}),this.destroy=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=(n=u).destroy.apply(n,$traceurRuntime.spread([Object.assign({id:e.id},t)],r));return o.$promise.then(function(){delete l[e.id],d()}),o},this.get=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=(t=u).get.apply(t,$traceurRuntime.spread([{id:e}],n));return i.$promise.then(function(t){o.cleanup(l[e]),angular.extend(l[e],t),d()}),i},this.query=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=u).query.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){o.cleanup(l),angular.extend(l,e),d()}),angular.extend(l,r)},this.queryXLS=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=u).queryXLS.apply(e,$traceurRuntime.spread(t))},this.save=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=u).save.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){l[e.id]=e,d()}),r},this.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=o.changes(t,e),s=(n=u).update.apply(n,$traceurRuntime.spread([{id:e.id},a],r));return s.$promise.then(function(){angular.extend(e,angular.copy(a)),d()}),s},this["import"]=function(e){return u["import"]({},e)},this.query()}}]),services.factory("CashCount",["$resource","$timeout","pusher","APIUrl","Util",function(e,t,n,r,i){var o=r.base+"/cash_counts/:id",a=["comment","income","incomeDetail","outcome","outcomeDetail","realLeftover"],s={};n.getChannel().then(function(e){e.bind("cash-count-update",function(e){t(function(){s[e.id]&&(s[e.id]=e)})})});var c=e(o,null,{query:{isArray:!1},update:{method:"PUT"}}),u=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=(t=c).get.apply(t,$traceurRuntime.spread([{id:e}],n));return i.$promise.then(function(e){s[e.id]&&(s[e.id]=e)}),i},l=function(e,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var s=i.slice(t,a);return(n=c).update.apply(n,$traceurRuntime.spread([{id:e.id},s],r))},d=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=c).query.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){angular.extend(s,e)}),angular.extend(s,r)},f=function(){i.cleanup(s)},p=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=c).save.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){s[e.id]=e}),r},m=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i={canceled:!0},o=(t=c).update.apply(t,$traceurRuntime.spread([{id:e.id},i],n));return o.$promise.then(function(){angular.extend(e,i)}),o},h=function(e){return e?e.init+e.income-e.outcome:void 0};return{balance:h,cancel:m,cashCounts:s,cleanup:f,get:u,query:d,save:p,update:l}}]),services.factory("CashCountReceipt",["$filter","Printer","EscPosDocument","Setting","CashCount","User","PaymentType",function(e,t,n,r,i,o,a){var s=n,c=function(t){return e("date")(t,"dd/MM/yy HH:mm:ss")},u=function(e){return i.balance(e)},l=function(e){return e.realLeftover-u(e)},d=function(t){var n=a.paymentTypes,r=o.users[t.createdById],i=o.users[t.closedById],d=function(t){return e("ertCurrency")(t,"")};if(s.open(),s.line("Arqueo de Caja: # "+t.id),s.line("Hora de Apertura: "+c(t.openedAt)),s.line("Creado por: "+(r&&r.name||"")),s.line("Hora de Cierre: "+c(t.closedAt||"")),s.line("Cerrado por: "+(i&&i.name||"")),t.comment&&(s.blankLine(),s.line("Comentario: "+t.comment)),s.blankLine(),s.line("Monto Inicial: "+d(t.init)),s.blankLine(),s.line("Ingresos: "+d(t.income)),t.incomeDetail){var f=t.incomeDetail.payments;if(f)for(var p in f)f[p]&&s.line("  "+n[p].name+": "+d(f[p]));t.incomeDetail.cash&&s.line("  Ventas Efectivo: "+t.incomeDetail.cash),t.incomeDetail.currentAccount&&s.line("  Pagos Cta. Cte.: "+t.incomeDetail.currentAccount),t.incomeDetail.card&&s.line("  Ventas Tarjeta: "+t.incomeDetail.card),t.incomeDetail.check&&s.line("  Ventas Cheque: "+t.incomeDetail.check),t.incomeDetail.cashMovement&&s.line("  Movimientos de Caja: "+d(t.incomeDetail.cashMovement)),t.incomeDetail.tip&&s.line("  Propina: "+d(t.incomeDetail.tip))}return s.blankLine(),s.line("Egresos: "+t.outcome),t.outcomeDetail&&(t.outcomeDetail.expense&&s.line("  Gasto: "+d(t.outcomeDetail.expense)),t.outcomeDetail.cashMovement&&s.line("  Movimientos de Caja: "+d(t.outcomeDetail.cashMovement))),s.blankLine(),s.line("Estimado en Caja: "+d(u(t))),s.blankLine(),s.line("Real en Caja: "+d(t.realLeftover)),s.blankLine(),s.line("Diferencia: "+d(l(t))),s.close(),s.getBuffer()},f=function(e){var n=t.find({printControlReceipt:!0});return n.reduce(function(n,r){return n.then(function(){var n=d(e);return t.send(n,r)})},Promise.resolve())};return{print:f}}]),services.factory("CashDrawer",["Printer","EscPosDocument","FiscalPrinter",function(e,t,n){var r=function(){var r=e.find({printControlReceipt:!0});return r.length?r.reduce(function(n,r){return n.then(function(){var n=t.open(),i=n.openDrawer().getBuffer();return e.send(i,r)})},Promise.resolve()):n.openDrawer()};return{open:r}}]),services.factory("CashMovement",["$resource","$timeout","pusher","APIUrl","Util",function(e,t,n,r,i){var o=r.base+"/cash_movements:format/:id",a={income:{id:"income",label:"Ingreso"},outcome:{id:"outcome",label:"Egreso"}},s={};n.getChannel().then(function(e){e.bind("cash-movement-create",function(e){t(function(){return s[e.id]=e})}),e.bind("cash-movement-update",function(e){t(function(){s[e.id]&&(s[e.id]=e)})})});var c=e(o,null,{query:{isArray:!1},queryXLS:{params:{format:".xls"}},update:{method:"PUT"}}),u=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=c).query.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){angular.extend(s,e)}),angular.extend(s,r)},l=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=c).queryXLS.apply(e,$traceurRuntime.spread(t))},d=function(){i.cleanup(s)},f=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=c).save.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){s[e.id]=e}),r},p=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];attrs={canceled:!0};var i=(t=c).update.apply(t,$traceurRuntime.spread([{id:e.id},attrs],n));return i.$promise.then(function(){angular.extend(e,attrs)}),i};return{cancel:p,cashMovements:s,cleanup:d,query:u,queryXLS:l,save:f,TYPES:a}}]),services.factory("CashMovementsSummary",["$resource","APIUrl",function(e,t){var n=t.base+"/cash_movements_summary",r=e(n,null,{query:{isArray:!1}}),i={},o=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=(e=r).query.apply(e,$traceurRuntime.spread(t));return o.$promise.then(function(e){angular.extend(i,e)}),angular.extend(i,o)};return{cashMovementsSummary:i,query:o}}]),services.factory("Checkout",["$resource","APIUrl",function(e,t){var n=t.base+"/checkout/:service/:action",r=e(n,null,{payMercadopago:{method:"POST",params:{action:"pay",service:"mercadopago"}},subscribeMercadopago:{method:"POST",params:{action:"subscribe",service:"mercadopago"}},payPaypal:{method:"POST",params:{action:"pay",service:"paypal"}},executePaypal:{method:"POST",params:{action:"execute",service:"paypal"}},subscribePaypal:{method:"POST",params:{action:"subscribe",service:"paypal"}},agreePaypal:{method:"POST",params:{action:"agree",service:"paypal"}}}),i=function(){var e=r.payMercadopago({});return e.$promise},o=function(e){var t=r.subscribeMercadopago({backUrl:e});return t.$promise},a=function(e){var t=r.payPaypal({backUrl:e});return t.$promise},s=function(e,t){var n=r.executePaypal({payerId:e,paymentId:t});return n.$promise},c=function(e){var t=r.subscribePaypal({backUrl:e});return t.$promise},u=function(e){var t=r.agreePaypal({token:e});return t.$promise};return{payMercadopago:i,subscribeMercadopago:o,payPaypal:a,executePaypal:s,subscribePaypal:c,agreePaypal:u}}]),services.factory("ChromeExtension",["config",function(e){var t=function(){return a().then(function(e){return"pong"===e})},n=e.extensionId,r=function(e){return d("getConfig",e)},i=function(){return d("getSerialDevices")},o=function(){return d("getUsbDevices")},a=function(){return d("ping")},s=function(){return d("renewPermissions")},c=function(e){return d("setConfig",e)},u=function(e,t){return d("sendToFiscalPrinter",e,t)},l=function(e,t){return d("sendToReceiptPrinter",e,t)},d=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Promise(function(r,i){if(window.chrome){var o={name:e,args:t};window.chrome.runtime.sendMessage(n,o,r)}else i(new Error("No extension handler"))})};return{extensionId:n,enabled:t,getConfig:r,getSerialDevices:i,getUsbDevices:o,ping:a,renewPermissions:s,setConfig:c,sendToFiscalPrinter:u,sendToReceiptPrinter:l}}]),services.factory("ControlReceipt",["$filter","Table","Product","User","Guest","Sale","EscPosDocument","Setting","Util","Payment","Printer","FiscalReceiptCo","Tax","FiscalReceiptHonduras",function(e,t,n,r,i,o,a,s,c,u,l,d,f,p){var m=4,h=30,g=8,v=function(e){this.product=e,this.name=e.name,this.count=0,this.price=0};$traceurRuntime.createClass(v,{add:function(e){this.count+=e.count,this.price+=e.price}},{});var y=function(t){return e("ertCurrency")(t,"")},$=function(e,t,n){var r=new Array(t+1).join(" ");return n?(r+e).slice(-t):(e+r).slice(0,t)},b=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $(e[0],m)+$(e[1],h)+$(e[2],g,!0)},C=function(e,t){var n=$("",m)+e;return n+$(y(t),m+h+g-n.length,!0)},w=function(t){var n=t.count,r=c.stripAccents(t.name),i=e("ertCurrency")(t.price,"");return b(n,r,i)},S=function(e,t){var n=e.filter(function(e){return e.product.productCategoryId===t.product.productCategoryId});if(n.length>0){var r=e.indexOf(n[n.length-1]);e.splice(r+1,0,t)}else e.push(t)},E=function(e){var t=[];return e.forEach(function(e){var r=n.products[e.productId],i=t.find(function(e){return e.product.id===r.id});i||(i=new v(r),S(t,i)),i.add(e)}),t},I=function(e,t){e.line(C("SUBTOTAL",t)),e.blankLine();
},P=function(e,t,n){if(e.reset(),n.format&&n.format.font){var r=n.format.font;e.setFontType(r.t),e.setFontSize(r.w-1<<4|r.h-1)}n.text&&(e.line(c.stripAccents(n.text)),e.blankLine())},T=function(n,a,u){var l=a.tableId&&t.tables[a.tableId],m=Date.parse(a.createdAt),h=a.additions.filter(function(e){return!e.canceled}),g=a.discounts.filter(function(e){return!e.canceled}),v=o.subtotal(a);if(n.reset(),u.format&&u.format.font){var $=u.format.font;n.setFontType($.t),n.setFontSize($.w-1<<4|$.h-1)}if(u.text&&(n.line(c.stripAccents(u.text)),n.blankLine()),"es-HN"===s.pluck("locale")){var S=p.print(a);return void n.line(S)}if("es-CO"===s.pluck("locale")){var P=s.pluck("fiscal_receipt");if(P){var T=a.id-P.offset,x=P.label+" "+P.prefix+(T>0?T:"XXXX");n.line(x)}}if(l&&n.line("Mesa: "+l.number),a.people&&n.line("Personas: "+a.people),a.saleTypeId===o.TYPES.LOCAL&&u.printSaleIdInControlReceipt?n.line("ID: #"+a.id%1e3):(a.saleTypeId===o.TYPES.TAKE_AWAY||a.saleTypeId===o.TYPES.DELIVERY)&&n.line("Pedido: #"+a.id%1e3),n.line("Fecha: "+e("date")(m,"dd/MM/yy HH:mm:ss")),a.userId){var k=r.waiters[a.userId];n.line("Camarero: "+k.label)}if(a.guestId){var A=i.guests[a.guestId];A&&n.line("Cliente: "+A.name)}if(a.deliveryData&&a.deliveryData.guestName&&n.line("Cliente: "+a.deliveryData.guestName),a.saleTypeId===o.TYPES.DELIVERY)if(a.guestId){var D=i.guests[a.guestId];n.line("Direccion: "+D.address.join(" ")),n.line("Telefono: "+D.phone)}else a.deliveryData&&a.deliveryData.guestAddress&&(n.line("Direccion: "+a.deliveryData.guestAddress.join(" ")),n.line("Telefono: "+a.deliveryData.guestPhone));if(n.blankLine(),E(h).forEach(function(e){n.line(w(e))}),I(n,v),g&&g.length&&(g.forEach(function(t){var r=o.discountAmountOnRemaining(a,t),i="DESCUENTO "+e("percentage")(t.percentage);n.line(b("",i,y(-r))),v-=r}),I(n,v)),"es-CO"===s.pluck("locale")){var M=d.parse(a);n.line("-------- Detalle de Valores --------------"),n.line(b("","Vta. Gravada:",M.taxedAmount.toFixed("2"))),n.line(b("","Vta. Excluida:",M.exemptAmount.toFixed("2"))),Object.keys(M.appliedTaxes).forEach(function(e){var t=M.appliedTaxes[e];n.line(b("",f.taxes[e].name,t.tax.toFixed("2")))}),n.blankLine(),n.line("-------- Informacion Tributaria ----------"),n.line(b(""," %         Vlr Base","Vlr Imp")),n.line("------------------------------------------"),n.line(b(""," 0.00      "+M.exemptAmount,"0.00")),Object.keys(M.appliedTaxes).forEach(function(e){var t=M.appliedTaxes[e];n.line(b("",Number(f.taxes[e].percentage).toFixed(2)+"      "+t.amount,t.tax))}),n.blankLine()}if(u.tipPercentage){var _=function(){n.line(C(L,R)),v+=R,I(n,v)},R=v*u.tipPercentage/100,O="pt-BR"===s.pluck("locale")?"TAXA":"PROPINA SUGERIDA",L=O+" "+e("percentage")(u.tipPercentage);a.saleTypeId===o.TYPES.DELIVERY?u.printTipInDelivery&&_():a.saleTypeId===o.TYPES.TAKE_AWAY?u.printTipInTakeAway&&_():u.printTipInControlReceipt&&_()}a.payments.length&&(a.payments.forEach(function(e){n.line(C("PAGADO",-e.amount)),v-=e.amount}),n.blankLine()),n.setFontSize(1),n.line(C("TOTAL",v)),n.blankLine()},x=function(e,t,n){if(e.reset(),n.format&&n.format.font){var r=n.format.font;e.setFontType(r.t),e.setFontSize(r.w-1<<4|r.h-1)}n.text&&(e.line(c.stripAccents(n.text)),e.blankLine())},k=function(e){var t={text:s.pluck("control_receipt_header"),format:s.pluck("control_receipt_header_format")},n={text:s.pluck("control_receipt_body"),format:s.pluck("control_receipt_body_format"),tipPercentage:s.pluck("tip_percentage"),printTipInControlReceipt:s.pluck("print_tip_in_control_receipt"),printTipInDelivery:s.pluck("print_tip_in_delivery"),printTipInTakeAway:s.pluck("print_tip_in_take_away"),printSaleIdInControlReceipt:s.pluck("print_sale_id_in_control_receipt")},r={text:s.pluck("control_receipt_footer"),format:s.pluck("control_receipt_footer_format")};n.format&&n.format.maxProductLength&&(h=n.format.maxProductLength);var i=a;return i.open(),P(i,e,t),T(i,e,n),x(i,e,r),i.close(),i.getBuffer()},A=function(e){var t=l.find({printControlReceipt:!0});return t.reduce(function(t,n){return t.then(function(){var t=k(e);return l.send(t,n)})},Promise.resolve())};return{groupAdditions:E,print:A}}]),services.factory("CurrentUser",["Session","Role","PrinterJob",function(e,t,n){var r=function(){return e.getTokenVal("ua")},i=function(){return e.getTokenVal("sic")},o=function(n){var r=t.roles[e.getTokenVal("ur")];return r.permissions.indexOf(n)>-1},a=function(e){return r()||o(e)},s=function(e){switch(e){case"admin":return a("admin_rooms")||a("admin_printers")||a("admin_users")||a("admin_roles")||a("admin_providers")||a("admin_taxes")||a("admin_payment_types")||a("admin_receipt_types")||a("admin_shifts");case"admin.rooms":return a("admin_rooms");case"account.reset":return a("destroy_data");case"admin.printers":return a("admin_printers");case"admin.users":return a("admin_users");case"admin.roles":return a("admin_roles");case"admin.shifts":return a("admin_shifts");case"admin.providers":return a("admin_providers");case"admin.taxes":return a("admin_taxes");case"admin.paymentTypes":return a("admin_payment_types");case"admin.receiptTypes":return a("admin_receipt_types");case"products":return a("list_products")||a("list_ingredients")||a("list_stock")||a("list_stock_movements");case"guests":return a("list_guests");case"expenses":return a("list_expenses")||a("create_expenses")||a("update_espenses")||a("cancel_expenses");case"sales":return a("list_sales")||a("list_cash_counts")||a("create_cash_counts")||a("update_cash_counts")||a("cancel_cash_counts");case"cashCounts":return a("list_cash_counts")||a("create_cash_counts")||a("update_cash_counts")||a("cancel_cash_counts");case"cashMovements":return a("list_cash_movements")||a("create_cash_movements")||a("cancel_cash_movements");case"stats":return a("view_products_stats")||a("view_sales_stats")}},c=function(){return e.getTokenVal("ul").split("@")[0]},u=function(){return e.getTokenVal("ul").split("@")[1]};return{accountLoginPart:u,can:a,canState:s,signInCount:i,shortLogin:c}}]),services.factory("Delivery",["$resource","APIUrl","Guest","Util",function(e,t,n,r){var i=t.base+"/delivery/:id",o=e(i,null,{query:{isArray:!1},update:{method:"PUT"}}),a={},s=function(){r.cleanup(a)},c=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=o).query.apply(e,$traceurRuntime.spread(t)),i=function(e){angular.extend(a,e)};return r.$promise.then(i),angular.extend(a,r)},u=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=(e=o).save.apply(e,$traceurRuntime.spread(t)),s=function(e){sale=e.sale,guest=e.guest,a[sale.id]=sale,guest&&(n.guests[guest.id]=guest)},c=function(e){console.log(e)};return i.$promise.then(s,c),i},l=function(e,t){for(var r,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var c=(r=o).update.apply(r,$traceurRuntime.spread([{id:e.id},t],i)),u=function(t){e=t.sale,guest=t.guest,a[e.id]=e,guest&&(n.guests[guest.id]=guest)},l=function(e){console.log(e)};return c.$promise.then(u,l),c};return{cleanup:s,query:c,sales:a,save:u,update:l}}]),services.factory("Discount",["$resource","pusher","Util","APIUrl",function(e,t,n,r){var i=r.base+"/discounts/:id",o=["canceled"],a=e(i,null,{update:{method:"PUT"},saveBatch:{method:"POST"}}),s=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=(n=a).saveBatch.apply(n,$traceurRuntime.spread([e],r));return o.$promise.then(function(e){var n;(n=t.discounts).push.apply(n,$traceurRuntime.spread(e.discounts))}),o},c=function(e,t){for(var r,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var c=n.slice(t,o,e),u=(r=a).update.apply(r,$traceurRuntime.spread([{id:e.id},c],i));return u.$promise.then(function(){angular.extend(e,c)}),u};return{saveBatch:s,update:c}}]);var EscPosDocument=function(){this.ESC=27,this.LF=10,this.CR=13,this.buffer=[]},$EscPosDocument=EscPosDocument;$traceurRuntime.createClass(EscPosDocument,{add:function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.buffer).push.apply(e,$traceurRuntime.spread(t)),this},blankLine:function(){return this.add(this.CR,this.LF),this},close:function(){return this.cutPaper(),this.reset(),this.setFontSize(0),this},cutPaper:function(){return this.add(29,86,66,0),this},getBuffer:function(){return this.buffer},initBuffer:function(){return this.buffer=[],this},line:function(e){var t,n=this.str2arr(e);return(t=this).add.apply(t,$traceurRuntime.spread(n,[this.CR,this.LF])),this},open:function(){return this.initBuffer(),this.reset(),this.setFontSize(0),this},openDrawer:function(){return this.add(this.ESC,112,0,25,250),this},reset:function(){return this.add(this.ESC,64),this},setEmphasis:function(e){return this.add(27,69,e),this},setFontType:function(e){return this.add(27,77,e),this},setFontSize:function(e){return this.add(29,33,e),this},str2arr:function(e){return function(){for(var t,n=0,r=[],i=e.split("")[$traceurRuntime.toProperty(Symbol.iterator)]();!(t=i.next()).done;){var o=t.value;r[n++]=o.charCodeAt(0)}return r}()}},{factory:function(){return new $EscPosDocument}}),services.factory("EscPosDocument",EscPosDocument.factory),services.factory("Expense",["$resource","APIUrl","Util",function(e,t,n){var r=t.base+"/expenses:format/:id",i=["amount","date","expenseCategoryId","providerId","receiptTypeId","receiptNumber","description","useInCashCount","expenseItems"],o=e(r,null,{cancel:{method:"PUT",url:r+"/cancel"},queryXLS:{params:{format:".xls"}},update:{method:"PUT"},updateCosts:{method:"PUT",url:r+"/update_costs"}}),a=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=(t=o).cancel.apply(t,$traceurRuntime.spread([{id:e.id},null],n));return i.$promise.then(function(){e.canceled=!0}),i},s=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(t=o).get.apply(t,$traceurRuntime.spread([{id:e}],n))},c=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=o).query.apply(e,$traceurRuntime.spread(t))},u=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=o).queryXLS.apply(e,$traceurRuntime.spread(t))},l=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=o).save.apply(e,$traceurRuntime.spread(t))},d=function(e,t){for(var r,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c=n.slice(t,i,e),u=(r=o).update.apply(r,$traceurRuntime.spread([{id:e.id},c],a));return u.$promise.then(function(){angular.extend(e,c)}),u},f=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return(n=o).updateCosts.apply(n,$traceurRuntime.spread([{id:e.id},{itemsIds:t}],r))};return{cancel:a,get:s,query:c,queryXLS:u,save:l,update:d,updateCosts:f}}]),services.factory("ExpenseArray",["BaseArray",function(e){return new e}]),services.factory("ExpenseCategory",["BaseService",function(e){return new e("expenseCategories")}]),services.factory("ExpensesSummary",["$resource","APIUrl","pusher",function(e,t,n){var r=t.base+"/expenses_summary",i={};n.getChannel().then(function(e){e.bind("expenses-summary-update",function(e){$timeout(function(){return angular.extend(i,e)})})});var o=e(r,null,{query:{isArray:!1}}),a=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=o).query.apply(e,$traceurRuntime.spread(t,[function(e){angular.extend(i,e)}])),i};return{expensesSummary:i,query:a}}]),services.factory("FileUploader",["$resource","APIUrl",function(e,t){var n=t.base+"/upload",r=e(n,null,{upload:{method:"POST",transformRequest:[],headers:{"Content-Type":"application/vnd.ms-excel"}}}),i=function(e){return r.upload({},e)};return{uploadXLS:i}}]),services.factory("FiscalPrinter",["Setting","FiscalPrinterEpsonAr","FiscalPrinterEpsonArCompat","FiscalPrinterEpsonCl","FiscalPrinterHasarAr",function(e,t,n,r,i){var o=function(){return e.fetch("fiscal_protocol").then(function(e){switch(e.value){case"epson_ar":return t;case"epson_ar_compat":return n;case"epson_cl":return r;case"hasar_ar":return i}})},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).cancelReceipt.apply(n,$traceurRuntime.spread(e))})},s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).dailyClose.apply(n,$traceurRuntime.spread(e))})},c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).getDateTime.apply(n,$traceurRuntime.spread(e))})},u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).getPaymentType.apply(n,$traceurRuntime.spread(e))})},l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).openDrawer.apply(n,$traceurRuntime.spread(e))})},d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).printCreditNote.apply(n,$traceurRuntime.spread(e))})},f=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).printReceipt.apply(n,$traceurRuntime.spread(e))})},p=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).queryStatus.apply(n,$traceurRuntime.spread(e))})},m=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).reportByDate.apply(n,$traceurRuntime.spread(e))})},h=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o().then(function(t){var n;return(n=t).reportByNumber.apply(n,$traceurRuntime.spread(e))})};return{cancelReceipt:a,dailyClose:s,getDateTime:c,getPaymentType:u,openDrawer:l,printCreditNote:d,printReceipt:f,queryStatus:p,reportByDate:m,reportByNumber:h}}]),services.factory("FiscalPrinterBase",["ChromeExtension","Sale","Payment","Product","SaleReceipt","PaymentType",function(e,t,n,r,i,o){return function(n){var a=this,s=this.printer=new window.Eresto.FiscalPrinter(e,n),c=o.paymentTypes;this.addItems=function(e,t){return e.reduce(function(e,n){return e.then(function(){if(!n.canceled){var e=r.products[n.productId].name,i=n.price/n.count;return s.addItem(n.count,e,i,t)}})},Promise.resolve())},this.addDiscounts=function(e,n,r){return(e||[]).reduce(function(e,i){return e.then(function(){if(!i.canceled){var e=t.discountAmount(n,i);return s.addDiscount(e,r)}})},Promise.resolve())},this.addPayments=function(e,t){return e.reduce(function(e,n){return e.then(function(){var e=n.label||c[n.paymentTypeId].name;return s.addPayment(e,n.amount,t)})},Promise.resolve())},this.closeReceipt=function(e,t){return s.closeReceipt(t).then(function(n){var r={saleId:e.id,type:t.documentType,number:n.receiptNumber,extraData:JSON.stringify({printerResponse:n,options:t})};return i.save(r).$promise.then(function(t){return e.lastReceipt=t})})},this.dailyClose=function(e){return s.dailyClose(e)},this.cancelReceipt=function(){return s.cancelReceipt()},this.getDateTime=function(){return s.getDateTime()},this.getPaymentType=function(e){return s.getPaymentType(e)},this.openReceipt=function(e){return s.openReceipt(e)},this.printReceipt=function(e,t,n){return a.openReceipt(n).then(function(){return a.addItems(e.additions,n)}).then(function(){return a.addDiscounts(e.discounts,e,n)}).then(function(){return a.addPayments(t,n)}).then(function(){return a.closeReceipt(e,n)})},this.queryStatus=function(){return s.queryStatus()},this.openDrawer=function(){return s.openDrawer()},this.reportByDate=function(e,t,n){return s.reportByDate(e,t,n)},this.reportByNumber=function(e,t,n){return s.reportByNumber(e,t,n)},this.setCustomerData=function(e){return s.setCustomerData(e)}}}]),services.factory("FiscalPrinterEpsonAr",["FiscalPrinterBase","SaleReceipt",function(e,t){var n=new window.Eresto.EpsonArProtocol,r=new e(n);return r.printCreditNote=function(e,n){var i=function(){return r.printer.openCreditNote(n)},o=function(){return r.addItems(e.additions,n)},a=function(){return r.addDiscounts(e.discounts,e,n)},s=function(){return r.printer.closeCreditNote(n)},c=function(r){var i={saleId:e.id,type:n.documentType,number:r.creditNoteNumber,extraData:JSON.stringify({printerResponse:r,options:n})};return t.save(i).$promise.then(function(t){return e.lastReceipt=t})};return i().then(o).then(a).then(s).then(c)},r.printReceipt=function(e,t,n){return r.openReceipt(n).then(function(){return r.addItems(e.additions,n)}).then(function(){return r.addDiscounts(e.discounts,e,n)}).then(function(){return r.closeReceipt(e,n)})},r}]),services.factory("FiscalPrinterEpsonArCompat",["FiscalPrinterBase",function(e){var t=new window.Eresto.EpsonArCompatProtocol,n=new e(t);return n.printReceipt=function(e,t,r){return n.queryStatus().then(function(){return n.openReceipt(r)}).then(function(){return n.addItems(e.additions,r)}).then(function(){return n.addDiscounts(e.discounts,e,r)}).then(function(){return n.closeReceipt(e,r)})},n}]),services.factory("FiscalPrinterEpsonCl",["FiscalPrinterBase","ChromeExtension",function(e,t){var n=new window.Eresto.EpsonClProtocol,r=new e(n),i=function(e,t){return Promise.resolve(e.slice(t))},o=function(e,t){var n=0,r=e.findIndex(function(e){return(n+=e.price)===t});return Promise.resolve(e.slice(r+1))},a=function(e){return r.printer.getPaymentsInfo().then(function(t){var n=parseInt(t[0]),r=0,i=e.findIndex(function(e){return(r+=e.amount)===n});return e.slice(i+1)})},s=function(e,t,n){if(console.log("Error"),console.log(e),"0102"===e.code)return r.printer.getDocumentInfo().then(function(e){switch(console.log("response:"),console.log(e),e[12]){case"0":case"1":return o(t.additions,parseInt(e[1])).then(function(e){return console.log("Add pending additions:"),console.log(e),r.addItems(e)}).then(function(){return console.log("Add discounts:"),console.log(t.discounts),r.addDiscounts(t.discounts,t)}).then(function(){return console.log("Add payments:"),console.log(n),r.addPayments(n)}).then(function(){return console.log("Close receipt"),r.closeReceipt(t)});case"2":return i(t.discounts,parseInt(e[4])).then(function(e){return console.log("Add pending discounts:"),console.log(e),r.addDiscounts(e)}).then(function(){return console.log("Add payments:"),console.log(n),r.addPayments(n)}).then(function(){return console.log("Close receipt"),r.closeReceipt(t)});case"3":return a(n).then(function(e){return console.log("Add pending payments:"),console.log(e),r.addPayments(e)}).then(function(){return console.log("Close receipt:"),r.closeReceipt(t)})["catch"](function(e){return r.closeReceipt(t)});case"4":return r.closeReceipt(t)}});throw e},c=r.printReceipt;return r.printReceipt=function(e,n,r){var i=angular.copy(n),o=function(e){return t.getConfig("fiscalMap").then(function(t){var n={1:"1",2:"2",3:"1",4:"4",5:"6"},r=t.fiscalMap||n;e.forEach(function(e){e.label=(r[e.paymentTypeId]||1).toString()})})};return o(i).then(function(){return c(e,i,r)})["catch"](function(t){return s(t,e,i)})},r.cancelReceipt=function(){return r.printer.getDocumentInfo().then(function(e){var t=(parseInt(e[1]),{id:null});switch(e[12]){case"4":return r.printer.closeReceipt(t);default:return r.printer.getPaymentsInfo().then(function(e){var n=parseInt(e[2]);if(n>0){var i={paymentTypeId:1,label:"1",amount:n};return r.addPayments([i]).then(function(){r.printer.closeReceipt(t)})}return r.printer.closeReceipt(t)})}})},r}]),services.factory("FiscalPrinterHasarAr",["FiscalPrinterBase","SaleReceipt",function(e,t){var n=new window.Eresto.HasarArProtocol,r=new e(n);return r.printCreditNote=function(e,n){var i=n.embarkNumber,o=n.customerData,a=n.documentLetter,s=function(){return r.printer.setEmbarkNumber(i)},c=function(){return r.setCustomerData(o)},u=function(){return r.printer.openCreditNote(a)},l=function(){return r.addItems(e.additions,n)},d=function(){return r.printer.closeCreditNote()},f=function(r){var i={saleId:e.id,type:n.documentType,number:r.creditNoteNumber,extraData:JSON.stringify({printerResponse:r,options:n})};return t.save(i).$promise.then(function(t){return e.lastReceipt=t})};return s().then(c).then(u).then(l).then(d).then(f)},r.printReceipt=function(e,t,n){var i;return i=n&&n.documentLetter?r.setCustomerData(n):Promise.resolve(),i.then(function(){return r.openReceipt(n)}).then(function(){return r.addItems(e.additions,n)}).then(function(){return r.addDiscounts(e.discounts,e,n)}).then(function(){return r.closeReceipt(e,n)})},r}]),function(){var e="FiscalReceiptCo",t=function(e,t,n){this.ProductCategory=e,this.Product=t,this.Tax=n},n=t;$traceurRuntime.createClass(t,{parse:function(e){var t=this.ProductCategory.productCategories,n=this.Product.products,r=(this.Tax.taxes,0),i=0,o={};return e.additions.forEach(function(a){if(!a.canceled){var s=n[a.productId],c=t[s.productCategoryId].taxes,u=a.price;e.discounts.forEach(function(e){e.canceled||(u-=u*e.percentage/100)}),c.length?c.forEach(function(e){o[e.id]||(o[e.id]={id:e.id,amount:0,tax:0});var t=u/(1+e.percentage/100);r=Number((r+t).toFixed(2)),o[e.id].amount=Number((o[e.id].amount+t).toFixed(2)),o[e.id].tax=Number((o[e.id].tax+(u-t)).toFixed(2))}):i=Number((i+u).toFixed(2))}}),{taxedAmount:r,exemptAmount:i,appliedTaxes:o}}},{factory:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(Function.prototype.bind.apply(n,$traceurRuntime.spread([null],e)))}}),t.factory.$inject=["ProductCategory","Product","Tax"],services.factory(e,t.factory)}(),services.factory("FiscalReport",["$resource",function(e){var t=e("/api/fiscal_reports/:reportId",null,{query:{isArray:!1}}),n=function(e){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return(n=t).save.apply(n,$traceurRuntime.spread([e],r))},r=function(){return t.query()};return{query:r,save:n}}]),services.factory("GoogleChart",[function(){var e=function(e,t,n,r){this.type=e,this.options=r,this.columnsValues=t,this.rowsValues=n};$traceurRuntime.createClass(e,{cell:function(e){return{v:e}},columnElement:function(e,t,n,r,i){var o={type:e};return t&&(o.label=t),n&&(o.id=n),r&&(o.p=angular.extend({role:r},i)),o},row:function(e){return{c:e}},columns:function(){var e=this,t=[];if(this.columnsValues.length>0){var n=this.columnsValues[0];t.push(this.columnElement(n.type,n.label));var r=this.columnsValues.slice(1);r.forEach(function(n){t.push(e.columnElement(n.type,n.label)),t.push(e.columnElement("string",null,null,"tooltip",{html:!0})),t.push(e.columnElement("string",null,null,"style"))})}return t},rows:function(){var e=this,t=[];return this.rowsValues.forEach(function(n){var r=[];n.forEach(function(t){r.push(e.cell(t.value)),t.options&&(r=r.concat(e.cellOptions(t.options)))}),t.push(e.row(r))}),t},cellOptions:function(e){var t=e.tooltip||null,n=e.color||null;return[this.cell(t),this.cell(n)]},build:function(){return{type:this.type,displayed:!0,data:{cols:this.columns(),rows:this.rows()},options:this.options,formatters:{}}}},{});var t=function(t,n,r,i){return new e(t,n,r,i).build()};return{buildChart:t}}]),services.factory("Guest",["BaseService",function(e){return new e("guests")}]),services.factory("Ingredient",["BaseService",function(e){return new e("ingredients")}]),services.factory("IngredientCategory",["BaseService","Ingredient",function(e,t){var n=new e("ingredientCategories");return n.isEmpty=function(e){var n=t.ingredients;for(var r in n)if(n[r].ingredientCategoryId===e)return!1;return!0},n}]),services.factory("Kitchen",["BaseService",function(e){return new e("kitchens")}]),services.factory("KitchenReceipt",["$filter","Table","Product","User","Guest","EscPosDocument","Kitchen","Util","Setting","Printer","Room","Sale",function(e,t,n,r,i,o,a,s,c,u,l,d){var f=o,p=function(o,u,p){var m=new Date,h=o.tableId&&t.tables[o.tableId],g=h&&l.rooms[h.roomId],v=a.kitchens,y={text:c.pluck("kitchen_receipt_header"),format:c.pluck("kitchen_receipt_header_format")},$={format:c.pluck("kitchen_receipt_body_format")},b={text:c.pluck("kitchen_receipt_footer"),format:c.pluck("kitchen_receipt_footer_format")};if(f.open(),(o.saleTypeId===d.TYPES.DELIVERY||o.saleTypeId===d.TYPES.TAKE_AWAY)&&(f.setFontSize(32),f.line(o.saleTypeId===d.TYPES.DELIVERY?"DELIVERY":"MOSTRADOR"),f.line(""),f.setFontSize(0)),y.format){var C=y.format.font;f.setFontType(C.t),f.setFontSize(C.w-1<<4|C.h-1)}if(y.text&&(f.line(s.stripAccents(y.text)),f.blankLine()),f.line("Venta: # "+o.id),f.line(e("date")(m,"dd/MM/yy HH:mm:ss")),h&&f.line(s.stripAccents("Mesa "+h.number+" - "+g.name)),o.userId){var w=r.waiters[o.userId];f.line("Camarero: "+w.name)}if(o.guestId){var S=i.guests[o.guestId];f.line("Cliente: "+S.name)}if(o.deliveryData&&o.deliveryData.guestName&&f.line("Cliente: "+o.deliveryData.guestName),f.line(v[p].name),o.comment&&(f.blankLine(),f.line(o.comment)),f.blankLine(),f.reset(),$.format){var E=$.format.font;f.setFontType(E.t),f.setFontSize(E.w-1<<4|E.h-1)}else f.setFontSize(32);if(f.blankLine(),u.forEach(function(e){var t=n.products[e.productId],r=e.count+" "+t.name;e.comment&&(r+=" ("+e.comment+")"),f.line(s.stripAccents(r)),f.blankLine()}),b.format){var I=b.format.font;f.setFontType(I.t),f.setFontSize(I.w-1<<4|I.h-1)}return b.text&&(f.line(s.stripAccents(b.text)),f.blankLine()),f.close(),f.getBuffer()},m=function(e,t,n){var r=u.find(function(t){return-1!==t.kitchens.indexOf(e)});return r.reduce(function(r,i){return r.then(function(){var r=p(t,n,e);return u.send(r,i)})},Promise.resolve())};return{print:m}}]),services.factory("Listener",["pusher","Table","PrinterJob","NotificationReceipt",function(e,t,n,r){return e.getChannelV1().then(function(e){e.bind("table_update",function(e){t.get(e.id)}),e.bind("notification_create",function(e){r.print(e).then(function(e){console.log(e)})["catch"](function(e){console.log(e)})}),e.bind("mobile-additions-create",function(e){t.get(e.tableId).$promise.then(function(t){var r=t.sale,i=r.additions.filter(function(t){return-1!==e.additionsIds.indexOf(t.id)});n.printKitchenReceipt(r,i)})})}),{}}]),services.factory("MobileTokenReceipt",["EscPosDocument","Util","Printer",function(e,t,n){var r=e,i=function(e){return r.open(),r.setFontSize(17),r.line("Aplicacion Android"),r.blankLine(),r.setFontSize(0),r.line("Para pedir con tu aplicacion Android desde tu mesa:"),r.blankLine(),r.line('1. Descarga "e-resto" de Play Store.'),r.blankLine(),r.line("2. Ingresa el codigo:"),r.blankLine(),r.setFontSize(17),r.line("      "+e),r.blankLine(),r.close(),r.getBuffer()},o=function(e){var t=n.find({printControlReceipt:!0});return t.reduce(function(t,r){return t.then(function(){var t=i(e);return n.send(t,r)})},Promise.resolve())};return{print:o}}]),services.factory("Notification",["$resource","APIUrl",function(e,t){var n=t.base+"/notifications/:id",r=e(n,null,{read:{method:"PUT",url:n+"/read"},view:{method:"PUT",url:n+"/view"}}),i=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t=r).get.apply(t,$traceurRuntime.spread([{id:e}],n))},o=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=r).query.apply(e,$traceurRuntime.spread(t))},a=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t=r).read.apply(t,$traceurRuntime.spread([{id:e.id},null],n))},s=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t=r).view.apply(t,$traceurRuntime.spread([{id:e.id},null],n))};return{get:i,query:o,read:a,view:s}}]),services.factory("NotificationArray",["BaseArray",function(e){return new e}]),services.factory("NotificationReceipt",["Printer","EscPosDocument","Util",function(e,t,n){var r=t,i=function(e){r.open(),r.blankLine(),r.line(e.human_datetime),r.setFontSize(17),r.blankLine();var t=e.table+": "+e.translated_type;return r.line(n.stripAccents(t)),r.blankLine(),r.close(),r.getBuffer()},o=function(t){var n=e.find({printControlReceipt:!0});return n.reduce(function(n,r){return n.then(function(){var n=i(t);return e.send(n,r)})},Promise.resolve())};return{print:o}}]),services.factory("Payment",["$locale","$resource","APIUrl","Util",function(e,t,n,r){var i=e.NUMBER_FORMATS.PATTERNS[1].maxFrac,o=n.base+"/payments:format/:id",a=["paid","paymentTypeId"],s=t(o,null,{update:{method:"PUT"},query:{isArray:!1},queryXLS:{params:{format:".xls"}}}),c={},u=function(){r.cleanup(c)},l=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=(t=s).get.apply(t,$traceurRuntime.spread([{id:e}],n));return i.$promise.then(function(t){c[e]&&(c[e]=t)}),i},d=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=s).query.apply(e,$traceurRuntime.spread(t)),i=function(e){angular.extend(c,e)};return r.$promise.then(i),angular.extend(c,r)},f=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=s).queryXLS.apply(e,$traceurRuntime.spread(t))},p=function(e,t){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var c=r.slice(t,a,e),u=(n=s).update.apply(n,$traceurRuntime.spread([{id:e.id},c],i));return u.$promise.then(function(){angular.extend(e,c)}),u},m=function(e){return e?e.reduce(function(e,t){return e+t.amount},0):0},h=function(e,t){var n=angular.copy(e);if(!(m(n)<t)){var r=0,o=n.findIndex(function(e){return(r+=e.amount)>=t}),a=r-t;if(a>0){var s=n[o],c=s.amount-a;s.amount=parseFloat(c.toFixed(i))}return n.slice(0,o+1)}},g=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.apply(null,$traceurRuntime.spread([e,{paid:!0}],t))};return{cleanup:u,complete:g,exactPayments:h,get:l,payments:c,query:d,queryXLS:f,total:m,update:p}}]),services.factory("PaymentType",["BaseService",function(e){return new e("paymentTypes")}]),services.factory("PaymentsSummary",["$resource","APIUrl","pusher",function(e,t,n){var r=t.base+"/payments_summary",i={};n.getChannel().then(function(e){e.bind("payments-summary-update",function(e){$timeout(function(){return angular.extend(i,e)})})});var o=e(r,null,{query:{isArray:!1}}),a=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=o).query.apply(e,$traceurRuntime.spread(t,[function(e){angular.extend(i,e)}])),i};return{paymentsSummary:i,query:a}}]),services.factory("PendingAddition",[function(){var e={},t=function(t){return(e[t]||[]).reduce(function(e,t){return e+t.price},0)},n=function(e,t,n){return{count:t,origin:"desktop",price:n.price*t,productId:n.id,saleId:e}},r=function(t){delete e[t]},i=function(t,r,i){e[t]||(e[t]=[]);var o=e[t].length;o&&e[t][o-1].productId===i.id?addition.count+=r:(addition=n(t,r,i),e[t].push(addition))},o=function(t){var n=t.saleId,r=e[n].indexOf(t);e[n].splice(r,1)};return{add:i,additions:e,discard:r,remove:o,total:t}}]),services.factory("PendingDiscount",["$timeout","Discount",function(e,t){var n={},r=function(t,r,i){e(function(){n[t]||(n[t]=[]);var e={saleId:t};r?e.percentage=r:i&&(e.amount=i),n[t].push(e)})},i=function(e){var r={discounts:n[e.id]};return t.saveBatch(r,e,function(){a(e.id)}).$promise},o=function(e){n[saleId].splice(n[saleId].indexOf(e),1)},a=function(e){delete n[e]};return{add:r,confirm:i,del:o,discard:a,discounts:n}}]),services.factory("Printer",["ChromeExtension","$filter",function(e,t){var n={},r=function(){return e.getConfig("printers").then(function(e){return Object.assign(n,e.printers)})},i=function(t,r){return Object.assign(n[t.id],r),e.setConfig({printers:n}).then(function(){return n[t.id]})},o=function(t){return t.id=s(),n[t.id]=t,e.setConfig({printers:n}).then(function(){return n[t.id]})},a=function(t){return delete n[t.id],e.setConfig({printers:n}).then(function(){return n[t.id]})},s=function(){var e,t=Object.keys(n);return t.length?(e=Math).max.apply(e,$traceurRuntime.spread(t))+1:1},c=function(e){var r=Object.keys(n).map(function(e){return n[e]});return t("filter")(r,e)},u=function(t,n){return e.sendToReceiptPrinter(t,n).then(function(){return!0})};return r(),{destroy:a,find:c,printers:n,query:r,save:o,send:u,update:i}}]),services.factory("PrinterJob",["$resource","pusher","APIUrl","ControlReceipt","KitchenReceipt","CashCountReceipt","MobileTokenReceipt","Util","Addition","Setting",function(e,t,n,r,i,o,a,s,c,u){var l=n.base+"/printer_jobs/:id",d=["canceled","comment","count","price","productId"],f=["createdAt","comment","deliveryData","guestId","id","people","saleTypeId","tableId","userId"],p={
DONE:4,CANCELED:5},m=e(l,null,{update:{method:"PUT"}});t.getChannel().then(function(e){e.bind("printer-job-create",function(e){h(e).then(function(t){t&&C(e,{printingStateId:p.DONE})})["catch"](function(t){console.log(t),C(e,{printingStateId:p.CANCELED,lastError:t.message})})})});var h=function(e){switch(e.type){case"control-receipt":return r.print(e.params.sale);case"kitchen-receipt":return i.print(e.params.kitchenId,e.params.sale,e.params.additions);case"mobile-token-receipt":return a.print(e.params.mobileToken);case"cash-count-receipt":return o.print(e.params.cashCount)}},g=function(e){var t={params:{mobileToken:e},type:"mobile-token-receipt"};return h(t).then(function(e){return e||b(t).$promise})},v=function(e){var t={params:{cashCount:e},type:"cash-count-receipt"};return h(t).then(function(e){return e||b(t).$promise})},y=function(e){var t=s.slice(e,f),n=e.additions.map(function(e){return s.slice(e,d)}),r={params:{sale:angular.extend(t,{additions:n,discounts:e.discounts,payments:e.payments})},type:"control-receipt"};return h(r).then(function(e){return e||b(r).$promise})},$=function(e,t){var n,r=s.slice(e,f),i=c.groupByKitchenId(t),o=Promise.resolve(),a=function(){var e=u.value,t=e[0],n=e[1];if(null===t)return 0;var i={params:{kitchenId:t,additions:n.map(function(e){return s.slice(e,d)}),sale:r},type:"kitchen-receipt"};o=o.then(function(){return h(i).then(function(e){return e||b(i).$promise})["catch"](function(e){console.log(e)})})};e:for(var u,l=i[$traceurRuntime.toProperty(Symbol.iterator)]();!(u=l.next()).done;)switch(n=a()){case 0:continue e}return o},b=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(t=m).save.apply(t,$traceurRuntime.spread([e],n))},C=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return(n=m).update.apply(n,$traceurRuntime.spread([{id:e.id},t],r))};return{printCashCountReceipt:v,printControlReceipt:y,printKitchenReceipt:$,printMobileTokenReceipt:g}}]),services.factory("Product",["BaseService","Ingredient",function(e,t){var n=new e("products");return n.proportionCost=function(e){return e.amount*t.ingredients[e.ingredientId].cost},n.productProportionCost=function(e){var t=n.products[e.bundledProductId];return e.amount*(n.cost(t)||0)},n.cost=function(e){return null!==e.cost?e.cost:e.proportions.length?e.proportions.reduce(function(e,t){return e+n.proportionCost(t)},0):e.productProportions.length?e.productProportions.reduce(function(e,t){return e+n.productProportionCost(t)},0):void 0},n}]),services.factory("ProductCategory",["BaseService","Product",function(e,t){var n=new e("productCategories"),r=function(e){return n.subcategories(e).map(function(e){return e.id})};return n.subcategories=function(e){var t=[];return angular.forEach(n.productCategories,function(n){n.parentId===e&&t.push(n)}),t},n.isEmpty=function(e){var n=t.products,i=r(e);for(var o in n){var a=n[o].productCategoryId;if(a===e||-1!==i.indexOf(a))return!1}return!0},n.isSubcategory=function(e){return null!==n.productCategories[e].parentId},n.categories=function(e){var t=n.productCategories[e],r=t.parentId;return r?n.categories(r).concat(t):[t]},n}]),services.factory("ProductsChart",["$filter","GoogleChart","Product","Util",function(e,t,n,r){var i={1:"#FF9439",2:"#1CC4BE",3:"#E45368",4:"#5D6168",5:"#72D193",6:"#6C9BFA",7:"#ABAB9F",8:"#FFD160",9:"#D45D7B",10:" #BDD969",11:" #8E78DB",12:" #FF6D51",13:" #3EBEDE",14:" #C778B7"},o={sales:"Ventas",income:"Ingresos",profit:"Margen"},a=function(e,t){if(!e)return[];for(var r=[],i=0;i<e.length;i++){var o=e[i];o.forEach(function(e){var i=e[0],o=n.products[i],a=e[1];h(t.hiddenProducts,i)||r.push([{value:o.name},{value:a,options:{color:m(t.colors,i),tooltip:d(o,a,t.stats.y)}}])})}return r},s=function(e,t,r,i){if(!e)return[];for(var o=[],a=p(t,r,i.stats.g),s=0;s<e.length;s++){var c=e[s],u=a[s],l=[{value:f(u,i.stats.g)}];c.forEach(function(e){var t=e[0],r=n.products[t],o=e[1];h(i.hiddenProducts,t)||l.push({value:o,options:{color:m(i.colors,t),tooltip:d(r,o,i.stats.y)}})}),o.push(l)}return o},c=function(e,t){if(!e)return[];for(var n=[],r=0;r<e.length;r++)n.push({type:"string",label:"Producto"}),n.push({type:"number",label:o[t.stats.y]});return n},u=function(e){var t=0;return e.forEach(function(e){var n=e.length;n>t&&(t=n)}),t},l=function(e){if(!e)return[];var t=[];if(e.length>0){var n=u(e);if(n>0){t.push({type:"string",label:"Fecha"});for(var r=0;n>r;r++)t.push({type:"number"})}}return t},d=function(e,t,n){var r="<strong>"+e.name+"</strong>",i=o[n]+": <strong>"+t+"</strong>";return r+"<br>"+i},f=function(t,n){var r;switch(n){case"daily":r=e("date")(t,"shortDate");break;case"weekly":r=e("date")(t,"shortDate");break;case"monthly":r=e("date")(t,"MMMM yyyy")}return r},p=function(e,t,n){var i;switch(n){case"daily":i=r.dateRangeInDays(e,t);break;case"weekly":i=r.dateRangeInWeeks(e,t);break;case"monthly":i=r.dateRangeInMonths(e,t)}return i},m=function(e,t){if(e.hasOwnProperty(t))return i[e[t]];var n=Object.keys(i).length,r=(Object.keys(e).length+1)%n;return e[t]=r,i[r]},h=function(e,t){return e.indexOf(t)>=0},g=function(e,t){var n=c(e,t),r=a(e,t);return $(n,r,"BarChart")},v=function(e,t){var n=c(e,t),r=a(e,t);return $(n,r,"ColumnChart")},y=function(e,t,n,r,i){var o=l(t),a=s(t,n,r,i);return $(o,a,e)},$=function(e,n,r){return e.length>0?t.buildChart(r,e,n,{legend:{position:"none"},tooltip:{isHtml:!0}}):void 0};return{buildBarChart:g,buildColumnChart:v,buildGroupedChart:y}}]),services.factory("ProductsStats",["$resource","APIUrl",function(e,t){var n=t.base+"/stats/products",r=e(n,null,{query:{interceptor:{response:function(e){return result=[],e.data.values.forEach(function(e){var t=Object.keys(e).sort(function(t,n){return e[n]-e[t]}),n=t.map(function(t){return[+t,e[t]]});result.push(n)}),e.data.values=result,e.resource.values=result,e}},isArray:!1}}),i=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=r).query.apply(e,$traceurRuntime.spread(t))};return{query:i}}]),services.factory("Provider",["BaseService",function(e){return new e("providers")}]),services.factory("TopBarNotificationArray",["BaseArray",function(e){return new e}]),services.factory("ReceiptType",["BaseService",function(e){return new e("receiptTypes")}]),services.factory("Role",["BaseService",function(e){return new e("roles")}]),services.factory("Room",["BaseService",function(e){return new e("rooms")}]),services.factory("Sale",["$resource","$timeout","$locale","Payment","Discount","Addition","pusher","APIUrl","Util",function(e,t,n,r,i,o,a,s,c){var u=s.base+"/sales:format/:id",l=["comment","deliveryData","guestId","people","tableId","userId"],d={PENDING:1,IN_COURSE:2,CLOSED:3,CANCELED:4,PAYMENT_PROCESS:5,DELIVERY_SENT:6},f={LOCAL:1,DELIVERY:3,TAKE_AWAY:4},p=n.NUMBER_FORMATS.PATTERNS[1].maxFrac,m={};a.getChannel().then(function(e){e.bind("sale-update",function(e){t(function(){m[e.id]&&(m[e.id]=e)})})});var h=e(u,null,{cancel:{method:"PUT",url:u+"/cancel"},query:{isArray:!1},queryXLS:{params:{format:".xls"}},update:{method:"PUT"},updateState:{method:"PUT",url:u+"/update_state"},issueElectronicInvoice:{method:"PUT",url:u+"/issue_electronic_invoice"},downloadElectronicInvoice:{method:"GET",url:u+"/download_electronic_invoice"}}),g=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=c.slice(t,l,e),a=(n=h).update.apply(n,$traceurRuntime.spread([{id:e.id},o],r));return a.$promise.then(function(){angular.extend(e,o)}),a},v=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o={saleStateId:t},a=(n=h).updateState.apply(n,$traceurRuntime.spread([{id:e.id},o],r));return a.$promise.then(function(){angular.extend(e,o)}),a},y=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=h).query.apply(e,$traceurRuntime.spread(t)),i=function(e){angular.extend(m,e)};return r.$promise.then(i),angular.extend(m,r)},$=function(){c.cleanup(m)},b=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=h).queryXLS.apply(e,$traceurRuntime.spread(t))},C=function(e,t,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=r.exactPayments(t,M(e)),c={payments:s,tip:n},u=(i=h).update.apply(i,$traceurRuntime.spread([{id:e.id},c],o));return u.$promise.then(function(){angular.extend(e,{saleStateId:d.CLOSED,payments:s})}),u},w=function(e,t){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=r.exactPayments(t,_(e)),s=function(){for(var t,n=0,r=[],i=e.additions[$traceurRuntime.toProperty(Symbol.iterator)]();!(t=i.next()).done;){var o=t.value;o.selected&&(r[n++]=o)}return r}(),c=s.map(function(e){return e.id}),u={payments:a,additionsIds:c},l=(n=h).update.apply(n,$traceurRuntime.spread([{id:e.id},u],i));return l.$promise.then(function(){var t;s.forEach(function(e){return e.paid=!0}),(t=e.payments).push.apply(t,$traceurRuntime.spread(a))}),l},S=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=(n=o).saveBatch.apply(n,$traceurRuntime.spread([{additions:t}],r));return a.$promise.then(function(t){var n;(n=e.additions).push.apply(n,$traceurRuntime.spread(t.additions))}),a},E=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=h).save.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){m[e.id]=e}),r},I=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=(n=h).issueElectronicInvoice.apply(n,$traceurRuntime.spread([{id:e.id},t],r));return o},P=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(t=h).downloadElectronicInvoice.apply(t,$traceurRuntime.spread([{id:e.id}],n))},T=function(e){return+e.toFixed(p)},x=function(e){return o.total(e.additions)},k=function(e){return o.totalRemaining(e.additions)},A=function(e){return o.totalSelected(e.additions)},D=function(e){return x(e)-H(e)},M=function(e){return T(k(e)-F(e))},_=function(e){return A(e)-U(e)},R=function(e,t){return T(r.total(t)-M(e))},O=function(e,t){return r.total(t)-_(e)},L=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=(t=h).cancel.apply(t,$traceurRuntime.spread([{id:e.id},null],n));return i.$promise.then(function(){angular.extend(e,{saleStateId:d.CANCELED})}),i},j=function(e,t){return t.percentage?T(x(e)*t.percentage/100):t.amount},B=function(e,t){return t.percentage?T(k(e)*t.percentage/100):t.amount},N=function(e,t){return t.percentage?T(A(e)*t.percentage/100):0},H=function(e){return e.discounts.reduce(function(t,n){return n.canceled?t:t+j(e,n)},0)},F=function(e){return e.discounts.reduce(function(t,n){return n.canceled?t:t+B(e,n)},0)},U=function(e){return e.discounts.reduce(function(t,n){return n.canceled?t:t+N(e,n)},0)},q=function(e,t){return T(t/100*D(e))};return{cashback:R,partialCloseCashback:O,cancel:L,cleanup:$,close:C,closePartial:w,discountAmount:j,discountAmountOnRemaining:B,downloadElectronicInvoice:P,issueElectronicInvoice:I,partialCloseDiscountAmount:N,query:y,queryXLS:b,sales:m,save:E,saveAdditions:S,STATES:d,subtotal:x,subtotalRemaining:k,partialCloseSubtotal:A,TYPES:f,total:D,totalRemaining:M,partialCloseTotal:_,totalDiscounts:H,update:g,updateState:v,tipValue:q}}]),services.factory("SaleReceipt",["$resource","APIUrl",function(e,t){var n=t.base+"/sale_receipts/:id",r=e(n),i=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=r).save.apply(e,$traceurRuntime.spread(t))};return{save:i}}]),services.factory("SaleState",["BaseService",function(e){return new e("saleStates")}]),services.factory("SaleType",[function(){var e={1:{id:1,label:"Local"},3:{id:3,label:"Delivery"},4:{id:4,label:"Mostrador"}};return{saleTypes:e}}]),services.factory("SalesChart",["$filter","GoogleChart","Sale","Util",function(e,t,n,r){var i=function(e,t){return chart={},chart.type="LineChart",chart.data={cols:[{label:"Fecha",type:"date"},{label:"Ingresos",type:"number"}],rows:o(e)},chart.options={vAxis:{title:"Ingresos"},hAxis:{format:"EE d MMM",gridlines:{count:-1,units:{years:{format:["yyyy"]},days:{format:["EE d MMM"]},months:{format:["MMMM yy"]}}}},legend:{position:"none"},pointSize:4,focusTarget:"category",height:400},a(e,chart,t),chart},o=function(e){if(!e)return[];var t=[];return e.forEach(function(e){row={};var n=new Date(e.date),r="Date("+n.getUTCFullYear()+","+n.getUTCMonth()+","+n.getUTCDate()+")";row.c=[{v:r},{v:e.value}],t.push(row)}),t},a=function(e,t,n){if(e){if(1===e.length){var r=new Date(e[0].date),i=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate());t.options.hAxis.ticks=[i]}e.length<=31&&"weekly"!==n.g&&(t.options.hAxis.gridlines.count=e.length),"monthly"===n.g&&(t.options.hAxis.format="MMMM yy")}};return{build:i}}]),services.factory("SalesStats",["$resource","APIUrl",function(e,t){var n=t.base+"/stats/sales",r=e(n,null,{query:{isArray:!1}}),i=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=r).query.apply(e,$traceurRuntime.spread(t))};return{query:i}}]),services.factory("SalesSummary",["$resource","APIUrl","pusher",function(e,t,n){var r=t.base+"/sales_summary",i={};n.getChannel().then(function(e){e.bind("sales-summary-update",function(e){$timeout(function(){return angular.extend(i,e)})})});var o=e(r,null,{query:{isArray:!1}}),a=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=o).query.apply(e,$traceurRuntime.spread(t,[function(e){angular.extend(i,e)}])),i};return{query:a}}]),services.factory("Session",["$rootScope","$window","jwtHelper","$state","pusher","locker",function(e,t,n,r,i,o){e.$on("unauthenticated",function(e){f()}),t.addEventListener("storage",function(e){"token"===e.key&&null===e.newValue&&f()});var a=function(){var e=l();return e&&!n.isTokenExpired(e)},s=function(e){var t=c();return t&&t[e]},c=function(){var e=l();return e&&n.decodeToken(e)},u=function(e){o.put("token",e)},l=function(){return o.get("token")},d=function(){o.forget("token")},f=function(){d(),r.is("login")||(t.location.href="/")},p=function(e){u(e),i.subscribe(),r.go("tables")};return{authenticated:a,delToken:d,getTokenVal:s,getToken:l,login:p,logout:f,setToken:u}}]),services.factory("Setting",["BaseService",function(e){var t=new e("settings");return t.fetch=function(e){var n=t.settings;return n.$promise.then(function(){for(var t in n)if(n[t].name===e)return n[t]})},t.pluck=function(e){var n=t.settings;for(var r in n)if(n[r].name===e)return n[r].value},t}]),services.factory("Shift",["BaseService",function(e){return new e("shifts")}]),services.factory("Stock",["$resource","APIUrl","Util",function(e,t,n){var r=t.base+"/stock:format/:resource/:id",i={1:{id:"1",label:"Disponible"},0:{id:"0",label:"En alerta"},"-1":{id:"-1",label:"Agotado"}},o=["ignoreAvailability","minStock","stock"],a={},s={},c=e(r,null,{query:{isArray:!1},queryXLS:{params:{format:".xls"}},update:{method:"PUT"}}),u=function(e,t){for(var r,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=n.slice(t,o,e),u=(r=c).update.apply(r,$traceurRuntime.spread([{id:e.id,resource:"products"},s],i));return u.$promise.then(function(){angular.extend(e,s)}),u},l=function(e,t){for(var r,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=n.slice(t,o,e),u=(r=c).update.apply(r,$traceurRuntime.spread([{id:e.id,resource:"ingredients"},s],i));return u.$promise.then(function(){angular.extend(e,s)}),u},d=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=c).queryXLS.apply(e,$traceurRuntime.spread(t))},f=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=(e=c).query.apply(e,$traceurRuntime.spread([{resource:"ingredients"}],t));return i.$promise.then(function(e){n.cleanup(a),angular.extend(a,e)}),angular.extend(a,i)},p=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=(e=c).query.apply(e,$traceurRuntime.spread([{resource:"products"}],t));return i.$promise.then(function(e){n.cleanup(s),angular.extend(s,e)}),angular.extend(s,i)},m=function(e){return null===e.availability?void 0:e.stock>0&&e.stock<e.minStock?"status-alert":"status-"+(e.availability>0?"positive":"negative")};return{availabilityStatus:m,TYPES:i,ingredients:a,products:s,queryXLS:d,queryIngredients:f,queryProducts:p,updateIngredient:l,updateProduct:u}}]),services.factory("StockMovement",["$resource","APIUrl","Expense","ExpenseArray","Ingredient","Product",function(e,t,n,r,i,o){var a=t.base+"/stock_movements:format/:resource/:id",s={"addition-create":{id:"addition-create",label:"Adición Creada"},"addition-cancel":{id:"addition-cancel",label:"Adición Cancelada"},"sale-cancel":{id:"sale-cancel",label:"Venta Cancelada"},"expense-item-create":{id:"expense-item-create",label:"Detalle de Gasto Creado"},"expense-item-cancel":{id:"expense-item-cancel",label:"Detalle de Gasto Cancelado"},"expense-cancel":{id:"expense-cancel",label:"Gasto Cancelado"},"manual-adjustment":{id:"manual-adjustment",label:"Ajuste Manual"}},c=i.ingredients,u=o.products,l=e(a,null,{query:{isArray:!0},queryXLS:{params:{format:".xls"}}}),d=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=l).queryXLS.apply(e,$traceurRuntime.spread(t))},f=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=l).query.apply(e,$traceurRuntime.spread(t))},p=function(e){return!e.sale&&!e.expense},m=function(e){return s[e.eventType].label},h=function(e){return e.sale||e.expense},g=function(e){return e.productId?u[e.productId]:c[e.ingredientId]};return{EVENTS:s,getEventLabel:m,getRelatedObject:h,getResource:g,isManual:p,query:f,queryXLS:d}}]),services.factory("StockMovementArray",["BaseArray",function(e){return new e}]),services.factory("StockableItem",["$resource","APIUrl","Util",function(e,t,n){var r=t.base+"/stockable_items",i=[],o=e(r),a=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=o).query.apply(e,$traceurRuntime.spread(t))};return i=a(),{query:a,stockableItems:i}}]),services.factory("Table",["BaseService","Sale",function(e,t){var n,r,i=new e("tables");return i.LARGE="l",i.SMALL="s",i.ROUND="1",i.SQUARE="0",i.SHAPES=(n={},Object.defineProperty(n,i.SQUARE,{value:{id:i.SQUARE,label:"Cuadrada"},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(n,i.ROUND,{value:{id:i.ROUND,label:"Redonda"},configurable:!0,enumerable:!0,writable:!0}),n),i.SIZES=(r={},Object.defineProperty(r,i.SMALL,{value:{id:i.SMALL,label:"Chica"},configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(r,i.LARGE,{value:{id:i.LARGE,label:"Grande"},configurable:!0,enumerable:!0,writable:!0}),r),i.closeSale=function(e,n,r){for(var o,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];var c=(o=t).close.apply(o,$traceurRuntime.spread([e,n,r],a));return c.$promise.then(function(){i.tables[e.tableId].sale=null,i.sync()}),c},i.closeSalePartial=function(e,n){for(var r,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=(r=t).closePartial.apply(r,$traceurRuntime.spread([e,n],o));return s.$promise.then(function(){i.sync()}),s},i.saveSaleAdditions=function(e,n){for(var r,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=(r=t).saveAdditions.apply(r,$traceurRuntime.spread([e,n],o));return s.$promise.then(function(){i.sync()}),s},i.updateSale=function(e,n){for(var r,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=e.tableId,c=n.tableId,u=(r=t).update.apply(r,$traceurRuntime.spread([e,n],o));return u.$promise.then(function(){s!==c&&(i.tables[s].sale=null,i.tables[c].sale=e),i.sync()}),u},i.updateSaleState=function(e,n){for(var r,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=(r=t).updateState.apply(r,$traceurRuntime.spread([e,n],o));return s.$promise.then(function(){i.sync()}),s},i.saveSale=function(e){for(var n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var a=(n=t).save.apply(n,$traceurRuntime.spread([e],r));return a.$promise.then(function(e){i.tables[e.tableId].sale=e,i.sync()}),a},i}]),services.factory("Tax",["BaseService",function(e){return new e("taxes")}]),services.factory("Tips",["$resource","APIUrl","Util",function(e,t,n){var r=t.base+"/tips:format/:id",i=e(r,null,{query:{isArray:!1},queryXLS:{params:{format:".xls"}}}),o={},a=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=i).query.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){angular.extend(o,e)}),angular.extend(o,r)},s=function(){n.cleanup(o)},c=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=i).queryXLS.apply(e,$traceurRuntime.spread(t))};return{cleanup:s,tips:o,query:a,queryXLS:c}}]),services.factory("TipsSummary",["$resource","APIUrl",function(e,t){var n=t.base+"/tips_summary",r=e(n,null,{query:{isArray:!1}}),i={},o=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=(e=r).query.apply(e,$traceurRuntime.spread(t));return o.$promise.then(function(e){angular.extend(i,e)}),angular.extend(i,o)};return{tipsSummary:i,query:o}}]),services.factory("Unit",["BaseService",function(e){return new e("units")}]),services.factory("User",["$resource","$timeout","$filter","pusher","APIUrl","Util","Role",function(e,t,n,r,i,o,a){var s=i.base+"/users/:id",c=["shortLogin","roleId","email","name","phone","admin","active"];r.getChannel().then(function(e){e.bind("user-update",function(e){t(function(){v[e.id]=e,m()})})});var u=e(s,null,{query:{isArray:!1},update:{method:"PUT"}}),l=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=u).query.apply(e,$traceurRuntime.spread(t,[function(e){m()}]))},d=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=o.slice(t,c,e),s=(n=u).update.apply(n,$traceurRuntime.spread([{id:e.id},a],r));return s.$promise.then(function(){angular.extend(e,a),m()}),s},f=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(r=u).update.apply(r,$traceurRuntime.spread([{id:e.id},{password:t,passwordConfirmation:n}],i))},p=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(e=u).save.apply(e,$traceurRuntime.spread(t));return r.$promise.then(function(e){v[e.id]=e,m()}),r},m=function(){o.cleanup(y);for(id in v)v[id].active&&g(v[id])&&(y[id]=v[id])},h=function(e){var t=[];return angular.forEach(v,function(n){n.roleId==e.id&&t.push(n)}),t},g=function(e){return a.roles[e.roleId].isWaiter},v=l({a:-1}),y={};return{query:l,update:d,changePassword:f,save:p,usersWithRole:h,isWaiter:g,users:v,waiters:y}}]),services.factory("Util",[function(){var e=864e5,t=function(e,t){return Object.keys(e).reduce(function(n,r){return angular.equals(e[r],t[r])||(n[r]=e[r]),n},{})},n=function(e,t,n){return t.reduce(function(t,r){return void 0!==e[r]&&(n&&angular.equals(n[r],e[r])||(t[r]=e[r])),t},{})},r=function(e){for(prop in e)delete e[prop];return e},i=function(e,t){angular.forEach(t,function(t,n){angular.forEach(t,function(t){"base"==n?(e.baseErrors=e.baseErrors||{},e.baseErrors[t]=!0):e.form[n].$error[t]=!0})})},o=function(e){var t=/[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ]/g,n="aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY";return e.replace(t,function(e){return n.substr(t.source.indexOf(e)-1,1)})},a=function(t,n){var r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),i=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.round((i-r)/e)},s=function(e){return e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})},c=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},u=function(e,t){return e.getFullYear()<t.getFullYear()||e.getMonth()<t.getMonth()||e.getDate()<t.getDate()},l=function(e,t){return e.getFullYear()<t.getFullYear()||e.getMonth()<t.getMonth()},d=function(e,t){if(e>t)throw new Error("Start date must be previous to end date");for(var n=new Date(e),r=[n];u(n,t);)n=new Date(n),n.setDate(n.getDate()+1),r.push(n);return r},f=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},p=function(e,t){if(e>t)throw new Error("Start date must be previous to end date");for(var n=f(e),r=[n];l(n,t);)n=new Date(n.getFullYear(),n.getMonth()+1,1),r.push(n);return r},m=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay()+1)},h=function(e,t){return u(m(e),m(t))},g=function(e,t){if(e>t)throw new Error("Start date must be previous to end date");for(var n=m(e),r=[n];h(n,t);)n=new Date(n.getFullYear(),n.getMonth(),n.getDate()+7),r.push(n);return r};return{changes:t,cleanup:r,dasherize:c,dateRangeInDays:d,dateRangeInMonths:p,dateRangeInWeeks:g,diffInDays:a,fillErrors:i,slice:n,stripAccents:o,underscorize:s}}]),controllers.controller("KitchensCtrl",["Kitchen",function(e){this.kitchens=e.kitchens}]),controllers.controller("KitchensShowCtrl",["$stateParams","Kitchen",function(e,t){this.currentKitchen=function(){return t.kitchens[+e.kitchenId]}}]),controllers.controller("KitchensEditCtrl",["$stateParams","Kitchen",function(e,t){this.currentKitchen=function(){return t.kitchens[+e.kitchenId]}}]),controllers.controller("PaymentTypesShowCtrl",["$stateParams","PaymentType",function(e,t){this.getPaymentType=function(){return t.paymentTypes[+e.paymentTypeId]}}]),controllers.controller("PaymentTypesEditCtrl",["$stateParams","PaymentType",function(e,t){this.getPaymentType=function(){return t.paymentTypes[+e.paymentTypeId]}}]),controllers.controller("PrintersShowCtrl",["$stateParams","Printer",function(e,t){this.currentPrinter=function(){return t.printers[+e.printerId]}}]),controllers.controller("PrintersEditCtrl",["$stateParams","Printer",function(e,t){this.currentPrinter=function(){return t.printers[+e.printerId]}}]),controllers.controller("ProvidersCtrl",["Provider",function(e){this.providers=e.query()}]),controllers.controller("ProvidersShowCtrl",["$stateParams","Provider",function(e,t){this.currentProvider=function(){return t.providers[+e.providerId]}}]),controllers.controller("ProvidersEditCtrl",["$stateParams","Provider",function(e,t){this.currentProvider=function(){return t.providers[+e.providerId]}}]),controllers.controller("ReceiptTypesShowCtrl",["$stateParams","ReceiptType",function(e,t){this.getReceiptType=function(){return t.receiptTypes[+e.receiptTypeId]}}]),controllers.controller("ReceiptTypesEditCtrl",["$stateParams","ReceiptType",function(e,t){this.getReceiptType=function(){return t.receiptTypes[+e.receiptTypeId]}}]),controllers.controller("RolesCtrl",["Role",function(e){this.roles=e.query()}]),controllers.controller("RolesShowCtrl",["Role","$stateParams",function(e,t){this.currentRole=function(){return e.roles[+t.roleId]}}]),controllers.controller("RolesEditCtrl",["Role","$stateParams",function(e,t){this.currentRole=function(){return e.roles[+t.roleId]}}]),controllers.controller("AdminRoomsCtrl",["rooms",function(e){this.rooms=e}]),controllers.controller("AdminRoomsNewCtrl",["rooms",function(e){this.rooms=e}]),controllers.controller("AdminRoomsShowCtrl",["$stateParams","rooms",function(e,t){this.rooms=t,this.currentRoom=t[e.roomId]}]),controllers.controller("AdminRoomsEditCtrl",["$stateParams","rooms",function(e,t){this.rooms=t,this.currentRoom=t[e.roomId]}]),controllers.controller("AdminRoomsShowTablesCtrl",["$stateParams","rooms",function(e,t){this.rooms=t,this.currentRoom=t[e.roomId]}]),controllers.controller("AdminRoomsShowTablesShowCtrl",["Table","$stateParams","rooms",function(e,t,n){this.currentTable=function(){return e.tables[t.tableId]}}]),controllers.controller("AdminRoomsShowTablesEditCtrl",["Table","$stateParams","rooms",function(e,t,n){this.currentTable=function(){return e.tables[t.tableId]}}]),controllers.controller("ShiftsCtrl",["Shift",function(e){this.shifts=e.shifts}]),controllers.controller("ShiftsShowCtrl",["$stateParams","Shift",function(e,t){this.currentShift=function(){return t.shifts[+e.shiftId]}}]),controllers.controller("ShiftsEditCtrl",["$stateParams","Shift",function(e,t){this.currentShift=function(){return t.shifts[+e.shiftId]}}]),controllers.controller("TaxesShowCtrl",["Tax","$stateParams",function(e,t){this.currentTax=function(){return e.taxes[+t.taxId]}}]),controllers.controller("TaxesEditCtrl",["Tax","$stateParams",function(e,t){this.currentTax=function(){return e.taxes[+t.taxId]}}]),controllers.controller("UsersCtrl",["User",function(e){this.users=e.users}]),controllers.controller("UsersShowCtrl",["$stateParams","User",function(e,t){this.currentUser=function(){return t.users[e.userId]}}]),controllers.controller("UsersEditCtrl",["User","$stateParams",function(e,t){this.currentUser=function(){return e.users[t.userId]}}]),controllers.controller("UsersChangePasswordCtrl",["User","$stateParams",function(e,t){this.currentUser=function(){return e.users[t.userId]}}]),app.config(["$stateProvider",function(e){e.state("admin.kitchens",{url:"/kitchens",controller:"KitchensCtrl as KitchensCtrl",template:document.getElementById("ert-admin-kitchens-state-tpl").innerHTML}).state("admin.kitchens.show",{url:"/{kitchenId:int}",controller:"KitchensShowCtrl as KitchensShowCtrl",template:document.getElementById("ert-admin-kitchens-show-state-tpl").innerHTML}).state("admin.kitchens.show.edit",{url:"/edit",controller:"KitchensEditCtrl as KitchensEditCtrl",template:document.getElementById("ert-admin-kitchens-edit-state-tpl").innerHTML}).state("admin.kitchens.new",{url:"/new",template:document.getElementById("ert-admin-kitchens-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.locale",{url:"/locale",template:document.getElementById("ert-admin-locale-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.paymentTypes",{url:"/payment_types",template:document.getElementById("ert-admin-payment-types-state-tpl").innerHTML}).state("admin.paymentTypes.show",{url:"/{paymentTypeId:int}",controller:"PaymentTypesShowCtrl as PaymentTypesShowCtrl",template:document.getElementById("ert-admin-payment-types-show-state-tpl").innerHTML}).state("admin.paymentTypes.show.edit",{url:"/edit",controller:"PaymentTypesEditCtrl as PaymentTypesEditCtrl",template:document.getElementById("ert-admin-payment-types-edit-state-tpl").innerHTML}).state("admin.paymentTypes.new",{url:"/new",template:document.getElementById("ert-admin-payment-types-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.printOptions",{url:"/print_options",template:document.getElementById("ert-admin-print-options-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.printers",{url:"/printers",template:document.getElementById("ert-admin-printers-state-tpl").innerHTML}).state("admin.printers.show",{url:"/{printerId:int}",controller:"PrintersShowCtrl as PrintersShowCtrl",template:document.getElementById("ert-admin-printers-show-state-tpl").innerHTML}).state("admin.printers.show.edit",{url:"/edit",controller:"PrintersEditCtrl as PrintersEditCtrl",template:document.getElementById("ert-admin-printers-edit-state-tpl").innerHTML}).state("admin.printers.new",{url:"/new",template:document.getElementById("ert-admin-printers-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.providers",{url:"/providers",controller:"ProvidersCtrl as ProvidersCtrl",template:document.getElementById("ert-admin-providers-state-tpl").innerHTML}).state("admin.providers.show",{url:"/{providerId:int}",controller:"ProvidersShowCtrl as ProvidersShowCtrl",template:document.getElementById("ert-admin-providers-show-state-tpl").innerHTML}).state("admin.providers.edit",{url:"/{providerId:int}/edit",controller:"ProvidersEditCtrl as ProvidersEditCtrl",template:document.getElementById("ert-admin-providers-edit-state-tpl").innerHTML}).state("admin.providers.new",{url:"/new",template:document.getElementById("ert-admin-providers-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.fiscalPrinters",{url:"/fiscal_printers",template:document.getElementById("ert-admin-fiscal-printers-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.receiptTypes",{url:"/receipt_types",template:document.getElementById("ert-admin-receipt-types-state-tpl").innerHTML}).state("admin.receiptTypes.show",{
url:"/{receiptTypeId:int}",controller:"ReceiptTypesShowCtrl as ReceiptTypesShowCtrl",template:document.getElementById("ert-admin-receipt-types-show-state-tpl").innerHTML}).state("admin.receiptTypes.show.edit",{url:"/edit",controller:"ReceiptTypesEditCtrl as ReceiptTypesEditCtrl",template:document.getElementById("ert-admin-receipt-types-edit-state-tpl").innerHTML}).state("admin.receiptTypes.new",{url:"/new",template:document.getElementById("ert-admin-receipt-types-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.roles",{url:"/roles",controller:"RolesCtrl as RolesCtrl",template:document.getElementById("ert-admin-roles-state-tpl").innerHTML}).state("admin.roles.show",{url:"/{roleId:int}",controller:"RolesShowCtrl as RolesShowCtrl",template:document.getElementById("ert-admin-roles-show-state-tpl").innerHTML}).state("admin.roles.edit",{url:"/{roleId:int}/edit",controller:"RolesEditCtrl as RolesEditCtrl",template:document.getElementById("ert-admin-roles-edit-state-tpl").innerHTML}).state("admin.roles.new",{url:"/new",template:document.getElementById("ert-admin-roles-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.rooms",{url:"/rooms",controller:"AdminRoomsCtrl as AdminRoomsCtrl",template:document.getElementById("ert-admin-rooms-state-tpl").innerHTML,resolve:{rooms:["Room",function(e){return e.rooms.$promise.then(function(){return angular.copy(e.rooms)})}],tables:["Table",function(e){return e.tables.$promise}]}}).state("admin.rooms.show",{url:"/{roomId:int}",views:{"":{controller:"AdminRoomsShowCtrl as AdminRoomsShowCtrl",template:document.getElementById("ert-admin-rooms-show-state-tpl").innerHTML},tables:{controller:"AdminRoomsShowTablesCtrl as AdminRoomsShowTablesCtrl",template:document.getElementById("ert-admin-rooms-show-tables-state-tpl").innerHTML}}}).state("admin.rooms.show.edit",{url:"/edit",controller:"AdminRoomsEditCtrl as AdminRoomsEditCtrl",template:document.getElementById("ert-admin-rooms-edit-state-tpl").innerHTML}).state("admin.rooms.new",{url:"/new",controller:"AdminRoomsNewCtrl as AdminRoomsNewCtrl",template:document.getElementById("ert-admin-rooms-new-state-tpl").innerHTML}).state("admin.rooms.show.tables",{url:"/tables","abstract":!0}).state("admin.rooms.show.tables.show",{url:"/{tableId:int}",views:{"aux-child":{controller:"AdminRoomsShowTablesShowCtrl as AdminRoomsShowTablesShowCtrl",template:document.getElementById("ert-admin-rooms-show-tables-show-state-tpl").innerHTML}}}).state("admin.rooms.show.tables.edit",{url:"/{tableId:int}/edit",views:{"aux-child":{controller:"AdminRoomsShowTablesEditCtrl as AdminRoomsShowTablesEditCtrl",template:document.getElementById("ert-admin-rooms-show-tables-edit-state-tpl").innerHTML}}})}]),app.config(["$stateProvider",function(e){e.state("admin.settings",{url:"/settings",template:document.getElementById("ert-admin-settings-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.shifts",{url:"/shifts",controller:"ShiftsCtrl as ShiftsCtrl",template:document.getElementById("ert-admin-shifts-state-tpl").innerHTML}).state("admin.shifts.show",{url:"/{shiftId:int}",controller:"ShiftsShowCtrl as ShiftsShowCtrl",template:document.getElementById("ert-admin-shifts-show-state-tpl").innerHTML}).state("admin.shifts.show.edit",{url:"/edit",controller:"ShiftsEditCtrl as ShiftsEditCtrl",template:document.getElementById("ert-admin-shifts-edit-state-tpl").innerHTML}).state("admin.shifts.new",{url:"/new",template:document.getElementById("ert-admin-shifts-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.taxes",{url:"/taxes",template:document.getElementById("ert-admin-taxes-state-tpl").innerHTML}).state("admin.taxes.show",{url:"/{taxId:int}",controller:"TaxesShowCtrl as TaxesShowCtrl",template:document.getElementById("ert-admin-taxes-show-state-tpl").innerHTML}).state("admin.taxes.show.edit",{url:"/edit",controller:"TaxesEditCtrl as TaxesEditCtrl",template:document.getElementById("ert-admin-taxes-edit-state-tpl").innerHTML}).state("admin.taxes.new",{url:"/new",template:document.getElementById("ert-admin-taxes-new-state-tpl").innerHTML})}]),app.config(["$stateProvider",function(e){e.state("admin.users",{url:"/users",controller:"UsersCtrl as UsersCtrl",template:document.getElementById("ert-admin-users-state-tpl").innerHTML}).state("admin.users.new",{url:"/new",template:document.getElementById("ert-admin-users-new-state-tpl").innerHTML}).state("admin.users.show",{url:"/{userId:int}",controller:"UsersShowCtrl as UsersShowCtrl",template:document.getElementById("ert-admin-users-show-state-tpl").innerHTML}).state("admin.users.edit",{url:"/{userId:int}/edit",controller:"UsersEditCtrl as UsersEditCtrl",template:document.getElementById("ert-admin-users-edit-state-tpl").innerHTML}).state("admin.users.edit.changePassword",{url:"/change_password",views:{"modal@admin.users":{controller:"UsersChangePasswordCtrl as UsersChangePasswordCtrl",template:document.getElementById("ert-admin-users-change-password-state-tpl").innerHTML}}})}]),directives.directive("ertAccountInfo",["Account","erestoDomains",function(e,t){function n(n,r,i){n.account=e.account,n.domain=t[n.account.plan.countryCode]}return{restrict:"E",template:function(){return document.getElementById("ert-account-info-tpl").innerHTML},link:n,scope:{}}}]),directives.directive("ertAccountPayments",["Account","Util","erestoDomains",function(e,t,n){function r(r,i,o){var a=10;r.account=e.account,r.domain=n[r.account.plan.countryCode],r.showPayDialog=!1,r.showErrorDialog=!1,r.selectedPaymentOption={method:"one_payment",period:"monthly"},r.acceptDisabled=function(){return e.blockingAlert()||e.paymentVerification()},r.onAccept=function(){r.submitting=!0,e.toPaymentVerification(r.account,function(){r.submitting=!1})},r.daysTillBlockingAlert=function(){var e=new Date(Date.parse(r.account.statusUpdatedAt)),n=t.diffInDays(e,new Date),i=a-n;return i},r.pendingPaymentWarning=function(){return e.pendingPaymentWarning()},r.pendingPaymentAlert=function(){return e.pendingPaymentAlert()},r.blockingAlert=function(){return e.blockingAlert()},r.paymentVerification=function(){return e.paymentVerification()},r.isActive=function(){return e.isActive()},r.canReportPayment=function(){return!e.blockingAlert()&&!e.isBlocked()},r.isMethodAvailable=function(e){switch(e){case"one_payment":return r.canPayWith("paypal")||r.canPayWith("mercado_pago");case"subscription":return r.canPayWith("paypal")||r.canPayWith("mercado_pago");case"bank_transfer":return r.canPayWith("bank_transfer")}},r.canPayWith=function(e){var t=!1;return angular.forEach(r.account.plan.paymentMethods,function(n){n.name===e&&(t=!0)}),t},r.openDialog=function(){r.showPayDialog=!0,r.confirmDialogFocus={onAccept:!0}},r.openErrorDialog=function(){r.showErrorDialog=!0},r.closeDialog=function(){r.showPayDialog=!1,e.get()},r.closeErrorDialog=function(){r.showErrorDialog=!1}}return{restrict:"E",template:function(){return document.getElementById("ert-account-payments-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertAccountReset",["Account","Table",function(e,t){function n(n,r,i){n.MAX_SALES_COUNT=100,n.confirmDialog=!1,n.errors={},n.onCancelConfirmDialog=function(){n.confirmDialog=!1},n.onAcceptConfirmDialog=function(){return e.destroySales(function(e){n.successDialog=!0,n.confirmDialog=!1,t.query()},function(e){e.data.base.forEach(function(e){return n.errors[e]=!0}),n.errorDialog=!0,n.confirmDialog=!1}).$promise},n.destroySales=function(){n.confirmDialog=!0}}return{restrict:"E",template:function(){return document.getElementById("ert-account-reset-tpl").innerHTML},link:n,scope:{}}}]),directives.directive("ertAccountSidebar",[function(){return{template:function(){return document.getElementById("ert-account-sidebar-tpl").innerHTML}}}]),directives.directive("ertMpButton",["Checkout",function(e){function t(t,n,r){var i=function(e){return"approved"===e.collection_status||"in_process"===e.collection_status};t.checkoutMercadopago=function(){return e.payMercadopago().then(function(e){e.link&&$MPC.openCheckout({url:e.link,mode:"modal",onreturn:function(e){i(e)&&t.success()}})},function(){t.error()})}}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-mp-button-tpl").innerHTML},scope:{plan:"=",success:"&",error:"&"}}}]),directives.directive("ertMpSubscribeButton",["$window","Checkout","config",function(e,t,n){function r(e,r,i){e.subscribeMercadopago=function(){var r=n.mercadopago.backUrl;return t.subscribeMercadopago(r).then(function(e){e.link&&$MPC.openCheckout({url:e.link,mode:"modal"})},function(){e.error()})}}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-mp-subscribe-button-tpl").innerHTML},scope:{plan:"=",error:"&"}}}]),directives.directive("ertPaypalButton",["Checkout","config",function(e,t){function n(n,r,i){paypal.Button.render({env:t.paypal.env,locale:"es_ES",style:{color:"gold",shape:"rect",size:"small"},payment:function(r,i){var o=t.paypal.backUrl;e.payPaypal(o).then(function(e){r(e.link)},function(){i("Could not get payment"),n.error()})},onAuthorize:function(t){n.success(),e.executePaypal(t.payerID,t.paymentID)},onCancel:function(){}},"#paypal-pay-button")}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-paypal-button-tpl").innerHTML},scope:{plan:"=",success:"&",error:"&"}}}]),directives.directive("ertPaypalSubscribeButton",["Checkout","config",function(e,t){function n(n,r,i){paypal.Button.render({env:t.paypal.env,locale:"es_ES",style:{color:"blue",shape:"rect",size:"small"},payment:function(r,i){var o=t.paypal.backUrl;e.subscribePaypal(o).then(function(e){r(e.link)},function(){i("Could not get payment"),n.error()})},onAuthorize:function(t){n.success(),e.agreePaypal(t.paymentToken)},onCancel:function(){}},"#paypal-subscribe-button")}return{restrict:"E",template:function(){return document.getElementById("ert-paypal-subscribe-button-tpl").innerHTML},link:n,scope:{plan:"=",success:"&",error:"&"}}}]),directives.directive("ertCashCountsEdit",["$state","CashCount","Setting","EscPosDocument","ChromeExtension","User","CashDrawer","PaymentType",function(e,t,n,r,i,o,a,s){function c(r,i,c){r.users=o.users,r.paymentTypes=s.paymentTypes,r.$watch("masterCashCount",function(e){r.cashCount=angular.copy(e)}),r.focus={onRealLeftover:!0},r.submitting=!1,r.reload=function(){return r.focus.onRealLeftover=!0,t.get(r.cashCount.id)},r.expectedAmount=function(){return t.balance(r.cashCount)},r.acceptDisabled=function(){return r.form.$invalid},r.cashDifference=function(){return r.cashCount?r.cashCount.realLeftover-r.expectedAmount():void 0},r.cancelCashCount=function(){return t.cancel(r.masterCashCount,function(){e.go("cashCounts.show",{cashCountId:r.masterCashCount.id})})},r.onAccept=function(){var n=t.update(r.masterCashCount,r.cashCount).$promise;return n.then(function(){return t.get(r.cashCount.id).$promise.then(function(){e.go("cashCounts.show",{cashCountId:r.cashCount.id})})})},n.fetch("show_drawer_icon_on_close_table_dialog").then(function(e){r.openDrawerAvailable=e.value}),r.openDrawer=function(){return a.open()}}return{restrict:"E",template:function(){return document.getElementById("ert-cash-counts-edit-tpl").innerHTML},link:c,scope:{masterCashCount:"=cashCount"}}}]),directives.directive("ertCashCountsHeader",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-cash-counts-header-tpl").innerHTML},link:e,scope:{}}}]),directives.directive("ertCashCountsNew",["$state","CashCount","Util",function(e,t,n){function r(r,i,o){var a=new Date;a.setMilliseconds(null),r.focus={onInit:!0},r.cashCount={openedAt:a},r.submitting=!1,r.acceptDisabled=function(){return r.form.$invalid||r.submitting},r.onAccept=function(){r.submitting=!0,t.save(r.cashCount,function(t){e.go("cashCounts.show",{cashCountId:t.id})},function(e){r.submitting=!1,n.fillErrors(r,e.data)})},r.onCancel=function(){e.go("cashCounts")}}return{restrict:"E",template:function(){return document.getElementById("ert-cash-counts-new-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertCashCountsShow",["$state","CashCount","CashCountReceipt","PrinterJob","User","PaymentType",function(e,t,n,r,i,o){function a(e,n,a){e.users=i.users,e.paymentTypes=o.paymentTypes,e.printCashCount=function(e){return r.printCashCountReceipt(e)},e.cancelCashCount=function(e){t.cancel(e)},e.expectedAmount=function(){return t.balance(e.cashCount)},e.cashDifference=function(){return e.cashCount?e.cashCount.realLeftover-e.expectedAmount():void 0}}return{restrict:"E",link:a,template:function(){return document.getElementById("ert-cash-counts-show-tpl").innerHTML},scope:{cashCount:"="}}}]),directives.directive("ertCashCountsTable",["CashCount",function(e){function t(t,n,r){t.isCashCountCanceled=function(e){return e.canceled},t.expectedAmount=function(t){return e.balance(t)},t.cashDifference=function(e){return e.realLeftover-t.expectedAmount(e)}}return{restrict:"E",template:function(){return document.getElementById("ert-cash-counts-table-tpl").innerHTML},link:t,scope:{cashCounts:"="}}}]),directives.directive("ertCashMovements",[function(){function e(e,t,n){e.$on("cash-movements-data-update",function(t,n){e.ctrl.loadData()})}return{restrict:"E",template:function(){return document.getElementById("ert-cash-movements-tpl").innerHTML},link:e,scope:{cashMovements:"=",ctrl:"="}}}]),directives.directive("ertCashMovementsFilter",["CashMovement",function(e){function t(t,n,r){t.$watch("model",function(e,n){e!==n&&t.onChange()},!0),t.cashMovementTypes=e.TYPES}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-cash-movements-filter-tpl").innerHTML},scope:{model:"=ngModel",onChange:"&"}}}]),directives.directive("ertCashMovementsHeader",["CashMovement","Util",function(e,t){var n=5e3,r=function(r,i,o){r.max_rows_limit=n,r.alertDialog=!1;var a=function(){return angular.extend({},r.dateFilter,r.optionsFilter)};r.downloadCashMovements=function(){r.submitting=!0;var n=a(),i=e.queryXLS(n).$promise;return i.then(function(){r.submitting=!1},function(e){t.fillErrors(r,e.data),r.alertDialog=!0,r.captionAlertDialog="Exportar Movimientos de Caja",r.onAcceptAlertDialog=function(){r.alertDialog=!1,r.baseErrors={}},r.submitting=!1}),i}};return{restrict:"E",template:function(){return document.getElementById("ert-cash-movements-header-tpl").innerHTML},link:r,scope:{optionsFilter:"=",dateFilter:"="}}}]),directives.directive("ertCashMovementsNew",["$state","CashMovement",function(e,t){function n(n,r,i){n.focus={onAmount:!0},n.submitting=!1,n.cashMovementTypes=t.TYPES,n.acceptDisabled=function(){return n.form.$invalid||n.submitting},n.onAccept=function(){n.submitting=!0,t.save(n.cashMovement,function(t){n.submitting=!1,n.$emit("cash-movements-data-update"),e.go("cashMovements.show",{cashMovementId:t.id})})},n.onCancel=function(){e.go("cashMovements")}}return{restrict:"E",template:function(){return document.getElementById("ert-cash-movements-new-tpl").innerHTML},link:n,scope:{}}}]),directives.directive("ertCashMovementsShow",["$window","$state","CashMovement",function(e,t,n){function r(e,r,i){e.cashMovementTypes=n.TYPES,e.confirmDialog=!1,e.confirmCancelCashMovement=function(r){n.cancel(e.cashMovement,function(){e.confirmDialog=!1,e.$emit("cash-movements-data-update"),t.go("cashMovements.show",{id:r.id})})},e.cancelCashMovement=function(t){e.confirmDialog=!0,e.confirmDialogFocus={onAccept:!0},e.onAcceptConfirmDialog=function(){return e.confirmCancelCashMovement(t)}},e.onCancelConfirmDialog=function(){e.confirmDialog=!1}}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-cash-movements-show-tpl").innerHTML},scope:{cashMovement:"="}}}]),directives.directive("ertCashMovementsSummary",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-cash-movements-summary-tpl").innerHTML},scope:{cashMovementsSummary:"=",dateFilter:"="}}}]),directives.directive("ertCashMovementsTable",["CashMovement",function(e){function t(t,n,r){t.cashMovementTypes=e.TYPES,t.isCashMovementCanceled=function(e){return e.canceled}}return{restrict:"E",template:function(){return document.getElementById("ert-cash-movements-table-tpl").innerHTML},link:t,scope:{cashMovements:"="}}}]),directives.directive("ertAdditionsOptionsConfig",["$cookies",function(e){function t(t,n,r){t.options=e.getObject("favouriteOptions")||{showFavourites:!0,showCodes:!0},t.saveOptions=function(){e.putObject("favouriteOptions",t.options)}}return{restrict:"E",template:function(){return document.getElementById("ert-additions-options-config-tpl").innerHTML},link:t}}]),directives.directive("ertAutocomplete",["$timeout","$filter",function(e,t){function n(n,r,i){var o=null;n.activeItem=null,n.filteredItems=[],n.$watch("inputSearch",function(e){var r=null;r=t("autocompleteFilter")(n.items,e),r=r.sort(function(e,t){return e.name.length-t.name.length}),r=t("limitTo")(r,10),r=t("localizedOrderBy")(r,"name"),n.filteredItems=r}),n.selectItem=function(e){e&&(n.selectedItem=e,n.inputSearch=null,n.activeItem=null,n.onSelectItem())},n.isItemActive=function(e){return angular.equals(n.activeItem,e)};var a=function(e){n.filteredItems?n.activeItem=n.filteredItems[e]:n.activeItem=null},s=function(){o>0&&a(--o)},c=function(){o<n.filteredItems.length-1&&a(++o)};n.onKeydown=function(t){switch(t.which){case 27:t.preventDefault(),n.inputSearch=null;break;case 13:n.selectItem(n.activeItem);break;case 38:t.preventDefault(),e(s);break;case 40:t.preventDefault(),e(c);break;default:e(function(){return a(o=0)})}}}return{restrict:"E",template:function(){return document.getElementById("ert-autocomplete-tpl").innerHTML},link:n,scope:{items:"=",onSelectItem:"&",placeholder:"@",focus:"=",selectedItem:"=",inputSearch:"="}}}]),directives.directive("ertButton",["$q",function(e){var t=function(t,n,r){t.onButtonClick=function(){t.inProgress=!0,e.when(t.onClick()).then(function(){t.inProgress=!1})["catch"](function(e){throw t.inProgress=!1,e})},t.buttonDisabled=function(){return t.inProgress||t.disabled()}};return{link:t,restrict:"E",scope:{disabled:"&",focus:"=?",onClick:"&"},template:function(){return document.getElementById("ert-button-tpl").innerHTML},transclude:!0}}]),directives.directive("ertCan",["CurrentUser","Role",function(e,t){function n(t,n,i){t.$watch(function(){return JSON.stringify(r)},function(){e.can(i.ertCan)?n.removeClass("ng-hide"):n.addClass("ng-hide")})}var r=t.roles;return{link:n,restrict:"A",scope:{}}}]),directives.directive("ertCanState",["$compile","CurrentUser","Role",function(e,t,n){function r(e,n,r){e.$watch(function(){return JSON.stringify(i)},function(){t.canState(r.ertCanState)?n.removeClass("ng-hide"):n.addClass("ng-hide")})}var i=n.roles;return{link:r,restrict:"A",scope:{}}}]),directives.directive("ertCloseSale",["$locale","Sale","Product","PaymentType",function(e,t,n,r){function i(e,i,a){var s=function(){return e.sale.additions.filter(function(e){return e.paid})};e.products=n.products,e.paymentTypes=r.paymentTypes,e.totalRemaining=t.totalRemaining(e.sale),e.totalSale=t.total(e.sale),e.subtotalSale=t.subtotalRemaining(e.sale),e.someAdditionsWerePaid=s().length>0,e.toggleSelect=function(e){e.selected=!e.selected},e.addPayment=function(){var n;n=e.partialClose?-t.partialCloseCashback(e.sale,e.payments):-t.cashback(e.sale,e.payments);var r={amount:parseFloat(n.toFixed(o)),paymentTypeId:1};e.payments.push(r)},e.removePayment=function(t){var n=e.payments.indexOf(t);n>-1&&e.payments.splice(n,1)},e.paymentTypeDisabledForSale=function(t){return!e.sale.guestId&&t.isCurrentAccount},e.remaining=function(){return e.partialClose?t.totalRemaining(e.sale)-t.partialCloseTotal(e.sale):t.totalRemaining(e.sale)},e.calculateDiscount=function(n,r){return e.partialClose?t.partialCloseDiscountAmount(n,r):t.discountAmountOnRemaining(n,r)},e.currentTotal=function(){return e.partialClose?t.partialCloseTotal(e.sale):e.totalRemaining},e.currentSubtotal=function(){return e.partialClose?t.partialCloseSubtotal(e.sale):e.subtotalSale}}var o=e.NUMBER_FORMATS.PATTERNS[1].maxFrac;return{restrict:"E",link:i,template:function(){return document.getElementById("ert-close-sale-tpl").innerHTML},scope:{sale:"=",payments:"=",partialClose:"="}}}]),directives.directive("ertDialogCloseSale",["$state","$locale","$window","Sale","Product","PaymentType","Guest","CashDrawer","Setting","FiscalPrinter","ChromeExtension","EscPosDocument","Table","Payment",function(e,t,n,r,i,o,a,s,c,u,l,d,f,p){function m(e,t,l){e.onPaymentTypeChange=function(t){if(e.tipsEnabled()&&0===t){var n=e.paymentTypes[e.payments[t].paymentTypeId];n.isCurrentAccount||(e.tip.paymentTypeId=n.id)}};var d=function(){r.totalRemaining(e.sale)&&e.addPayment()},m=function(){e.payments=[]},g=function(){for(var t,n=e.sale.additions[$traceurRuntime.toProperty(Symbol.iterator)]();!(t=n.next()).done;){var r=t.value;r.selected=!1}},v=function(){var t=r.cashback(e.sale,e.payments),n=r.totalRemaining(e.sale);return e.tipsEnabled()&&e.isLocalSale()&&(t-=e.tip.amount),0>n||0>t},y=function(){return r.partialCloseTotal(e.sale)<=0||0==e.payments.length||r.partialCloseCashback(e.sale,e.payments)<0},$=function(){return e.sale.additions.filter(function(e){return e.paid})},b=!1;c.fetch("fiscal_protocol").then(function(t){e.printFiscalAvailable=t.value}),c.fetch("show_drawer_icon_on_close_table_dialog").then(function(t){e.openDrawerAvailable=t.value}),c.fetch("open_drawer_on_close_table_dialog").then(function(t){t.value&&e.openDrawer()}),c.fetch("enable_tip_control").then(function(t){b=t.value,b&&e.isLocalSale()?c.fetch("tip_percentage").then(function(t){e.suggestedTipPercentage=t.value,e.tip={amount:r.tipValue(e.sale,e.suggestedTipPercentage),paymentTypeId:C()},d()}):d()}),e.products=i.products,e.paymentTypes=o.paymentTypes,e.guests=a.guests,e.payments=[],e.submitting=!1,e.partialClose=!1,e.confirmDialog=!1,e.totalRemaining=r.totalRemaining(e.sale),e.totalSale=r.total(e.sale),e.subtotalSale=r.subtotalRemaining(e.sale),e.someAdditionsWerePaid=$().length>0,e.focus={onCloseButton:!0},e.isTakeAwaySale=function(){return e.sale.saleTypeId===r.TYPES.TAKE_AWAY},e.isLocalSale=function(){return e.sale.saleTypeId===r.TYPES.LOCAL},e.tipsEnabled=function(){return!e.partialClose&&b},e.togglePartialClose=function(){e.partialClose=!e.partialClose,m(),e.partialClose||0!=e.payments.length||d()},e.toggleSelect=function(e){e.selected=!e.selected},e.acceptDisabled=function(){var t=e.partialClose?y():v();return t||e.form.$invalid||e.submitting},e.addPayment=function(){var t=e.partialClose?-r.partialCloseCashback(e.sale,e.payments):-r.cashback(e.sale,e.payments);e.tipsEnabled()&&e.isLocalSale()&&(t+=e.tip.amount);var n={amount:parseFloat(t.toFixed(h)),paymentTypeId:C()};e.payments.push(n)};var C=function(){return+Object.keys(o.paymentTypes)[0]};e.removePayment=function(t){var n=e.payments.indexOf(t);n>-1&&e.payments.splice(n,1)},e.closeSale=function(t,n,i){e.submitting=!0;var o=function(){e.submitting=!1,g(),e.onConfirm()};e.partialClose?f.closeSalePartial(t,n,o):e.isLocalSale()?f.closeSale(t,n,i,o):r.close(t,n,i,o)},e.close=function(){g(),e.onCancel()},e.paymentTypeDisabledForSale=function(t){return!e.sale.guestId&&t.isCurrentAccount},e.subtotalSelected=function(){return r.partialCloseSubtotal(e.sale)},e.totalSelected=function(){return r.partialCloseTotal(e.sale)},e.remaining=function(){return e.partialClose?r.totalRemaining(e.sale)-r.partialCloseTotal(e.sale):r.totalRemaining(e.sale)},e.calculateDiscount=function(t,n){return e.partialClose?r.partialCloseDiscountAmount(t,n):r.discountAmountOnRemaining(t,n)},e.currentTotal=function(){var t=e.partialClose?r.partialCloseTotal(e.sale):e.totalRemaining;return e.tipsEnabled()&&e.isLocalSale()&&(t+=e.tip.amount),t},e.currentSubtotal=function(){return e.partialClose?r.partialCloseSubtotal(e.sale):e.subtotalSale},e.printFiscalReceipt=function(){e.confirmDialog=!0,e.confirmDialogFocus={onAccept:!0}},e.onAcceptConfirmDialog=function(){var t=r.totalRemaining(e.sale),n=p.exactPayments(e.payments,t);return u.printReceipt(e.sale,n,{documentType:"C"}).then(function(){e.confirmDialog=!1})["catch"](function(e){alert(e.message)})},e.onCancelConfirmDialog=function(){e.confirmDialog=!1},e.printFiscalReceiptDisabled=function(){var t=r.cashback(e.sale,e.payments)<0,n=e.sale.lastReceipt;return n||t||0===r.total(e.sale)},e.openDrawer=function(){return s.open()};var w=function(t){27===t.keyCode&&(t.preventDefault(),e.close())};n.addEventListener("keydown",w),e.$on("$destroy",function(){n.removeEventListener("keydown",w)})}var h=t.NUMBER_FORMATS.PATTERNS[1].maxFrac;return{restrict:"E",link:m,template:function(){return document.getElementById("ert-dialog-close-sale-tpl").innerHTML},scope:{table:"=",sale:"=",onConfirm:"&",onCancel:"&"}}}]),directives.directive("ertDialogFiscalReceipt",["FiscalPrinter","Guest","Setting",function(e,t,n){var r=function(r,i,o){r.options={},r.documentTypes=[],r.documentLetters=[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"}],r.customerIvaTypes=[{value:"I",label:"Responsable Inscripto"},{value:"N",label:"No Responsable"},{value:"E",label:"Exento"},{value:"M",label:"Responsable Monotributo"},{value:"F",label:"Consumidor Final"},{value:"S",label:"No Categorizado"},{value:"T",label:"Monotributista Social"},{value:"C",label:"Peq. Contr. Eventual"},{value:"V",label:"Peq. Contr. Eventual Social"}],r.customerIdTypes=[{value:"CUIT",label:"CUIT"},{value:"CUIL",label:"CUIL"},{value:"DNI",label:"DNI"}];var a={C:{value:"C",label:"Ticket"},T:{value:"T",label:"Ticket-Factura"},TNC:{value:"TNC",label:"Ticket-Nota de Crédito"}},s=function(){var e=n.pluck("locale"),t=u();"es-AR"===e?"TNC"!==t&&t?r.documentTypes=[a.TNC]:r.documentTypes=[a.C,a.T]:"es-CL"===e&&(r.documentTypes=[a.C])},c=function(){if(console.log(r.options),"TNC"===r.options.documentType)return e.printCreditNote(r.sale,r.options);var t;r.sale.deliveryData&&(t=r.sale.deliveryData.expectedPayments);var n=t||r.sale.payments;return e.printReceipt(r.sale,n,r.options)},u=function(){return r.sale.lastReceipt&&r.sale.lastReceipt.type},l=function(){var e=t.guests[r.sale.guestId];e&&(r.options.customerAddress=e.address.join(" "),r.options.customerName=e.name,r.options.customerIdValue=e.fiscalNumber);var n=u();n?"TNC"===n?r.options.documentType="C":(Object.assign(r.options,r.sale.lastReceipt.extraData.options),r.options.embarkNumber=r.sale.lastReceipt.number,r.options.documentType="TNC"):r.options.documentType="C"};r.showExtraOptions=function(){return"C"!==r.options.documentType},r.onLocalAccept=function(){return c().then(function(){return r.onAccept()})["catch"](function(e){alert(e.message)})},r.onLocalCancel=function(){r.onCancel()},s(),l()};return{link:r,scope:{sale:"=",onAccept:"&",onCancel:"&"},template:function(){return document.getElementById("ert-dialog-fiscal-receipt-tpl").innerHTML}}}]),directives.directive("ertDownloadFile",["$parse","$window",function(e,t){function n(e,n,r){var i=function(n){var r=t.document.createElement("a"),i=n.applicationType||"application/vnd.ms-excel";return r.href="data:"+i+";base64,"+n.data,r.download=n.filename||e.filename||"archivo",r},o=function(e){t.document.body.appendChild(e)},a=function(e){t.document.body.removeChild(e)};n.on("click",function(t){r.disabled||e.ertDownloadFile().then(function(e){var t=i(e);o(t),t.click(),a(t),delete t})})}return{restrict:"A",link:n,scope:{ertDownloadFile:"&",filename:"@"}}}]),directives.directive("ertGuestAutocomplete",["$http","$filter","$timeout","APIUrl",function(e,t,n,r){function i(i,o,a){a.required&&(i.required=!0);var s=r.base+"/guests",c=null,u=function(){i.items=[]};i.activeItem=null,i.items=[],i.onChangeHandler=function(){i.inputSearch&&(i.ngModel=i.inputSearch,i.inputSearch.length>1?e.get(s,{params:{p:i.inputSearch}}).then(function(e){i.items=t("object2Array")(e.data),l(c=0)}):u())},i.selectItem=function(e){e&&(i.selectedItem=e,i.inputSearch=e[i.selectedProp],i.ngModel=e[i.selectedProp],i.onSelectItem({selectedItem:e}),u())},i.discardItem=function(){i.focus=!0,i.activeItem=null,i.selectedItem=null,i.inputSearch=null,i.ngModel=null,i.onDiscardItem()},i.isItemActive=function(e){return angular.equals(i.activeItem,e)};var l=function(e){i.items?i.activeItem=i.items[e]:i.activeItem=null},d=function(){c>0&&l(--c)},f=function(){c<i.items.length-1&&l(++c)};i.onKeydown=function(e){switch(e.which){case 27:e.preventDefault(),i.inputSearch=null,u();break;case 9:u();break;case 13:i.activeItem&&(e.preventDefault(),i.selectItem(i.activeItem));break;case 38:e.preventDefault(),n(d);break;case 40:e.preventDefault(),n(f)}},i.$watch("initialValue",function(e,t){void 0!==i.initialValue&&(i.inputSearch=i.initialValue,i.selectedItem&&(i.inputSearch=i.selectedItem[i.selectedProp]))})}return{restrict:"E",template:function(){return document.getElementById("ert-guest-autocomplete-tpl").innerHTML},link:i,scope:{onSelectItem:"&",onDiscardItem:"&",ngModel:"=",focus:"=",selectedItem:"=?",initialValue:"=?",inputName:"@",selectedProp:"@"}}}]),directives.directive("ertHelpTooltip",[function(){return{transclude:!0,restrict:"E",template:function(){return document.getElementById("ert-help-tooltip-tpl").innerHTML},scope:{}}}]),directives.directive("ertIconButton",["$q",function(e){var t=function(t,n,r){t.onIconClick=function(){t.inProgress=!0,e.when(t.onClick()).then(function(){t.inProgress=!1})["catch"](function(e){throw t.inProgress=!1,e})},t.iconDisabled=function(){return t.inProgress||t.disabled()}};return{restrict:"E",template:function(){return document.getElementById("ert-icon-button-tpl").innerHTML},link:t,scope:{iconClass:"@",onClick:"&",disabled:"&"}}}]),directives.directive("ertIconMenu",["$window",function(e){function t(t,n,r){t.active=!1;var i=function(e){var r=0==n[0].getElementsByClassName(e.target.className).length;r&&(t.active=!1,t.$digest())};t.toggleActive=function(){t.active=!t.active,t.active?e.addEventListener("click",i):e.removeEventListener("click",i)}}return{transclude:!0,restrict:"E",template:function(){return document.getElementById("ert-icon-menu-tpl").innerHTML},link:t,scope:{}}}]),directives.directive("ertInfiniteScroll",[function(){function e(e,t,n){var r=t[0];t.bind("scroll",function(){r.scrollHeight-r.scrollTop-4<=r.clientHeight&&e.whenScrolled()})}return{restrict:"A",link:e,scope:{whenScrolled:"&"}}}]),directives.directive("ertSaleTotal",["Sale",function(e){function t(t,n,r){t.total=function(t){return e.total(t)}}return{restrict:"E",template:function(){return document.getElementById("ert-sale-total-tpl").innerHTML},link:t,scope:{sale:"="}}}]),directives.directive("ertShowSaleInfoLarge",["Guest","User","Table","SaleState",function(e,t,n,r){function i(i,o,a){i.guests=e.guests,i.waiters=t.waiters,i.tables=n.tables,i.saleStates=r.saleStates}return{restrict:"E",template:function(){return document.getElementById("ert-show-sale-info-large-tpl").innerHTML},link:i,scope:{sale:"="}}}]),directives.directive("ertShowSaleInfoSmall",["User","Guest",function(e,t){function n(n,r,i){n.waiters=e.waiters,n.guests=t.guests}return{restrict:"E",template:function(){return document.getElementById("ert-show-sale-info-small-tpl").innerHTML},link:n,scope:{sale:"="}}}]),directives.directive("ertShowSaleItems",["Product","Addition","Discount","Sale",function(e,t,n,r){function i(i,o,a){i.products=e.products,i.confirmDialog=!1,i.disableCancellation="disableCancellation"in a,i.inProgressAdditions=[],i.isAdditionInProgress=function(e){return i.inProgressAdditions.indexOf(e.id)>-1},i.cancelAdditionDisabled=function(e){return e.canceled||e.paid||i.isAdditionInProgress(e)};var s=function(e){var t=i.inProgressAdditions.indexOf(e.id);return i.inProgressAdditions.splice(t,1)};i.onConfirmCancelAddition=function(e){i.confirmDialog=!1,i.inProgressAdditions.push(e.id),t.cancel(e,function(){return s(e)},function(){return s(e)})},i.onConfirmCancelDiscount=function(e){i.confirmDialog=!1,n.update(e,{canceled:!0})},i.cancelAddition=function(e){i.confirmDialog=!0,i.confirmDialogFocus={
onAccept:!0},i.onAcceptConfirmDialog=function(){return i.onConfirmCancelAddition(e)}},i.cancelDiscount=function(e){i.confirmDialog=!0,i.confirmDialogFocus={onAccept:!0},i.onAcceptConfirmDialog=function(){return i.onConfirmCancelDiscount(e)}},i.onCancelConfirmDialog=function(){i.confirmDialog=!1},i.calculateDiscount=function(e,t){return r.discountAmount(e,t)},i.subtotal=function(e){return r.subtotal(e)}}return{restrict:"E",template:function(){return document.getElementById("ert-show-sale-items-tpl").innerHTML},link:i,scope:{sale:"="}}}]),directives.directive("ertTableOptionsMenu",["$window",function(e){function t(t,n,r){t.active=!1;var i=function(e){var r=0==n[0].getElementsByClassName(e.target.className).length;r&&(t.active=!1,t.$digest())};t.toggleActive=function(){t.active=!t.active,t.active?e.addEventListener("click",i):e.removeEventListener("click",i)}}return{transclude:!0,restrict:"E",template:function(){return document.getElementById("ert-table-options-menu-tpl").innerHTML},link:t,scope:{}}}]),directives.directive("ertWelcomeVideoDialog",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-welcome-video-dialog-tpl").innerHTML},scope:{onIconCloseClick:"&"}}}]),directives.directive("ertDelivery",["Guest","Delivery",function(e,t){function n(n,r,i){n.sales=t.query({},t.cleanup),n.guests=e.guests}return{restrict:"E",template:function(){return document.getElementById("ert-delivery-tpl").innerHTML},link:n}}]),directives.directive("ertDeliveryEdit",["$state",function(e){function t(t,n,r){t.showDelivery=function(){e.go("delivery.show",{saleId:t.sale.id})}}return{restrict:"E",template:function(){return document.getElementById("ert-delivery-edit-tpl").innerHTML},link:t,scope:{sale:"="}}}]),directives.directive("ertDeliveryEditPayments",["$locale","$state","PaymentType","Sale",function(e,t,n,r){function i(i,o,a){var s=e.NUMBER_FORMATS.PATTERNS[1].maxFrac,c=function(e){i.newSale.deliveryData.expectedPayments.length>0?i.newSale.deliveryData.expectedPayments[0].amount=r.totalRemaining(e):u(e)},u=function(e){var t={amount:parseFloat(r.totalRemaining(e).toFixed(s)),paymentTypeId:1};i.newSale.deliveryData.expectedPayments.push(t)};i.paymentTypes=n.paymentTypes,i.newSale=angular.copy(i.sale),i.onAccept=function(){return r.update(i.sale,i.newSale,function(){t.go("delivery.show",{saleId:i.sale.id})}).$promise},i.onCancel=function(){t.go("delivery.show",{saleId:i.sale.id})},i.acceptDisabled=function(){return!i.validPayments(i.newSale)||i.form.$invalid||angular.equals(i.sale,i.newSale)},i.addPayment=function(){var e=-r.cashback(i.sale,i.newSale.deliveryData.expectedPayments),t={amount:parseFloat(e.toFixed(s)),paymentTypeId:1};i.newSale.deliveryData.expectedPayments.push(t)},i.removePayment=function(e){var t=i.newSale.deliveryData.expectedPayments.indexOf(e);t>-1&&i.newSale.deliveryData.expectedPayments.splice(t,1)},i.validPayments=function(e){var t=r.cashback(e,e.deliveryData.expectedPayments);return t>=0},i.paymentTypeDisabledForSale=function(e){return!i.sale.guestId&&e.isCurrentAccount},i.validPayments(i.sale)||c(i.sale)}return{link:i,restrict:"E",template:function(){return document.getElementById("ert-delivery-edit-payments-tpl").innerHTML},scope:{sale:"="}}}]),directives.directive("ertDeliveryNew",["$state","Delivery","Util",function(e,t,n){var r=function(r,i,o){r.sale={},r.sale.guest={active:!0,address:[]},r.sale.deliveryData={expectedPayments:[]},r.focus={onPhone:!0},r.saveGuest=!0,r.saveDelivery=function(i){return o=angular.extend(i,{saveGuest:r.saveGuest}),t.save(o,function(t){e.go("delivery.show",{saleId:t.sale.id})},function(e){n.fillErrors(r,e.data)}).$promise},r.saveDeliveryDisabled=function(){return r.form.$invalid},r.onSelectGuest=function(e){r.sale.guest=e,r.sale.guestId=e.id,r.focus={onSubmit:!0}},r.onDiscardGuest=function(){r.sale.guest={active:!0,address:[]},r.sale.guestId=null}};return{restrict:"E",template:function(){return document.getElementById("ert-delivery-new-tpl").innerHTML},link:r}}]),directives.directive("ertDeliveryShow",["Sale",function(e){var t=function(t,n,r){t.isActiveDelivery=function(){return t.sale.saleStateId===e.STATES.IN_COURSE||t.sale.saleStateId===e.STATES.PAYMENT_PROCESS},t.isSentDelivery=function(){return t.sale.saleStateId===e.STATES.DELIVERY_SENT},t.isClosedDelivery=function(){return t.sale.saleStateId===e.STATES.CLOSED}};return{restrict:"E",template:function(){return document.getElementById("ert-delivery-show-tpl").innerHTML},link:t,scope:{sale:"="}}}]),directives.directive("ertDeliveryShowInfo",["Guest","SaleState",function(e,t){var n=function(n,r,i){var o=e.guests;n.guestName=function(e){return e.guestId?o[e.guestId].name:e.deliveryData.guestName},n.guestPhone=function(e){return e.guestId?o[e.guestId].phone:e.deliveryData.guestPhone},n.guestAddress=function(e){return e.guestId?o[e.guestId].address.join(" "):e.deliveryData.guestAddress.join(" ")},n.deliveryStatus=function(e){return t.saleStates[e.saleStateId].label}};return{restrict:"E",template:function(){return document.getElementById("ert-delivery-show-info-tpl").innerHTML},link:n,scope:{sale:"="}}}]),directives.directive("ertDeliveryShowPayments",["$state",function(e){function t(t,n,r){t.onEditClick=function(){e.go(".editPayments")}}return{link:t,restrict:"E",template:function(){return document.getElementById("ert-delivery-show-payments-tpl").innerHTML},scope:{sale:"="}}}]),directives.directive("ertDeliveryTable1",["Sale","Guest","Delivery","$filter",function(e,t,n,r){function i(i,o,a){var s=t.guests;i.total=function(t){return e.total(t)},i.enableMarkAsSent=function(t){return e.subtotal(t)>0},i.inProgressState=function(t){return t.saleStateId===e.STATES.IN_COURSE||t.saleStateId===e.STATES.PAYMENT_PROCESS},i.notV1TakeAway=function(e){return e.deliveryData&&e.deliveryData.deliveryType?"take-away"!==e.deliveryData.deliveryType:!0},i.guestName=function(e){return e.guestId?s[e.guestId].name:e.deliveryData.guestName},i.guestAddress=function(e){return e.guestId?s[e.guestId].address.join(" "):e.deliveryData.guestAddress.join(" ")},i.guestPhone=function(e){return e.guestId?s[e.guestId].phone:e.deliveryData.guestPhone},i.validPayments=function(t){var n=e.cashback(t,t.deliveryData.expectedPayments);return n>=0},i.markAsSent=function(t,n){e.updateState(t,e.STATES.DELIVERY_SENT).$promise["catch"](function(n){var r=n.data.sale_state_id;r.indexOf("already_closed")>-1&&(t.saleStateId=e.STATES.CLOSED)}),n.stopPropagation()},i.markAsSentDisabled=function(t){return e.subtotal(t)<=0||!i.validPayments(t)},i.disableShowMoreResults=!1,i.disableLoadMoreResults=function(){return i.disableShowMoreResults};var c=1;i.loadMoreResults=function(){return c++,params={ds:"preparing",page:c},result=n.query(params,function(e){data=r("object2Array")(e),0==data.length&&(i.disableShowMoreResults=!0)}),result.$promise}}return{restrict:"E",template:function(){return document.getElementById("ert-delivery-table-1-tpl").innerHTML},link:i,scope:{sales:"=",guests:"="}}}]),directives.directive("ertDeliveryTable2",["Sale","Guest","Delivery","$filter",function(e,t,n,r){function i(i,o,a){var s=t.guests;i.SENT_STATE=e.STATES.DELIVERY_SENT,i.total=function(t){return e.total(t)},i.guestName=function(e){return e.guestId?s[e.guestId].name:e.deliveryData.guestName},i.guestAddress=function(e){return e.guestId?s[e.guestId].address.join(" "):e.deliveryData.guestAddress.join(" ")},i.guestPhone=function(e){return e.guestId?s[e.guestId].phone:e.deliveryData.guestPhone},i.closeSale=function(t,n){e.close(t,t.deliveryData.expectedPayments).$promise["catch"](function(n){var r=n.data.sale_state_id;r.indexOf("already_closed")>-1&&(t.saleStateId=e.STATES.CLOSED)}),n.stopPropagation()},i.disableShowMoreResults=!1,i.disableLoadMoreResults=function(){return i.disableShowMoreResults};var c=1;i.loadMoreResults=function(){return c++,params={ds:"sent",page:c},result=n.query(params,function(e){data=r("object2Array")(e),0==data.length&&(i.disableShowMoreResults=!0)}),result.$promise}}return{restrict:"E",template:function(){return document.getElementById("ert-delivery-table-2-tpl").innerHTML},link:i,scope:{sales:"=",guests:"="}}}]),directives.directive("ertDeliveryTable3",["Sale","SaleState","Guest","Delivery","$filter",function(e,t,n,r,i){function o(t,o,a){var s=n.guests;t.DELIVERED_STATE=e.STATES.CLOSED,t.total=function(t){return e.total(t)},t.guestName=function(e){return e.guestId?s[e.guestId].name:e.deliveryData.guestName},t.guestAddress=function(e){return e.guestId?s[e.guestId].address.join(" "):e.deliveryData.guestAddress.join(" ")},t.guestPhone=function(e){return e.guestId?s[e.guestId].phone:e.deliveryData.guestPhone},t.disableShowMoreResults=!1,t.disableLoadMoreResults=function(){return t.disableShowMoreResults};var c=1;t.loadMoreResults=function(){return c++,params={ds:"returned",page:c},result=r.query(params,function(e){data=i("object2Array")(e),0==data.length&&(t.disableShowMoreResults=!0)}),result.$promise}}return{restrict:"E",template:function(){return document.getElementById("ert-delivery-table-3-tpl").innerHTML},link:o,scope:{sales:"=",guests:"="}}}]),directives.directive("ertShowActiveDelivery",["$state","PaymentType","Sale","PrinterJob","PendingAddition","Product",function(e,t,n,r,i,o){function a(t,a,s){t.products=o.products,t.confirmAdditionsErrorDialog=!1,t.focus={onAdder:!0},t.focusOnAdder=function(){t.focus.onAdder=!0},t.editPayments=!1,t.enablePayments=function(e){return n.subtotal(t.sale)},t.validPayments=function(e){var t=n.cashback(e,e.deliveryData.expectedPayments);return t>=0},t.markAsSent=function(e){n.updateState(e,n.STATES.DELIVERY_SENT).$promise["catch"](function(t){var r=t.data.sale_state_id;r.indexOf("already_closed")>-1&&(e.saleStateId=n.STATES.CLOSED)})},t.markAsSentDisabled=function(e){return n.subtotal(e)<=0||!t.validPayments(e)},t.disabledAddDiscount=function(e){return 0==n.subtotal(e)},t.confirmPendingAdditions=function(){var e=i.additions[t.sale.id];return e?n.saveAdditions(t.sale,e).$promise.then(function(){r.printKitchenReceipt(t.sale,e),t.discardPendingAdditions()})["catch"](function(e){t.errors=e.data,t.confirmAdditionsErrorDialog=!0,t.focus.onErrorsDialogAccept=!0}):Promise.resolve()},t.closeConfirmAdditionsErrorDialog=function(){t.confirmAdditionsErrorDialog=!1,t.focusOnAdder()},t.discardPendingAdditions=function(){i.discard(t.sale.id),t.focusOnAdder()},t.addPendingAddition=function(e){i.add(t.sale.id,e.count,e.product),t.focusOnAdder()},t.$watch(function(){return n.total(t.sale)},function(n,r){n===r||t.validPayments(t.sale)||e.go("delivery.show.editPayments",{saleId:t.sale.id},{reload:!0})},!0),t.validPayments=function(e){var t=n.cashback(e,e.deliveryData.expectedPayments);return t>=0}}return{link:a,restrict:"E",template:function(){return document.getElementById("ert-show-active-delivery-tpl").innerHTML},scope:{sale:"="}}}]),directives.directive("ertShowClosedDelivery",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-show-closed-delivery-tpl").innerHTML},scope:{sale:"="}}}]),directives.directive("ertShowDeliveryHeader",["$state","Sale","PrinterJob","Setting","FiscalPrinter","Payment","CashDrawer",function(e,t,n,r,i,o,a){function s(i,o,s){i.fiscalReceiptDialogShow=!1,i.confirmDialog=!1,i.fiscalReceiptIconShow=r.pluck("fiscal_protocol"),i.fiscalReceiptShowDialog=function(){i.fiscalReceiptDialogShow=!0},i.fiscalReceiptHideDialog=function(){i.fiscalReceiptDialogShow=!1},i.fiscalReceiptIsIconDisabled=function(){var e=t.cashback(i.sale,i.sale.deliveryData.expectedPayments)<0;return i.sale.lastReceipt||e||0===t.total(i.sale)},i.onIconPrintControlClick=function(e){return n.printControlReceipt(e).then(function(){return e.saleStateId===t.STATES.IN_COURSE?t.updateState(e,t.STATES.PAYMENT_PROCESS).$promise:void 0})},i.confirmCancelOrder=function(n){return t.cancel(n).$promise.then(function(){i.confirmDialog=!1,e.go("delivery")})},i.onCancelConfirmDialog=function(){i.confirmDialog=!1},i.cancelOrder=function(e){i.confirmDialog=!0,i.confirmDialogFocus={onAccept:!0},i.onAcceptConfirmDialog=function(){return i.confirmCancelOrder(e)}},i.className=function(){return"status-delivery-"+i.state},i.openDrawer=function(){return a.open()}}return{link:s,restrict:"E",template:function(){return document.getElementById("ert-show-delivery-header-tpl").innerHTML},scope:{sale:"=",state:"@"}}}]),directives.directive("ertShowSentDelivery",["$state","Sale",function(e,t){function n(e,n,r){e.closeSale=function(e){t.close(e,e.deliveryData.expectedPayments).$promise["catch"](function(n){var r=n.data.sale_state_id;r.indexOf("already_closed")>-1&&(e.saleStateId=t.STATES.CLOSED)})}}return{link:n,restrict:"E",template:function(){return document.getElementById("ert-show-sent-delivery-tpl").innerHTML},scope:{sale:"="}}}]),directives.directive("ertExpenseCategories",[function(){var e=["$scope",function(e){this.showConfirmDialog=function(t){e.confirmDialog=t},this.setConfirmDialogCaption=function(t){e.captionConfirmDialog=t},this.setAcceptCallbackConfirmDialog=function(t){e.onAcceptConfirmDialog=t},this.setCancelCallbackConfirmDialog=function(t){e.onCancelConfirmDialog=t}}];return{restrict:"E",template:function(){return document.getElementById("ert-expense-categories-tpl").innerHTML},controller:e,scope:{categories:"="}}}]),directives.directive("ertExpenseCategoriesEdit",["$state","ExpenseCategory","Util",function(e,t,n){function r(r,i,o){r.category=angular.copy(r.masterCategory),r.acceptDisabled=function(){return r.form.$invalid||angular.equals(r.category,r.masterCategory)},r.onAccept=function(){return t.update(r.masterCategory,r.category,function(){e.go("expenseCategories.show",{expenseCategoryId:r.category.id})},function(e){n.fillErrors(r,e.data)}).$promise},r.onCancel=function(){e.go("expenseCategories.show",{expenseCategoryId:r.category.id})}}return{link:r,restrict:"E",template:function(){return document.getElementById("ert-expense-categories-edit-tpl").innerHTML},scope:{masterCategory:"=category"}}}]),directives.directive("ertExpenseCategoriesHeader",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-expense-categories-header-tpl").innerHTML},scope:{}}}]),directives.directive("ertExpenseCategoriesNew",["$state","ExpenseCategory","Util",function(e,t,n){function r(r,i,o){r.focus={onName:!0},r.acceptDisabled=function(){return r.form.$invalid},r.onAccept=function(){return t.save(r.category,function(t){e.go("expenseCategories.show",{expenseCategoryId:t.id})},function(e){n.fillErrors(r,e.data)}).$promise},r.onCancel=function(){e.go("expenseCategories")}}return{restrict:"E",template:function(){return document.getElementById("ert-expense-categories-new-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertExpenseCategoriesShow",["$window","ExpenseCategory","$state",function(e,t,n){function r(e,r,i,o){e.confirmDialog=!1;var a=function(e){return-1!=e.base.indexOf("category_being_used")},s=function(e){o.setConfirmDialogCaption("Eliminar Categoría"),o.setAcceptCallbackConfirmDialog(function(){return c(e).then(o.showConfirmDialog(!1))}),o.setCancelCallbackConfirmDialog(function(){return o.showConfirmDialog(!1)}),o.showConfirmDialog(!0)},c=function(e){var r=t.destroy(e,{force:!0});return r.$promise.then(function(){n.go("expenseCategories")}),r.$promise};e.destroyCategory=function(t){e.confirmDialog=!0,e.confirmDialogFocus={onAccept:!0},e.onAcceptConfirmDialog=function(){return e.confirmDestroyCategory(t)}},e.onCancelConfirmDialog=function(){e.confirmDialog=!1},e.confirmDestroyCategory=function(r){var i=t.destroy(r,null,function(){e.confirmDialog=!1,n.go("expenseCategories")},function(t){var n=t.data;e.confirmDialog=!1,a(n)&&s(r)});return i.$promise}}return{link:r,restrict:"E",template:function(){return document.getElementById("ert-expense-category-show-tpl").innerHTML},scope:{category:"="},require:"^ertExpenseCategories"}}]),directives.directive("ertExpenseCategoriesTable",["$window","Expense","ExpenseCategory","$state",function(e,t,n,r){function i(e,t,i,o){e.confirmDialog=!1;var a=function(e){return-1!=e.base.indexOf("category_being_used")},s=function(e){o.setConfirmDialogCaption("Eliminar Categoría"),o.setAcceptCallbackConfirmDialog(function(){return c(e).then(o.showConfirmDialog(!1))}),o.setCancelCallbackConfirmDialog(function(){return o.showConfirmDialog(!1)}),o.showConfirmDialog(!0)},c=function(e){var t=n.destroy(e,{force:!0});return t.$promise.then(function(){r.go("expenseCategories")}),t.$promise};e.destroyCategory=function(t){e.confirmDialog=!0,e.confirmDialogFocus={onAccept:!0},e.onAcceptConfirmDialog=function(){return e.confirmDestroyCategory(t)}},e.onCancelConfirmDialog=function(){e.confirmDialog=!1},e.confirmDestroyCategory=function(t){var i=n.destroy(t,null,function(){e.confirmDialog=!1,r.go("expenseCategories")},function(n){var r=n.data;e.confirmDialog=!1,a(r)&&s(t)});return i.$promise}}return{link:i,restrict:"E",template:function(){return document.getElementById("ert-expense-categories-table-tpl").innerHTML},scope:{categories:"="},require:"^ertExpenseCategories"}}]),directives.directive("ertEditExpenseForm",["$state","Expense","ExpenseCategory","Provider","ReceiptType","Util",function(e,t,n,r,i,o){function a(a,s,c){if(a.providers=r.providers,a.expenseCategories=n.expenseCategories,a.receiptTypes=i.receiptTypes,a.expense=angular.copy(a.masterExpense),angular.isString(a.expense.date)){var u=a.expense.date.split("-");a.expense.date=new Date(u[0],u[1]-1,u[2])}a.submitting=!1,a.acceptDisabled=function(){return a.form.$invalid||a.submitting||angular.equals(a.expense,a.masterExpense)},a.onAccept=function(){a.submitting=!0,t.update(a.masterExpense,a.expense,function(t){a.$emit("expenses-data-update"),e.go("expenses.show",{expenseId:t.id})},function(e){a.submitting=!1,o.fillErrors(a,e.data)})},a.onCancel=function(){e.go("expenses.show",{expenseId:a.expense.id})}}return{restrict:"E",template:function(){return document.getElementById("ert-expense-form-tpl").innerHTML},link:a,scope:{masterExpense:"=expense"}}}]),directives.directive("ertExpenseExpenseItems",["Unit","Product","Ingredient",function(e,t,n){function r(r,i,o){r.units=e.units,r.products=t.products,r.ingredients=n.ingredients,r.unitId=function(e){return e.productId?r.products[e.productId].unitId:e.ingredientId?r.ingredients[e.ingredientId].unitId:void 0}}return{restrict:"E",template:function(){return document.getElementById("ert-expense-expense-items-tpl").innerHTML},link:r,scope:{expense:"="}}}]),directives.directive("ertExpenses",["$state","$timeout","Expense","ExpensesSummary","Util","ExpenseArray",function(e,t,n,r,i,o){var a=5e3,s=function(t,s,c){t.dateFilter={},t.optionsFilter={},t.expensesSummary={},t.max_rows_limit=a,t.exportFileName="gastos.xls",t.tableOptions={sortBy:"ca",sortOrderDesc:!0},t.expenses=o.getItems();var u=1,l=!1,d=function(){var e=t.tableOptions.sortBy;return t.tableOptions.sortOrderDesc||(e+=",1"),{ord:e}},f=function(){return angular.extend({},t.dateFilter,t.optionsFilter,d())};t.addNextPageData=function(){if(!l){l=!0;var e=f(),t=angular.extend({page:++u},e);n.query(t,function(e){o.append(e),l=!1})}},t.loadData=function(){var i=f();u=1,n.query(i,o.setItems),t.expensesSummary=r.query(i),e.go("expenses")},t.downloadExpenses=function(){t.submitting=!0;var e=f(),r=n.queryXLS(e).$promise;return r.then(function(){t.submitting=!1},function(e){i.fillErrors(t,e.data),t.alertDialog=!0,t.captionAlertDialog="Exportar Gastos",t.onAcceptAlertDialog=function(){t.alertDialog=!1,t.baseErrors={}},t.submitting=!1}),r},t.$on("expenses-data-update",function(e,n){t.loadData()}),t.dateColumns=[{id:0,label:"Fecha Creación"},{id:1,label:"Fecha"}]};return{restrict:"E",template:function(){return document.getElementById("ert-expenses-tpl").innerHTML},link:s}}]),directives.directive("ertExpensesEditExpenseItems",["$state","$filter","Expense","Unit","Product","Ingredient","StockableItem",function(e,t,n,r,i,o,a){function s(s,c,u){s.units=r.units,s.products=i.products,s.ingredients=o.ingredients,s.stockableItems=a.stockableItems,s.focus={onStockableItemSearch:!0},s.onSelectItem=function(){s.focus.onItemQuantity=!0},s.onNewItemFormSubmit=function(){(s.newItemResource||s.inputSearch)&&s.newItemForm.$valid&&(s.addExpenseItem(),s.cleanupAdder(),s.newItemForm.$setPristine(),s.focus.onStockableItemSearch=!0)},s.cleanupAdder=function(){s.newItemResource=null,s.newItemQuantity=null,s.newItemPrice=null,s.newItemDetail=null},s.unitId=function(e){return e.productId?s.products[e.productId].unitId:e.ingredientId?s.ingredients[e.ingredientId].unitId:void 0},s.addExpenseItem=function(){var e={expenditureId:s.expense.id,quantity:s.newItemQuantity,price:s.newItemPrice};if(s.newItemResource)if(s.newItemResource.productId){var t=s.newItemResource.productId;e.productId=t,e.detail=s.products[t].name}else{var n=s.newItemResource.ingredientId;e.ingredientId=n,e.detail=s.ingredients[n].name}else e.detail=s.inputSearch;s.expense.expenseItems.push(e)},s.expense=angular.extend({expenseItems:[]},angular.copy(s.masterExpense)),s.delExpenseItem=function(e){var t=s.expense.expenseItems;e.id?e.canceled=!0:t.splice(t.indexOf(e),1)},s.acceptDisabled=function(){return angular.equals(s.expense,s.masterExpense)},s.onAccept=function(){var r=n.update(s.masterExpense,s.expense);return r.$promise.then(function(){return n.get(s.expense.id,function(n){s.masterExpense.expenseItems=n.expenseItems,s.changedItems=t("changedExpenseItems")(n.expenseItems),s.selectedItemsIds=s.changedItems.map(function(e){return e.id}),s.changedItems.length>0?s.showUpdateItemsCostDialog=!0:e.go("expenses.show",{expenseId:n.id})})})},s.onCancel=function(){e.go("expenses.show",{expenseId:s.expense.id})},s.onItemsCostDialogAccept=function(){return n.updateCosts(s.expense,s.selectedItemsIds,function(){i.query(),o.query(),e.go("expenses.show",{expenseId:s.expense.id})}).$promise},s.onItemsCostDialogCancel=function(){s.showUpdateItemsCostDialog=!1,e.go("expenses.show",{expenseId:s.expense.id})},s.currentCost=function(e){return e.ingredientId?o.ingredients[e.ingredientId].cost:i.products[e.productId].cost},s.toggleSelectedItem=function(e){var t=s.selectedItemsIds.indexOf(e.id);t>-1?s.selectedItemsIds.splice(t,1):s.selectedItemsIds.push(e.id)},s.isItemSelected=function(e){return s.selectedItemsIds.indexOf(e.id)>-1}}return{restrict:"E",template:function(){return document.getElementById("ert-expenses-edit-expense-items-tpl").innerHTML},link:s,scope:{masterExpense:"=expense"}}}]),directives.directive("ertExpensesFilter",["Provider","ExpenseCategory",function(e,t){function n(n,r,i){n.providers=e.providers,n.expenseCategories=t.expenseCategories,n.$watch("model",function(e,t){e!==t&&n.onChange()},!0)}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-expenses-filter-tpl").innerHTML},scope:{model:"=ngModel",onChange:"&"}}}]),directives.directive("ertExpensesShow",["Expense","$state","$window",function(e,t,n){function r(n,r,i){n.confirmDialog=!1,n.editExpenseItems=function(){t.go("expenses.editExpenseItems",{expenseId:n.expense.id})},n.confirmCancelExpense=function(t){return e.cancel(t,function(){n.confirmDialog=!1,n.$emit("expenses-data-update")}).$promise},n.cancelExpense=function(e){n.confirmDialog=!0,n.confirmDialogFocus={onAccept:!0},n.onAcceptConfirmDialog=function(){return n.confirmCancelExpense(e)}},n.onCancelConfirmDialog=function(){n.confirmDialog=!1}}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-expenses-show-tpl").innerHTML},scope:{expense:"="}}}]),directives.directive("ertExpensesShowMargined",[function(){function e(e,t,n){e.showDetails=!1}return{link:e,restrict:"E",template:function(){return document.getElementById("ert-expenses-show-margined-tpl").innerHTML},scope:{expense:"="}}}]),directives.directive("ertExpensesSubtop",[function(){function e(e,t,n){}return{restrict:"E",link:e,template:function(){return document.getElementById("ert-expenses-subtop").innerHTML},scope:{}}}]),directives.directive("ertExpensesSummary",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-expenses-summary-tpl").innerHTML},link:e,scope:{dateFilter:"=",expensesSummary:"="}}}]),directives.directive("ertExpensesTable",["Expense","ExpenseCategory","Provider",function(e,t,n){function r(e,r,i){e.providers=n.providers,e.expenseCategories=t.expenseCategories,e.sortBy=function(t){var n=e.options.sortBy;e.options.sortBy=t,n==t&&(e.options.sortOrderDesc=!e.options.sortOrderDesc),e.onChange()}}return{restrict:"E",template:function(){return document.getElementById("ert-expenses-table-tpl").innerHTML},link:r,scope:{expenses:"=",options:"=",onChange:"&"}}}]),directives.directive("ertNewExpenseForm",["$state","Expense","Provider","ReceiptType","ExpenseCategory",function(e,t,n,r,i){function o(o,a,s){o.providers=n.providers,o.receiptTypes=r.receiptTypes,o.expenseCategories=i.expenseCategories,o.expense={useInCashCount:!0,date:new Date((new Date).toDateString())},o.focus={onAmount:!0},o.submitting=!1,o.acceptDisabled=function(){return o.form.$invalid||o.submitting},o.onAccept=function(){o.submitting=!0,t.save(o.expense,function(t){o.$emit("expenses-data-update"),e.go("expenses.show",{expenseId:t.id})})},o.onCancel=function(){e.go("expenses")}}return{restrict:"E",template:function(){return document.getElementById("ert-expense-form-tpl").innerHTML},link:o,scope:{}}}]),directives.directive("ertShowExpenseInfo",["Provider","ReceiptType","ExpenseCategory","User",function(e,t,n,r){function i(i,o,a){i.users=r.users,i.providers=e.providers,i.receiptTypes=t.receiptTypes,i.expenseCategories=n.expenseCategories}return{restrict:"E",template:function(){return document.getElementById("ert-show-expense-info-tpl").innerHTML},link:i,scope:{expense:"="}}}]),directives.directive("ertGuests",[function(){var e=["$scope",function(e){this.showAlertDialog=function(t){e.alertDialog=t},this.setAlertDialogCaption=function(t){e.captionAlertDialog=t},this.setAcceptCallbackAlertDialog=function(t){e.onAcceptAlertDialog=t},this.showConfirmDialog=function(t){e.confirmDialog=t},this.setConfirmDialogCaption=function(t){e.captionConfirmDialog=t},this.setAcceptCallbackConfirmDialog=function(t){e.onAcceptConfirmDialog=t},this.setCancelCallbackConfirmDialog=function(t){e.onCancelConfirmDialog=t}}];return{restrict:"E",template:function(){return document.getElementById("ert-guests-tpl").innerHTML},controller:e,scope:{guests:"="}}}]),directives.directive("ertGuestsEdit",["$state","Guest","Util",function(e,t,n){function r(r,i,o){r.guest=angular.copy(r.masterGuest),r.submitting=!1,r.acceptDisabled=function(){return r.form.$invalid||angular.equals(r.guest,r.masterGuest)},r.onAccept=function(){r.submitting=!0,t.update(r.masterGuest,r.guest,function(){e.go("guests.show",{guestId:r.guest.id})},function(e){r.submitting=!1,n.fillErrors(r,e.data)})},r.onCancel=function(){e.go("guests.show",{guestId:r.guest.id})}}return{link:r,restrict:"E",template:function(){return document.getElementById("ert-guests-edit-tpl").innerHTML},scope:{masterGuest:"=guest"}}}]),directives.directive("ertGuestsHeader",["Guest",function(e){function t(t,n,r){t.exportFileName="clientes.xls",t.downloadGuests=function(){t.submitting=!0;var n=e.queryXLS().$promise;return n.then(function(){t.submitting=!1}),n}}return{restrict:"E",template:function(){return document.getElementById("ert-guests-header-tpl").innerHTML},link:t,scope:{}}}]),directives.directive("ertGuestsNew",["$state","Guest","Util",function(e,t,n){function r(r,i,o){r.guest={active:!0,address:[]},r.focus={onName:!0},r.submitting=!1,r.acceptDisabled=function(){return r.form.$invalid},r.onAccept=function(){r.submitting=!0,t.save(r.guest,function(t){e.go("guests.show",{guestId:t.id})},function(e){r.submitting=!1,n.fillErrors(r,e.data)})},r.onCancel=function(){e.go("guests")}}return{restrict:"E",template:function(){return document.getElementById("ert-guests-new-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertGuestsShow",["$state","Guest",function(e,t){function n(n,r,i,o){n.confirmDialog=!1;var a=function(e){return-1!=e.base.indexOf("guest_being_used")},s=function(e){return-1!=e.base.indexOf("has_current_account_payments")},c=function(e){o.setConfirmDialogCaption("Eliminar Cliente"),o.setAcceptCallbackConfirmDialog(function(){return l(e).then(o.showConfirmDialog(!1))}),o.setCancelCallbackConfirmDialog(function(){return o.showConfirmDialog(!1)}),o.showConfirmDialog(!0)},u=function(e){o.setAlertDialogCaption("Eliminar Cliente"),o.setAcceptCallbackAlertDialog(function(){return o.showAlertDialog(!1)}),o.showAlertDialog(!0)},l=function(n){var r=t.destroy(n,{force:!0});return r.$promise.then(function(){e.go("guests")}),r.$promise};n.confirmDestroyGuest=function(r){var i=t.destroy(r,null,function(){n.confirmDialog=!1,e.go("guests")},function(e){var t=e.data;n.confirmDialog=!1,s(t)?u(r):a(t)&&c(r)});return i.$promise},n.destroyGuest=function(e){n.confirmDialog=!0,n.confirmDialogFocus={onAccept:!0},n.onAcceptConfirmDialog=function(){return n.confirmDestroyGuest(e)}},n.onCancelConfirmDialog=function(){n.confirmDialog=!1}}return{link:n,restrict:"E",template:function(){return document.getElementById("ert-guests-show-tpl").innerHTML},scope:{guest:"="},require:"^ertGuests"}}]),directives.directive("ertGuestsSubtop",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-guests-subtop-tpl").innerHTML},scope:{}}}]),directives.directive("ertGuestsTable",[function(){function e(e,t,n){}return{link:e,restrict:"E",template:function(){return document.getElementById("ert-guests-table-tpl").innerHTML},scope:{guests:"="}}}]),directives.directive("ertIngredientCategories",["IngredientCategory",function(e){function t(t,n,r){t.categories=e.ingredientCategories}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-ingredient-categories-tpl").innerHTML}}}]),directives.directive("ertIngredientCategoriesEdit",["$state","IngredientCategory","Util",function(e,t,n){function r(r,i,o){r.submitting=!1,r.category=angular.copy(r.masterCategory),r.acceptDisabled=function(){return r.form.$invalid||r.submitting||angular.equals(r.category,r.masterCategory)},r.onAccept=function(){r.submitting=!0,t.update(r.masterCategory,r.category,function(){e.go("ingredientCategories.show",{ingredientCategoryId:r.category.id})},function(e){r.submitting=!1,n.fillErrors(r,e.data)})},r.onCancel=function(){e.go("ingredientCategories.show",{ingredientCategoryId:r.category.id})}}return{link:r,restrict:"E",template:function(){return document.getElementById("ert-ingredient-categories-edit-tpl").innerHTML},scope:{masterCategory:"=category"}}}]),directives.directive("ertIngredientCategoriesHeader",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-ingredient-categories-header-tpl").innerHTML},scope:{}}}]),directives.directive("ertIngredientCategoriesNew",["$state","IngredientCategory","Util",function(e,t,n){function r(r,i,o){r.ingredientCategories=t.ingredientCategories,r.submitting=!1,r.focus={onName:!0},r.acceptDisabled=function(){return r.form.$invalid||r.submitting},r.onAccept=function(){r.submitting=!0,t.save(r.category,function(t){e.go("ingredientCategories.show",{ingredientCategoryId:t.id})},function(e){r.submitting=!1,n.fillErrors(r,e.data)})},r.onCancel=function(){e.go("ingredientCategories")}}return{restrict:"E",template:function(){return document.getElementById("ert-ingredient-categories-new-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertIngredientCategoriesShow",["$state","$window","IngredientCategory",function(e,t,n){function r(t,r,i){t.confirmDialog=!1,t.isEmpty=function(e){return n.isEmpty(e.id)},t.confirmDestroyCategory=function(r){n.destroy(r,null,function(){t.confirmDialog=!1,e.go("ingredientCategories")})},t.destroyCategory=function(e){t.confirmDialog=!0,t.confirmDialogFocus={onAccept:!0},t.onAcceptConfirmDialog=function(){return t.confirmDestroyCategory(e)}},t.onCancelConfirmDialog=function(){t.confirmDialog=!1}}return{link:r,restrict:"E",template:function(){
return document.getElementById("ert-ingredient-category-show-tpl").innerHTML},scope:{category:"="}}}]),directives.directive("ertIngredientCategoriesTable",["$state","$window","Ingredient","IngredientCategory",function(e,t,n,r){function i(t,i,o){t.ingredientsCount={},t.confirmDialog=!1;var a=n.ingredients;for(var s in a){var c=a[s].ingredientCategoryId,u=t.ingredientsCount;u[c]?u[c]++:u[c]=1}t.confirmDestroyCategory=function(n){r.destroy(n,null,function(){t.confirmDialog=!1,e.go("ingredientCategories")})},t.destroyCategory=function(e){t.confirmDialog=!0,t.confirmDialogFocus={onAccept:!0},t.onAcceptConfirmDialog=function(){return t.confirmDestroyCategory(e)}},t.onCancelConfirmDialog=function(){t.confirmDialog=!1},t.isEmpty=function(e){return r.isEmpty(e.id)}}return{link:i,restrict:"E",template:function(){return document.getElementById("ert-ingredient-categories-table-tpl").innerHTML},scope:{categories:"="}}}]),directives.directive("ertIngredients",["IngredientCategory",function(e){var t=function(t,n,r){t.ingredientCategories=e.ingredientCategories},n=["$scope",function(e){this.showConfirmDialog=function(t){e.confirmDialog=t},this.setConfirmDialogCaption=function(t){e.captionConfirmDialog=t},this.setAcceptCallbackConfirmDialog=function(t){e.onAcceptConfirmDialog=t},this.setCancelCallbackConfirmDialog=function(t){e.onCancelConfirmDialog=t},this.currentCategory=function(){return e.ingredientCategory}}];return{restrict:"E",link:t,controller:n,template:function(){return document.getElementById("ert-ingredients-tpl").innerHTML},scope:{ingredients:"=",ingredientCategory:"="}}}]),directives.directive("ertIngredientsEdit",["$state","Ingredient","Unit","Util","IngredientCategory","Provider",function(e,t,n,r,i,o){function a(a,s,c){a.providers=o.providers,a.ingredient=angular.copy(a.masterIngredient),a.units=n.units,a.ingredientCategories=i.ingredientCategories,a.submitting=!1,a.acceptDisabled=function(){return a.form.$invalid||a.submitting||angular.equals(a.ingredient,a.masterIngredient)},a.onAccept=function(){a.submitting=!0,t.update(a.masterIngredient,a.ingredient,function(){e.go("ingredients.show",{ingredientId:a.ingredient.id})},function(e){a.submitting=!1,r.fillErrors(a,e.data)})},a.onCancel=function(){e.go("ingredients.show",{ingredientId:a.ingredient.id})}}return{link:a,restrict:"E",template:function(){return document.getElementById("ert-ingredients-edit-tpl").innerHTML},scope:{masterIngredient:"=ingredient"}}}]),directives.directive("ertIngredientsHeader",["Ingredient",function(e){function t(t,n,r){t.exportFileName="ingredientes.xls",t.downloadIngredients=function(){t.submitting=!0;var n=e.queryXLS().$promise;return n.then(function(){t.submitting=!1}),n}}return{restrict:"E",template:function(){return document.getElementById("ert-ingredients-header-tpl").innerHTML},link:t,scope:{}}}]),directives.directive("ertIngredientsNew",["$state","Ingredient","Unit","Util","IngredientCategory","Provider",function(e,t,n,r,i,o){function a(a,s,c,u){a.providers=o.providers,a.units=n.units,a.ingredientCategories=i.ingredientCategories,a.focus={onName:!0},a.ingredient={},u.currentCategory()&&(a.ingredient.ingredientCategoryId=u.currentCategory().id),a.submitting=!1,a.acceptDisabled=function(){return a.form.$invalid},a.onAccept=function(){a.submitting=!0,t.save(a.ingredient,function(t){e.go("ingredients.show",{ingredientId:t.id})},function(e){a.submitting=!1,r.fillErrors(a,e.data)})},a.onCancel=function(){e.go("ingredients")},a.$watch(function(){return u.currentCategory()},function(e,t){angular.equals(t,e)||e&&(a.ingredient.ingredientCategoryId=e.id)})}return{restrict:"E",template:function(){return document.getElementById("ert-ingredients-new-tpl").innerHTML},link:a,scope:{},require:"^ertIngredients"}}]),directives.directive("ertIngredientsShow",["$state","Unit","Ingredient","Product","IngredientCategory","Provider",function(e,t,n,r,i,o){function a(a,s,c,u){a.providers=o.providers,a.units=t.units,a.products=r.products,a.ingredientCategories=i.ingredientCategories,a.confirmDialog=!1;var l=function(e){return-1!=e.base.indexOf("ingredient_being_used")},d=function(e){u.setConfirmDialogCaption("Eliminar Ingrediente"),u.setAcceptCallbackConfirmDialog(function(){return f(e).then(u.showConfirmDialog(!1))}),u.setCancelCallbackConfirmDialog(function(){return u.showConfirmDialog(!1)}),u.showConfirmDialog(!0)},f=function(t){var r=n.destroy(t,{force:!0});return r.$promise.then(function(){e.go("ingredients")}),r.$promise};a.confirmDestroyIngredient=function(t){var r=n.destroy(t,null,function(){a.confirmDialog=!1,e.go("ingredients")},function(e){var n=e.data;a.confirmDialog=!1,l(n)&&d(t)});return r.$promise},a.destroyIngredient=function(e){a.confirmDialog=!0,a.confirmDialogFocus={onAccept:!0},a.onAcceptConfirmDialog=function(){return a.confirmDestroyIngredient(e)}},a.onCancelConfirmDialog=function(){a.confirmDialog=!1}}return{link:a,restrict:"E",template:function(){return document.getElementById("ert-ingredients-show-tpl").innerHTML},scope:{ingredient:"="},require:"^ertIngredients"}}]),directives.directive("ertIngredientsSidebar",[function(){function e(e,t,n){e.setModel=function(t){e.model=t}}return{restrict:"E",template:function(){return document.getElementById("ert-ingredients-sidebar-tpl").innerHTML},link:e,scope:{items:"=",model:"="}}}]),directives.directive("ertIngredientsTable",["$filter","Unit","Ingredient",function(e,t,n){function r(r,i,o){r.units=t.units,r.filteredIngredients=[];var a=function(){var t=n.ingredients;return t=e("object2Array")(t)},s=function(e,t){return e.filter(function(e){return e.ingredientCategoryId===t.id})};r.showTable=function(){return r.filteredIngredients.length>0},r.$watch("ingredientCategory",function(t,n){if(!angular.equals(n,t))if(t){var i=s(a(),t);r.filteredIngredients=e("localizedOrderBy")(i,"name")}else r.filteredIngredients=[]}),r.$watch(function(){return n.ingredients},function(){if(r.ingredientCategory){var t=s(a(),r.ingredientCategory);r.filteredIngredients=e("localizedOrderBy")(t,"name")}},!0)}return{link:r,restrict:"E",template:function(){return document.getElementById("ert-ingredients-table-tpl").innerHTML},scope:{ingredients:"=",ingredientCategory:"="}}}]),directives.directive("ertNotifications",["NotificationArray","Notification",function(e,t){function n(n,r,i){n.notifications=e.getItems();var o=1,a=!1;n.addNextPageData=function(){a||(a=!0,t.query({page:++o},function(t){e.append(t),a=!1}))}}return{link:n,restrict:"E",template:function(){return document.getElementById("ert-notifications-tpl").innerHTML}}}]),directives.directive("ertNotificationsShow",["Notification",function(e){return{restrict:"E",template:function(){return document.getElementById("ert-notifications-show-tpl").innerHTML},scope:{notification:"="}}}]),directives.directive("ertNotificationsTable",["Notification","NotificationArray",function(e,t){var n=function(e,t,n){e.trCss=function(e){var t;return t={},Object.defineProperty(t,"status-notification-"+e.type,{value:!0,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t,"unread",{value:!e.readAt,configurable:!0,enumerable:!0,writable:!0}),t}};return{link:n,restrict:"E",scope:{notifications:"="},template:function(){return document.getElementById("ert-notifications-table-tpl").innerHTML}}}]),directives.directive("ertPaymentsFilter",["Guest",function(e){function t(t,n,r){t.guests=e.guests,t.model={p:!1},t.$watch("model",function(e,n){e!==n&&t.onChange()},!0)}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-payments-filter-tpl").innerHTML},scope:{model:"=ngModel",onChange:"&"}}}]),directives.directive("ertPaymentsHeader",["Payment","Util",function(e,t){function n(n,r,i){n.exportFileName="cuenta-corriente.xls",n.downloadPayments=function(){var r=e.queryXLS(n.filter).$promise;return n.submitting=!0,r.then(function(){n.submitting=!1},function(e){t.fillErrors(n,e.data),n.alertDialog=!0,n.captionAlertDialog="Exportar Cuenta Corriente",n.onAcceptAlertDialog=function(){n.alertDialog=!1,n.baseErrors={}},n.submitting=!1}),r}}return{restrict:"E",template:function(){return document.getElementById("ert-payments-header-tpl").innerHTML},link:n,scope:{filter:"="}}}]),directives.directive("ertPaymentsShow",["$state","Guest","Table","Product","Sale","Payment",function(e,t,n,r,i,o){function a(e,a,s){e.guests=t.guests,e.tables=n.tables,e.products=r.products,e.submitting=!1,e.showDetails=!1,e.confirmDialog=!1,e.subtotal=function(e){return i.subtotal(e)},e.total=function(e){return i.total(e)},e.calculateDiscount=function(e,t){return i.discountAmount(e,t)},e.completePayment=function(){e.confirmDialog=!0,e.confirmDialogFocus={onAccept:!0}},e.onCancelConfirmDialog=function(){e.confirmDialog=!1},e.onAcceptConfirmDialog=function(){e.confirmDialog=!1,e.submitting=!0,o.complete(e.payment,function(){e.$emit("payments-data-update"),e.submitting=!1,o.get(e.payment.id)})}}return{link:a,restrict:"E",template:function(){return document.getElementById("ert-payments-show-tpl").innerHTML},scope:{payment:"="}}}]),directives.directive("ertPaymentsSummary",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-payments-summary-tpl").innerHTML},link:e,scope:{paymentsSummary:"="}}}]),directives.directive("ertPaymentsTable",["$state","Guest",function(e,t){function n(e,n,r){e.guests=t.guests}return{restrict:"E",template:function(){return document.getElementById("ert-payments-table-tpl").innerHTML},link:n,scope:{payments:"="}}}]),directives.directive("ertProductCategories",[function(){function e(e,t,n){}return{restrict:"E",link:e,template:function(){return document.getElementById("ert-product-categories-tpl").innerHTML},scope:{categories:"="}}}]),directives.directive("ertProductCategoriesEdit",["$state","ProductCategory","Kitchen","Util","Tax",function(e,t,n,r,i){function o(o,a,s){o.submitting=!1,o.kitchens=n.kitchens,o.taxes=i.taxes,o.category=angular.copy(o.masterCategory),o.productCategories=t.productCategories,o.isChild=null!==o.category.parentId,o.taxesIds=function(e){return e.taxes.map(function(e){return e.id})},o.toggleTaxesSelection=function(e){var t=o.taxesIds(o.category).indexOf(e.id);t>-1?o.category.taxes.splice(t,1):o.category.taxes.push(e)},o.acceptDisabled=function(){return o.form.$invalid||o.submitting||angular.equals(o.category,o.masterCategory)},o.onAccept=function(){o.submitting=!0,t.update(o.masterCategory,o.category,function(){o.category.parentId!==o.masterCategory.parentId&&(t.get(o.category.parentId),t.get(o.masterCategory.parentId)),e.go("productCategories.show",{productCategoryId:o.category.id})},function(e){o.submitting=!1,r.fillErrors(o,e.data)})},o.onCancel=function(){e.go("productCategories.show",{productCategoryId:o.category.id})},o.resetParentCategory=function(){o.category.parentId=null},o.allowedCategories=function(e){return null===e.parentId&&e.id!==o.category.id},o.subcategories=function(){return t.subcategories(o.category.id)}}return{link:o,restrict:"E",template:function(){return document.getElementById("ert-product-categories-edit-tpl").innerHTML},scope:{masterCategory:"=category"}}}]),directives.directive("ertProductCategoriesHeader",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-product-categories-header-tpl").innerHTML},scope:{}}}]),directives.directive("ertProductCategoriesNew",["$state","$stateParams","ProductCategory","Util","Kitchen",function(e,t,n,r,i){function o(o,a,s){o.category={},o.kitchens=i.kitchens,o.productCategories=n.productCategories,o.submitting=!1,o.focus={onName:!0},o.acceptDisabled=function(){return o.form.$invalid||o.submitting},o.onAccept=function(){o.submitting=!0,n.save(o.category,function(t){t.parentId&&n.get(t.parentId),e.go("productCategories.show",{productCategoryId:t.id})},function(e){o.submitting=!1,r.fillErrors(o,e.data)})},o.onCancel=function(){e.go("productCategories")},o.resetParentCategory=function(){o.category.parentId=null},t.parentId&&(o.isChild=!0,o.category.parentId=t.parentId)}return{restrict:"E",template:function(){return document.getElementById("ert-product-categories-new-tpl").innerHTML},link:o,scope:{}}}]),directives.directive("ertProductCategoriesShow",["$window","$state","ProductCategory","Kitchen","Tax",function(e,t,n,r,i){function o(e,o,a){e.kitchens=r.kitchens,e.taxes=i.taxes,e.confirmDialog=!1,e.isEmpty=function(e){return n.isEmpty(e.id)},e.confirmDestroyCategory=function(r){n.destroy(r,null,function(){e.confirmDialog=!1,t.go("productCategories")})},e.destroyCategory=function(t){e.confirmDialog=!0,e.confirmDialogFocus={onAccept:!0},e.onAcceptConfirmDialog=function(){return e.confirmDestroyCategory(t)}},e.onCancelConfirmDialog=function(){e.confirmDialog=!1},e.isSubcategory=function(){return n.isSubcategory(e.category.id)}}return{link:o,restrict:"E",template:function(){return document.getElementById("ert-product-category-show-tpl").innerHTML},scope:{category:"="}}}]),directives.directive("ertProductCategoriesTable",["$window","$filter","Kitchen","Product","ProductCategory","$state",function(e,t,n,r,i,o){function a(e,a,s){e.confirmDialog=!1;var c=function(){var e=r.products;return e=t("object2Array")(e)},u=function(){angular.forEach(c(),function(t){var n=t.productCategoryId,r=e.categories[n].parentId,i=e.productsCount;i[n]?i[n]++:i[n]=1,r&&(i[r]?i[r]++:i[r]=1)})};e.productsCount={},e.kitchens=n.kitchens,u(),e.subcategories=function(e){return i.subcategories(e)},e.confirmDestroyCategory=function(t){i.destroy(t,null,function(){e.confirmDialog=!1,o.go("productCategories")})},e.destroyCategory=function(t){e.confirmDialog=!0,e.confirmDialogFocus={onAccept:!0},e.onAcceptConfirmDialog=function(){return e.confirmDestroyCategory(t)}},e.onCancelConfirmDialog=function(){e.confirmDialog=!1},e.isEmpty=function(e){return i.isEmpty(e.id)},e.$watch(function(){return i.productCategories},function(t,n){t!==n&&(e.productsCount={},u())},!0)}return{link:a,restrict:"E",template:function(){return document.getElementById("ert-product-categories-table-tpl").innerHTML},scope:{categories:"="}}}]),directives.directive("ertDialogProductsEditIcon",["$state","$window","Product",function(e,t,n){function r(r,i,o){r.product=angular.copy(r.masterProduct),r.bgColor=Number(r.product.iconName.split("-")[2]);var a=function(e){27===e.keyCode&&(e.preventDefault(),r.onCancel())};t.addEventListener("keydown",a),r.$on("$destroy",function(){t.removeEventListener("keydown",a)}),r.setBgColor=function(e){var t=r.product.iconName.split("-");t[2]=10>e?"0"+e:e.toString(),r.bgColor=e,r.product.iconName=t.join("-")},r.setPosition=function(e){var t=r.product.iconName.split("-");t.splice(0,2,e),r.product.iconName=t.join("-")},r.onCancel=function(){e.go("products.show",{productId:r.product.id})},r.onAccept=function(){return n.update(r.masterProduct,r.product,function(){e.go("products.show",{productId:r.product.id})}).$promise},r.onClose=r.onCancel}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-dialog-products-edit-icon-tpl").innerHTML},scope:{masterProduct:"=product"}}}]),directives.directive("ertProductsShowEdit",["$state","ProductCategory","Product","Kitchen","Provider","Util",function(e,t,n,r,i,o){function a(a,s,c){if(a.productCategories=t.productCategories,a.kitchens=r.kitchens,a.providers=i.providers,a.product=angular.copy(a.masterProduct),a.submitting=!1,a.acceptDisabled=function(){return a.form.$invalid||a.submitting||angular.equals(a.product,a.masterProduct)},a.onAccept=function(){a.submitting=!0,n.update(a.masterProduct,a.product,function(){e.go("products.show",{productId:a.product.id})},function(e){a.submitting=!1,o.fillErrors(a,e.data)})},a.onCancel=function(){e.go("products.show",{productId:a.product.id})},a.setSubcategories=function(e){e&&(a.setProductCategory(e),a.subcategories=t.subcategories(e))},a.setProductCategory=function(e){null===e&&a.productCategoryId?a.product.productCategoryId=a.productCategoryId:a.product.productCategoryId=e},t.isSubcategory(a.product.productCategoryId)){var u=a.productCategories[a.product.productCategoryId].parentId;a.productCategoryId=u,a.productSubcategoryId=a.product.productCategoryId,a.subcategories=t.subcategories(u)}else a.productCategoryId=a.product.productCategoryId,a.subcategories=t.subcategories(a.product.productCategoryId)}return{restrict:"E",template:function(){return document.getElementById("ert-products-show-edit-tpl").innerHTML},link:a,scope:{masterProduct:"=product"}}}]),directives.directive("ertProductsShowEditProportions",["$filter","$state","Ingredient","Unit","Product",function(e,t,n,r,i){function o(o,a,s){o.units=r.units,o.ingredients=n.ingredients,o.ingredientsArray=e("object2Array")(n.ingredients),o.focus={onIngredientSearch:!0},o.onSelectItem=function(){o.focus.onNewProportionAmount=!0},o.product=angular.extend({proportions:[]},angular.copy(o.masterProduct)),o.proportionCost=function(e){return i.proportionCost(e)},o.onNewProportionFormSubmit=function(){o.newIngredient&&o.newProportionForm.$valid&&(u(o.newIngredient),c(),o.newProportionForm.$setPristine(),o.focus.onIngredientSearch=!0)};var c=function(){o.newProportionAmount=null,o.newIngredient=null},u=function(e){var t={amount:o.newProportionAmount,ingredientId:e.id};o.product.proportions.push(t)};o.delProportion=function(e){var t=o.product.proportions;t.splice(t.indexOf(e),1)},o.acceptDisabled=function(){return angular.equals(o.product,o.masterProduct)},o.onAccept=function(){return i.update(o.masterProduct,o.product,function(){t.go("products.show",{productId:o.product.id})}).$promise},o.onCancel=function(){t.go("products.show",{productId:o.product.id})}}return{restrict:"E",template:function(){return document.getElementById("ert-products-show-edit-proportions-tpl").innerHTML},link:o,scope:{masterProduct:"=product"}}}]),directives.directive("ertProductIcon",[function(){function e(e,t,n){e.iconName||(e.iconName="00-00-00"),e.iconId=function(){return"#product-icon-"+r(e.iconName)},e.iconClass=function(){return"product-color-"+i(e.iconName)};var r=function(e){return e&&e.substr(0,5)},i=function(e){return e&&Number(e.substr(6,7)).toString()}}return{restrict:"E",link:e,template:function(){return document.getElementById("ert-product-icon-tpl").innerHTML},scope:{iconName:"="}}}]),directives.directive("ertProductInfo",["ProductCategory","Product","Provider","Kitchen",function(e,t,n,r){function i(i,o,a){i.kitchens=r.kitchens,i.providers=n.providers,i.productCost=function(e){return t.cost(e)},i.categoriesNames=function(t){var n=e.categories(t.productCategoryId);return n.map(function(e){return e.name})}}return{restrict:"E",template:function(){return document.getElementById("ert-product-info-tpl").innerHTML},link:i,scope:{product:"="}}}]),directives.directive("ertProductNew",["$state","ProductCategory","Product","Kitchen","Provider","Util",function(e,t,n,r,i,o){function a(a,s,c){a.productCategories=t.productCategories,a.kitchens=r.kitchens,a.providers=i.providers,a.product={active:!0,ignoreAvailability:!1},a.submitting=!1,a.focus={onName:!0},a.acceptDisabled=function(){return a.form.$invalid||a.submitting},a.onAccept=function(){a.submitting=!0,n.save(a.product,function(t){e.go("products.show",{productId:t.id})},function(e){a.submitting=!1,o.fillErrors(a,e.data)})},a.onCancel=function(){e.go("products")},a.setSubcategories=function(e){e&&(a.setProductCategory(e),a.subcategories=t.subcategories(e))},a.setProductCategory=function(e){null===e&&a.productCategoryId?a.product.productCategoryId=a.productCategoryId:a.product.productCategoryId=e}}return{restrict:"E",template:function(){return document.getElementById("ert-product-new-tpl").innerHTML},link:a,scope:{}}}]),directives.directive("ertProductProportions",["Ingredient","Unit","Product",function(e,t,n){function r(r,i,o){r.products=n.products,r.ingredients=e.ingredients,r.units=t.units,r.proportionCost=function(e){return n.proportionCost(e)},r.productProportionCost=function(e){return n.productProportionCost(e)}}return{restrict:"E",template:function(){return document.getElementById("ert-product-proportions-tpl").innerHTML},link:r,scope:{product:"="}}}]),directives.directive("ertProducts",["ProductCategory",function(e){var t=function(t,n,r){t.productCategories=e.productCategories},n=["$scope",function(e){this.showAlertDialog=function(t){e.alertDialog=t},this.setAlertDialogCaption=function(t){e.captionAlertDialog=t},this.setAcceptCallbackAlertDialog=function(t){e.onAcceptAlertDialog=t}}];return{restrict:"E",template:function(){return document.getElementById("ert-products-tpl").innerHTML},controller:n,link:t,scope:{products:"=",productSearch:"=",productCategory:"="}}}]),directives.directive("ertProductsFilter",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-products-filter-tpl").innerHTML},scope:{model:"=",focus:"="}}}]),directives.directive("ertProductsHeader",["Product","Ingredient","ProductCategory","IngredientCategory","FileUploader",function(e,t,n,r,i){function o(i,o,a){i.showImportProductsDialog=!1,i.exportFileName="productos.xls",i.importErrorDialog=!1,i.importSuccessDialog=!1,i.downloadProducts=function(){i.submitting=!0;var t=e.queryXLS().$promise;return t.then(function(){i.submitting=!1}),t},i.onCancelImportProductsDialog=function(){s()},i.onAcceptImportProductsDialog=function(){return i.productsImportData?e["import"](i.productsImportData).$promise.then(function(){return Promise.all([n.query().$promise,r.query().$promise,e.query().$promise,t.query().$promise]).then(function(){s(),i.importSuccessDialog=!0})})["catch"](function(e){s(),i.importErrorDialog=!0,i.errors=e.data}):void s()},handleFileSelect=function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(){i.productsImportData=new Uint8Array(n.result)},n.readAsArrayBuffer(t)};var s=function(){c().value=null,i.productsImportData=null,i.showImportProductsDialog=!1},c=function(){return document.getElementById("input-import-products")};c().addEventListener("change",handleFileSelect,!1)}return{restrict:"E",template:function(){return document.getElementById("ert-products-header-tpl").innerHTML},link:o,scope:{}}}]),directives.directive("ertProductsSearch",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-products-search-tpl").innerHTML},scope:{model:"=",focus:"="}}}]),directives.directive("ertProductsShow",["$state","Product",function(e,t){function n(n,r,i,o){n.confirmDialog=!1,n.editProportions=function(){e.go("products.show.editProportions",{productId:n.product.id})},n.editProducts=function(){e.go("products.show.editProducts",{productId:n.product.id})};var a=function(e){return-1!=e.base.indexOf("product_being_used")},s=function(e){o.setAlertDialogCaption("Eliminar Producto"),o.setAcceptCallbackAlertDialog(function(){return o.showAlertDialog(!1)}),o.showAlertDialog(!0)};n.confirmDestroyProduct=function(r){var i=t.destroy(r,null,function(){n.confirmDialog=!1,e.go("products")},function(e){var t=e.data;n.confirmDialog=!1,a(t)&&s(r)});return i.$promise},n.destroyProduct=function(e){n.confirmDialog=!0,n.confirmDialogFocus={onAccept:!0},n.onAcceptConfirmDialog=function(){return n.confirmDestroyProduct(e)}},n.onCancelConfirmDialog=function(){n.confirmDialog=!1}}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-products-show-tpl").innerHTML},scope:{product:"="},require:"^ertProducts"}}]),directives.directive("ertProductsShowEditProducts",["$state","$filter","Product","Unit",function(e,t,n,r){function i(i,o,a){i.units=r.units,i.products=n.products,i.productsArray=t("object2Array")(n.products).filter(function(e){return i.masterProduct.id!==e.id&&0===e.productProportions.length}),i.focus={onProductSearch:!0},i.onSelectItem=function(){i.focus.onNewProportionAmount=!0},i.product=angular.extend({productProportions:[]},angular.copy(i.masterProduct)),i.productProportionCost=function(e){return n.productProportionCost(e)},i.onNewProportionFormSubmit=function(){i.newProduct&&i.newProportionForm.$valid&&(c(i.newProduct),s(),i.newProportionForm.$setPristine(),i.focus.onProductSearch=!0)};var s=function(){i.newProportionAmount=null,i.newProduct=null},c=function(e){var t={amount:i.newProportionAmount,bundledProductId:e.id};i.product.productProportions.push(t)};i.delProportion=function(e){var t=i.product.productProportions;t.splice(t.indexOf(e),1)},i.acceptDisabled=function(){return i.updateProportionForm.$invalid||angular.equals(i.product,i.masterProduct)},i.onAccept=function(){return n.update(i.masterProduct,i.product,function(){e.go("products.show",{productId:i.product.id})}).$promise},i.onCancel=function(){e.go("products.show",{productId:i.product.id})}}return{restrict:"E",template:function(){return document.getElementById("ert-products-show-edit-products-tpl").innerHTML},link:i,scope:{masterProduct:"=product"}}}]),directives.directive("ertProductsSidebar",["ProductCategory",function(e){function t(t,n,r){t.setModelAndResetSearch=function(e){t.model=e,t.productSearch=null},t.subcategories=function(t){return e.subcategories(t)}}return{restrict:"E",template:function(){return document.getElementById("ert-products-sidebar-tpl").innerHTML},link:t,scope:{items:"=",model:"=",productSearch:"="}}}]),directives.directive("ertProductsTable",["$filter","Product","ProductCategory",function(e,t,n){function r(r,i,o){r.focus={onProductsSearch:!0},r.filteredProducts=[],r.tableOptions={},r.tableOptions.showInactive=!1;var a=function(){var n=t.products;return n=e("object2Array")(n)},s=function(t){return t.length<2?t:e("localizedOrderBy")(t,"name")},c=function(e,t){var i=void 0!==arguments[2]?arguments[2]:!1,o=[];return i&&(o=n.subcategories(t.id).map(function(e){return e.id})),e.filter(function(e){return(e.productCategoryId===t.id||-1!==o.indexOf(e.productCategoryId))&&(e.active||r.tableOptions.showInactive)})},u=function(t,n){var i=a();i=c(i,t,!0),i=e("filter")(i,n),i=s(i),r.filteredProducts=i},l=function(t){if(t.length>2){var n=a();n=e("productFilter")(n,t,r.showInactive),n=s(n),r.filteredProducts=n}else r.filteredProducts=[]};r.productCost=function(e){return t.cost(e)},r.toggleProductFavourite=function(e){t.update(e,{favourite:!e.favourite})},r.toggleShowInactive=function(){var t=c(a(),r.productCategory);r.filteredProducts=e("localizedOrderBy")(t,"name")},r.showTable=function(){return r.filteredProducts.length>0},r.$watch("productCategory",function(t,n){if(!angular.equals(n,t))if(t){r.focus={onProductsFilter:!0};var i=c(a(),t);r.filteredProducts=e("localizedOrderBy")(i,"name")}else r.focus={onProductsSearch:!0},r.filteredProducts=[]}),r.$watchCollection(function(){return t.products},function(){if(r.productCategory)if(r.search)u(r.productCategory,r.search);else{var t=c(a(),r.productCategory);r.filteredProducts=e("localizedOrderBy")(t,"name")}else r.search&&l(r.search)}),r.$watch("search",function(e,t){angular.equals(t,e)||null!==e&&(r.productCategory?u(r.productCategory,e):l(e))})}return{restrict:"E",template:function(){return document.getElementById("ert-products-table-tpl").innerHTML},link:r,scope:{products:"=",productCategory:"=",search:"=productSearch"}}}]),directives.directive("ertSales",["$state","$timeout","Sale","SalesSummary","Util","Product",function(e,t,n,r,i,o){var a=5e3,s=function(t,s,c){o.query({a:-1}),t.dateFilter={},t.optionsFilter={},t.sales={},t.salesSummary={},t.max_rows_limit=a,t.exportFileName="ventas.xls";var u=1,l=!1,d=function(){return angular.extend({},t.dateFilter,t.optionsFilter)};t.addNextPageData=function(){if(!l){l=!0;var e=d(),r=angular.extend({page:++u},e);t.sales=n.query(r,function(){l=!1})}},t.loadData=function(){u=1;var i=d();t.sales=n.query(i,n.cleanup),t.salesSummary=r.query(i),e.go("sales")},t.downloadSales=function(){t.submitting=!0;var e=d(),r=n.queryXLS(e).$promise;return r.then(function(){t.submitting=!1},function(e){i.fillErrors(t,e.data),t.alertDialog=!0,t.captionAlertDialog="Exportar Ventas",t.onAcceptAlertDialog=function(){t.alertDialog=!1,t.baseErrors={}},t.submitting=!1}),r},t.dateColumns=[{id:0,label:"Hora Inicio"},{id:1,label:"Hora Cierre"}]},c=["$scope",function(e){this.setScopeVar=function(t,n){e[t]=n},this.showAlertDialog=function(t){e.alertDialog=t},this.setAlertDialogCaption=function(t){e.captionAlertDialog=t},this.setAcceptCallbackAlertDialog=function(t){e.onAcceptAlertDialog=t}}];return{restrict:"E",template:function(){return document.getElementById("ert-sales-tpl").innerHTML},controller:c,link:s}}]),directives.directive("ertSalesEdit",["$state","Sale",function(e,t){function n(n,r,i){n.showSale=function(){e.go("sales.show",{saleId:n.sale.id})},n.isLocalSale=function(){return n.sale.saleTypeId===t.TYPES.LOCAL},n.isTakeAwaySale=function(){return n.sale.saleTypeId===t.TYPES.TAKE_AWAY}}return{link:n,restrict:"E",template:function(){return document.getElementById("ert-sales-edit-tpl").innerHTML},scope:{sale:"="}}}]),directives.directive("ertSalesEditPayments",["$state","PaymentType","Sale","Payment","Util","$timeout",function(e,t,n,r,i,o){function a(n,i,a,s){n.paymentTypes=t.paymentTypes,n.paymentTypeDisabledForSale=function(e){return!n.sale.guestId&&e.isCurrentAccount},n.payments=angular.copy(n.masterPayments),n.submitting=!1,n.onAccept=function(){n.submitting=!0,n.updatePayments().then(function(){n.submitting=!1,e.go("sales.show",{saleId:n.sale.id})},function(e){o(function(){n.submitting=!1,c()})})},n.updatePayments=function(){return n.payments.reduce(function(e,t,i){var o=n.masterPayments[i];return e.then(function(){return r.update(o,t).$promise})},Promise.resolve())},n.onCancel=function(){e.go("sales.show",{saleId:n.sale.id})},n.acceptDisabled=function(){return n.form.$invalid||n.submitting||angular.equals(n.payments,n.masterPayments)};var c=function(){s.setAlertDialogCaption("Modificar Pago"),s.setAcceptCallbackAlertDialog(function(){s.showAlertDialog(!1),s.setScopeVar("baseErrors",{})}),s.setScopeVar("baseErrors",{unpaid_payments:!0}),s.showAlertDialog(!0)}}return{restrict:"E",template:function(){return document.getElementById("ert-sales-edit-payments-tpl").innerHTML},link:a,scope:{masterPayments:"=payments",sale:"="},require:"^ertSales"}}]),directives.directive("ertSalesFilter",["PaymentType","User","SaleState","SaleType","Guest",function(e,t,n,r,i){function o(o,a,s){o.$watch("model",function(e,t){e!==t&&o.onChange()},!0),o.paymentTypes=e.paymentTypes,o.waiters=t.waiters,o.guests=i.guests,o.saleStates=n.saleStates,o.saleTypes=r.saleTypes}return{restrict:"E",link:o,template:function(){return document.getElementById("ert-sales-filter-tpl").innerHTML},scope:{model:"=ngModel",onChange:"&"}}}]),directives.directive("ertSalesShow",["$state","$window","Sale","Guest","Setting","FiscalPrinter","PrinterJob","Session",function(e,t,n,r,i,o,a,s){function c(c,u,l){c.confirmDialog=!1,c.hideDialogFiscalReceipt=function(){c.showDialogFiscalReceipt=!1},c.fiscalPrinterAvailable=!1,c.fiscalOptions={};i.pluck("locale");i.fetch("fiscal_protocol").then(function(e){c.fiscalPrinterAvailable=e.value}),c.electronicInvoiceAvailable=[1,13877,19562,1965,8116,17685].indexOf(s.getTokenVal("ai"))>-1,c.paymentMethods=[{value:"01 Efectivo",label:"01 Efectivo"},{value:"02 Cheque nominativo",label:"02 Cheque nominativo"},{value:"03 Transf. Electrónica de Fondos",label:"03 Transf. Electrónica de Fondos"},{value:"04 Tarjeta de Crédito",label:"04 Tarjeta de Crédito"},{value:"05 Monedero Eletrónico",label:"05 Monedero Electrónico"},{value:"06 Dinero Electrónico",label:"06 Dinero Electrónico"},{value:"08 Vales de Despensa",label:"08 Vales de Despensa"},{value:"28 Tarjeta de Débito",label:"28 Tarjeta de Débito"},{value:"29 Tarjeta de Servicio",label:"29 Tarjeta de Servicio"},{value:"99 Otros",label:"99 Otros"}],c.onIconPrintFiscalClick=function(){c.showDialogFiscalReceipt=!0},c.iconPrintFiscalDisabled=function(e){var t=e.additions.filter(function(e){return!e.canceled}).length,r=!1;return"es-CL"===i.pluck("locale")&&(r=e.lastReceipt),r||e.saleStateId!==n.STATES.CLOSED||0===t},c.onIconPrintControlClick=function(e){return a.printControlReceipt(e)},c.iconPrintControlDisabled=function(e){return e.saleStateId===n.STATES.CANCELED;
},c.onIconPrintOrderClick=function(e){var t=e.additions.filter(function(e){return!e.canceled});return a.printKitchenReceipt(e,t)},c.iconPrintOrderDisabled=function(e){var t=e.additions.filter(function(e){return!e.canceled}).length;return e.saleStateId===n.STATES.CANCELED||0===t},c.onIconEditSaleClick=function(t){return e.go("sales.edit",{saleId:t.id})},c.iconEditSaleDisabled=function(e){return e.saleStateId!==n.STATES.CLOSED},c.onConfirmIconCancelSaleClick=function(e){return c.confirmDialog=!1,n.cancel(e)},c.onIconCancelSaleClick=function(e){c.confirmDialog=!0,c.confirmDialogFocus={onAccept:!0},c.onAcceptConfirmDialog=function(){return c.onConfirmIconCancelSaleClick(e)}},c.onCancelConfirmDialog=function(){c.confirmDialog=!1},c.iconCancelSaleDisabled=function(e){return e.saleStateId!==n.STATES.CLOSED},c.onIconEditPaymentsClick=function(t){return e.go("sales.show.editPayments",{saleId:t.id})},c.iconEditPaymentsDisabled=function(e){return e.saleStateId!==n.STATES.CLOSED},c.onPrintFiscalDialogAccept=function(){return o.printReceipt(c.sale,c.sale.payments,c.fiscalOptions).then(function(e){c.resetFiscalOptions(),c.showPrintFiscalDialog=!1})["catch"](function(e){alert(e.message)})},c.onIconIssueElectronicInvoice=function(){c.showIssueElectronicInvoiceDialog=!0},c.iconIssueElectronicInvoiceDisabled=function(e){return!1},c.onPrintFiscalDialogCancel=function(){c.showPrintFiscalDialog=!1,c.resetFiscalOptions()},c.issueElectronicInvoice=function(e,r){var i=n.issueElectronicInvoice(e,r).$promise;return i.then(function(e){c.showIssueElectronicInvoiceDialog=!1;var n=t.document.createElement("a");n.href="data:application/pdf;base64,"+e.data,n.download=e.filename,t.document.body.appendChild(n),n.click(),t.document.body.removeChild(n),delete n,c.resetElectronicInvoiceData()},function(e){console.log(e)}),i},c.issueElectronicInvoiceCancel=function(){c.showIssueElectronicInvoiceDialog=!1,c.resetElectronicInvoiceData()},c.onClickAddAddress=function(){c.showAddressFields=!0,c.sale.guestId&&addGuestAddress(c.sale.guestId)},c.resetFiscalOptions=function(){},c.resetElectronicInvoiceData=function(){if(c.electronicInvoiceData={paymentMethod:"Efectivo",receiverAddress:{},description:"Consumo de Alimentos"},c.sale.guestId){var e=r.guests[c.sale.guestId];c.electronicInvoiceData.receiverFiscalNumber=e.fiscalNumber,c.electronicInvoiceData.receiverName=e.name}},addGuestAddress=function(e){var t=r.guests[e];if(c.electronicInvoiceData.receiverAddress.calle=[t.address[0],t.address[1],t.address[2]].join(" ").trim(),t.address[3]){var n=t.address[3].trim().split(",");c.electronicInvoiceData.receiverAddress.colonia=n[0].trim(),c.electronicInvoiceData.receiverAddress.localidad=n[1].trim(),c.electronicInvoiceData.receiverAddress.municipio=n[2].trim(),c.electronicInvoiceData.receiverAddress.estado=n[3].trim(),c.electronicInvoiceData.receiverAddress.cp=n[4].trim()}},c.resetFiscalOptions(),c.resetElectronicInvoiceData()}return{link:c,restrict:"E",template:function(){return document.getElementById("ert-sales-show-tpl").innerHTML},scope:{sale:"="}}}]),directives.directive("ertSalesShowMargined",["Sale",function(e){function t(t,n,r){t.showDetails=!1,t.total=function(t){return e.total(t)}}return{restrict:"E",template:function(){return document.getElementById("ert-sales-show-margined-tpl").innerHTML},link:t,scope:{sale:"="}}}]),directives.directive("ertSalesSubtop",["Setting",function(e){function t(t,n,r){t.enableTipControl=!1,e.fetch("enable_tip_control").then(function(e){t.enableTipControl=e.value})}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-sales-subtop-tpl").innerHTML},scope:{}}}]),directives.directive("ertSalesSummary",["PaymentType","Room","Sale",function(e,t,n){function r(r,i,o){r.extended=!1,r.paymentTypes=e.paymentTypes,r.rooms=t.rooms,r.paymentAmount=function(e){return 1===e.paymentTypeId&&r.salesSummary.totalTipsV1?parseFloat(e.amount)-parseFloat(r.salesSummary.totalTipsV1):e.amount},r.toggleExtension=function(){r.section||(r.section="payments"),r.extended=!r.extended},r.totalPayed=function(){return r.salesSummary.payments?r.salesSummary.payments.reduce(function(e,t){return e+parseFloat(t.amount)},0):void 0},r.totalNotPayed=function(){var e=r.totalPayed();return r.total()-(e-r.salesSummary.totalTipsV1)},r.percentage=function(e){return e/r.total()*100},r.total=function(){var e;return r.salesSummary.totals&&(e=r.optionsFilter.st?a(r.optionsFilter.st):r.salesSummary.totals.reduce(function(e,t){return e+parseFloat(t.amount)},0)),e},r.averageTicket=function(){return r.salesSummary.people>0?a(n.TYPES.LOCAL)/r.salesSummary.people:void 0};var a=function(e){var t;return r.salesSummary.totals&&angular.forEach(r.salesSummary.totals,function(n){n.saleTypeId===e&&(t=parseFloat(n.amount))}),t}}return{restrict:"E",template:function(){return document.getElementById("ert-sales-summary-tpl").innerHTML},link:r,scope:{dateFilter:"=",optionsFilter:"=",salesSummary:"="}}}]),directives.directive("ertSalesTable",["User","Guest","Table","Sale","SaleState","SaleType","Setting",function(e,t,n,r,i,o,a){function s(s,c,u){s.tables=n.tables,s.guests=t.guests,s.waiters=e.waiters,s.saleStates=i.saleStates,s.saleTypes=o.saleTypes;var l=a.pluck("locale");s.total=function(e){return r.total(e)},s.isSaleActive=function(e){return e==s.currentSaleId},s.isSaleCanceled=function(e){return e.saleStateId==r.STATES.CANCELED},s.showElectronicInvoiceDowload=function(e){return"es-MX"===l&&e.saleReceipts[0]},s.downloadElectronicInvoice=function(e){return r.downloadElectronicInvoice(e).$promise}}return{restrict:"E",template:function(){return document.getElementById("ert-sales-table-tpl").innerHTML},link:s,scope:{sales:"=",salesSummary:"="}}}]),directives.directive("ertShowPayments",["PaymentType",function(e){function t(t,n,r){t.paymentTypes=e.paymentTypes}return{restrict:"E",template:function(){return document.getElementById("ert-show-payments-tpl").innerHTML},link:t,scope:{payments:"="}}}]),directives.directive("ertStatsDashboard",["$state",function(e){function t(e,t,n){}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-stats-dashboard-tpl").innerHTML},scope:{}}}]),directives.directive("ertStatsSelectDialog",["$state",function(e){function t(t,n,r){t.submitting=!1,t.focus={onPassword:!0},t.acceptDisabled=function(){return t.form.$invalid||t.submitting},t.onAccept=function(){t.submitting=!0},t.onCancel=function(){e.go("stats.products")},t.close=function(){e.go("stats.products")}}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-stats-select-dialog-tpl").innerHTML},scope:{}}}]),directives.directive("ertStatsSidebar",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-stats-sidebar-tpl").innerHTML}}}]),directives.directive("ertStock",["Stock",function(e){function t(t,n,r){t.exportFileName="stock.xls",t.downloadStock=function(){t.submitting=!0;var n=e.queryXLS().$promise;return n.then(function(){t.submitting=!1}),n}}return{restrict:"E",template:function(){return document.getElementById("ert-stock-tpl").innerHTML},link:t,scope:{ingredients:"=",products:"="}}}]),directives.directive("ertStockIngredientsEdit",["Stock","Unit","$state","Ingredient",function(e,t,n,r){function i(i,o,a){i.units=t.units,i.ingredient=angular.copy(i.masterIngredient),i.acceptDisabled=function(){return i.form.$invalid||i.submitting||angular.equals(i.ingredient,i.masterIngredient)},i.onAccept=function(){return i.submitting=!0,e.updateIngredient(i.masterIngredient,i.ingredient,function(){return Promise.all([e.queryProducts().$promise,e.queryIngredients().$promise,r.query().$promise]).then(function(){n.go("stock.ingredients.show",{ingredientId:i.ingredient.id})}).$promise})},i.onCancel=function(){n.go("stock.ingredients.show",{ingredientId:i.ingredient.id})}}return{restrict:"E",link:i,template:function(){return document.getElementById("ert-stock-ingredients-edit-tpl").innerHTML},scope:{masterIngredient:"=ingredient"}}}]),directives.directive("ertStockIngredientsShow",["Unit",function(e){function t(t,n,r){t.units=e.units}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-stock-ingredients-show-tpl").innerHTML},scope:{ingredient:"="}}}]),directives.directive("ertStockIngredientsTable",["Unit","Stock",function(e,t){function n(n,r,i){n.units=e.units,n.availabilityStatus=function(e){return t.availabilityStatus(e)}}return{restrict:"E",template:function(){return document.getElementById("ert-stock-ingredients-table-tpl").innerHTML},link:n,scope:{ingredients:"="}}}]),directives.directive("ertStockProductsEdit",["Stock","Unit","$state","Ingredient",function(e,t,n,r){function i(i,o,a){i.units=t.units,i.product=angular.copy(i.masterProduct),i.acceptDisabled=function(){return i.form.$invalid||i.submitting||angular.equals(i.product,i.masterProduct)},i.onConfirmAccept=function(){return updateProduct()},i.onConfirmCancel=function(){i.hideConfirmDialog()},i.hideConfirmDialog=function(){i.confirmDialog=!1},i.showConfirmDialog=function(){i.confirmDialog=!0},i.stockDelta=function(){return Number(i.product.stock)-Number(i.masterProduct.stock)},i.onAccept=function(){return i.masterProduct.proportions.length&&0!==i.stockDelta()?void i.showConfirmDialog():updateProduct()},i.onCancel=function(){i.goToStockProductsShow()},i.goToStockProductsShow=function(){n.go("stock.products.show",{productId:i.product.id})},updateProduct=function(){return e.updateProduct(i.masterProduct,i.product).$promise.then(function(){return Promise.all([e.queryProducts().$promise,e.queryIngredients().$promise,r.query().$promise]).then(function(){i.hideConfirmDialog(),i.goToStockProductsShow()})})["catch"](function(e){i.hideConfirmDialog(),i.errors=e.data,i.updateErrorDialog=!0})}}return{restrict:"E",link:i,template:function(){return document.getElementById("ert-stock-products-edit-tpl").innerHTML},scope:{masterProduct:"=product"}}}]),directives.directive("ertStockProductsProportions",["Product","Ingredient","Unit",function(e,t,n){function r(r,i,o){r.ingredients=t.ingredients,r.products=e.products,r.units=n.units}return{restrict:"E",template:function(){return document.getElementById("ert-stock-products-proportions-tpl").innerHTML},link:r,scope:{product:"="}}}]),directives.directive("ertStockProductsShow",["Unit",function(e){function t(t,n,r){t.units=e.units}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-stock-products-show-tpl").innerHTML},scope:{product:"="}}}]),directives.directive("ertStockProductsTable",["Unit","Stock",function(e,t){function n(n,r,i){n.units=e.units,n.availabilityStatus=function(e){return t.availabilityStatus(e)}}return{restrict:"E",template:function(){return document.getElementById("ert-stock-products-table-tpl").innerHTML},link:n,scope:{products:"="}}}]),directives.directive("ertStockMovements",["$state","StockMovement","StockMovementArray","Util",function(e,t,n,r){function i(i,a,s){i.dateFilter={},i.optionsFilter={},i.stockMovements=n.getItems();var c=1,u=!1,l=function(){return angular.extend({},i.dateFilter,i.optionsFilter)};i.addNextPageData=function(){if(!u){u=!0;var e=l(),r=angular.extend({page:++c},e);t.query(r,function(e){n.append(e),u=!1})}},i.loadData=function(){var r=l();c=1,t.query(r,n.setItems),e.go("stockMovements")},i.max_rows_limit=o,i.exportFileName="movimientos_de_stock.xls",i.downloadStockMovements=function(){i.submitting=!0;var e=l(),n=t.queryXLS(e).$promise;return n.then(function(){i.submitting=!1},function(e){r.fillErrors(i,e.data),i.alertDialog=!0,i.captionAlertDialog="Exportar Movimientos de Stock",i.onAcceptAlertDialog=function(){i.alertDialog=!1,i.baseErrors={}},i.submitting=!1}),n}}var o=5e3;return{link:i,restrict:"E",template:function(){return document.getElementById("ert-stock-movements-tpl").innerHTML},scope:{}}}]),directives.directive("ertStockMovementsFilter",["StockMovement","StockableItem",function(e,t){function n(n,r,i){n.events=e.EVENTS,n.stockableItems=t.stockableItems,n.focus={onStockableItemSearch:!0},n.$watch("model",function(e,t){e!==t&&n.onChange()},!0),n.$watch("resource",function(e,t){if(e!==t)if(n.resource){var r=n.resource.productId,i=n.resource.ingredientId;r?n.model.p=r:n.model.i=i}else delete n.model.p,delete n.model.i},!0)}return{link:n,restrict:"E",template:function(){return document.getElementById("ert-stock-movements-filter-tpl").innerHTML},scope:{model:"=ngModel",onChange:"&"}}}]),directives.directive("ertStockMovementsShow",["StockMovement","Unit","User",function(e,t,n){function r(r,i,o){r.units=t.units,r.users=n.users,r.stockMovementIsManual=e.isManual,r.getStockMovementEventLabel=e.getEventLabel,r.getStockMovementRelatedObject=e.getRelatedObject,r.getResource=e.getResource,r.getResourceUnit=function(t){return r.units[e.getResource(t).unitId]},r.getStockMovementRelatedUser=function(e){return r.users[e.userId]}}return{link:r,restrict:"E",template:function(){return document.getElementById("ert-stock-movements-show-tpl").innerHTML},scope:{stockMovement:"="}}}]),directives.directive("ertStockMovementsTable",["StockMovement","Unit",function(e,t){function n(n,r,i){n.units=t.units,n.stockMovementIsManual=e.isManual,n.getStockMovementEventLabel=e.getEventLabel,n.getResource=e.getResource;var o=function(e){return e.delta<0?"down":"up"};n.getStatusMovementTypeClass=function(e){return"status-movement-"+o(e)},n.getIconDirectionClass=function(e){return"icon-direction-"+o(e)},n.getResourceUnit=function(t){return n.units[e.getResource(t).unitId]}}return{link:n,restrict:"E",template:function(){return document.getElementById("ert-stock-movements-table-tpl").innerHTML},scope:{stockMovements:"="}}}]),directives.directive("ertAddPendingAddition",["PendingAddition",function(e){function t(t,n,r){n.bind("click",function(){e.add(t.sale.id,1,t.product)})}return{restrict:"A",link:t}}]),directives.directive("ertAddPendingDiscount",["PendingDiscount",function(e){function t(t,n,r){n.bind("click",function(){e.add(t.sale.id,null,null)})}return{restrict:"A",link:t}}]),directives.directive("ertDialogAdditions",["$filter","$state","$window","$cookies","Product","ProductCategory","PendingAddition",function(e,t,n,r,i,o,a){function s(s,c,u){var l=[];s.focus={onAcceptButton:!0},s.showAsGrid=r.get("showAsGrid");var d=function(e,t,n){l.push({saleId:e.id,count:t,productId:n.id})},f=function(t,n){var r=t.filter(function(e){return e.active&&e.productCategoryId===n.id});return e("localizedOrderBy")(r,"name")},p=function(){var e=a.additions[s.sale.id]||[];return l.concat(e)},m=function(e){27===e.keyCode&&(e.preventDefault(),s.onAccept())};n.addEventListener("keydown",m),s.$on("$destroy",function(){n.removeEventListener("keydown",m)}),s.toggleDisplayMode=function(){s.showAsGrid=!s.showAsGrid,r.put("showAsGrid",s.showAsGrid)},s.categoryCount=function(e){a.additions[s.sale.id]||[];return p().reduce(function(t,n){return e.id===i.products[n.productId].productCategoryId&&(t+=n.count),t},0)},s.productCount=function(e){return p().reduce(function(t,n){return e.id===n.productId&&(t+=n.count),t},0)},s.categories=e("object2Array")(o.productCategories),s.products=e("object2Array")(i.products),s.setCurrentCategory=function(e){s.currentCategory=e,s.filteredProducts=f(s.products,e),s.focus.onAcceptButton=!0},s.liCategoryCss=function(e){var t=s.currentCategory&&(e.id===s.currentCategory.id||s.currentCategory.parentId===e.id),n=s.categoryCount(e)>0;return{"has-items":n,active:t}},s.liProductCss=function(e){var t=s.productCount(e)>0;return{"has-items":t}},s.onProductClick=function(e,t){d(e,1,t),s.focus.onAcceptButton=!0},s.onAccept=function(){l.forEach(function(e){a.add(e.saleId,e.count,i.products[e.productId])}),t.go("^",{id:s.sale.tableId})},s.onClose=function(){t.go("^",{id:s.sale.tableId})},s.onCancel=s.onClose}return{restrict:"E",link:s,template:function(){return document.getElementById("ert-dialog-additions-tpl").innerHTML},scope:{sale:"="}}}]),directives.directive("ertNewSale",["User","Guest","Table",function(e,t,n){function r(r,i,o){r.guests=t.guests,r.tables=n.tables,r.waiters=e.waiters,r.focus={onPeople:!0},r.sale={tableId:r.table.id},r.saveSale=function(e){return n.saveSale(e).$promise},r.saveSaleDisabled=function(){return r.newSaleForm.$invalid}}return{restrict:"E",template:function(){return document.getElementById("ert-new-sale-tpl").innerHTML},link:r,scope:{table:"="}}}]),directives.directive("ertPendingAddition",["CurrentUser","Product","$locale",function(e,t,n){function r(r,i,o){r.products=t.products,r.showComment=!1,r.focus={onComment:!1},r.toggleComment=function(e){r.showComment=!r.showComment,r.focus.onComment=r.showComment,r.showComment||(e.comment="")},r.increase=function(e){e.count++},r.decrease=function(e){1!=e.count&&e.count--},r.onCommentKeyDown=function(e){13===e.which&&e.target.blur()},r.$watch("addition.count",function(e,t){var i=n.NUMBER_FORMATS.PATTERNS[1].maxFrac,o=!Number.isNaN(Number(e));if(o){var a=r.products[r.addition.productId].price*e;r.addition.price=parseFloat(a.toFixed(i))}}),r.inputPriceDisabled=function(){return!e.can("change_addition_price")}}return{restrict:"E",template:function(){return document.getElementById("ert-pending-addition-tpl").innerHTML},link:r,scope:{addition:"="}}}]),directives.directive("ertPendingAdditions",["PendingAddition",function(e){function t(t,n,r){t.additions=e.additions,t.total=function(){return e.total(t.sale.id)}}return{restrict:"E",template:function(){return document.getElementById("ert-pending-additions-tpl").innerHTML},link:t,scope:{sale:"=",onCancel:"&",onConfirm:"&"}}}]),directives.directive("ertPendingDiscounts",["PendingDiscount","Sale",function(e,t){function n(n,r,i){n.discounts=e.discounts,n.focus={onPercentage:!1,onAmount:!1},n.cancel=function(){e.discard(n.sale.id),n.onCancel()},n.cleanupPercentage=function(e){e.percentage=null},n.confirm=function(){return n.onConfirm(),e.confirm(n.sale)},n.updateAmount=function(e){var r=e.percentage;e.amount=r?r*t.subtotal(n.sale)/100:null},n.invalidPendingDiscountsForm=function(){return n.pendingDiscountsForm.$invalid},n.percentageDiscountDisabled=function(){var e=n.sale.additions.filter(function(e){return e.paid});return e.length>0},n.$watch("discounts[sale.id].length",function(){o()});var o=function(){n.percentageDiscountDisabled()?n.focus.onAmount=!0:n.focus.onPercentage=!0};o()}return{restrict:"E",template:function(){return document.getElementById("ert-pending-discounts-tpl").innerHTML},link:n,scope:{sale:"=",onCancel:"&",onConfirm:"&"}}}]),directives.directive("ertProductAutocomplete",["Product","PendingAddition","$timeout","$filter",function(e,t,n,r){function i(t,i,o){var a=r("object2Array")(e.products),s=null;t.filteredProducts=[],t.addition={},t.filterProducts=function(){var e;e=r("productFilter")(a,t.productSearch),e=r("limitTo")(e,10),e=r("localizedOrderBy")(e,"name"),t.filteredProducts=e},t.onProductClick=function(e){t.addition.product=e,t.onProductSelect()},t.onProductSelect=function(){t.onNewAddition({addition:t.addition}),t.addition={},t.productSearch=null,t.filteredProducts=[]};var c=function(e){s=e,n(function(){t.filteredProducts.length?t.addition.product=t.filteredProducts[e]:t.addition.product=null})},u=function(){s>0&&c(s-1)},l=function(){s<t.filteredProducts.length-1&&c(s+1)};t.onKeydown=function(e){switch(e.which){case 27:e.preventDefault(),t.productSearch=null;break;case 13:t.addition.product&&(e.preventDefault(),t.onProductSelect());break;case 38:e.preventDefault(),t.addition.count=1,u();break;case 40:e.preventDefault(),t.addition.count=1,l();break;case 37:e.preventDefault(),t.addition.count>1&&t.addition.count--;break;case 39:e.preventDefault(),t.addition.count++;break;default:t.addition.count=1,c(0)}}}return{restrict:"E",template:function(){return document.getElementById("ert-product-autocomplete-tpl").innerHTML},link:i,scope:{focus:"=",onNewAddition:"&"}}}]),directives.directive("ertQuickAdder",["$filter","Product",function(e,t){function n(n,r,i){n.getFavouriteProducts=function(){var n;return n=e("object2Array")(t.products),n=e("filter")(n,{active:!0,favourite:!0}),n=e("localizedOrderBy")(n,"name")}}return{restrict:"E",template:function(){return document.getElementById("ert-quick-adder-tpl").innerHTML},link:n,scope:{sale:"=",afterClick:"&",icons:"=",codes:"="}}}]),directives.directive("ertRemovePendingAddition",["PendingAddition",function(e){function t(t,n,r){n.bind("click",function(){e.remove(t.addition),t.$apply()})}return{restrict:"A",link:t}}]),directives.directive("ertSaleCashback",["Sale",function(e){function t(t,n,r){t.cashback=function(n,r){var i=t.partialClose?e.partialCloseCashback(n,r):e.cashback(n,r);return t.tip&&(i-=t.tip.amount),i}}return{restrict:"E",template:"{{ cashback(sale, payments) | ertCurrency }}",link:t,scope:{sale:"=",payments:"=",partialClose:"=",tip:"="}}}]),directives.directive("ertTable",["User","Table",function(e,t){function n(n,r,i){n.waiters=e.waiters,n.css=function(){return{"status-free":!n.table.sale,"status-occupied":n.table.sale&&2==n.table.sale.saleStateId,"status-payment":n.table.sale&&5==n.table.sale.saleStateId,"table-large":n.table.size===t.LARGE,"table-round":n.table.shape===t.ROUND}},n.top=function(){return n.table.row+"em"},n.left=function(){return n.table.column+"em"}}return{restrict:"E",template:function(){return document.getElementById("ert-table-tpl").innerHTML},link:n,scope:{table:"="}}}]),directives.directive("ertTableHeader",[function(){function e(e,t,n){e.css=function(){var t=e.table.sale;return{"status-free":!t,"status-occupied":t&&2==t.saleStateId,"status-payment":t&&5==t.saleStateId}}}return{restrict:"E",transclude:!0,template:function(){return document.getElementById("ert-table-header-tpl").innerHTML},link:e,scope:{table:"="}}}]),directives.directive("ertTables",["$window","Table","Room","$filter",function(e,t,n,r){function i(i,o,a){var s=function(e){e.ctrlKey&&70===e.keyCode&&(e.preventDefault(),i.focus.onTableSearch=!0,i.$apply())};e.addEventListener("keydown",s),i.$on("$destroy",function(){e.removeEventListener("keydown",s)}),i.tables=t.tables,i.getZoom=function(){var e=n.rooms[i.currentRoomId];return e?e.zoom+"vw":void 0},i.getFullZoom=function(){var e,n=r("object2Array")(t.tables).map(function(e){return e.column}),i=(e=Math).max.apply(e,$traceurRuntime.spread(n))+1;return"calc(1em / "+i+")"},i.getFullHeight=function(){var e,n=r("object2Array")(t.tables).filter(function(e){return e.roomId===i.currentRoomId}).map(function(e){return e.row}),o=(e=Math).max.apply(e,$traceurRuntime.spread(n))+1;return o+"em"}}return{restrict:"E",template:function(){return document.getElementById("ert-tables-tpl").innerHTML},link:i,scope:{currentRoomId:"=",focus:"="}}}]),directives.directive("ertTablesSearch",["$filter","$state","Table",function(e,t,n){function r(r){var i=function(e){t.go("tables.show",{tableId:e.id}),r.currentRoomId=e.roomId};r.onInputBlur=function(){r.productsSearch.$setPristine(),r.tableSearch=null},r.onSubmit=function(){if(angular.isNumber(r.tableSearch)){var t=e("object2Array")(n.tables),o=t.find(function(e){return e.number===r.tableSearch});o?i(o):r.tableSearch=null}}}return{link:r,restrict:"E",template:function(){return document.getElementById("ert-tables-search-tpl").innerHTML},scope:{currentRoomId:"=",focus:"="}}}]),directives.directive("ertTablesShow",["PrinterJob","Sale","Table","Setting",function(e,t,n,r){function i(i,o,a){i.editingSale=!1,r.fetch("enable_mobile_app").then(function(e){i.enableMobileApp=e.value}),i.setEditingSale=function(e){i.editingSale=e},i.onIconPrintMobileTokenClick=function(t){return e.printMobileTokenReceipt(t.mobileToken)},i.onIconPrintControlClick=function(r){return r.saleStateId===t.STATES.PAYMENT_PROCESS?n.updateSaleState(r,t.STATES.IN_COURSE).$promise:e.printControlReceipt(r).then(function(){return r.saleStateId===t.STATES.IN_COURSE?n.updateSaleState(r,t.STATES.PAYMENT_PROCESS).$promise:void 0})}}return{restrict:"E",template:function(){return document.getElementById("ert-tables-show-tpl").innerHTML},link:i,scope:{table:"="}}}]),directives.directive("ertTablesSubtop",["Account",function(e){var t=function(t,n,r){t.isDeliveryEnabled=function(){return e.account.delivery}};return{link:t,restrict:"E",template:function(){return document.getElementById("ert-tables-subtop-tpl").innerHTML},scope:{currentRoomId:"=",focus:"="}}}]),directives.directive("ertTablesTabs",["Table","Room",function(e,t){function n(n,r,i){n.statusCount={},n.rooms=t.rooms,n.tables=e.tables,n.setCurrentRoomId=function(e){n.currentRoomId=e},n.isRoomActive=function(e){return e==n.currentRoomId},n.getStatusCount=function(e){var t={};for(var n in e){var r=e[n];t[r.roomId]||(t[r.roomId]={free:0,occupied:0,payment:0}),r.sale?r.sale&&2==r.sale.saleStateId?t[r.roomId].occupied++:r.sale&&5==r.sale.saleStateId&&t[r.roomId].payment++:t[r.roomId].free++}return t},n.refreshStatusCount=function(e){n.statusCount=n.getStatusCount(e)},n.$watch("tables",function(e){n.refreshStatusCount(e)},!0),n.refreshStatusCount(n.tables)}return{restrict:"E",template:function(){return document.getElementById("ert-tables-tabs-tpl").innerHTML},link:n,scope:{currentRoomId:"="}}}]),directives.directive("ertShowActiveTakeAwaySale",["$window","$state","Sale","PrinterJob","PendingAddition","Product",function(e,t,n,r,i,o){function a(a,s,c){a.products=o.products,a.confirmAdditionsErrorDialog=!1;var u=function(e){e.ctrlKey&&67===e.keyCode&&a.gotoCloseTakeAwaySale()};e.addEventListener("keydown",u),a.$on("$destroy",function(){e.removeEventListener("keydown",u)}),a.focus={onAdder:!0},a.focusOnAdder=function(){a.focus.onAdder=!0},a.disabledAddDiscount=function(e){return 0===n.subtotal(e)},a.onIconPrintControlClick=function(e){return r.printControlReceipt(e).then(function(){return e.saleStateId===n.STATES.IN_COURSE?n.updateState(e,n.STATES.PAYMENT_PROCESS).$promise:void 0})},a.gotoCloseTakeAwaySale=function(){t.go(".close",{saleId:a.sale.id})},a.confirmPendingAdditions=function(){var e=i.additions[a.sale.id];return e?n.saveAdditions(a.sale,e).$promise.then(function(){r.printKitchenReceipt(a.sale,e),a.discardPendingAdditions()})["catch"](function(e){a.errors=e.data,a.confirmAdditionsErrorDialog=!0,a.focus.onErrorsDialogAccept=!0}):Promise.resolve()},a.discardPendingAdditions=function(){i.discard(a.sale.id),a.focusOnAdder()},a.addPendingAddition=function(e){i.add(a.sale.id,e.count,e.product),a.focusOnAdder()},a.closeConfirmAdditionsErrorDialog=function(){a.confirmAdditionsErrorDialog=!1,a.focusOnAdder()}}return{restrict:"E",template:function(){return document.getElementById("ert-show-active-take-away-sale-tpl").innerHTML},link:a,scope:{sale:"="}}}]),directives.directive("ertShowClosedTakeAwaySale",["$state","Sale","SaleState","Setting","KitchenReceipt","ControlReceipt","FiscalPrinter",function(e,t,n,r,i,o,a){function s(a,s,c){a.fiscalReceiptDialogShow=!1,a.confirmDialog=!1,a.fiscalReceiptIconShow=r.pluck("fiscal_protocol"),a.fiscalReceiptShowDialog=function(){a.fiscalReceiptDialogShow=!0},a.fiscalReceiptHideDialog=function(){a.fiscalReceiptDialogShow=!1},a.fiscalReceiptIsIconDisabled=function(){return a.sale.lastReceipt||a.sale.saleStateId!==t.STATES.CLOSED||0===t.total(a.sale)},a.saleStates=n.saleStates,a.onIconPrintControlClick=function(e){return o.print(e)},a.iconPrintControlDisabled=function(e){return e.saleStateId===t.STATES.CANCELED},a.onIconPrintOrderClick=function(e){var t=e.additions.filter(function(e){return!e.canceled});return i.print(e,t)},a.iconPrintOrderDisabled=function(e){var n=e.additions.filter(function(e){return!e.canceled}).length;return e.saleStateId===t.STATES.CANCELED||0===n},a.onIconEditSaleClick=function(t){return e.go("take_away_sales.edit",{saleId:t.id})},a.iconEditSaleDisabled=function(e){return e.saleStateId!==t.STATES.CLOSED},a.onConfirmIconCancelSaleClick=function(e){return a.confirmDialog=!1,t.cancel(e)},a.onIconCancelSaleClick=function(e){a.confirmDialog=!0,a.confirmDialogFocus={onAccept:!0},a.onAcceptConfirmDialog=function(){return a.onConfirmIconCancelSaleClick(e)}},a.onCancelConfirmDialog=function(){a.confirmDialog=!1},a.iconCancelSaleDisabled=function(e){return e.saleStateId!==t.STATES.CLOSED}}return{link:s,restrict:"E",template:function(){return document.getElementById("ert-show-closed-take-away-sale-tpl").innerHTML},scope:{sale:"="}}}]),directives.directive("ertTakeAwaySales",["Sale",function(e){function t(t,n,r){var i=1,o=!1,a={st:e.TYPES.TAKE_AWAY,"ss[]":[e.STATES.IN_COURSE,e.STATES.PAYMENT_PROCESS],page:i};t.addNextPageData=function(){if(!o){o=!0;var n=angular.extend(a,{page:++i});t.sales=e.query(n,function(){o=!1})}},t.sales=e.query(a,e.cleanup)}return{restrict:"E",template:function(){return document.getElementById("ert-take-away-sales-tpl").innerHTML},link:t}}]),directives.directive("ertTakeAwaySalesEdit",["$state","Sale",function(e,t){function n(t,n,r){t.showTakeAwaySale=function(){e.go("take_away_sales.show",{saleId:t.sale.id})}}return{restrict:"E",template:function(){return document.getElementById("ert-take-away-sales-edit-tpl").innerHTML},link:n,scope:{sale:"="}}}]),directives.directive("ertTakeAwaySalesNew",["$state","Sale","User",function(e,t,n){var r=function(r,i,o){r.waiters=n.waiters,r.sale={saleTypeId:t.TYPES.TAKE_AWAY,deliveryData:{}},r.focus={onGuestName:!0},r.saveTakeAwaySale=function(n){return r.guestName&&!r.sale.guestId&&(r.sale.deliveryData.guestName=r.guestName),t.save(n,function(t){e.go("take_away_sales.show",{saleId:t.id})}).$promise},r.onSelectGuest=function(e){r.sale.guestId=e.id,r.focus={onSubmit:!0}},r.onDiscardGuest=function(){r.sale.guestId=null}};return{restrict:"E",template:function(){return document.getElementById("ert-take-away-sales-new-tpl").innerHTML},link:r}}]),directives.directive("ertTakeAwaySalesShow",["Sale",function(e){function t(t,n,r){t.isActiveTakeAwaySale=function(){return t.sale.saleStateId===e.STATES.IN_COURSE||t.sale.saleStateId===e.STATES.PAYMENT_PROCESS}}return{restrict:"E",template:function(){return document.getElementById("ert-take-away-sales-show-tpl").innerHTML},link:t,scope:{sale:"="}}}]),directives.directive("ertTakeAwaySalesTable",["Sale","SaleState","Guest",function(e,t,n){function r(r,i,o){var a=n.guests;r.saleStates=t.saleStates,r.total=function(t){return e.total(t)},r.isSaleCanceled=function(t){return t.saleStateId===e.STATES.CANCELED},r.guestName=function(e){return e.guestId?a[e.guestId].name:e.deliveryData?e.deliveryData.guestName:void 0}}return{restrict:"E",template:function(){return document.getElementById("ert-take-away-sales-table-tpl").innerHTML},link:r,scope:{sales:"="}}}]),directives.directive("ertTips",["$state","Tips","TipsSummary","Util",function(e,t,n,r){var i=5e3,o=function(o,a,s){o.dateFilter={},o.optionsFilter={},o.tipsSummary={};var c=1,u=!1,l=function(){return angular.extend({},o.dateFilter,o.optionsFilter)};o.addNextPageData=function(){if(!u){u=!0;var e=l(),n=angular.extend({page:++c},e);o.tips=t.query(n,function(){u=!1})}},o.loadData=function(){c=1;var r=l();o.tips=t.query(r,t.cleanup),o.tipsSummary=n.query(r),e.go("tips")},o.exportFileName="propinas.xls",o.max_rows_limit=i,o.downloadTips=function(){o.submitting=!0;var e=l(),n=t.queryXLS(e).$promise;return n.then(function(){o.submitting=!1},function(e){r.fillErrors(o,e.data),o.alertDialog=!0,o.captionAlertDialog="Exportar Propinas",o.onAcceptAlertDialog=function(){o.alertDialog=!1,o.baseErrors={}},o.submitting=!1}),n}};return{restrict:"E",template:function(){return document.getElementById("ert-tips-tpl").innerHTML},link:o,scope:{tips:"="}}}]),directives.directive("ertTipsFilter",["User","Guest","PaymentType",function(e,t,n){function r(r,i,o){r.$watch("model",function(e,t){e!==t&&r.onChange()},!0),r.waiters=e.waiters,r.guests=t.guests,r.paymentTypes=n.paymentTypes}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-tips-filter-tpl").innerHTML},scope:{model:"=ngModel",onChange:"&"}}}]),directives.directive("ertTipsShow",["Table","Guest","Sale","User","PaymentType",function(e,t,n,r,i){function o(o,a,s){o.tables=e.tables,o.guests=t.guests,o.waiters=r.waiters,o.paymentTypes=i.paymentTypes,o.saleTotal=function(e){
return n.total(e)}}return{link:o,restrict:"E",template:function(){return document.getElementById("ert-tips-show-tpl").innerHTML},scope:{tip:"="}}}]),directives.directive("ertTipsSummary",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-tips-summary-tpl").innerHTML},scope:{tipsSummary:"=",dateFilter:"="}}}]),directives.directive("ertTipsTable",["Table","Guest","Sale","User","PaymentType",function(e,t,n,r,i){function o(o,a,s){o.tables=e.tables,o.guests=t.guests,o.waiters=r.waiters,o.paymentTypes=i.paymentTypes,o.saleTotal=function(e){return n.total(e)}}return{restrict:"E",template:function(){return document.getElementById("ert-tips-table-tpl").innerHTML},link:o,scope:{tips:"="}}}]),function(){var e="FiscalReceiptHonduras",t=function(e,t,n,r,i,o,a,s){this.$filter=e,this.Addition=s,this.Setting=t,this.Sale=n,this.Product=r,this.ProductCategory=i,this.Printer=o,this.Tax=a},n=t;$traceurRuntime.createClass(t,{get template(){return["{{ &settings.header }}","Factura: {{settings.prefix}}{{ saleId }}","R.A: {{ settings.authorizedRange }}","C.A.I: {{ settings.cai }}","Fecha limite de emision: {{ &settings.limitDate }}","","Fecha: {{ &date }}","","{{# additionItems }}","{{ count }} {{ &desc }} {{ price }}","{{/ additionItems }}","","{{ exemptItem.label }} {{ exemptItem.value }}","{{# taxAmountItems }}","{{ label }} {{ amount }}","{{/ taxAmountItems }}","{{# taxValueItems }}","{{ label }} {{ value }}","{{/ taxValueItems }}","","{{# discountItems }}","{{ count }} {{ &desc }} {{ amount }}","{{/ discountItems }}","","{{ totalItem.label }} {{ totalItem.value }}","{{ &settings.footer }}",""].join("\n")},getProductTax:function(e){var t=this,n=this.Product.products[e],r=this.ProductCategory.productCategories[n.productCategoryId].taxes;if(r.length){var i=[],o=[];return r.forEach(function(e){i.push(e.percentage),o.push(t.Tax.taxes[e.id].name)}),{percentage:i.reduce(function(e,t){return e+t}),name:o.join(" ")}}},get fractionSize(){return 2},getAppliedTaxes:function(e){var t=this,n={};return e.forEach(function(e){var r=t.getProductTax(e.productId);if(r){var i=e.price*r.percentage/100,o=e.price;n[r.name]?(n[r.name].amount+=o,n[r.name].value+=i):n[r.name]={name:r.name,value:i,amount:o},n[r.name].amount=Number(n[r.name].amount.toFixed(t.fractionSize)),n[r.name].value=Number(n[r.name].value.toFixed(t.fractionSize))}}),Object.values(n)},getAdditions:function(e){return this.Addition.withoutTaxes(e.filter(function(e){return!e.canceled}))},getDiscounts:function(e){return e.filter(function(e){return!e.canceled})},render:function(e){var t=this,n=4,r=28,i=8,o=function(e,t){var n=void 0!==arguments[2]?arguments[2]:" ";return String(e+n.repeat(t)).slice(0,t)},a=function(e,t){var n=void 0!==arguments[2]?arguments[2]:" ";return String(n.repeat(t)+e).slice(-t)},s=this.getAdditions(e.additions),c=this.getDiscounts(e.discounts),u=this.getAppliedTaxes(s),l=s.map(function(e){return{count:o(e.count,n),desc:o(t.Product.products[e.productId].name,r),price:a(e.price.toFixed(t.fractionSize),i)}}),d=u.map(function(e){return{label:a("Subtotal "+e.name,1+n+r),amount:a(e.amount.toFixed(t.fractionSize),i)}}),f=u.map(function(e){return{label:a(e.name,1+n+r),value:a(e.value.toFixed(t.fractionSize),i)}}),p=c.map(function(e){var o="Descuento "+t.$filter("percentage")(e.percentage);return{count:a("",n),desc:a(o,r),amount:a("-"+e.amount.toFixed(t.fractionSize),i)}}),m=s.filter(function(e){return!t.getProductTax(e.productId)}).reduce(function(e,t){return e+t.price},0),h={label:a("Subtotal Exento",1+n+r),value:a(m.toFixed(this.fractionSize),i)},g={label:a("TOTAL A PAGAR",1+n+r),value:a(this.Sale.total(e).toFixed(this.fractionSize),i)},v=this.Setting.pluck("fiscal_receipt"),y=this.$filter("date")(new Date,"dd/MM/yy HH:mm:ss"),$=a(e.id,8,"0"),b={additionItems:l,date:y,discountItems:p,exemptItem:h,saleId:$,settings:v,taxAmountItems:d,taxValueItems:f,totalItem:g};return Mustache.render(this.template,b)},str2arr:function(e){return function(){for(var t,n=0,r=[],i=e.split("")[$traceurRuntime.toProperty(Symbol.iterator)]();!(t=i.next()).done;){var o=t.value;r[n++]=o.charCodeAt(0)}return r}()},print:function(e){return this.render(e)}},{factory:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(Function.prototype.bind.apply(n,$traceurRuntime.spread([null],e)))}}),t.factory.$inject=["$filter","Setting","Sale","Product","ProductCategory","Printer","Tax","Addition"],services.factory(e,t.factory)}(),directives.directive("ertAdminFiscalPrinters",["ChromeExtension","FiscalPrinter","Setting","fiscalProtocolsCl","fiscalProtocolsAr","PaymentType",function(e,t,n,r,i,o){function a(a,s,c){a.protocols=[],a.extensionId=e.extensionId,a.extensionEnabled=!0,a.extensionSupported=!0;var u=function(e){alert(e.message)};e.enabled().then(function(e){a.extensionEnabled=e})["catch"](function(e){if("No extension handler"!==e.message)throw e;a.extensionSupported=!1}),a.getPaymentTypesCl=function(){for(var e=[],n=t.getPaymentType(1),r=function(r){n=n.then(function(n){return e.push({number:r-1,text:n}),t.getPaymentType(r)})},i=2;20>=i;i++)r(i);return n=n["catch"](function(e){if("090C"!=e.code)throw new Error(e.message)}),n.then(function(){return e})},"es-CL"===n.pluck("locale")&&(a.paymentTypes=o.paymentTypes,a.getPaymentTypesCl().then(function(e){a.fiscalPaymentTypesCl=e})),n.fetch("locale").then(function(e){switch(e.value){case"es-CL":a.protocols=r;break;case"es-AR":a.protocols=i}}),e.getConfig("serialPath").then(function(e){a.$apply(function(){a.masterSerialPath=e.serialPath,a.serialPath=angular.copy(a.masterSerialPath)})}),e.getConfig("fiscalMap").then(function(e){a.$apply(function(){a.masterFiscalMap=e.fiscalMap||{},a.fiscalMap=angular.copy(a.masterFiscalMap)})}),n.fetch("fiscal_protocol").then(function(e){a.masterFiscalProtocol=e,a.fiscalProtocol=angular.copy(a.masterFiscalProtocol)}),e.getSerialDevices().then(function(e){a.$apply(function(){a.devices=e})}),a.acceptSerialPathDisabled=function(){return angular.equals(a.serialPath,a.masterSerialPath)},a.noFiscalProtocolChanges=function(){return angular.equals(a.masterFiscalProtocol,a.fiscalProtocol)},a.noFiscalMapChanges=function(){return angular.equals(a.masterFiscalMap,a.fiscalMap)},a.onFiscalMapCancel=function(){a.fiscalMap=angular.copy(a.masterFiscalMap)},a.onFiscalMapAccept=function(){return e.setConfig({fiscalMap:a.fiscalMap}).then(function(){a.$apply(function(){a.masterFiscalMap=angular.copy(a.fiscalMap)})})},a.onFiscalProtocolCancel=function(){a.fiscalProtocol=angular.copy(a.masterFiscalProtocol)},a.onFiscalProtocolAccept=function(){return n.update(a.masterFiscalProtocol,a.fiscalProtocol).$promise},a.onAcceptSerialPath=function(){a.settingConfig=!0,e.setConfig({serialPath:a.serialPath}).then(function(){a.$apply(function(){a.settingConfig=!1,a.masterSerialPath=a.serialPath})})},a.onCancelSerialPath=function(){a.serialPath=a.masterSerialPath},a.getDateTime=function(){return t.getDateTime().then(function(e){return a.datetime=e})["catch"](u)},a.dailyClose=function(e){return t.dailyClose(e)["catch"](u)},a.cancelReceipt=function(){return t.cancelReceipt()["catch"](u)},a.reportByNumber=function(){return t.reportByNumber(a.startNumber,a.endNumber,!0)["catch"](u)},a.reportByNumberDisabled=function(){return a.endNumber<a.startNumber||a.reportByNumberForm.$invalid},a.reportByDate=function(){return t.reportByDate(a.startDate,a.endDate,!0)["catch"](u)},a.reportByDateDisabled=function(){return a.endDate<a.startDate||a.reportByDateForm.$invalid}}return{link:a,restrict:"E",template:function(){return document.getElementById("ert-admin-fiscal-printers-tpl").innerHTML},scope:{}}}]),directives.directive("ertKitchens",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-kitchens-tpl").innerHTML},link:e,scope:{kitchens:"="}}}]),directives.directive("ertKitchensEdit",["$state","Kitchen","Util",function(e,t,n){function r(r,i,o){r.kitchen=angular.copy(r.masterKitchen),r.submitting=!1,r.onAccept=function(){r.submitting=!0,t.update(r.masterKitchen,r.kitchen,function(){e.go("admin.kitchens.show",{kitchenId:r.kitchen.id})},function(e){r.submitting=!1,n.fillErrors(r,e.data)})},r.onCancel=function(){e.go("admin.kitchens.show",{kitchenId:r.kitchen.id})},r.acceptDisabled=function(){return r.submitting||r.form.$invalid||angular.equals(r.kitchen,r.masterKitchen)}}return{restrict:"E",template:function(){return document.getElementById("ert-kitchens-edit-tpl").innerHTML},link:r,scope:{masterKitchen:"=kitchen"}}}]),directives.directive("ertKitchensNew",["$state","Kitchen","Util",function(e,t,n){function r(r,i,o){r.focus={onName:!0},r.submitting=!1,r.onAccept=function(){r.submitting=!0,t.save(r.kitchen,function(t){e.go("admin.kitchens.show",{kitchenId:t.id})},function(e){n.fillErrors(r,e.data),r.submitting=!1})},r.onCancel=function(){e.go("admin.kitchens")},r.acceptDisabled=function(){return r.submitting||r.form.$invalid}}return{restrict:"E",template:function(){return document.getElementById("ert-kitchens-new-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertKitchensShow",["$state","Kitchen",function(e,t){function n(n,r,i){n.destroyKitchen=function(n){t.destroy(n,null,function(){e.go("admin.kitchens")})}}return{restrict:"E",template:function(){return document.getElementById("ert-kitchens-show-tpl").innerHTML},link:n,scope:{kitchen:"="}}}]),directives.directive("ertLocale",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-locale-tpl").innerHTML},link:e,scope:{}}}]),directives.directive("ertPaymentTypes",["$state","PaymentType",function(e,t){function n(e,n,r){e.paymentTypes=t.paymentTypes}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-payment-types-tpl").innerHTML},scope:{}}}]),directives.directive("ertPaymentTypesEdit",["$state","PaymentType",function(e,t){function n(n,r,i){n.paymentType=angular.copy(n.masterPaymentType),n.acceptDisabled=function(){return n.form.$invalid||angular.equals(n.paymentType,n.masterPaymentType)},n.onAccept=function(){return t.update(n.masterPaymentType,n.paymentType).$promise.then(function(){console.log(t.paymentTypes[n.paymentType.id]),e.go("admin.paymentTypes.show",{paymentTypeId:n.paymentType.id})})},n.onCancel=function(){e.go("admin.paymentTypes.show",{paymentTypeId:n.paymentType.id})}}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-payment-types-edit-tpl").innerHTML},scope:{masterPaymentType:"="}}}]),directives.directive("ertPaymentTypesNew",["$state","PaymentType",function(e,t){function n(n,r,i){n.paymentTypes=t.paymentTypes,n.paymentType={active:!0},n.focus={onName:!0},n.acceptDisabled=function(){return n.form.$invalid},n.onAccept=function(){return t.save(n.paymentType).$promise.then(function(t){e.go("admin.paymentTypes.show",{paymentTypeId:t.id})})},n.onCancel=function(){e.go("admin.paymentTypes")}}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-payment-types-new-tpl").innerHTML},scope:{}}}]),directives.directive("ertPaymentTypesShow",["$state","$window","PaymentType",function(e,t,n){function r(t,r,i){t.showAlertDialog=!1,t.errors={},t.confirmDialog=!1,t.onConfirmDestroy=function(r){return n.destroy(r).$promise.then(function(){t.confirmDialog=!1,e.go("admin.paymentTypes")},function(e){t.confirmDialog=!1,e.data.base.forEach(function(e){return t.errors[e]=!0}),t.showAlertDialog=!0})},t.onDestroy=function(e){t.confirmDialog=!0,t.confirmDialogFocus={onAccept:!0},t.onAcceptConfirmDialog=function(){return t.onConfirmDestroy(e)}},t.onCancelConfirmDialog=function(){t.confirmDialog=!1},t.onAcceptAlertDialog=function(){t.showAlertDialog=!1}}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-payment-types-show-tpl").innerHTML},scope:{paymentType:"="}}}]),directives.directive("ertAdminPrintersControlPrinter",["Kitchen","Setting","ControlReceipt","Product",function(e,t,n,r){function i(i,o,a){i.kitchens=e.kitchens,t.fetch("print_sale_id_in_control_receipt").then(function(e){i.masterPrintSaleIdInControlReceipt=e,i.printSaleIdInControlReceipt=angular.copy(i.masterPrintSaleIdInControlReceipt)}),t.fetch("control_receipt_header").then(function(e){i.controlHeader=e}),t.fetch("control_receipt_header_format").then(function(e){i.controlHeaderFormat=e}),t.fetch("control_receipt_footer").then(function(e){i.controlFooter=e}),t.fetch("control_receipt_footer_format").then(function(e){i.controlFooterFormat=e}),t.fetch("control_receipt_body_format").then(function(e){i.controlBodyFormat=e,i.newControlBodyFormat=angular.copy(i.controlBodyFormat)}),i.onAcceptMaxProductLength=function(){return t.update(i.controlBodyFormat,i.newControlBodyFormat)},i.onCancelMaxProductLength=function(){i.newControlBodyFormat=angular.copy(i.controlBodyFormat)},i.onAcceptPrintSaleId=function(){return t.update(i.masterPrintSaleIdInControlReceipt,i.printSaleIdInControlReceipt)},i.onCancelPrintSaleId=function(){i.printSaleIdInControlReceipt=angular.copy(i.masterPrintSaleIdInControlReceipt)},i.acceptMaxProductLengthDisabled=function(){return i.maxProductLengthForm.$invalid},i.printTest=function(){var e=Object.keys(r.products),t={createdAt:new Date,id:123456,people:2,tableId:10,additions:[{count:1,productId:e[0],price:r.products[e[0]].price},{count:1,productId:e[1],price:r.products[e[1]].price},{count:1,productId:e[2],price:r.products[e[2]].price}],discounts:[],payments:[]};return n.print(t)["catch"](function(e){console.log(e)})}}return{restrict:"E",template:function(){return document.getElementById("ert-admin-printers-control-printer-tpl").innerHTML},link:i,scope:{}}}]),directives.directive("ertAdminPrintersCustomizeDialog",["Setting",function(e){function t(t,n,r){t.submiting=!1,t.$watch("masterHeader",function(){t.header=angular.copy(t.masterHeader)}),t.$watch("masterFooter",function(){t.footer=angular.copy(t.masterFooter)}),t.onAccept=function(){t.submitting=!0,e.update(t.masterHeader,t.header,function(){e.update(t.masterFooter,t.footer,function(){t.masterHeader=angular.copy(t.header),t.masterFooter=angular.copy(t.footer),t.submitting=!1,t.currentDialog=null})})},t.onCancel=function(){t.header=angular.copy(t.masterHeader),t.footer=angular.copy(t.masterFooter),t.currentDialog=null}}return{restrict:"E",template:function(){return document.getElementById("ert-admin-printers-customize-dialog-tpl").innerHTML},link:t,scope:{caption:"@",masterHeader:"=header",masterFooter:"=footer",currentDialog:"="}}}]),directives.directive("ertAdminPrintersFontDialog",["Setting","fontSizes","fontTypes",function(e,t,n){function r(r,i,o){r.fontSizes=t,r.fontTypes=n,r.$watch("masterSetting",function(){r.setting=angular.copy(r.masterSetting)}),r.onAccept=function(){e.update(r.masterSetting,r.setting,function(){r.currentDialog=null})},r.onCancel=function(){r.currentDialog=null}}return{restrict:"E",template:function(){return document.getElementById("ert-admin-printers-font-dialog-tpl").innerHTML},link:r,scope:{caption:"@",currentDialog:"=",masterSetting:"=setting"}}}]),directives.directive("ertAdminPrintersFontFormatLabel",["fontSizes","fontTypes",function(e,t){function n(n,r,i){n.fontSizes=e,n.fontTypes=t}return{restrict:"E",template:function(){return document.getElementById("ert-admin-printers-font-format-label-tpl").innerHTML},link:n,scope:{fontFormat:"="}}}]),directives.directive("ertAdminPrintersKitchenPrinter",["Setting",function(e){function t(t,n,r){e.fetch("kitchen_receipt_header").then(function(e){t.kitchenHeader=angular.copy(e)}),e.fetch("kitchen_receipt_header_format").then(function(e){t.kitchenHeaderFormat=angular.copy(e)}),e.fetch("kitchen_receipt_body_format").then(function(e){t.kitchenBodyFormat=angular.copy(e)}),e.fetch("kitchen_receipt_footer").then(function(e){t.kitchenFooter=angular.copy(e)}),e.fetch("kitchen_receipt_footer_format").then(function(e){t.kitchenFooterFormat=angular.copy(e)})}return{restrict:"E",template:function(){return document.getElementById("ert-admin-printers-kitchen-printer-tpl").innerHTML},link:t,scope:{}}}]),directives.directive("ertPrintOptions",[function(){return{restrict:"E",template:function(){return document.getElementById("ert-print-options-tpl").innerHTML},scope:{}}}]),directives.directive("ertPrinters",["Printer","printerInterfaces","ChromeExtension",function(e,t,n){function r(r,i,o){r.interfaces=t,r.printers=e.printers,r.extensionId=n.extensionId,r.extensionEnabled=!0,r.extensionSupported=!0,e.query().then(function(){return r.$apply()}),n.enabled().then(function(e){r.extensionEnabled=e})["catch"](function(e){if("No extension handler"!==e.message)throw e;r.extensionSupported=!1})}return{restrict:"E",template:function(){return document.getElementById("ert-printers-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertPrintersEdit",["$state","Printer","Kitchen","printerInterfaces","ChromeExtension",function(e,t,n,r,i){function o(o,a,s){o.kitchens=n.kitchens,o.interfaces=r,o.serialBitrates=[2400,4800,9600,19200,38400,57600,115200],o.usbPriorities=[1,2,3,4,5],o.printer=angular.copy(o.masterPrinter),o.ipPattern="^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$",i.getSerialDevices().then(function(e){o.$apply(function(){o.serialDevices=e})}),i.getUsbDevices().then(function(e){o.$apply(function(){o.usbDevices=e})});var c=function(){o.printer.kitchens.forEach(function(e,t,n){o.kitchens[e]||n.splice(t,1)})};o.onAccept=function(){return c(),t.update(o.masterPrinter,o.printer).then(function(t){e.go("admin.printers.show",{printerId:t.id})})},o.onCancel=function(){e.go("admin.printers.show",{printerId:o.printer.id})},o.usbAddress=function(e){return e.vendorId+":"+e.productId},o.toggleKitchenSelection=function(e){var t=o.printer.kitchens.indexOf(e);t>-1?o.printer.kitchens.splice(t,1):o.printer.kitchens.push(e)},o.acceptDisabled=function(){return o.form.$invalid||angular.equals(o.printer,o.masterPrinter)}}return{restrict:"E",template:function(){return document.getElementById("ert-printers-edit-tpl").innerHTML},link:o,scope:{masterPrinter:"=printer"}}}]),directives.directive("ertPrintersNew",["$state","Kitchen","Printer","ChromeExtension","printerInterfaces",function(e,t,n,r,i){function o(o,a,s){o.kitchens=t.kitchens,o.interfaces=i,o.serialBitrates=[2400,4800,9600,19200,38400,57600,115200],o.usbPriorities=[1,2,3,4,5],o.printer={kitchens:[],interfaceOptions:{}},o.ipPattern="^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$",o.onAccept=function(){return c(o.printer),n.save(o.printer).then(function(t){e.go("admin.printers.show",{printerId:t.id})})},o.usbAddress=function(e){return e.vendorId+":"+e.productId},o.onCancel=function(){e.go("admin.printers")},o.acceptDisabled=function(){return o.form.$invalid},o.setInterfaceOptions=function(){switch(o.printer.interfaceType){case"serial":o.printer.interfaceOptions.bitrate=9600,delete o.printer.interfaceOptions.priority;break;case"usb":o.printer.interfaceOptions.priority=1,delete o.printer.interfaceOptions.bitrate;break;case"ethernet":delete o.printer.interfaceOptions.priority,delete o.printer.interfaceOptions.bitrate}},o.toggleKitchenSelection=function(e){var t=o.printer.kitchens.indexOf(e);t>-1?o.printer.kitchens.splice(t,1):o.printer.kitchens.push(e)};var c=function(){switch(o.printer.interfaceType){case"usb":var e=o.usbDevices.find(function(e){return o.usbAddress(e)===o.printer.address});o.printer.name=e.productName||"USB Printer";break;case"serial":o.printer.name="Serial Printer";break;case"ethernet":o.printer.name="Ethernet Printer"}},u=function(){return r.getUsbDevices().then(function(e){o.usbDevices=e})},l=function(){return r.getSerialDevices().then(function(e){o.serialDevices=e})},d=function(){return r.renewPermissions()};o.loadDevices=function(){return d().then(l).then(u)},o.loadDevices()}return{restrict:"E",template:function(){return document.getElementById("ert-printers-new-tpl").innerHTML},link:o,scope:{}}}]),directives.directive("ertPrintersShow",["Printer","$state","printerInterfaces","Kitchen",function(e,t,n,r){function i(i,o,a){i.kitchens=r.kitchens,i.interfaces=n,i.onDestroy=function(n){return e.destroy(n).then(function(){t.go("admin.printers")})}}return{restrict:"E",template:function(){return document.getElementById("ert-printers-show-tpl").innerHTML},link:i,scope:{printer:"="}}}]),directives.directive("ertProvidersEdit",["$state","Provider","Util",function(e,t,n){function r(r,i,o){r.provider=angular.copy(r.masterProvider),r.focus={onName:!0},r.submitting=!1,r.onAccept=function(){r.submitting=!0,t.update(r.masterProvider,r.provider,function(){e.go("admin.providers.show",{providerId:r.provider.id})},function(e){n.fillErrors(r,e.data),r.submitting=!1})},r.onCancel=function(){e.go("admin.providers.show",{providerId:r.provider.id})},r.acceptDisabled=function(){return r.submitting||r.form.$invalid||angular.equals(r.provider,r.masterProvider)}}return{restrict:"E",template:function(){return document.getElementById("ert-providers-edit-tpl").innerHTML},link:r,scope:{masterProvider:"=provider"}}}]),directives.directive("ertProvidersList",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-providers-list-tpl").innerHTML},link:e,scope:{providers:"="}}}]),directives.directive("ertProvidersNew",["$state","Provider","Util",function(e,t,n){function r(r,i,o){r.provider={active:!0},r.focus={onName:!0},r.submitting=!1,r.onAccept=function(){r.submitting=!0,t.save(r.provider,function(t){e.go("admin.providers.show",{providerId:t.id})},function(e){n.fillErrors(r,e.data),r.submitting=!1})},r.onCancel=function(){e.go("admin.providers")},r.acceptDisabled=function(){return r.submitting||r.form.$invalid}}return{restrict:"E",template:function(){return document.getElementById("ert-providers-new-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertProvidersShow",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-providers-show-tpl").innerHTML},link:e,scope:{provider:"="}}}]),directives.directive("ertReceiptTypes",["$state","ReceiptType",function(e,t){function n(e,n,r){e.receiptTypes=t.receiptTypes}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-receipt-types-tpl").innerHTML},scope:{}}}]),directives.directive("ertReceiptTypesEdit",["$state","ReceiptType",function(e,t){function n(n,r,i){n.receiptType=angular.copy(n.masterReceiptType),n.acceptDisabled=function(){return n.form.$invalid||angular.equals(n.receiptType,n.masterReceiptType)},n.onAccept=function(){return t.update(n.masterReceiptType,n.receiptType).$promise.then(function(){console.log(t.receiptTypes[n.receiptType.id]),e.go("admin.receiptTypes.show",{receiptTypeId:n.receiptType.id})})},n.onCancel=function(){e.go("admin.receiptTypes.show",{receiptTypeId:n.receiptType.id})}}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-receipt-types-edit-tpl").innerHTML},scope:{masterReceiptType:"="}}}]),directives.directive("ertReceiptTypesNew",["$state","ReceiptType",function(e,t){function n(n,r,i){n.receiptTypes=t.receiptTypes,n.receiptType={active:!0},n.focus={onName:!0},n.acceptDisabled=function(){return n.form.$invalid},n.onAccept=function(){return t.save(n.receiptType).$promise.then(function(t){e.go("admin.receiptTypes.show",{receiptTypeId:t.id})})},n.onCancel=function(){e.go("admin.receiptTypes")}}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-receipt-types-new-tpl").innerHTML},scope:{}}}]),directives.directive("ertReceiptTypesShow",["$state","$window","ReceiptType",function(e,t,n){function r(t,r,i){t.showAlertDialog=!1,t.errors={},t.confirmDialog=!1,t.onConfirmDestroy=function(r){return n.destroy(r).$promise.then(function(){t.confirmDialog=!1,e.go("admin.receiptTypes")},function(e){t.confirmDialog=!1,e.data.base.forEach(function(e){return t.errors[e]=!0}),t.showAlertDialog=!0})},t.onDestroy=function(e){t.confirmDialog=!0,t.confirmDialogFocus={onAccept:!0},t.onAcceptConfirmDialog=function(){return t.onConfirmDestroy(e)}},t.onCancelConfirmDialog=function(){t.confirmDialog=!1},t.onAcceptAlertDialog=function(){t.showAlertDialog=!1}}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-receipt-types-show-tpl").innerHTML},scope:{receiptType:"="}}}]),directives.directive("ertRolesEdit",["Account","Role","$state","Util","permissions",function(e,t,n,r,i){function o(o,a,s){o.permissions=i,o.role=angular.copy(o.masterRole),o.role.label&&(o.role.name=o.role.label,o.role.label=void 0),o.allowedTo=function(e){return o.masterRole.permissions.indexOf(e)>-1},o.focus={onName:!0},o.submitting=!1,o.updatePermissions=function(e){(index=o.role.permissions.indexOf(e))>-1?o.role.permissions.splice(index,1):o.role.permissions.push(e)},o.acceptDisabled=function(){return o.submitting||o.form.$invalid||angular.equals(o.role,o.masterRole)},o.onAccept=function(){o.submitting=!0,t.update(o.masterRole,o.role,function(){n.go("admin.roles.show",{roleId:o.role.id})},function(e){o.submitting=!1,r.fillErrors(o,e.data)})},o.onCancel=function(){n.go("admin.roles.show",{roleId:o.role.id})},o.isDeliveryEnabled=function(){return e.account.delivery}}return{restrict:"E",link:o,template:function(){return document.getElementById("ert-roles-edit-tpl").innerHTML},scope:{masterRole:"="}}}]),directives.directive("ertRolesList",["$window","Role","User","$state",function(e,t,n,r){function i(e,i,o){e.roles=t.roles,e.confirmDialog=!1,e.confirmDestroyRole=function(n){t.destroy(n,null,function(){e.confirmDialog=!1,r.go("admin.roles")})},e.destroyRole=function(t){e.confirmDialog=!0,e.confirmDialogFocus={onAccept:!0},e.onAcceptConfirmDialog=function(){return e.confirmDestroyRole(t)}},e.onCancelConfirmDialog=function(){e.confirmDialog=!1},e.userCount=function(e){return n.usersWithRole(e).length},e.isEmpty=function(e){return 0==n.usersWithRole(e).length}}return{restrict:"E",link:i,template:function(){return document.getElementById("ert-roles-list-tpl").innerHTML},scope:{}}}]),directives.directive("ertRolesNew",["Role","$state","Util",function(e,t,n){function r(r,i,o){r.roles=e.roles,r.role={},r.focus={onName:!0},r.submitting=!1,r.acceptDisabled=function(){return r.submitting||r.form.$invalid},r.onAccept=function(){r.submitting=!0,e.save(r.role,function(e){t.go("admin.roles.show",{roleId:e.id})},function(e){r.submitting=!1,n.fillErrors(r,e.data)})},r.onCancel=function(){t.go("admin.roles")}}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-roles-new-tpl").innerHTML},scope:{}}}]),directives.directive("ertRolesShow",["Account","Role","$state","permissions",function(e,t,n,r){function i(t,n,i){t.permissions=r,t.role=angular.copy(t.masterRole),t.allowedTo=function(e){return t.masterRole.permissions.indexOf(e)>-1},t.isDeliveryEnabled=function(){return e.account.delivery}}return{restrict:"E",link:i,template:function(){return document.getElementById("ert-roles-show-tpl").innerHTML},scope:{masterRole:"="}}}]),directives.directive("ertAdminRooms",["Table",function(e){var t=function(t,n,r){t.tables=e.tables,t.getZoom=function(){return t.rooms[t.currentRoomId].zoom+"vw"}},n=["$scope",function(e){this.setScopeVar=function(t,n){e[t]=n},this.showConfirmDialog=function(t){e.confirmDialog=t},this.showAlertDialog=function(t){e.alertDialog=t},this.setAlertDialogCaption=function(t){e.captionAlertDialog=t},this.setConfirmDialogCaption=function(t){e.captionConfirmDialog=t},this.setAcceptCallbackAlertDialog=function(t){e.onAcceptAlertDialog=t},this.setAcceptCallbackConfirmDialog=function(t){e.onAcceptConfirmDialog=t},this.setCancelCallbackConfirmDialog=function(t){e.onCancelConfirmDialog=t}}];return{restrict:"E",link:t,controller:n,template:function(){return document.getElementById("ert-admin-rooms-tpl").innerHTML},scope:{rooms:"="}}}]),directives.directive("ertAdminRoomsEdit",["$state","Room","Util",function(e,t,n){function r(r,i,o){var a=angular.copy(r.rooms[r.room.id]);r.submitting=!1,r.onAccept=function(){r.submitting=!0,t.update(t.rooms[r.room.id],r.room,function(){e.go("admin.rooms.show",{roomId:r.room.id})},function(e){r.submitting=!1})},r.onCancel=function(){angular.extend(n.cleanup(r.rooms[r.room.id]),a),e.go("admin.rooms.show",{roomId:r.room.id})},r.acceptDisabled=function(){return r.submitting||r.form.$invalid||angular.equals(r.room,a)}}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-admin-rooms-edit-tpl").innerHTML},scope:{room:"=",rooms:"="}}}]),directives.directive("ertAdminRoomsNew",["$state","Room",function(e,t){function n(n,r,i){n.focus={onName:!0},n.onAccept=function(){n.submitting=!0,t.save(n.room,function(t){e.go("admin.rooms.show",{roomId:t.id}),n.rooms[t.id]=t},function(e){n.submitting=!1,Util.fillErrors(n.form,e.data)})},n.onCancel=function(){e.go("admin.rooms")},n.acceptDisabled=function(){return n.submitting||n.form.$invalid}}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-admin-rooms-new-tpl").innerHTML},scope:{rooms:"="}}}]),directives.directive("ertAdminRoomsShow",["Room","Table","$filter","$state",function(e,t,n,r){function i(i,o,a,s){var c=function(e){var r=n("object2Array")(t.tables),i=r.filter(function(t){return t.roomId===e.id});return i.length>0},u=function(){s.setAlertDialogCaption("Eliminar Sala"),s.setAcceptCallbackAlertDialog(function(){return s.showAlertDialog(!1)}),s.setScopeVar("baseErrors",{room_has_table:!0}),s.showAlertDialog(!0)};i.destroyRoom=function(t){c(t)?u():e.destroy(t,null,function(){delete i.rooms[t.id],r.go("admin.rooms")})}}return{link:i,restrict:"E",template:function(){return document.getElementById("ert-admin-rooms-show-tpl").innerHTML},scope:{room:"=",rooms:"="},require:"^ertAdminRooms"}}]),directives.directive("ertAdminRoomsShowTables",["Table","$state",function(e,t){function n(n,r,i){n.tables=e.tables,n.getZoom=function(){return n.room.zoom+"vw"},n.createTable=function(r){var i=r.target.parentElement.dataset,o={column:+i.c,row:+i.r,roomId:n.room.id};e.save(o,function(e){t.go("admin.rooms.show.tables.show",{tableId:e.id})})},n.dropped=function(t){var n=t.dragEl.dataset.id,r=t.dropEl.dataset.r,i=t.dropEl.dataset.c,o={row:r,column:i};e.update(e.tables[n],o),angular.extend(e.tables[n],o)}}return{link:n,restrict:"E",template:function(){return document.getElementById("ert-admin-rooms-show-tables-tpl").innerHTML},scope:{room:"="}}}]),directives.directive("ertAdminRoomsShowTablesEdit",["$state","Table","Room","Util",function(e,t,n,r){function i(i,o,a){i.rooms=n.rooms,i.table=angular.copy(i.masterTable),i.submitting=!1,i.shapes=t.SHAPES,i.sizes=t.SIZES,i.onAccept=function(){i.submitting=!0,t.update(i.masterTable,i.table,function(){t.get(i.table.id).$promise.then(function(){e.go("admin.rooms.show.tables.show",{tableId:i.table.id})})},function(e){i.submitting=!1,r.fillErrors(i,e.data)})},i.onCancel=function(){e.go("admin.rooms.show.tables.show",{tableId:i.table.id})},i.acceptDisabled=function(){return i.submitting||i.form.$invalid}}return{link:i,restrict:"E",template:function(){return document.getElementById("ert-admin-rooms-show-tables-edit-tpl").innerHTML},scope:{masterTable:"=table"}}}]),directives.directive("ertAdminRoomsShowTablesShow",["Table","$state","Room",function(e,t,n){function r(r,i,o,a){r.rooms=n.rooms,r.shapes=e.SHAPES,r.sizes=e.SIZES;var s=function(n){var r=e.destroy(n,{force:!0});return r.$promise.then(function(){t.go("admin.rooms.show",{roomId:n.roomId})}),r.$promise},c=function(e){return-1!=e.base.indexOf("table_has_in_course_sale")},u=function(e){return-1!=e.base.indexOf("table_being_used")},l=function(){a.setAlertDialogCaption("Eliminar Mesa"),a.setAcceptCallbackAlertDialog(function(){return a.showAlertDialog(!1)}),a.setScopeVar("baseErrors",{table_has_in_course_sale:!0}),a.showAlertDialog(!0)},d=function(e){a.setConfirmDialogCaption("Eliminar Mesa"),a.setAcceptCallbackConfirmDialog(function(){return s(e).then(function(){return a.showConfirmDialog(!1)})}),a.setCancelCallbackConfirmDialog(function(){return a.showConfirmDialog(!1)}),a.setScopeVar("destroyErrorTable",e),
a.showConfirmDialog(!0)};r.destroyTable=function(n){return e.destroy(n,null,function(){t.go("admin.rooms.show",{roomId:n.roomId})},function(e){var t=e.data;c(t)?l():u(t)&&d(n)}).$promise}}return{link:r,restrict:"E",template:function(){return document.getElementById("ert-admin-rooms-show-tables-show-tpl").innerHTML},scope:{table:"="},require:"^ertAdminRooms"}}]),directives.directive("ertAdminTablesTable",["Table",function(e){function t(t,n,r){t.css=function(){return{"table-large":t.table.size===e.LARGE,"table-round":t.table.shape===e.ROUND}},t.top=function(){return t.table.row+"em"},t.left=function(){return t.table.column+"em"},t.toggleSize=function(){var n=t.table.size===e.LARGE?e.SMALL:e.LARGE,r={size:n};e.update(t.table,r),angular.extend(t.table,r)},t.toggleShape=function(){var n=t.table.shape===e.ROUND?e.SQUARE:e.ROUND,r={shape:n};e.update(t.table,r),angular.extend(t.table,r)}}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-admin-tables-table-tpl").innerHTML},scope:{table:"="}}}]),directives.directive("ertRoomsTabs",["Room",function(e){function t(e,t,n){e.setCurrentRoomId=function(t){e.currentRoomId=t}}return{restrict:"E",template:function(){return document.getElementById("ert-rooms-tabs-tpl").innerHTML},link:t,scope:{currentRoomId:"=",rooms:"="}}}]),directives.directive("ertAdminSettings",["Setting","$rootScope","$cookies",function(e,t,n){function r(r,i,o){var a={},s={},c={},u={};e.fetch("tip_percentage").then(function(e){a=e,r.tipPercentage=angular.copy(e)}),e.fetch("print_tip_in_control_receipt").then(function(e){s=e,r.printTipInControlReceipt=angular.copy(e)}),e.fetch("print_tip_in_delivery").then(function(e){masterPrintTipInDelivery=e,r.printTipInDelivery=angular.copy(e)}),e.fetch("print_tip_in_take_away").then(function(e){masterPrintTipInTakeAway=e,r.printTipInTakeAway=angular.copy(e)}),e.fetch("enable_tip_control").then(function(e){c=e,r.enableTipControl=angular.copy(e)}),e.fetch("open_drawer_on_table_close").then(function(e){u=e,r.openDrawerOnTableClose=angular.copy(e)}),r.onOpenDrawerOnTableCloseAccept=function(){r.submitting=!0,e.update(u,r.openDrawerOnTableClose,function(){r.submitting=!1,u=angular.copy(r.openDrawerOnTableClose)})},r.onOpenDrawerOnTableCloseCancel=function(){r.openDrawerOnTableClose=angular.copy(u)},r.noOpenDrawerOnTableCloseChanges=function(){return angular.equals(u,r.openDrawerOnTableClose)},r.noTipChanges=function(){return angular.equals(r.tipPercentage,a)&&angular.equals(r.printTipInControlReceipt,s)&&angular.equals(r.printTipInDelivery,masterPrintTipInDelivery)&&angular.equals(r.printTipInTakeAway,masterPrintTipInTakeAway)&&angular.equals(r.enableTipControl,c)},r.onCancelTipSettings=function(){r.tipPercentage=angular.copy(a),r.printTipInControlReceipt=angular.copy(s),r.printTipInDelivery=angular.copy(masterPrintTipInDelivery),r.printTipInTakeAway=angular.copy(masterPrintTipInTakeAway),r.enableTipControl=angular.copy(c)},r.onAcceptTipSettings=function(){r.submitting=!0;var t=[];t.push(e.update(a,r.tipPercentage),e.update(s,r.printTipInControlReceipt),e.update(masterPrintTipInDelivery,r.printTipInDelivery),e.update(masterPrintTipInTakeAway,r.printTipInTakeAway),e.update(c,r.enableTipControl)),Promise.all(t).then(function(){r.submitting=!1})},r.masterFontSize=angular.copy(n.get("rootFontSize"))||"s2",r.rootFontSizes={s0:"10 - Tamaño diminuto",s1:"11 - Tamaño pequeño",s2:"12 - Tamaño normal",s3:"13 - Tamaño mediano",s4:"14 - Tamaño grande"},r.noInterfaceChanges=function(){return angular.equals(r.masterFontSize,t.fontSize)},r.onAcceptInterfaceSettings=function(){r.masterFontSize=t.fontSize,n.put("rootFontSize",r.masterFontSize)},r.onCancelInterfaceSettings=function(){t.fontSize=r.masterFontSize}}return{restrict:"E",template:function(){return document.getElementById("ert-admin-settings-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertAdminSettingsCurrency",["Setting",function(e){function t(t,n,r){var i;e.fetch("currency_symbol").then(function(e){i=e,t.currencySymbol=angular.copy(i)}),t.onAccept=function(){return e.update(i,t.currencySymbol).$promise},t.noChanges=function(){return angular.equals(t.currencySymbol,i)},t.onCancel=function(){t.currencySymbol=angular.copy(i)}}return{restrict:"E",template:function(){return document.getElementById("ert-admin-settings-currency-tpl").innerHTML},link:t,scope:{}}}]),directives.directive("ertAdminSettingsDrawer",["Setting",function(e){function t(t,n,r){var i={},o={};e.fetch("open_drawer_on_close_table_dialog").then(function(e){i=e,t.openOnCloseDialog=angular.copy(e)}),e.fetch("show_drawer_icon_on_close_table_dialog").then(function(e){o=e,t.showIconOnCloseDialog=angular.copy(e)}),t.onAccept=function(){var n=[e.update(i,t.openOnCloseDialog).$promise,e.update(o,t.showIconOnCloseDialog).$promise];return Promise.all(n)},t.noChanges=function(){return angular.equals(t.openOnCloseDialog,i)&&angular.equals(t.showIconOnCloseDialog,o)},t.onCancel=function(){t.openOnCloseDialog=angular.copy(i),t.showIconOnCloseDialog=angular.copy(o)}}return{restrict:"E",template:function(){return document.getElementById("ert-admin-settings-drawer-tpl").innerHTML},link:t,scope:{}}}]),directives.directive("ertAdminSettingsMobileApp",["Setting",function(e){function t(t,n,r){var i;e.fetch("enable_mobile_app").then(function(e){i=e,t.enableMobileApp=angular.copy(i)}),t.onAccept=function(){return e.update(i,t.enableMobileApp).$promise},t.noChanges=function(){return angular.equals(t.enableMobileApp,i)},t.onCancel=function(){t.enableMobileApp=angular.copy(i)}}return{restrict:"E",template:function(){return document.getElementById("ert-admin-settings-mobile-app-tpl").innerHTML},link:t,scope:{}}}]),directives.directive("ertShifts",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-shifts-tpl").innerHTML},link:e,scope:{shifts:"="}}}]),directives.directive("ertShiftsEdit",["$state","Shift","Util",function(e,t,n){function r(r,i,o){r.shift=angular.copy(r.masterShift),r.shift.start_time=new Date(r.shift.start_time),r.shift.end_time=new Date(r.shift.end_time),r.submitting=!1,r.onAccept=function(){r.submitting=!0,t.update(r.masterShift,r.shift,function(){e.go("admin.shifts.show",{shiftId:r.shift.id})},function(e){r.submitting=!1,n.fillErrors(r,e.data)})},r.onCancel=function(){e.go("admin.shifts.show",{shiftId:r.shift.id})},r.acceptDisabled=function(){return r.submitting||r.form.$invalid||angular.equals(r.shift,r.masterShift)}}return{restrict:"E",template:function(){return document.getElementById("ert-shifts-edit-tpl").innerHTML},link:r,scope:{masterShift:"=shift"}}}]),directives.directive("ertShiftsNew",["$state","Shift","Util",function(e,t,n){function r(r,i,o){r.focus={onName:!0},r.submitting=!1,r.onAccept=function(){r.submitting=!0,t.save(r.shift,function(t){e.go("admin.shifts.show",{shiftId:t.id})},function(e){n.fillErrors(r,e.data),r.submitting=!1})},r.onCancel=function(){e.go("admin.shifts")},r.acceptDisabled=function(){return r.submitting||r.form.$invalid}}return{restrict:"E",template:function(){return document.getElementById("ert-shifts-new-tpl").innerHTML},link:r,scope:{}}}]),directives.directive("ertShiftsShow",["$state","Shift","CurrentUser",function(e,t,n){function r(n,r,i){n.destroyShift=function(n){t.destroy(n,null,function(){e.go("admin.shifts")})}}return{restrict:"E",template:function(){return document.getElementById("ert-shifts-show-tpl").innerHTML},link:r,scope:{shift:"="}}}]),directives.directive("ertTaxesEdit",["Tax","$state",function(e,t){function n(n,r,i){n.tax=angular.copy(n.masterTax),n.acceptDisabled=function(){return n.form.$invalid||angular.equals(n.tax,n.masterTax)},n.onAccept=function(){return e.update(n.masterTax,n.tax).$promise.then(function(){t.go("admin.taxes.show",{taxId:n.tax.id})})},n.onCancel=function(){t.go("admin.taxes.show",{taxId:n.tax.id})}}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-taxes-edit-tpl").innerHTML},scope:{masterTax:"="}}}]),directives.directive("ertTaxesList",["Tax","$state",function(e,t){function n(t,n,r){t.taxes=e.taxes}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-taxes-list-tpl").innerHTML},scope:{}}}]),directives.directive("ertTaxesNew",["Tax","$state",function(e,t){function n(n,r,i){n.taxes=e.taxes,n.focus={onName:!0},n.acceptDisabled=function(){return n.form.$invalid},n.onAccept=function(){return e.save(n.tax).$promise.then(function(e){t.go("admin.taxes.show",{taxId:e.id})})},n.onCancel=function(){t.go("admin.taxes")}}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-taxes-new-tpl").innerHTML},scope:{}}}]),directives.directive("ertTaxesShow",["Tax","ProductCategory","$state","$window",function(e,t,n,r){function i(r,i,o){r.confirmDialog=!1,r.confirmDestroy=function(i){return e.destroy(i).$promise.then(function(){t.query(),r.confirmDialog=!1,n.go("admin.taxes")})},r.onDestroy=function(e){r.confirmDialog=!0,r.confirmDialogFocus={onAccept:!0},r.onAcceptConfirmDialog=function(){return r.confirmDestroy(e)}},r.onCancelConfirmDialog=function(){r.confirmDialog=!1}}return{restrict:"E",link:i,template:function(){return document.getElementById("ert-taxes-show-tpl").innerHTML},scope:{tax:"="}}}]),directives.directive("ertDialogChangePassword",["$state","User",function(e,t){function n(n,r,i,o){n.submitting=!1,n.focus={onPassword:!0},n.$watch("masterUser",function(e){!n.user&&e&&(n.user=angular.copy(n.masterUser))}),n.close=function(){e.go("admin.users.edit",{userId:n.user.id})},n.acceptDisabled=function(){return n.form.$invalid||n.submitting},n.onAccept=function(){n.submitting=!0,t.changePassword(n.masterUser,n.user.password,n.user.passwordConfirmation,function(){n.submitting=!1,e.go("admin.users.show",{userId:n.user.id}),o.showToastMessage("passwordUpdateSuccess")})},n.onCancel=function(){e.go("admin.users.edit",{userId:n.user.id})}}return{restrict:"E",link:n,require:"^ertUsers",template:function(){return document.getElementById("ert-dialog-change-password-tpl").innerHTML},scope:{masterUser:"=user"}}}]),directives.directive("ertUsers",["$timeout",function(e){var t=["$scope",function(t){t.toastMessages={},this.showToastMessage=function(n){t.toastMessages[n]=!0,e(function(){return t.toastMessages[n]=!1},2500)}}];return{restrict:"E",template:function(){return document.getElementById("ert-users-tpl").innerHTML},controller:t,scope:{users:"="}}}]),directives.directive("ertUsersEdit",["$state","User","Role","Util","CurrentUser",function(e,t,n,r,i){function o(o,a,s){o.roles=n.roles,o.$watch("masterUser",function(e){!o.user&&e&&(o.user=angular.copy(o.masterUser))}),o.submitting=!1,o.acceptDisabled=function(){return o.form.$invalid||o.submitting||angular.equals(o.user,o.masterUser)},o.onAccept=function(){o.submitting=!0,t.update(o.masterUser,o.user,function(){e.go("admin.users.show",{userId:o.user.id})},function(e){o.submitting=!1,r.fillErrors(o,e.data)})},o.goToChangePassword=function(){e.go("admin.users.edit.changePassword",{userId:o.user.id})},o.onCancel=function(){e.go("admin.users.show",{userId:o.user.id})},o.accountLoginPart=function(){return i.accountLoginPart()},o.activeDisabled=function(){return o.user&&o.user.shortLogin===i.shortLogin()}}return{link:o,restrict:"E",template:function(){return document.getElementById("ert-users-edit-tpl").innerHTML},scope:{masterUser:"=user"}}}]),directives.directive("ertUsersHeader",[function(){function e(e,t,n){}return{restrict:"E",template:function(){return document.getElementById("ert-users-header-tpl").innerHTML},link:e,scope:{}}}]),directives.directive("ertUsersNew",["$state","User","Role","Util","CurrentUser",function(e,t,n,r,i){function o(o,a,s){o.roles=n.roles,o.user={active:!0},o.focus={onShorLogin:!0},o.submitting=!1,o.onAccept=function(){o.submitting=!0,t.save(o.user,function(t){e.go("admin.users.show",{userId:t.id})},function(e){o.submitting=!1,r.fillErrors(o,e.data)})},o.accountLoginPart=function(){return i.accountLoginPart()},o.onCancel=function(){e.go("admin.users")},o.acceptDisabled=function(){return o.submitting||o.form.$invalid}}return{restrict:"E",template:function(){return document.getElementById("ert-users-new-tpl").innerHTML},link:o,scope:{}}}]),directives.directive("ertUsersShow",["Role","CurrentUser",function(e,t){function n(n,r,i){n.roles=e.roles,n.login=function(e){return e?[e.shortLogin,"@",t.accountLoginPart()].join(""):void 0}}return{restrict:"E",template:function(){return document.getElementById("ert-users-show-tpl").innerHTML},link:n,scope:{user:"="}}}]),directives.directive("ertUsersTable",["Role","CurrentUser",function(e,t){function n(n,r,i){n.roles=e.roles,n.login=function(e){return e?[e.shortLogin,"@",t.accountLoginPart()].join(""):void 0}}return{link:n,restrict:"E",template:function(){return document.getElementById("ert-users-table-tpl").innerHTML},scope:{users:"="}}}]),directives.directive("ertStatsProducts",["$state","ProductsStats","ProductsChart",function(e,t,n){function r(r,i,o){r.typeOfChart="ColumnChart",r.groupBy=null,r.dateFilter={},r.timeFilter={},r.productStats={},r.showGroupingErrorDialog=!1,r.options={stats:{s:"rank",o:"desc",l:"10",y:"sales",g:"",typeOfChart:"ColumnChart"},colors:{},hiddenProducts:[]};var a=function(){var e=r.options.stats.g,t={s:r.options.stats.s,o:r.options.stats.o,l:r.options.stats.l,y:r.options.stats.y};return""!==e&&(t.g=e,t.r=r.options.stats.r),t},s=function(){return angular.extend({},r.dateFilter,r.timeFilter,a())};r.buildChart=function(){var e;return e=""===r.options.stats.g?n.buildColumnChart(r.productStats.values,r.options):n.buildGroupedChart(r.options.stats.typeOfChart,r.productStats.values,r.dateFilter.t1,r.dateFilter.t2,r.options)},r.statsValuesByGroup=function(){return r.productStats.values?r.productStats.values:void 0};var c=function(e){var t=function(e){return Object.keys(e).length>0};return function(){for(var t,n=0,r=[],i=e[$traceurRuntime.toProperty(Symbol.iterator)]();!(t=i.next()).done;){var o=t.value;r[n++]=o}return r}().some(t)};r.showStats=function(){var e=r.statsValuesByGroup();return e&&e.length>0&&c(e)},r.loadData=function(){var n=s();r.productStats=t.query(n,function(){r.options.hiddenProducts=[],e.go("stats.products")},function(){r.showGroupingErrorDialog=!0})},r.onAcceptGroupErrorDialog=function(){r.showGroupingErrorDialog=!1}}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-stats-products-tpl").innerHTML}}}]),directives.directive("ertStatsProductsGroupedTable",["Product","Util",function(e,t){function n(n,r,i){var o=function(e,t){var n=e.find(function(e){return e[0]===t.id}),r=n?n[1]:0;return r};n.columns=[],n.rows=[];var a=function(){if(!n.statsValues||""===n.options.stats.g)return[];for(var t=[],r=[],i=0;i<n.statsValues.length;i++){var o=n.statsValues[i];o.forEach(function(n){var i=n[0],o=e.products[i];r.indexOf(o)<0&&(r.push(o),t.push({label:o.name,product:o}))})}return t},s=function(e,r){var i;switch(n.options.stats.g){case"daily":i=t.dateRangeInDays(e,r);break;case"weekly":i=t.dateRangeInWeeks(e,r);break;case"monthly":i=t.dateRangeInMonths(e,r)}return i},c=function(){if(!n.statsValues||""===n.options.stats.g)return[];for(var e=[],t=n.columns,r=new Date(n.dateFilter.t1),i=new Date(n.dateFilter.t2),a=s(r,i),c=0;c<n.statsValues.length;c++){var u=n.statsValues[c],l=a[c],d=function(){for(var e,n=0,r=[],i=t[$traceurRuntime.toProperty(Symbol.iterator)]();!(e=i.next()).done;){var a=e.value;r[n++]=o(u,a.product)}return r}();e.push({label:l,values:d})}return e};n.$watch("statsValues",function(e,t){n.columns=a(),n.rows=c()})}return{restrict:"E",link:n,template:function(){return document.getElementById("ert-stats-products-grouped-table-tpl").innerHTML},scope:{statsValues:"=",options:"=",dateFilter:"="}}}]),directives.directive("ertStatsProductsOptions",[function(){function e(e,t,n){var r=function(){""===e.model.g?e.statYAxis.profit="Margen":("profit"===e.model.y&&(e.model.y="sales"),delete e.statYAxis.profit)};e.statTypes={rank:"Ranking"},e.statLimits={10:"10 Productos",20:"20 Productos",30:"30 Productos",40:"40 Productos",50:"50 Productos"},e.statOrders={desc:"Con más",asc:"Con menos"},e.statYAxis={sales:"Ventas",income:"Ingresos",profit:"Margen"},e.setTypeOfChart=function(t){e.model.typeOfChart=t},e.onChangeGrouping=function(){r(),e.onChange()}}return{restrict:"E",template:function(){return document.getElementById("ert-stats-products-options-tpl").innerHTML},link:e,scope:{model:"=",onChange:"&"}}}]),directives.directive("ertStatsProductsSummary",[function(){function e(e,t,n){var r=function(){return"desc"===e.options.o?"más vendidos":"menos vendidos"},i=function(){return"desc"===e.options.o?"con mayor margen":"con menor margen"},o=function(){return"desc"===e.options.o?"con mayores ingresos":"con menores ingresos"},a={sales:r,profit:i,income:o};e.showHourRange=function(){return 0!==e.timeFilter.h1.getHours()||0!==e.timeFilter.h1.getMinutes()||23!==e.timeFilter.h2.getHours()||59!==e.timeFilter.h2.getMinutes()},e.typeOfStatMessage=function(){return a[e.options.y]()}}return{restrict:"E",template:function(){return document.getElementById("ert-stats-products-summary-tpl").innerHTML},link:e,scope:{options:"=",dateFilter:"=",timeFilter:"="}}}]),directives.directive("ertStatsProductsTable",["Product",function(e){function t(t,n,r){var i={sales:"Ventas",income:"Ingresos",profit:"Margen"};t.valuesByProduct=function(){return t.statsValues?t.statsValues[0]:void 0},t.product=function(t){return e.products[t]},t.productColorId=function(e){return t.options.colors[e]},t.typeOfStat=function(){return i[t.options.stats.y]},t.toggleVisibility=function(e){var n=t.options.hiddenProducts.indexOf(e);n>=0?t.options.hiddenProducts.splice(n,1):t.options.hiddenProducts.push(e)},t.isHidden=function(e){return t.options.hiddenProducts.indexOf(e)>=0}}return{restrict:"E",link:t,template:function(){return document.getElementById("ert-stats-products-table-tpl").innerHTML},scope:{statsValues:"=",options:"="}}}]),directives.directive("ertStatsSales",["$state","SalesStats","SalesChart",function(e,t,n){function r(r,i,o){var a=function(){return angular.extend({},r.dateFilter)};r.dateFilter={},r.salesStats={},r.buildChart=function(){return n.build(r.salesStats.values,r.dateFilter)},r.showStats=function(){return stats=r.salesStats.values,stats&&stats.length>0},r.loadData=function(){var n=a();r.salesStats=t.query(n,function(){e.go("stats.sales")},function(){r.showGroupingErrorDialog=!0})},r.onAcceptGroupErrorDialog=function(){r.showGroupingErrorDialog=!1}}return{restrict:"E",link:r,template:function(){return document.getElementById("ert-stats-sales-tpl").innerHTML}}}]);